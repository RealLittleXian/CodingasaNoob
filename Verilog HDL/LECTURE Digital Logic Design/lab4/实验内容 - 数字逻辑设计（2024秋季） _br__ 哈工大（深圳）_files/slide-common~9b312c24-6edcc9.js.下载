(this.webpackJsonp=this.webpackJsonp||[]).push([["common~9b312c24"],{"0112351fbe":function(e,t,n){var i=n("1b4cdd6a36"),o=n("391b34a2ca"),r=n("23d625758e"),a=n("6ab2696dd0");function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!r(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},e.exports.default=e.exports,e.exports.__esModule=!0,s(t)}e.exports=s,e.exports.default=e.exports,e.exports.__esModule=!0},"029f7158fd":function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},"08f3b74f2c":function(e,t,n){var i=n("1b4cdd6a36");e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e},e.exports.default=e.exports,e.exports.__esModule=!0},"0cf3719522":function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},"1319e72e56":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return i}))},"14502724a6":function(e,t,n){var i=n("029f7158fd"),o=n("c143c5cd35"),r=n("689828fd37"),a=n("47428193b0");e.exports=function(e,t){return i(e)||o(e,t)||r(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},"148ad16515":function(e,t){e.exports=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)},e.exports.default=e.exports,e.exports.__esModule=!0},"15c09bfd29":function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return i}))},"176815363d":function(e,t){function n(e,t,n,i,o,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,o)}e.exports=function(e){return function(){var t=this,i=arguments;return new Promise((function(o,r){var a=e.apply(t,i);function s(e){n(a,o,r,s,c,"next",e)}function c(e){n(a,o,r,s,c,"throw",e)}s(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},"18e64d0980":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("8dcd4324d9");t.getRetryStrategy=function(){return i.RuntimeNamespace in window?window[i.RuntimeNamespace].strategy:{getRetryCountLimit:function(){return 3},findRequestUrl:function(e,t){return e},emitLoadSuccessEvent:function(e,t){},emitLoadFailedEvent:function(e,t){}}}},"1b4cdd6a36":function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},"1d121d4ae6":function(e,t,n){"use strict";function i(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function o(e,i,o){t[0]=e,i[o]=n[0],i[o+1]=n[1],i[o+2]=n[2],i[o+3]=n[3]}function r(e,i,o){t[0]=e,i[o]=n[3],i[o+1]=n[2],i[o+2]=n[1],i[o+3]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function s(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?o:r,e.writeFloatBE=i?r:o,e.readFloatLE=i?a:s,e.readFloatBE=i?s:a}():function(){function t(e,t,n,i){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,n,i);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,n,i);else{var r=Math.floor(Math.log(t)/Math.LN2);e((o<<31|r+127<<23|8388607&Math.round(t*Math.pow(2,-r)*8388608))>>>0,n,i)}}function n(e,t,n){var i=e(t,n),o=2*(i>>31)+1,r=i>>>23&255,a=8388607&i;return 255===r?a?NaN:o*(1/0):0===r?1401298464324817e-60*o*a:o*Math.pow(2,r-150)*(a+8388608)}e.writeFloatLE=t.bind(null,o),e.writeFloatBE=t.bind(null,r),e.readFloatLE=n.bind(null,a),e.readFloatBE=n.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function o(e,i,o){t[0]=e,i[o]=n[0],i[o+1]=n[1],i[o+2]=n[2],i[o+3]=n[3],i[o+4]=n[4],i[o+5]=n[5],i[o+6]=n[6],i[o+7]=n[7]}function r(e,i,o){t[0]=e,i[o]=n[7],i[o+1]=n[6],i[o+2]=n[5],i[o+3]=n[4],i[o+4]=n[3],i[o+5]=n[2],i[o+6]=n[1],i[o+7]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function s(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?o:r,e.writeDoubleBE=i?r:o,e.readDoubleLE=i?a:s,e.readDoubleBE=i?s:a}():function(){function t(e,t,n,i,o,r){var a=i<0?1:0;if(a&&(i=-i),0===i)e(0,o,r+t),e(1/i>0?0:2147483648,o,r+n);else if(isNaN(i))e(0,o,r+t),e(2146959360,o,r+n);else if(i>17976931348623157e292)e(0,o,r+t),e((a<<31|2146435072)>>>0,o,r+n);else{var s;if(i<22250738585072014e-324)e((s=i/5e-324)>>>0,o,r+t),e((a<<31|s/4294967296)>>>0,o,r+n);else{var c=Math.floor(Math.log(i)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=i*Math.pow(2,-c))>>>0,o,r+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,o,r+n)}}}function n(e,t,n,i,o){var r=e(i,o+t),a=e(i,o+n),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+r;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=t.bind(null,o,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=n.bind(null,a,0,4),e.readDoubleBE=n.bind(null,s,4,0)}(),e}function o(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function r(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=i(i)},"1e5dc01c04":function(e,t,n){"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n.d(t,"a",(function(){return i}))},"1f69014a3c":function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),o.forEach((function(t){i(e,t,n[t])}))}return e}n.d(t,"a",(function(){return o}))},"1f925d7f50":function(e,t){e.exports=function(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})},e.exports.default=e.exports,e.exports.__esModule=!0},"225df5544d":function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},"23d625758e":function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.default=e.exports,e.exports.__esModule=!0},"24920ada93":function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Ge}));var i=n("69084d01d3"),o=n.n(i),r=n("f2b6d66c40"),a=n("7273a2dc68"),s=n("641f0f7395"),c=n("50e5e071a2"),l=n("4f254df69c"),u=n("7e9e888b02"),d=n("eb6f1c740f"),h=n("0ad329aafc"),f=n("b95ec70054"),p=n.n(f),v=n("ff4d6398af"),g=n.n(v),y=n("b6922ef0a0"),m=n.n(y),E=n("b493d68deb"),b=n.n(E),T=n("040a1b32f8"),S=n.n(T),x=n("9af8f0fa82"),O=n("f930456247"),w=n("46e08ef6ed"),_=n("2e0796c118"),C=n.n(_),A=n("8b13fcae36"),k=n("f0d5c52ccf"),R=n("4f3b15d017");function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}var I=function(){return I=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},I.apply(this,arguments)};function L(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}function N(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function B(e,t){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(r=0)),r;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,i=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){r=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){r.label=s[1];break}if(6===s[0]&&r.label<o[1]){r.label=o[1],o=s;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(s);break}o[2]&&r.ops.pop(),r.trys.pop();continue}s=t.call(e,r)}catch(e){s=[6,e],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function D(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function M(e,t,n){if(n||2===arguments.length)for(var i,o=0,r=t.length;o<r;o++)!i&&o in t||(i||(i=Array.prototype.slice.call(t,0,o)),i[o]=t[o]);return e.concat(i||Array.prototype.slice.call(t))}function j(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}"function"==typeof SuppressedError&&SuppressedError,j(".ai-common-tag {\n  position: relative;\n  border-radius: 4px;\n  padding: 0 6px;\n  height: 16px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 10px;\n  line-height: 13px;\n  font-weight: 500;\n  background: var(--tsp-fill-weak, rgba(51, 77, 102, 0.06));\n  color: var(--text-medium, rgba(0, 0, 0, 0.48));\n}\n.ai-common-tag__placeholder-text {\n  opacity: 0;\n}\n.ai-common-tag__text {\n  position: absolute;\n  font-size: 20px;\n  transform: scale(0.5);\n  white-space: nowrap;\n}\n");var F,H,U,z="ai-sdk-common",W={"en-US":(F={},F[z]={auth:{title:"Smart Assistant Authorization",scopes:{"view-edit-smartsheet-content":"View and edit Smartsheet content","view-edit-smartcanvas-content":"View and edit Smart Canvas content","view-edit-sheet-content":"View and edit online sheet content","view-edit-slide-content":"View and edit online slide content","view-edit-doc-content":"View and edit online document content","view-edit-pdf-content":"View PDF content","view-edit-mind-content":"View and edit online mind map content"},desc:{purpose:"Authorize Tencent Docs Smart Assistant to access your Tencent Docs permissions.",tips:"This may provide sensitive information to this website or application. You can view or revoke access permissions at any time in 'Privacy - Smart Assistant Switch'."},policy:{desc:"I have read and agree to the ","service-agreement":"Service Agreement ","privacy-agreement":"Privacy Policy"},options:{agree:"Agree"},panel:{title:"Authorize 'Intelligent Assistant' to view/edit your Tencent documents",desc:"Your data is only used to customize your content, and we use strict measures to ensure its security.",button:"Agree and Continue"}},feedback:{options:{like:"Like",dislike:"Dislike"},tips:{feedback:"Feedback to SA",done:"Thank you"}},error:{"limit-exceeded":"Exceeded daily call limit","no-authorization":"Unauthorized",unknown:"Unknown error","network-error":"Network connection failed, please try again later"}},F),"zh-CN":(H={},H[z]={auth:{title:"AI文档助手授权",scopes:{"view-edit-smartsheet-content":"查看、编辑智能表内容","view-edit-smartcanvas-content":"查看、编辑智能文档内容","view-edit-sheet-content":"查看、编辑在线表格内容","view-edit-slide-content":"查看、编辑在线幻灯片内容","view-edit-doc-content":"查看、编辑在线文档内容","view-edit-pdf-content":"查看 PDF 内容","view-edit-mind-content":"查看、编辑思维导图内容"},desc:{purpose:"授权「AI文档助手」使用你的腾讯文档权限。",tips:"这么做可能会将你的敏感信息提供给此网站或应用，你可以随时在「隐私-AI文档助手开关」查看或关闭访问权限。"},policy:{desc:"我已阅读并同意腾讯文档的","service-agreement":"《服务协议》","privacy-agreement":"《隐私政策》"},options:{agree:"同意"},panel:{title:"授权「AI文档助手」可查看/编辑你的腾讯文档",desc:"你的数据仅用于定制你的内容，我们采用严格措施确保其安全。",button:"同意并继续"}},feedback:{options:{like:"赞",dislike:"踩"},tips:{feedback:"向AI文档助手反馈",done:"感谢反馈"}},error:{"limit-exceeded":"超过每日调用次数限制","no-authorization":"未授权",unknown:"未知错误","network-error":"网络链接失败,请稍后重试"}},H),"zh-HK":(U={},U[z]={auth:{title:"AI文档助手授權",scopes:{"view-edit-smartsheet-content":"查看、編輯智能表內容","view-edit-smartcanvas-content":"查看、編輯智能文檔內容","view-edit-sheet-content":"查看、編輯在線表格內容","view-edit-slide-content":"查看、編輯在線幻燈片內容","view-edit-doc-content":"查看、編輯在線文檔內容","view-edit-pdf-content":"查看 PDF 內容","view-edit-mind-content":"查看、編輯思維導圖內容"},desc:{purpose:"授權「騰訊文檔AI文档助手」使用您的騰訊文檔權限。",tips:"這樣做可能會將您的敏感信息提供給此網站或應用，您可以隨時在「隱私-AI文档助手開關」查看或關閉訪問權限。"},policy:{desc:"我已閱讀並同意騰訊文檔的","service-agreement":"《服務協議》","privacy-agreement":"《隱私政策》"},options:{agree:"同意"},panel:{title:"授權「AI文档助手」可查看/編輯妳的騰訊文檔",desc:"妳的數據僅用於定制妳的內容，我們採用嚴格措施確保其安全。",button:"同意併繼續"}},feedback:{options:{like:"讚",dislike:"踩"},tips:{feedback:"嚮AI文档助手反饋",done:"感謝反饋"}},error:{"limit-exceeded":"超過每日調用次數限制","no-authorization":"未授權",unknown:"未知錯誤","network-error":"網絡連接失敗，請稍後重試"}},U)},G=Object(r.createInstance)();G.use(a.detectors).init({resources:W,fallbackLng:a.fallbackLng,interpolation:a.interpolation,detection:a.detection,defaultNS:z});var V,K,q,Q,Y=G.t;(Q=K||(K={}))[Q.TIMEOUT=-2]="TIMEOUT",Q[Q.FAIL=-1]="FAIL",Q[Q.SUCCESS=0]="SUCCESS",Q[Q.CALL_MODEL_FAILED=417108]="CALL_MODEL_FAILED",Q[Q.INPUT_OUTPUT_ERROR=417109]="INPUT_OUTPUT_ERROR",Q[Q.UNAUTHORIZED=411203]="UNAUTHORIZED",Q[Q.SERVER_TIMEOUT_1=411201]="SERVER_TIMEOUT_1",Q[Q.SERVER_TIMEOUT_2=400002]="SERVER_TIMEOUT_2",Q[Q.LLM_REJECT=410201]="LLM_REJECT",Q[Q.PLUGIN_SERVICE_TIMEOUT=411204]="PLUGIN_SERVICE_TIMEOUT",Q[Q.REQUEST_LIMIT_EXCEEDED=411205]="REQUEST_LIMIT_EXCEEDED",Q[Q.CHART_OTHER_ERROR=410201]="CHART_OTHER_ERROR",Q[Q.CHART_DRAW_FAILED=410205]="CHART_DRAW_FAILED",Q[Q.SENSITIVE_BLOCK=411208]="SENSITIVE_BLOCK",Q[Q.AI_FUNCTION_NOT_SUPPORT=411209]="AI_FUNCTION_NOT_SUPPORT",Q[Q.PRODUCT_VERSION_ERROR=411210]="PRODUCT_VERSION_ERROR",Q[Q.BOUNDARY_LIMIT_ERROR=411206]="BOUNDARY_LIMIT_ERROR",Q[Q.FILE_NO_PERMISSION=411207]="FILE_NO_PERMISSION",Q[Q.FILE_TYPE_NOT_SUPPORT=411211]="FILE_TYPE_NOT_SUPPORT",Q[Q.AI_USE_LIMIT=411212]="AI_USE_LIMIT",Q[Q.USER_STORAGE_OVERFLOW=411213]="USER_STORAGE_OVERFLOW",Q[Q.SHEET_OVERFLOW=413106]="SHEET_OVERFLOW",function(e){e[e.FUNCTTIONCALL_NOT_FOUND=1001]="FUNCTTIONCALL_NOT_FOUND",e[e.CONVERSATION_RETURN_EMPTY=1002]="CONVERSATION_RETURN_EMPTY",e[e.TASKCHAIN_ERROR=1003]="TASKCHAIN_ERROR",e[e.RECOMMENDED_COMMAND_NOT_FOUND=1004]="RECOMMENDED_COMMAND_NOT_FOUND",e[e.AGENT_NOT_SUPPORT=1005]="AGENT_NOT_SUPPORT",e[e.AGENT_EXEC_ERROR=1006]="AGENT_EXEC_ERROR",e[e.CHANNEL_CREATE_ERROR=1007]="CHANNEL_CREATE_ERROR"}(q||(q={}));var X="[👉🏻点此反馈信息](https://docs.qq.com/home/feedback?type=index)",J="糟糕，小助手似乎正在小憩，我们努力唤醒中。\n\n欢迎向我们反馈问题，我们会加速修复：".concat(X),Z=((V={})[K.TIMEOUT]="很抱歉，小助手开小差啦，请稍后再试。\n\n欢迎向我们反馈问题，我们会加速修复：".concat(X),V[K.FAIL]=Y("error.network-error"),V[K.SERVER_TIMEOUT_1]="抱歉，小助手陷入深思中，请稍后再试。\n\n欢迎向我们反馈问题，我们会加速修复：".concat(X),V[K.SERVER_TIMEOUT_2]="抱歉，小助手陷入深思中，请稍后再试。\n\n欢迎向我们反馈问题，我们会加速修复：".concat(X),V[K.PLUGIN_SERVICE_TIMEOUT]="抱歉，小助手陷入深思中，请稍后重试。\n\n欢迎向我们反馈问题，我们会加速修复：".concat(X),V[K.REQUEST_LIMIT_EXCEEDED]=Y("当前访问人数过多，小助手忙不过来啦，请稍后重试"),V[K.UNAUTHORIZED]=Y("您还未授权, 请授权后使用"),V),$=[K.CALL_MODEL_FAILED,K.INPUT_OUTPUT_ERROR,K.LLM_REJECT,K.CHART_OTHER_ERROR,K.CHART_DRAW_FAILED,K.SENSITIVE_BLOCK,K.AI_FUNCTION_NOT_SUPPORT,K.PRODUCT_VERSION_ERROR,K.BOUNDARY_LIMIT_ERROR,K.FILE_NO_PERMISSION,K.FILE_TYPE_NOT_SUPPORT,K.SHEET_OVERFLOW],ee=function(e){if(!window.document)return"";var t=document.cookie;if(!t)return"";var n=new RegExp("(?:^|;+|\\s+)".concat(e,"=([^;]*)")),i=t.match(n);return i?i[1]:""},te=function(){return ee("TOK")};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var ne={exports:{}};ne.exports=function(){var e,t;function n(t){this.name="__st"+(1e9*Math.random()>>>0)+e+"__",null!=t&&t.forEach(this.add,this),e+=1}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],o=0;o<n;){var r=t[o];if(e.call(i,r,o,t))return r;o+=1}}}),window.WeakSet||(e=Date.now()%1e9,n.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},n.prototype.delete=function(e){return!!e[this.name]&&!(e[this.name]=void 0)},n.prototype.has=function(e){return!!e[this.name]},t=n,Object.defineProperty(window,"WeakSet",{value:function(e){return new t(e)}})),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if(null!=(i=arguments[n]))for(var i=Object(i),o=Object.keys(Object(i)),r=0,a=o.length;r<a;r++){var s=o[r],c=Object.getOwnPropertyDescriptor(i,s);null!=c&&c.enumerable&&(t[s]=i[s])}return t}});var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},o=function(){return(o=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function r(e,t){var n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n}function a(e,t,n,i){return new(n=n||Promise)((function(o,r){function a(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):((t=e.value)instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((i=i.apply(e,t||[])).next())}))}function s(e,t){var n,i,o,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){var c=[a,s];if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&c[0]?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,(c=o?[2&c[0],o.value]:c)[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(!((o=0<(o=r.trys).length&&o[o.length-1])||6!==c[0]&&2!==c[0])){r=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3]))r.label=c[1];else if(6===c[0]&&r.label<o[1])r.label=o[1],o=c;else{if(!(o&&r.label<o[2])){o[2]&&r.ops.pop(),r.trys.pop();continue}r.label=o[2],r.ops.push(c)}}c=t.call(e,r)}catch(s){c=[6,s],i=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}function c(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],a=0,s=r.length;a<s;a++,o++)i[o]=r[a];return i}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var u,d,h,f,p,v,g,y,m={PV:"pv",AID:"aid",F_ID:"fId",ERROR:"error",DEVICE:"device",CLOSE:"close",PAGE_PERFORMANCE:"pagePerformance",WEB_VITALS:"webVitals",IE:"ie",SPA:"spa",API:"api",API_SPEED:"apiSpeed",ASSET_SPEED:"assetSpeed",CUSTOM:"custom",SESSION:"session",BRIDGE_SPEED:"bridgeSpeed",LOAD_PACKAGE:"loadPackageSpeed"},E=["aegis.qq.com","tamaegis.com","/aegis-sdk","rumt-","/flog.core.min.js","pingfore.qq.com","pingfore.tencent.com","zhiyan.tencent-cloud.net","h.trace.qq.com","btrace.qq.com","beacon.qq.com","dmplog.qq.com","qq.com/report","svibeacon.onezapp.com","cube.weixinbridge.com","doubleclick.net","pcmgrmonitor.3g.qq.com","report.qqweb.qq.com","tpstelemetry.tencent.com","insight.cloud.tencent.com","facebook.com","facebook.net","google","yahoo.com","twitter.com","ga-audiences","report.idqqimg.com","arms-retcode.aliyuncs.com","px.effirst.com","sentry","hot-update.json","u.c.b.r.o.w.s.e.r","report.url.cn","sockjs-node","m3u8"],b=["ResizeObserver loop limit exceeded","Failed to execute 'transaction'","window.indexedDB.deleteDatabase is not a function"],T=["level","trace","tag","seq","code"],S=["static","fetch"],x=((Se=u=u||{}).INFO="info",Se.ERROR="error",Se.SDK_ERROR="sdk_error",Se.PROMISE_ERROR="promise_error",Se.AJAX_ERROR="ajax_error",Se.SCRIPT_ERROR="script_error",Se.WEBSOCKET_ERROR="websocket_error",Se.IMAGE_ERROR="image_error",Se.CSS_ERROR="css_error",Se.MEDIA_ERROR="media_error",Se.REPORT="report",Se.RET_ERROR="ret_error",Se.BRIDGE_ERROR="brige_error",(Se=d=d||{}).NORMAL="normal",Se.PV="pv",Se.API="api",Se.API_SPEED="api_speed",Se.CUSTOM_TIME="custom_time",Se.CUSTOM_EVENT="custom_event",Se.ASSETS_SPEED="assets_speed",Se.PAGE_PERFORMANCE="page_performance",Se.WEB_VITALS="web_vitals",Se.SDK_ERROR="sdk_error",Se.SESSION="session",Se.BRIDGE="bridge",(Se=h=h||{}).android="android",Se.ios="iOS",Se.windows="windows",Se.macos="macOS",Se.linux="linux",Se.devtools="devtools",Se.other="other",(Se=f=f||{}).unknown="unknown",Se.wifi="wifi",Se.net2g="2G",Se.net3g="3G",Se.net4g="4G",Se.net5g="5G",Se.net6g="6G",(Se=p=p||{}).PROD="production",Se.DEV="development",Se.GRAY="gray",Se.PRE="pre",Se.DAILY="daily",Se.LOCAL="local",Se.TEST="test",Se.OTHER="others",(Se=v=v||{}).ON_NEW_AEGIS="onNewAegis",Se.ON_BEFORE_DESTROY="onBeforeDestroy",Se.ON_DESTROYED="onDestroyed",Se.ON_BEFORE_COLLECT="onBeforeCollect",Se.ON_COLLECTED="onCollected",Se.ON_BEFORE_PROCESS="onBeforeProcess",Se.ON_PROCESSED="onProcessed",Se.ON_BEFORE_SEND="onBeforeSend",Se.ON_SEND="onSended",(Se=g=g||{}).ON_REPORT="onReport",Se.BEFORE_REPORT_SPEED="beforeReportSpeed",Se.BEFORE_REPORT="beforeReport",Se.ON_BEFORE_REQUEST="onBeforeRequest",(Se=y=y||{}).sampleChange="sampleChange",Se.destroy="destroy",Se.configChange="configChange",O.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},O.prototype.on=function(e,t,n){var i;if(void 0===n&&(n=0),this)return(i=this.eventsList[e])||(this.eventsList[e]=[],i=this.eventsList[e]),-1===this.indexOf(i,t)&&i.push({name:e,type:n||0,callback:t}),this},O.prototype.one=function(e,t){this.on(e,t,1)},O.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(n){if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(e){}}return null}},O.prototype.clear=function(){this.eventsList={}},O);function O(){var e=this;this.emit=function(t,n){if(e){var i;if(null!=(o=e.eventsList[t])&&o.length)for(var o=o.slice(),r=0;r<o.length;r++){i=o[r];try{var a=i.callback.apply(e,[n]);if(1===i.type&&e.remove(t,i.callback),!1===a)break}catch(t){throw t}}return e}},this.eventsList={}}function w(){return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(function(e){return(e^(16*Math.random()&15)>>e/4).toString(16)}))}var _={generateTraceId:A(16),generateSpanId:A(8)},C=Array(32);function A(e){return function(){for(var t=0;t<2*e;t++)C[t]=Math.floor(16*Math.random())+48,58<=C[t]&&(C[t]+=39);return String.fromCharCode.apply(null,C.slice(0,2*e))}}function k(e){var t;return"object"==P(e)&&(t=(e=function(e){for(var t=0,n=Object.keys(I);t<n.length;t++){var i=n[t],o=e[i]||"function"==typeof e.get&&e.get(i);if(o)return[i,o]}return["",""]}(e))[0],e=e[1],t)?I[t](e):["",""]}var R,I={sw8:function(e){var t=(e=e.split("-"))[1];return e=e[2],t?[atob(t),atob(e)]:["",""]},traceparent:function(e){return[(e=e.split("-"))[1],e[2]]},b3:function(e){return[(e=e.split("-"))[0],e[1]]},"sentry-trace":function(e){return[(e=e.split("-"))[0],e[1]]}},L=(N.prototype.generate=function(e,t){if(void 0===t&&(t={}),this.url=e,!this.isUrlIgnored()&&this.isUrlInTraceUrls()&&this.traceType){switch(this.traceType){case"traceparent":this.traceId=this.createTraceparent();break;case"b3":this.traceId=this.createB3();break;case"sw8":this.traceId=this.createSw8();break;case"sentry-trace":this.traceId=this.createSentryTrace();break;default:return console.warn("this trace key "+this.traceType+" is not supported"),void(this.traceId="")}return t[this.traceType]&&(this.traceId=t[this.traceType]),{name:this.traceType,value:this.traceId}}},N.prototype.createTraceparent=function(){var e=_.generateSpanId();return"00-"+_.generateTraceId()+"-"+e+"-0"+Number(1).toString(16)},N.prototype.createB3=function(){var e=_.generateSpanId();return _.generateTraceId()+"-"+e+"-1"},N.prototype.createSw8=function(){var e=new URL(location.href),t=l(),n=l();return"1-"+String(btoa(n))+"-"+String(btoa(t))+"-1-"+String(btoa("aegis"))+"-"+String(btoa(VERSION))+"-"+String(btoa(encodeURI(location.pathname)))+"-"+String(btoa(e.host))},N.prototype.createSentryTrace=function(){var e=w().substring(16);return w()+"-"+e+"-1"},N.prototype.isUrlIgnored=function(){if(Array.isArray(this.ignoreUrls)&&0!==this.ignoreUrls.length)for(var e=0,t=this.ignoreUrls;e<t.length;e++){var n=t[e];if(this.urlMatches(this.url,n))return!0}return!1},N.prototype.isUrlInTraceUrls=function(){if(!this.urls)return!0;if(Array.isArray(this.urls)){if(0===this.urls.length)return!1;for(var e=0,t=this.urls;e<t.length;e++){var n=t[e];if(this.urlMatches(this.url,n))return!0}}return!1},N.prototype.urlMatches=function(e,t){return"string"==typeof t?e===t:!!e.match(t)},N);function N(e,t,n){void 0===n&&(n=null),this.traceType=e,this.ignoreUrls=t,this.urls=n}function B(e,t){return"number"==typeof e||"string"==typeof e?e:t?R.string:R.number}function D(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e}function M(e,t){return void 0===t&&(t=2048),null==(e=String(e).split("?")[0])?void 0:e.slice(0,t)}function j(e){return"string"==typeof e&&/^\//.test(e)?"https:"===(null===location||void 0===location?void 0:location.protocol):/^https/.test(e)}function F(e,t,n){try{var i="function"==typeof t?t(e,null==n?void 0:n.url)||"":e;return te(i).slice(0,102400)}catch(e){return""}}function H(e){if("string"==typeof e)return e;try{return e instanceof Error?(JSON.stringify(e,ee())||"undefined").replace(/"/gim,""):JSON.stringify(e,ee())||"undefined"}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}}function U(e){if("string"==typeof e)return e;try{return JSON.stringify(e,ee())||"undefined"}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}}function z(e,t){return"string"!=typeof e||!e||t&&-1<e.indexOf(t)||oe.test(e)||E.some((function(t){return-1<e.indexOf(t)}))}function W(e,t,n){return a(void 0,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return"function"!=typeof e?[3,2]:[4,e.call(t,n,t)];case 1:return[2,i.sent()];case 2:return[2,n||[]]}}))}))}function G(e,t,n,i){return void 0===t&&(t=u.INFO),void 0===n&&(n=d.NORMAL),void 0===i&&(i=m.CUSTOM),e.map((function(e){var r="object"==P(e)?e:{msg:e};return o(o({},r),{msg:r instanceof Error?H(r):r.msg||"",level:null!=t?t:e.level,type:null!=n?n:e.type,plugin:null!=i?i:e.plugin})}))}function V(e,t){if("string"==typeof t){var n=(t=t.split(".")).pop();if(n)return"object"==P(t=t.reduce((function(e,t){return null==e?void 0:e[t]}),e))?t[n]:t}}function K(e,t,n,i){return"url: "+e+"\nresdata: "+t+"\nstatus: "+n+" \nretcode: "+i}function q(e){return e.filter((function(t,n){return"static"!==(null==t?void 0:t.requestType)||!e.find((function(e,i){return(null==t?void 0:t.url)===e.url&&200===(null==t?void 0:t.status)&&n<i}))}))}function Q(e,t){return Array.isArray(e)?t(e.map((function(e){return t=o(o({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(H).join(" ")}),T.forEach((function(e){t[e]||delete t[e]})),t;var t}))):t([o(o({},e),{msg:"string"==typeof e.msg?e.msg:H(e.msg)})])}function Y(e){if(Array.isArray(e)&&0!==e.length)return function(t,n){var i=function(t,o){t<e.length?e[t](o,(function(e){return i(t+1,e)})):null!=n&&n(o)};i(0,t)};throw new TypeError("createPipeline needs at least one function param")}(Se=R=R||{})[Se.number=-1]="number",Se.string="";var X,J=["application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/x-javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video","video/mp2t"],Z=/\.(json|js|css|jpg|jpeg|png|svg|apng|webp|gif|bmp|mp4|mp3|ts|mpeg|wav|webm|ogg|flv|m3u8|ttf|woff2|otf|eot|woff|html|htm|shtml|shtm|)$/gi,$=["ret","retcode","code","errcode"],ee=function(){var e=new WeakSet;return function(t,n){if(n instanceof Error)return"Error.message: "+n.message+" \n  Error.stack: "+n.stack;if("object"==P(n)&&null!==n){if(e.has(n))return"[Circular "+(t||"root")+"]";e.add(n)}return n}},te=function(e,t){void 0===t&&(t=3);var n,i,o,r="";return Array.isArray(e)?(r+="[",n=e.length,e.forEach((function(e,i){r=(r+="object"==P(e)&&1<t?te(e,t-1):ie(e))+(i===n-1?"":",")})),r+="]"):e instanceof Object?(r="{",i=Object.keys(e),o=i.length,i.forEach((function(n,a){"object"==P(e[n])&&1<t?r+='"'+n+'":'+te(e[n],t-1):r+=ne(n,e[n]),r+=a===o-1||a<o-1&&void 0===e[i[a+1]]?"":","})),r+="}"):r+=e,r},ne=function(e,t){var n=P(t),i="";return"string"==n||"object"==n?i+='"'+e+'":"'+t+'"':"function"==typeof t?i+='"'+e+'":"function '+t.name+'"':"symbol"==P(t)?i+='"'+e+'":"symbol"':"number"!=typeof t&&"boolean"!=n||(i+='"'+e+'": '+t),i},ie=function(e){var t=P(e);return""+("undefined"==t||"symbol"==t||"function"==t?"null":"string"==t||"object"==t?'"'+e+'"':e)},oe=/data:(image|text|application|font)\/.*;base64/,re=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!t.length)return e;var i,o=t.shift();for(i in o)"object"==P(o[i])&&null!==o[i]&&e.hasOwnProperty(i)&&"object"==P(e[i])&&null!==e[i]?re(e[i],o[i]):e[i]=o[i];return re.apply(void 0,c([e],t))},ae=(pe.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},pe.prototype.unPatch=function(e){var t=this.instances.indexOf(e);-1!==t&&(this.instances.splice(t,1),0===this.instances.length)&&this.uninstall(e)},pe.prototype.countInstance=function(){return this.instances.length},pe.prototype.uninstall=function(e){var t;null!=(t=null==(t=e.option)?void 0:t.destroy)&&t.call(e.option,this.aegis,this.getConfig(e))},pe.prototype.walk=function(e){var t=this;this.instances.forEach((function(n){t.canUse(n)&&e(n,t.getConfig(n))}))},pe.prototype.canUse=function(e){return!e||!(!(e=this.getConfig(e))||"object"!=P(e))||!!e},pe.prototype.getConfig=function(e){var t;return null!=(t=null==(t=this.config)?void 0:t[e.name])?t:null==(t=this.aegis.config)?void 0:t[e.name]},pe.prototype.exist=function(e){return-1===this.instances.indexOf(e)},pe.prototype.triggerInit=function(e){var t;this.initializedPlugin[e.name]||(e.option.aegis=this.aegis,e.aegis=this.aegis,this.initializedPlugin[e.name]=!0,null==(t=null==(t=e.option)?void 0:t.init))||t.call(e.option,this.aegis,this.getConfig(e))},pe.prototype.triggerOnNewAegis=function(e){var t;W(this.aegis.config.onBeforeCollect,this.aegis),null!=(t=null==(t=e.option)?void 0:t.onNewAegis)&&t.call(e.option,this.aegis,this.getConfig(e))},pe),se={name:"sample",create:function(e){var t=Math.random();return function(n,i){var o=e.sampleMap;0<(n=n.filter((function(e){return!(e.plugin&&(e=e.plugin===m.SPA?m.PV:e.plugin,void 0!==(e=o[e]))&&e<t)}))).length&&i(n)}}},ce={name:"throttle",create:function(e,t){var n,i=[],o=e.config;return e.event.on(y.destroy,(function(){i.length=0})),function(r,a){i=i.concat(r),t&&i.length>=t||e.sendNow&&0<i.length?(i=q(i),a(i.splice(0,i.length)),n&&clearTimeout(n)):(n&&clearTimeout(n),n=setTimeout((function(){n=null,0<(i=q(i)).length&&a(i.splice(0,i.length))}),o.delay))}}},le={name:"format",create:function(){return Q}},ue={name:"lengthLimit",create:function(e){return function(t,n){var i=e.config;n(t=t.map((function(e){var t,n=i.maxLength||102400;try{if(!e.msg||e.msg.length<=n)return e;e.msg=null==(t=e.msg)?void 0:t.substring(0,n)}catch(t){e.msg=H(e.msg).substring(0,i.maxLength)}return e})))}}},de={},he={},fe={name:"repeatLimit",create:function(e){return t=e.config,function(e,n){var i,o,r="number"==typeof t.repeat?t.repeat:60;!V(t,"sample.speed")||r<=0?n(e):(i=(null==t?void 0:t.id)||"0",o=he[i]||{},(e=e.filter((function(e){var t,n=!o[e.url]||o[e.url]<r;return n?(o[e.url]=1+~~o[e.url],he[i]=o):de[i]||de[t=i]||(de[t]=setTimeout((function(){he[t]={},de[t]=null}),6e4)),n}))).length&&n(e))};var t}};function pe(e,t){this.instances=[],this.initializedPlugin={},this.aegis=e,this.config=t}function ve(e,t){Object.getOwnPropertyNames(e).forEach((function(n){"function"==typeof e[n]&&"constructor"!==n&&(t?t[n]="sendPipeline"===n?function(){return function(){}}:function(){}:e[n]=function(){})}))}function ge(e,t){return t(e)}function ye(){return void 0!==window.performance&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now}function me(e,t){function n(i){"pagehide"!==i.type&&"hidden"!==document.visibilityState||(e(i),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)}function Ee(e){switch(e){case"script":return"js";case"link":return"css";default:return e}}(Se=X=X||{})[Se.ERROR=0]="ERROR",Se[Se.WARN=1]="WARN",Se[Se.INFO=2]="INFO",Se[Se.DEBUG=3]="DEBUG",ke.prototype.debug=function(e){this.log(X.DEBUG,e)},ke.prototype.info=function(e){this.log(X.INFO,e)},ke.prototype.warn=function(e){this.log(X.WARN,e)},ke.prototype.error=function(e){this.log(X.ERROR,e)},ke.prototype.log=function(e,t){e<=this.logLevel&&console.log("["+X[e]+"] "+t)};var be,Te=ke,Se=(Ae.prototype.init=function(){var e=this;this.logger=new Te(this.config.env===p.PROD?X.ERROR:X.DEBUG),function(e){function t(){var t=Date.now();e.request({url:V(e.config,"hostUrl.whiteListUrl")+"?uid="+a+"&topic="+e.config.id,payload:{},method:"GET"},(function(n){var i,o=(n=n.data||JSON.parse(n)).is_in_white_list,a=void 0===(s=n.sample_map)?{}:s,s=n.server_time,c=n.start_server_time;0!==n.code?(e.sampleMap=r,e.event.emit(y.sampleChange)):(o&&e.config.whiteList?Object.keys(m).forEach((function(e){r[m[e]]=1})):(i={},Object.keys(a).forEach((function(e){i[e.replace(/(_\w)/g,(function(e){return e[1].toUpperCase()}))]=a[e]/100})),re(r,i)),e.sampleMap=r,e.event.emit(y.sampleChange),o=((n=Date.now())-t-(Number(s)-Number(c)))/2,c=Number(s)+o,e.serverTimeGap=Math.floor(c-n))}),(function(){e.sampleMap=r,e.event.emit(y.sampleChange)}))}i=e,o={},Object.keys(m).forEach((function(e){e=m[e];var t=V(i.config,"sample."+e);o[e]=t}));var n,i,o,r=o,a=null==(n=e.config)?void 0:n.uid;t(),e.event.on(y.configChange,(function(e){e.uid!==a&&(a=e.uid,t())}))}(this),this.plugin=new ae(this,this.config.plugin),Ae.installedPlugins.forEach((function(t){e.plugin.patch(t)})),this.event.emit("init")},Ae.prototype.setConfig=function(e){return re(this.config,e),this.extendBean(this.config),this.event.emit(y.configChange,e),W(this.config.onConfigChange,this),this.config},Ae.use=function(e){-1===Ae.installedPlugins.indexOf(e)&&Ae.installedPlugins.push(e)},Ae.unuse=function(e){-1!==(e=Ae.installedPlugins.indexOf(e))&&Ae.installedPlugins.splice(e,1)},Ae.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.canUseCustomPlugin()&&this.send(G(e,u.INFO))},Ae.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.canUseCustomPlugin()&&this.send(G(e,u.REPORT))},Ae.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.canUseCustomPlugin()&&this.send(G(e,u.ERROR))},Ae.prototype.clearPluginCache=function(){this.plugin.instances.forEach((function(e){var t;null!=(t=null==(t=e.option)?void 0:t.clear)&&t.call(e.option,e)}))},Ae.prototype.clearThrottleCache=function(){this.sendNow=!0,this.send([]),this.sendNow=!1},Ae.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,msg:"report_event",level:u.INFO,plugin:m.CUSTOM}:e).name?("string"!=typeof e.name&&(this.logger.warn("reportEvent params name must be string"),e.name=String(e.name)),this.canUseCustomPlugin()&&this.send(G([e],u.INFO,d.CUSTOM_EVENT))):this.logger.warn("reportEvent params error"))},Ae.prototype.canUseCustomPlugin=function(){var e;return!1!==(null==(e=this.config.plugin)?void 0:e[m.CUSTOM])},Ae.prototype.reportTime=function(e,t){if("object"==P(e))return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?this.logger.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):this.logger.warn("reportTime: second param must be number"):this.logger.warn("reportTime: first param must be a string")},Ae.prototype.reportT=function(e){var t=e.name,n=e.duration;if(e=r(e,["name","duration"]),"string"==typeof t&&"number"==typeof n){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,e);this.logger.warn("reportTime: duration must between 0 and 60000")}else this.logger.warn("reportTime: params error")},Ae.prototype.time=function(e,t){"string"==typeof e?this.timeMap[e]?this.logger.warn("Timer "+e+" already exists"):this.timeMap[e]={startTime:Date.now(),customParams:t}:this.logger.warn("time: first param must be a string")},Ae.prototype.timeEnd=function(e,t){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e].startTime,o(o({},this.timeMap[e].customParams),t)),delete this.timeMap[e]):this.logger.warn("Timer "+e+" does not exist"):this.logger.warn("timeEnd: first param must be a string")},Ae.prototype.submitCustomTime=function(e,t,n){this.canUseCustomPlugin()&&this.send(G([o({name:e,duration:t,msg:"custom_time",plugin:m.CUSTOM},n)],u.INFO,d.CUSTOM_TIME))},Ae.prototype.updateSnapshootInfo=function(e){re(this.snapshootInfo,e)},Ae.prototype.extendBean=function(e){var t;e={id:null!=(t=e.id)?t:this.bean.id,uid:null!=(t=e.uid)?t:this.bean.uid,version:null!=(t=e.version)?t:this.bean.version,aid:null!=(t=e.aid)?t:this.bean.aid,env:null!=(t=e.env)?t:this.bean.env,platform:null!=(t=e.platform)?t:this.bean.platform,netType:null!=(t=e.netType)?t:this.bean.netType,vp:null!=(t=e.vp)?t:this.bean.vp,sr:null!=(t=e.sr)?t:this.bean.sr,sessionId:null!=(t=e.sessionId)?t:this.bean.sessionId,from:null!=(t=e.from)?t:this.bean.from,referer:null!=(t=e.referer)?t:this.bean.referer},re(this.bean,e)},Ae.prototype.generateRequestOptionsByLogs=function(e){var t=this;return{payload:{topic:this.config.id||"",data:e.map((function(e){var n=e.type,i=e.snapshootInfo;return["type","plugin","snapshootInfo"].forEach((function(t){delete e[t]})),{message:U(o(o(o({},t.config.extField||{}),e),{timestamp:e.timestamp+t.serverTimeGap})),fields:U(o(o(o({},t.bean),{type:n}),i?JSON.parse(i):{})),timestamp:Date.now()+t.serverTimeGap}}))}}},Ae.prototype.send=function(e,t,n){var i=this;return this.sendPipeline||(this.sendPipeline=Y([ce.create(this),se.create(this),function(e,t){return a(i,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=t,[4,W(this.config.onBeforeSend,this,e)];case 1:return n.apply(void 0,[i.sent()]),[2]}}))}))},function(e,o){var r=i.generateRequestOptionsByLogs(e);i.request(r,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];i.failRequestCount=0,o(c(e,[{isErr:!1,result:n}])),null!=t&&t.apply(void 0,n)}),(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];60<=++i.failRequestCount&&i.destroy(),o(c(e,[{isErr:!0,result:t}])),null!=n&&n.apply(void 0,t)}))},function(e,t){return a(i,void 0,void 0,(function(){var n;return s(this,(function(i){switch(i.label){case 0:return n=t,[4,W(this.config.onSended,this,e)];case 1:return n.apply(void 0,[i.sent()]),[2]}}))}))}])),this.sendPipeline(e)},Ae.prototype.ready=function(e,t,n){throw new Error('You need to override "ready" method')},Ae.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},Ae.prototype.sendSDKError=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.send(G(e,u.SDK_ERROR,d.SDK_ERROR))},Ae.prototype.destroy=function(e){return void 0===e&&(e=!1),a(this,void 0,void 0,(function(){var t,n,i,o;return s(this,(function(r){switch(r.label){case 0:return[4,W(this.config.onBeforeDestroy,this)];case 1:for(r.sent(),-1!==(o=Ae.instances.indexOf(this))&&Ae.instances.splice(o,1),t=Ae.installedPlugins.length-1;0<=t;t--)try{n=Ae.installedPlugins[t],this.plugin.unPatch(n)}catch(r){this.sendSDKError({msg:H(r)})}if(this.event.emit("destroy"),this.event.clear(),e)a=this,s=Object.getOwnPropertyDescriptors(a),Object.keys(s).forEach((function(e){s[e].writable&&(a[e]=null)})),Object.setPrototypeOf(this,null);else{for(i=this;i.constructor!==Object&&ve(i,this),i=Object.getPrototypeOf(i););0===Ae.instances.length&&(ve(o=Object.getPrototypeOf(this).constructor),ve(Ae))}return W(this.config.onDestroyed,this),[2]}var a,s}))}))},Ae.version="2.3.16",Ae.instances=[],Ae.logLevel=u,Ae.environment=p,Ae.installedPlugins=[],Ae),xe=(Ce.prototype.getConfig=function(){var e;return null!=(e=null==(e=this.aegis.config)?void 0:e[this.name])?e:null==(e=this.aegis.config)?void 0:e[this.name]},Ce.prototype.publish=function(e,t){var n=this,i=t||this.aegis;return!!i.plugin.canUse(this)&&(t=(Array.isArray(e)?e:[e]).map((function(e){var t;return o(o({},e),{plugin:n.name,type:null!=(t=e.type)?t:d.NORMAL,level:null!=(t=e.level)?t:u.INFO,timestamp:Date.now(),snapshootInfo:U(i.snapshootInfo)})})),W(i.config.onCollected,i,t),null!=(e=this.option.pipes)&&e.length?(this.pipeline||((e=this.option.pipes.map((function(e){return n.wrapPipe(e,i)}))).unshift((function(e,t){return a(n,void 0,void 0,(function(){var n;return s(this,(function(o){switch(o.label){case 0:return n=t,[4,W(i.config.onBeforeProcess,i,e)];case 1:return n.apply(void 0,[o.sent()]),[2]}}))}))})),e.push((function(e,t){return a(n,void 0,void 0,(function(){var n;return s(this,(function(o){switch(o.label){case 0:return n=t,[4,W(i.config.onProcessed,i,e)];case 1:return n.apply(void 0,[o.sent()]),[2]}}))}))})),e.push((function(e,t){i.send(e),t(e)})),this.pipeline=Y(e)),this.pipeline(t)):i.send(t),!0)},Ce.prototype.wrapPipe=function(e,t){var n,i,o,r;return"string"==typeof e?null!=(o=null==(o=t.pipes.find((function(t){return t.name===e})))?void 0:o.create(t))?o:ge:(o=null!=(o=e)?o:{},n=o.name,i=o.option,o=o.create,"string"!=typeof n?e:(r=t.pipes.find((function(e){return e.name===n})),null!=(o=null!=(o=null==o?void 0:o(t,i))?o:null==r?void 0:r.create(t,i))?o:ge))},Ce),Oe=new xe({name:m.AID,aid:"",init:function(e){var t;try{var n=null==(t=e.config.plugin)?void 0:t.aid,i="string"==typeof n?n:window.localStorage.getItem("AEGIS_ID");i||(i=l(),window.localStorage.setItem("AEGIS_ID",i)),this.aid=i}catch(e){}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),we=(new xe({name:m.ASSET_SPEED}),new xe({name:m.ASSET_SPEED,pipes:["repeatLimit","networkRefresh"],collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],observer:null,onNewAegis:function(e){var t=this;ye()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){"function"==typeof performance.clearResourceTimings&&(t.collectCur=0,performance.clearResourceTimings())})},publishMany:function(e,t){for(var n=t.config,i=0,o=e.length;i<o;i++){var r=e[i];-1===this.ASSETS_INITIATOR_TYPE.indexOf(r.initiatorType)||z(r.name,V(n,"hostUrl.url"))||this.publish(this.generateLog(r,n),t)}},collectSuccessLog:function(e){var t,n=this;"function"==typeof(null===window||void 0===window?void 0:window.PerformanceObserver)?(this.publishMany(performance.getEntriesByType(this.collectEntryType),e),this.observer=new window.PerformanceObserver((function(t){n.publishMany(t.getEntries(),e)})),this.observer.observe({entryTypes:[this.collectEntryType]}),e.event.on(y.destroy,(function(){var e;null!=(e=n.observer)&&e.disconnect()}))):(t=setInterval((function(){var t=performance.getEntriesByType(n.collectEntryType),i=t.slice(n.collectCur);n.collectCur=t.length,n.publishMany(i,e)}),3e3),e.event.on(y.destroy,(function(){clearInterval(t)})))},collectFailLog:function(e){function t(t){var o,r,a;t&&(t=t.target||t.srcElement,!(o=(null==t?void 0:t.src)||(null==t?void 0:t.href))||"string"!=typeof o||-1<window.location.href.indexOf(o)||(t=performance.getEntriesByType(n.collectEntryType).find((function(e){return e.name===o})),r="function"==typeof(r=(null==(r=i.plugin)?void 0:r.api).resourceTypeHandler)?r(o):Ee(null==t?void 0:t.initiatorType),z(o,V(i,"hostUrl.url")))||(a="function"==typeof(a=(null==(a=i.plugin)?void 0:a.assetSpeed).urlHandler)?a(o):o,a={msg:"static_fail",errorMsg:"load "+M(o)+" fail",url:M(a),status:400,duration:Number(((null==t?void 0:t.duration)||0).toFixed(2)),method:"get",assetType:r||"static",isHttps:j(o),urlQuery:D(o,!0),nextHopProtocol:"",domainLookup:0,connectTime:0,type:d.ASSETS_SPEED},n.publish(a,e)))}var n=this,i=e.config;window.document.addEventListener("error",t,!0),e.event.on(y.destroy,(function(){window.document.removeEventListener("error",t,!0)}))},generateLog:function(e,t){var n=(null==(n=t.plugin)?void 0:n.api).resourceTypeHandler,i=(t="function"==typeof(t=(null==(t=t.plugin)?void 0:t.assetSpeed).urlHandler)?t(e.name):e.name,n="function"==typeof n?n(e.name):Ee(e.initiatorType),e.transferSize);return{msg:"asset_speed",url:M(t),duration:Number(e.duration.toFixed(2)),status:200,assetType:n||"static",isHttps:j(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:D(e.name,!0),domainLookup:B(e.domainLookupEnd-e.domainLookupStart),connectTime:B(e.connectEnd-e.connectStart),transferSize:0<i?i:-1,method:"get",type:d.ASSETS_SPEED}},collectNotReportedLog:function(e){var t,n;ye()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,"function"!=typeof window.PerformanceObserver)&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e))},destroy:function(){var e;this.publish=function(){},null!=(e=this.observer)&&e.disconnect()}})),_e=(new xe({name:m.API_SPEED}),new xe({name:m.API_SPEED,pipes:["repeatLimit","networkRefresh"],collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["fetch","xmlhttprequest"],onNewAegis:function(e){var t=this;ye()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){"function"==typeof performance.clearResourceTimings&&(t.collectCur=0,performance.clearResourceTimings())})},publishMany:function(e,t){for(var n=t.config,i=0,o=e.length;i<o;i++){var r=e[i];-1===this.ASSETS_INITIATOR_TYPE.indexOf(r.initiatorType)||z(r.name,V(n,"hostUrl.url"))||this.publish(this.generateLog(r,n),t)}},collectSuccessLog:function(e){var t,n,i=this;"function"==typeof window.PerformanceObserver?(this.publishMany(performance.getEntriesByType(this.collectEntryType),e),(t=new window.PerformanceObserver((function(t){i.publishMany(t.getEntries(),e)}))).observe({entryTypes:[this.collectEntryType]}),e.event.on(y.destroy,(function(){t.disconnect()}))):(n=setInterval((function(){var t=performance.getEntriesByType(i.collectEntryType),n=t.slice(i.collectCur);i.collectCur=t.length,i.publishMany(n,e)}),3e3),e.event.on(y.destroy,(function(){clearInterval(n)})))},collectFailLog:function(e){function t(e){var t,o;e&&(e=e.target||e.srcElement,!(t=(null==e?void 0:e.src)||(null==e?void 0:e.href))||"string"!=typeof t||-1<window.location.href.indexOf(t)||(e="function"==typeof(e=(null==(e=i.plugin)?void 0:e.api).resourceTypeHandler)?e(t):"",o=performance.getEntriesByType(n.collectEntryType).find((function(e){return e.name===t})),z(t,V(i,"hostUrl.url")))||(o={msg:"api_fail",url:M(t),status:400,duration:Number(((null==o?void 0:o.duration)||0).toFixed(2)),method:"get",assetType:e||"static",isHttps:j(t),urlQuery:D(t,!0),nextHopProtocol:"",domainLookup:0,connectTime:0,type:d.API_SPEED},n.publish(o)))}var n=this,i=e.config;window.document.addEventListener("error",t,!0),e.event.on(y.destroy,(function(){window.document.removeEventListener("error",t,!0)}))},generateLog:function(e,t){t="function"==typeof(null==(t=null==(t=t.plugin)?void 0:t.api)?void 0:t.resourceTypeHandler)?null==t?void 0:t.resourceTypeHandler(e.name):"";var n=e.transferSize;return{msg:"api_speed",url:M(e.name),duration:Number(e.duration.toFixed(2)),status:200,assetType:t||"static",isHttps:j(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:D(e.name,!0),domainLookup:B(e.domainLookupEnd-e.domainLookupStart),connectTime:B(e.connectEnd-e.connectStart),transferSize:0<n?n:-1,method:"get",type:d.API_SPEED}},collectNotReportedLog:function(e){var t,n;ye()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,"function"!=typeof window.PerformanceObserver)&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e))},destroy:function(){this.publish=function(){}}}));function Ce(e){var t;this.option=e,this.name=e.name,this.init=null==(t=e.init)?void 0:t.bind(this),this.onNewAegis=null==(t=e.onNewAegis)?void 0:t.bind(this),this.destroy=null==(t=e.destroy)?void 0:t.bind(this),this.option.$getConfig=this.getConfig.bind(this),this.option.publish=this.publish.bind(this)}function Ae(e){var t;this.pipes=[se,ce,le,ue,fe],this.config={id:"",uid:"",delay:1e3,repeat:60,sample:1,env:"production",maxLength:102400,whiteList:!0,hostUrl:{url:"https://galileotelemetry.tencent.com/collect",whiteListUrl:"https://galileotelemetry.tencent.com/aegiscontrol/whitelist"},plugin:{pv:!0,aid:!0,error:!0,device:!0,close:!0,pagePerformance:!0,webVitals:!0,fId:!1,ie:!1,spa:!1,api:!1,apiSpeed:!1,assetSpeed:!1,session:!1},reportImmediately:!0},this.event=new x,this.bean={},this.snapshootInfo={},this.serverTimeGap=0,this.sampleMap={},this.timeMap={},this.failRequestCount=0,e.version=null!=(t=e.version)?t:"2.3.16",e.hostUrl=void 0===(t=e.hostUrl)?{}:"string"==typeof t?{url:t}:t,this.setConfig(e),Ae.instances.push(this),W(this.config.onNewAegis,this)}function ke(e){void 0===e&&(e=X.INFO),this.logLevel=e}function Re(e,t,n,i){return void 0===n&&(n=15e3),void 0===i&&(i=0),(t=void 0===t?0:t)<=e&&e<=n?e:i}function Pe(e,t){var n=ut(),i="navigate";return 0<=ct?i="back-forward-cache":n&&(document.prerendering||0<dt()?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}}function Ie(e,t,n,i){var o,r;return function(a){0<=t.value&&(a||i)&&((r=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=r,t.rating=(a=t.value)>n[1]?"poor":a>n[0]?"needs-improvement":"good",e(t))}}function Le(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))}function Ne(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))}function Be(e){var t=!1;return function(){t||(e(),t=!0)}}function De(){return ft<0&&(ft=pt(),gt(),lt((function(){setTimeout((function(){ft=pt(),gt()}),0)}))),{get firstHiddenTime(){return ft}}}function Me(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()}function je(e,t){t=t||{},Me((function(){var n,i=De(),o=Pe("FCP"),r=ht("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(r.disconnect(),e.startTime<i.firstHiddenTime)&&(o.value=Math.max(e.startTime-dt(),0),o.entries.push(e),n(!0))}))}));r&&(n=Ie(e,o,yt,t.reportAllChanges),lt((function(i){o=Pe("FCP"),n=Ie(e,o,yt,t.reportAllChanges),Le((function(){o.value=performance.now()-i.timeStamp,n(!0)}))})))}))}function Fe(){return qe?Et:performance.interactionCount||0}function He(e){var t,n;_t.forEach((function(t){return t(e)})),!e.interactionId&&"first-input"!==e.entryType||(n=xt[xt.length-1],((t=Ot.get(e.interactionId))||xt.length<10||e.duration>n.latency)&&(t?e.duration>t.latency?(t.entries=[e],t.latency=e.duration):e.duration===t.latency&&e.startTime===t.entries[0].startTime&&t.entries.push(e):(n={id:e.interactionId,latency:e.duration,entries:[e]},Ot.set(n.id,n),xt.push(n)),xt.sort((function(e,t){return t.latency-e.latency})),10<xt.length)&&xt.splice(10).forEach((function(e){return Ot.delete(e.id)})))}function Ue(e){var t=self.requestIdleCallback||self.setTimeout,n=-1;return e=Be(e),"hidden"===document.visibilityState?e():(n=t(e),Ne(e)),n}function ze(){var e;0<=Ye&&Ye<Xe-Pt&&(e={entryType:"first-input",name:Qe.type,target:Qe.target,cancelable:Qe.cancelable,startTime:Qe.timeStamp,processingStart:Qe.timeStamp+Ye},Je.forEach((function(t){t(e)})),Je=[])}function We(e){var t,n,i,o;function r(){It(n,i),o()}function a(){o()}e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,i=e,o=function(){removeEventListener("pointerup",r,Rt),removeEventListener("pointercancel",a,Rt)},addEventListener("pointerup",r,Rt),addEventListener("pointercancel",a,Rt)):It(t,e))}function Ge(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,We,Rt)}))}function Ve(e){var t=e.name;0<(e=e.value)&&(Nt[t]=e)}(et=be=be||{}).unknown="unknown",et.normal="normal",et.weak="weak",et.disconnected="disconnected";var Ke,qe,Qe,Ye,Xe,Je,Ze,$e,et=new xe({name:m.DEVICE,onNewAegis:function(e){e.extendBean({platform:this.getPlatform(),netType:f.unknown}),this.getDpi(e),this.refreshNetworkTypeToBean(e),this.refreshNetworkStatusToBean(e)},getDpi:function(e){e.extendBean({vp:Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)}),window.screen&&e.extendBean({sr:Math.round(window.screen.width)+" * "+Math.round(window.screen.height)})},getPlatform:function(){var e={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT|Windows)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},t=Object.keys(e).find((function(t){return e[t].test(navigator.userAgent)}));return t?h[t]:h.other},refreshNetworkTypeToBean:function(e){var t=this,n=e.config;n&&("function"==typeof n.getNetworkType?n.getNetworkType:tt)((function(n){Object.keys(f).some((function(e){return f[e]===n}))||(n=f.unknown),e.extendBean({netType:n}),t.NetworkRefreshTimer=setTimeout((function(){t.refreshNetworkTypeToBean(e),clearTimeout(t.NetworkRefreshTimer)}),1e4)}))},refreshNetworkStatusToBean:function(e){var t,n=this,i=e.config;i&&null!=(t="function"==typeof i.getNetworkStatus?i.getNetworkStatus:t)&&t((function(t){Object.keys(be).some((function(e){return be[e]===t}))||(t=be.unknown),e.extendBean({netStatus:t}),n.NetworkStatusRefreshTimer=setTimeout((function(){n.refreshNetworkStatusToBean(e),clearTimeout(n.NetworkStatusRefreshTimer)}),1e4)}))}}),tt=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((n=t=t||"unknown",0<=(n=String(n).toLowerCase()).indexOf("4g")?f.net4g:0<=n.indexOf("wifi")?f.wifi:0<=n.indexOf("5g")?f.net5g:0<=n.indexOf("6g")?f.net6g:0<=n.indexOf("3g")?f.net3g:0<=n.indexOf("2g")?f.net2g:f.unknown))},nt=window.WebSocket,it=[],ot={construct:function(e,t){var n=new e(t[0],t[1]);return n.originSend=n.send,n.addEventListener("error",(function(e){var t=(e=(null==e?void 0:e.currentTarget)||{}).url,n=e.readyState;null!=it&&it.forEach((function(e){null!=(e=e.onErr)&&e({msg:"无法获知具体错误信息，需在浏览器控制台查看！",readyState:n,connectUrl:t})}))})),Object.defineProperty(n,"send",{get:function(){return function(e){null!=(t=n.originSend)&&t.call(n,e);var t=n.readyState,i=(e=WebSocket.OPEN,WebSocket.CLOSED),r=WebSocket.CONNECTING,a=WebSocket.CLOSING;if(t!==e){var s={readyState:t,connectUrl:n.url};switch(t){case i:it.forEach((function(e){null!=(e=e.sendErr)&&e(o({msg:"消息发送失败，连接已关闭！"},s))}));break;case r:it.forEach((function(e){(0,e.sendErr)(o({msg:"消息发送失败，正在连接中！"},s))}));break;case a:it.forEach((function(e){(0,e.sendErr)(o({msg:"消息发送失败，连接正在关闭！"},s))}))}}}}}),n}},rt=(new xe({name:m.ERROR}),new xe({name:m.ERROR,onNewAegis:function(e){this.startListen(e)},startListen:function(e){function t(t){var n,i=t&&H(t.reason);i&&s.publishErrorLog({msg:"PROMISE_ERROR: "+i,errorMsg:null==(n=null==(t=(null==(n=t.reason)?void 0:n.message)||(null==(n=t.reason)?void 0:n.errMsg)||i)?void 0:t.slice)?void 0:n.call(t,0,150),level:u.PROMISE_ERROR,type:d.NORMAL},e)}function n(t){var n;if(t=(null==t?void 0:t.target)||(null==t?void 0:t.srcElement)){var i=t.src||t.href||"";if(t=void 0===(t=t.tagName)?"script":t,!(z(n=i,V(e.config,"hostUrl.url"))||-1<window.location.href.indexOf(n))){var o={msg:t+" load fail: "+i,level:u.INFO,type:d.NORMAL};if(/\.js$/.test(i))o.level=u.SCRIPT_ERROR;else if(/\.css$/.test(i))o.level=u.CSS_ERROR;else switch(t.toLowerCase()){case"script":o.level=u.SCRIPT_ERROR;break;case"link":o.level=u.CSS_ERROR;break;case"img":o.level=u.IMAGE_ERROR;break;case"audio":case"video":o.level=u.MEDIA_ERROR;break;default:return}s.publishErrorLog(o,e)}}}var i,o,r,a,s=this,l=window.onerror;window.onerror=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,o=H(t[0]);"string"!=typeof(i=o)||!i||b.some((function(e){return-1<i.indexOf(e)}))||E.some((function(e){return-1<i.indexOf(e)}))||s.publishErrorLog({msg:(o||"")+" @ ("+(H(t[1])||"")+":"+(t[2]||0)+":"+(t[3]||0)+")\n          \n"+H(t[4]||""),errorMsg:o,level:u.ERROR,type:d.NORMAL},e),null!=l&&l.call.apply(l,c([window],t))},window.addEventListener("unhandledrejection",t),window.document.addEventListener("error",n,!0),e.event.on(y.destroy,(function(){window.document.removeEventListener("unhandledrejection",t),window.document.removeEventListener("error",n,!0)})),e.config.websocketHack&&(i={key:e.config.id+"-"+this.name,onErr:function(t){var n;null!=(n=s.publishWsErrorLog)&&n.call(s,t,e)},sendErr:function(t){var n;null!=(n=s.publishWsErrorLog)&&n.call(s,t,e)}},this.hackWebsocketConfig=i,i=this.hackWebsocketConfig,window.Proxy)&&window.WebSocket&&(o=window.WebSocket,window&&!o.isHack&&(r=new Proxy(WebSocket,ot),o.isHack=!0,window.WebSocket=r),a=i,it.find((function(e){return e.key===a.key}))||a&&it.push(a))},publishErrorLog:function(e,t){var n=e.type,i=e.level;e=r(e,["type","level"]),this.publish(o({level:i||u.ERROR,type:n||d.NORMAL},e),t)},publishWsErrorLog:function(e,t){var n=e.connectUrl,i=e.msg;e=e.readyState,this.publishErrorLog({msg:"WEBSOCKET_ERROR: \n              connect: "+n+"\n              readyState: "+e+"\n              msg: "+i,level:u.WEBSOCKET_ERROR,type:d.NORMAL},t)},destroy:function(){var e,t;this.publishErrorLog=function(){},this.hackWebsocketConfig&&(e=this.hackWebsocketConfig,window.WebSocket=nt,-1!==(t=it.findIndex((function(t){return t.key===e.key}))))&&it.splice(t,1)}})),at=(new xe({name:m.PAGE_PERFORMANCE}),3),st=new xe({name:m.PAGE_PERFORMANCE,performanceMap:{},onNewAegis:function(e){ye()&&(Ke?this.publish(Ke,e):this.startCalcPerformance(e))},startCalcPerformance:function(e){var t=this;try{this.getFirstScreenTiming(e,(function(n){var i=performance.timing;i&&(Ke={msg:"page_performance",type:d.PAGE_PERFORMANCE,dnsLookup:Re(i.domainLookupEnd-i.domainLookupStart),tcp:Re(i.connectEnd-i.connectStart),ssl:Re(0===i.secureConnectionStart?0:i.requestStart-i.secureConnectionStart),ttfb:Re(i.responseStart-i.requestStart),contentDownload:Re(i.responseEnd-i.responseStart),domParse:Re(i.domInteractive-i.domLoading,0,15e3,1070),resourceDownload:Re(i.loadEventStart-i.domInteractive,0,15e3,1070),firstScreenTiming:Re(Math.floor(n),0,15e3,15e3)},(i=e.config).extraPerformanceData&&"{}"!==JSON.stringify(i.extraPerformanceData)&&(i=(n=i.extraPerformanceData).engineInit,n=n.bundleLoad,Ke=o(o({},Ke),{engineInit:Re(i,0,1e4),bundleLoad:Re(n,0,1e4)})),t.publish(Ke,e))}))}catch(e){}},getFirstScreenTiming:function(e,t){var n=this;e.event.on(y.destroy,(function(){d&&clearTimeout(d)}));var i,o=this,r=["script","style","link","br"],a=[],s={},c=(-1<(null==(l=null==(l=window.PerformanceObserver)?void 0:l.supportedEntryTypes)?void 0:l.indexOf("paint"))&&(i=new PerformanceObserver((function(o){o.getEntries().forEach((function(o){var r;"paint"===o.entryType&&"first-contentful-paint"===o.name&&0<(r=document.querySelectorAll("[AEGIS-FIRST-SCREEN-TIMING]")).length&&e.config.id&&!n.performanceMap[e.config.id]&&(n.setFirstScreenInfo(e,o.startTime,r[0],r),null!=t&&t(o.startTime),c.disconnect(),i.disconnect(),d)&&clearTimeout(d)}))}))).observe({entryTypes:["paint"]}),new MutationObserver((function(e){var t={roots:[],ignores:[],rootsDomNum:[],time:performance.now()};e.forEach((function(e){null!=e&&e.addedNodes&&Array.prototype.slice.call(e.addedNodes).forEach((function(e){o.isEleInArray(e,t.ignores)?t.ignores.push(e):1===e.nodeType&&e.hasAttribute("AEGIS-FIRST-SCREEN-TIMING")?(Object.prototype.hasOwnProperty.apply(s,[t.time])||(s[t.time]=[]),s[t.time].push(e)):1===e.nodeType&&(o.hasAncestorOrSelfWithAttribute(e,"AEGIS-IGNORE-FIRST-SCREEN-TIMING")?t.ignores.push(e):-1!==r.indexOf(e.nodeName.toLocaleLowerCase())||o.isEleInArray(e,t.roots)||(t.roots.push(e),t.rootsDomNum.push(o.walkAndCount(e)||0)))}))})),t.roots.length&&a.push(t)})));c.observe(document,{childList:!0,subtree:!0});var l,u=function(r){(r=void 0===r?0:r)||(l=0,(f=Object.keys(s)).length?(r=Math.max.apply(null,f),n.setFirstScreenInfo(e,r,null==(f=s[r])?void 0:f[0],s)):a.forEach((function(t){for(var i=0;i<t.roots.length;i++)t.rootsDomNum[i]>l&&o.isInFirstScreen(t.roots[i])&&(l=t.rootsDomNum[i],r=t.time,n.setFirstScreenInfo(e,r,t.roots[i]))})),a.length=0,Object.keys(s).forEach((function(e){s[e]=s[e].map((function(e){var t={tagName:e.tagName},n=e.attributes;if(!n)return e;for(var i=0;i<n.length;i++){var o=n[i];o.name&&(t[o.name]=e.getAttribute(o.name))}return t}))})));var l,h=(f=performance.timing).domInteractive-f.domLoading,f=f.loadEventStart-f.domInteractive,p=r;d=null;for(var v=0,g=[h,f,p];v<g.length;v++)if(g[v]<=0&&0<at){d=setTimeout((function(){return u(p)}),3e3);break}d?--at:(c.disconnect(),null!=i&&i.disconnect(),null!=t&&t(r))},d=setTimeout((function(){return u()}),3e3)},setFirstScreenInfo:function(e,t,n,i){var o;e.config.id&&this.performanceMap[e.config.id]||(e.config.id&&(this.performanceMap[e.config.id]=!0),("object"!=P(null==(o=e.config)?void 0:o.pagePerformance)||null!=(o=e.config.pagePerformance)&&o.firstScreenInfo)&&(e.firstScreenInfo={element:n,timing:t,markDoms:i}))},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){var t,n;return!(!e||"function"!=typeof e.getBoundingClientRect)&&(e=e.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth,0<=e.left)&&e.left<n&&0<=e.top&&e.top<t&&0<e.width&&0<e.height},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var i=0;i<n.length;i++)1===n[i].nodeType&&n[i].hasAttribute("AEGIS-IGNORE-FIRST-SCREEN-TIMING")||(t+=this.walkAndCount(n[i]))}return t},hasAncestorOrSelfWithAttribute:function(e,t){for(var n=e;n&&n!==document.body;){if(n.hasAttribute(t))return!0;n=n.parentElement}return!1}}),ct=-1,lt=function(e){addEventListener("pageshow",(function(t){t.persisted&&(ct=t.timeStamp,e(t))}),!0)},ut=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&0<e.responseStart&&e.responseStart<performance.now())return e},dt=function(){var e=ut();return e&&e.activationStart||0},ht=function(e,t,n){try{var i;if(PerformanceObserver.supportedEntryTypes.includes(e))return(i=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}))).observe(Object.assign({type:e,buffered:!0},n||{})),i}catch(e){}},ft=-1,pt=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},vt=function(e){"hidden"===document.visibilityState&&-1<ft&&(ft="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("visibilitychange",vt,!0),removeEventListener("prerenderingchange",vt,!0))},gt=function(){addEventListener("visibilitychange",vt,!0),addEventListener("prerenderingchange",vt,!0)},yt=[1800,3e3],mt=[.1,.25],Et=0,bt=1/0,Tt=0,St=function(e){e.forEach((function(e){e.interactionId&&(bt=Math.min(bt,e.interactionId),Tt=Math.max(Tt,e.interactionId),Et=Tt?(Tt-bt)/7+1:0)}))},xt=[],Ot=new Map,wt=0,_t=[],Ct=[200,500],At=[2500,4e3],kt={},Rt={passive:!0,capture:!0},Pt=new Date,It=function(e,t){Qe||(Qe=t,Ye=e,Xe=new Date,Ge(removeEventListener),ze())},Lt=[100,300],Nt=(new xe({name:m.WEB_VITALS}),{FCP:-1,LCP:-1,FID:-1,CLS:-1,INP:-1}),Bt=new xe({name:m.WEB_VITALS,onNewAegis:function(e){if(ye()&&"function"==typeof window.PerformanceObserver&&"function"==typeof performance.getEntriesByName)try{je(Ve),r=Ve,a={},Me((function(){function e(e){(e=a.reportAllChanges?e:e.slice(-1)).forEach((function(e){e.startTime<i.firstHiddenTime&&(o.value=Math.max(e.startTime-dt(),0),o.entries=[e],t())}))}var t,n,i=De(),o=Pe("LCP"),s=ht("largest-contentful-paint",e);s&&(t=Ie(r,o,At,a.reportAllChanges),n=Be((function(){kt[o.id]||(e(s.takeRecords()),s.disconnect(),kt[o.id]=!0,t(!0))})),["keydown","click"].forEach((function(e){addEventListener(e,(function(){return Ue(n)}),!0)})),Ne(n),lt((function(e){o=Pe("LCP"),t=Ie(r,o,At,a.reportAllChanges),Le((function(){o.value=performance.now()-e.timeStamp,kt[o.id]=!0,t(!0)}))})))})),i=Ve,o={},Me((function(){function e(e){e.startTime<n.firstHiddenTime&&(r.value=e.processingStart-e.startTime,r.entries.push(e),s(!0))}function t(t){t.forEach(e)}var n=De(),r=Pe("FID"),a=ht("first-input",t),s=Ie(i,r,Lt,o.reportAllChanges);a&&(Ne(Be((function(){t(a.takeRecords()),a.disconnect()}))),lt((function(){r=Pe("FID"),s=Ie(i,r,Lt,o.reportAllChanges),Je=[],Ye=-1,Qe=null,Ge(addEventListener),Je.push(e),ze()})))})),t=Ve,n={},je(Be((function(){function e(e){e.forEach((function(e){var t,n;e.hadRecentInput||(t=a[0],n=a[a.length-1],r&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,a.push(e)):(r=e.value,a=[e]))})),r>o.value&&(o.value=r,o.entries=a,i())}var i,o=Pe("CLS",0),r=0,a=[],s=ht("layout-shift",e);s&&(i=Ie(t,o,mt,n.reportAllChanges),Ne((function(){e(s.takeRecords()),i(!0)})),lt((function(){o=Pe("CLS",r=0),i=Ie(t,o,mt,n.reportAllChanges),Le((function(){return i()}))})),setTimeout(i,0))}))),function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},Me((function(){var n;function i(e){Ue((function(){e.forEach(He),t=Math.min(xt.length-1,Math.floor((Fe()-wt)/50));var t=xt[t];t&&t.latency!==o.value&&(o.value=t.latency,o.entries=t.entries,a())}))}"interactionCount"in performance||(qe=qe||ht("event",St,{type:"event",buffered:!0,durationThreshold:0}));var o=Pe("INP"),r=ht("event",i,{durationThreshold:null!=(n=t.durationThreshold)?n:40}),a=Ie(e,o,Ct,t.reportAllChanges);r&&(r.observe({type:"first-input",buffered:!0}),Ne((function(){i(r.takeRecords()),a(!0)})),lt((function(){wt=Fe(),xt.length=0,Ot.clear(),o=Pe("INP"),a=Ie(e,o,Ct,t.reportAllChanges)})))})))}(Ve),me(this.publishVitals.bind(this,e),!0)}catch(e){}var t,n,i,o,r,a},publishVitals:function(e){var t=this;setTimeout((function(){t.publish(o({type:d.WEB_VITALS,msg:"web_vitals"},Nt),e)}),10)},destroy:function(){this.publish=function(){}}}),Dt=(new xe({name:m.SPA}),["replaceState","pushState","popstate","hashchange"]),Mt=new xe({name:m.SPA,originFireUrl:"",onNewAegis:function(e){var t,n=this;history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState,this.sendPv=this.sendPv.bind(this),null!=(t=null==(t=e.config)?void 0:t.plugin)&&t.spa&&this.sendPv(e),Dt.forEach((function(t){return window.addEventListener(t,(function(){return n.sendPv.call(n,e)}))}))},wr:function(e){var t=history[e],n="__"+e+"__hasWrittenByTamSpa";return"function"==typeof t&&!history[n]&&(Object.defineProperty(history,n,{value:!0,enumerable:!1}),function(){var n=t.apply(this,arguments),i=null;return"function"==typeof Event?i=new Event(e):(i=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),window.dispatchEvent(i),n})},sendPv:function(e){var t=this;setTimeout((function(){var n=location.pathname+location.hash+e.config.id;n&&n!==e.originFireUrl&&(e.extendBean({from:e.getCurrentPageUrl()}),t.publish({msg:"spa",type:d.PV},e),e.originFireUrl=n)}),0)},destroy:function(){this.sendPv=function(){}}}),jt={name:"networkRefresh",create:function(e){return function(t,n){tt((function(i){e.extendBean({netType:i}),n(t)}))}}};function Ft(e){(e=Ze.call(this,e)||this).sendNow=!1,e.originFireUrl="",e.isReportReady=!1,e.reportRequestQueue=[],e.pipes.push(jt);try{e.init(),e.extendBean({from:e.getCurrentPageUrl()}),"undefined"!=typeof document&&e.extendBean({referer:document.referrer||""})}catch(t){e.logger.warn(t),e.sendSDKError({msg:H(t)})}return e}function Ht(){this.constructor=$e}function Ut(e){return-1!==zt.indexOf(e)}i($e=Ft,Se=Ze=Se),$e.prototype=null===Se?Object.create(Se):(Ht.prototype=Se.prototype,new Ht),Ft.prototype.getCurrentPageUrl=function(){var e=this.config.pageUrl||location.href||"";return(e="function"==typeof this.config.urlHandler?this.config.urlHandler():e).slice(0,2048)},Ft.prototype.ready=function(){var e=this;(function t(){var n,i,o,r;e.reportRequestQueue.length&&(n=e.reportRequestQueue.splice(0,1)[0],i=n.options,o=n.success,r=n.fail,e.$request(i,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return null==o?void 0:o.apply(i,e)}finally{t()}}),(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return null==r?void 0:r.apply(i,e)}finally{t()}})))})(),this.isReportReady=!0},Ft.prototype.request=function(e,t,n){this.config.reportImmediately||this.isReportReady?this.$request(e,t,n):this.reportRequestQueue.push({options:e,success:t,fail:n})},Ft.prototype.$request=function(e,t,n){var i,o,r,a,s,c,l,u;if(e&&this.bean.id)return r=e.url,i=e.payload,e=e.method,(r=r||V(this.config,"hostUrl.url"))?((o=this.config.onBeforeRequest)&&(l=g.ON_BEFORE_REQUEST,u=v.ON_BEFORE_SEND,console.warn("[Aegis] "+l+"方法已过期，请使用新的方法 "+u),i=o(i,this)),i?void(this.sendNow&&"function"==typeof(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)?navigator.sendBeacon(r,JSON.stringify(i)):(u=(l={url:r,payload:i,method:e,success:t,fail:n}).url,o=l.method,r=l.payload,a=l.fail,s=l.success,(c=new XMLHttpRequest).sendByAegis=!0,c.addEventListener("readystatechange",(function(){4===c.readyState&&(400<=c.status||0===c.status?null!=a&&a(c.response):null!=s&&s(c.response))})),c.open(o||"post",u),c.send(JSON.stringify(r)))):console.warn("Sending request blocked")):console.warn("url is empty");this.logger.error("参数错误或者没有项目ID，不让发请求")},Ft.sessionID="session-"+Date.now(),Se=Ft,new xe({name:m.IE});var zt=window.navigator.userAgent.toLowerCase(),Wt={};function Gt(e){for(var t=3&e.length,n=e.length-t,i=1,o=3432918353,r=461845907,a=0;a<n;){var s=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24;++a,i=27492+(65535&(s=5*(65535&(i=(i^=(65535&(s=(s=(65535&s)*o+(((s>>>16)*o&65535)<<16)&4294967295)<<15|s>>>17))*r+(((s>>>16)*r&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16)}var c=0;switch(t){case 3:c^=(255&e.charCodeAt(a+2))<<16;case 2:c^=(255&e.charCodeAt(a+1))<<8;case 1:i^=c=(65535&(c=(c=(65535&(c^=255&e.charCodeAt(a)))*o+(((c>>>16)*o&65535)<<16)&4294967295)<<15|c>>>17))*r+(((c>>>16)*r&65535)<<16)&4294967295}i=2246822507*(65535&(i=(i^=e.length)^i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295;for(var l=(i^=i>>>16)>>>0,u=(l%2).toString();1<l;)u=(l=parseInt((l/2).toString(),10))%2+u;for(;u.length<32;)u="0"+u;return u}function Vt(e,t,n){return null!=t&&t.length&&"object"==P(e)?t.reduce((function(t,i){var o=e instanceof Headers?e.get(i):e[i];return o?t+(""===t?"\n":"\n\n")+n+" header "+i+": "+o:t}),""):""}Wt.macos=function(){return Ut("mac")},Wt.ios=function(){return Wt.iphone()||Wt.ipod()||Wt.ipad()},Wt.iphone=function(){return!Wt.windows()&&Ut("iphone")},Wt.ipod=function(){return Ut("ipod")},Wt.ipad=function(){var e="MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;return Ut("ipad")||e},Wt.android=function(){return!Wt.windows()&&Ut("android")},Wt.androidPhone=function(){return Wt.android()&&Ut("mobile")},Wt.androidTablet=function(){return Wt.android()&&!Ut("mobile")},Wt.blackberry=function(){return Ut("blackberry")||Ut("bb10")},Wt.blackberryPhone=function(){return Wt.blackberry()&&!Ut("tablet")},Wt.blackberryTablet=function(){return Wt.blackberry()&&Ut("tablet")},Wt.windows=function(){return Ut("windows")},Wt.windowsPhone=function(){return Wt.windows()&&Ut("phone")},Wt.windowsTablet=function(){return Wt.windows()&&Ut("touch")&&!Wt.windowsPhone()},Wt.fxos=function(){return(Ut("(mobile")||Ut("(tablet"))&&Ut(" rv:")},Wt.fxosPhone=function(){return Wt.fxos()&&Ut("mobile")},Wt.fxosTablet=function(){return Wt.fxos()&&Ut("tablet")},Wt.meego=function(){return Ut("meego")},Wt.cordova=function(){return window.cordova&&"file:"===location.protocol},Wt.nodeWebkit=function(){return"object"==P(window.process)},Wt.mobile=function(){return Wt.androidPhone()||Wt.iphone()||Wt.ipod()||Wt.windowsPhone()||Wt.blackberryPhone()||Wt.fxosPhone()||Wt.meego()},Wt.tablet=function(){return Wt.ipad()||Wt.androidTablet()||Wt.blackberryTablet()||Wt.windowsTablet()||Wt.fxosTablet()},Wt.desktop=function(){return!Wt.tablet()&&!Wt.mobile()},Wt.isIE=function(){return"ActiveXObject"in window},new xe({name:m.CLOSE});var Kt,qt,Qt,Yt,Xt,Jt=new xe({name:m.CLOSE,onNewAegis:function(e){var t,n=this;Wt.desktop()?(t=window.onunload,window.onunload=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];n.publishNotReportedLog(e),null!=t&&t.call.apply(t,c([window],i))}):me(this.publishNotReportedLog.bind(this,e),!0)},publishNotReportedLog:function(e){e.clearPluginCache(),e.clearThrottleCache()},publishThrottlePipeLogs:function(){}}),Zt=(new xe({name:m.F_ID}),new xe({name:m.F_ID,aid:"",init:function(e){try{var t=e.config.fId,n="boolean"!=typeof t&&t;n||(n=function(){try{var e=(r=window.navigator).userAgent+"*"+r.platform+(o=window.screen).width+"*"+o.height+window.screen.colorDepth+((i=null==(i=window.Intl)?void 0:i.DateTimeFormat)?null==(i=null==(i=new i)?void 0:i.resolvedOptions())?void 0:i.timeZone:"")+" + "+(new Date).getTimezoneOffset()+function(){function e(){return 0}var t=Math;try{var n=t.acos||e,i=t.acosh||e,o=t.asin||e,r=t.asinh||e,a=t.atanh||e,s=t.atan||e,c=t.sin||e,l=t.sinh||e,u=t.cos||e,d=t.cosh||e,h=t.tan||e,f=t.tanh||e,p=t.exp||e,v=t.expm1||e,g=t.log1p||e,y={acos:n(.12312423423423424),acosh:i(1e308),acoshPf:t.log(1e154+t.sqrt(1e308)),asin:o(.12312423423423424),asinh:r(1),asinhPf:t.log(1+t.sqrt(2)),atanh:a(.5),atanhPf:t.log(3)/2,atan:s(.5),sin:c(-1e300),sinh:l(1),sinhPf:t.exp(1)-1/t.exp(1)/2,cos:u(10.000000000123),cosh:d(1),coshPf:(t.exp(1)+1/t.exp(1))/2,tan:h(-1e300),tanh:f(1),tanhPf:(t.exp(2)-1)/(t.exp(2)+1),exp:p(1),expm1:v(1),expm1Pf:t.exp(1)-1,log1p:g(10),log1pPf:t.log(11),powPI:t.pow(t.PI,-100)};return Object.values(y).join("*")}catch(e){return""}}()+function(){var e,t,n,i=document.createElement("canvas");return((e=i.getContext("2d"))?(e.font="14px 'Arial'",e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.fillText("aegis,sdk <canvas> 1.0",2,15),e.fillStyle="rgba(102, 204, 0, 0.7)",e.fillText("aegis,sdk <canvas> 1.0",4,17),i.toDataURL("image/jpeg")):"")+(t=["monospace","sans-serif","serif"],n=["default","sans-serif","serif","monospace","Apple LiSung","Apple SD Gothic Neo","Apple Symbols","Baoli SC, Baoli TC","Baskerville","Beirut","GungSeo","Gurmukhi MN","Gurmukhi MT","Hannotate SC, Hannotate TC","HanziPen SC, HanziPen TC","HeadlineA","Hei","LiSong Pro","Libian SC, Libian TC","LingWai SC, LingWai TC","Lucida Grande","Luminari","Nanum Brush Script","Nanum Gothic, NanumGothic","Nanum Myeongjo, NanumMyeongjo","Nanum Pen Script","NanumGothic ExtraBold, NanumGothicExtraBold","New Peninim MT","Noto Serif Kannada","Noto Serif Myanmar","Optima","PilGi","Plantagenet Cherokee","Raanana","STFangSong, STFangsong","STHeiti","STIXGeneral, STIXGeneral-Regular","Tsukushi B Round Gothic, Tsukushi B Round Gothic Regular","Tsukushi B Round Gothic Bold","Verdana","Waseem","Xingkai SC, Xingkai TC","YuGothic, YuGothic Medium","YuGothic Bold","Yuanti SC, Yuanti TC","Yuppy SC, Yuppy TC","Zapf Dingbats","Andale Mono","Arial","Arial Black","Arial Hebrew","Arial MT","Arial Narrow","Arial Rounded MT Bold","Arial Unicode MS","Bitstream Vera Sans Mono","Book Antiqua","Bookman Old Style","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Comic Sans","Comic Sans MS","Consolas","Courier","Courier New","Geneva","Georgia","Helvetica","Helvetica Neue","Impact","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","LUCIDA GRANDE","Lucida Handwriting","Lucida Sans","Lucida Sans Typewriter","Lucida Sans Unicode","Microsoft Sans Serif","Monaco","Monotype Corsiva","MS Gothic","MS Outlook","MS PGothic","MS Reference Sans Serif","MS Sans Serif","MS Serif","MYRIAD","MYRIAD PRO","Palatino","Palatino Linotype","Segoe Print","Segoe Script","Segoe UI","Segoe UI Light","Segoe UI Semibold","Segoe UI Symbol","Tahoma","Times","Times New Roman","Times New Roman PS","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3","Abadi MT Condensed Light","Academy Engraved LET","ADOBE CASLON PRO","Adobe Garamond","ADOBE GARAMOND PRO","Agency FB","Aharoni","Albertus Extra Bold","Albertus Medium","Algerian","Amazone BT","American Typewriter","American Typewriter Condensed","AmerType Md BT","Andalus","Angsana New","AngsanaUPC","Antique Olive","Aparajita","Apple Chancery","Apple Color Emoji","Apple SD Gothic Neo","Arabic Typesetting","ARCHER","ARNO PRO","Arrus BT","Aurora Cn BT","AvantGarde Bk BT","AvantGarde Md BT","AVENIR","Ayuthaya","Bandy","Bangla Sangam MN","Bank Gothic","BankGothic Md BT","Baskerville","Baskerville Old Face","Batang","BatangChe","Bauer Bodoni","Bauhaus 93","Bazooka","Bell MT","Bembo","Benguiat Bk BT","Berlin Sans FB","Berlin Sans FB Demi","Bernard MT Condensed","BernhardFashion BT","BernhardMod BT","Big Caslon","BinnerD","Blackadder ITC","BlairMdITC TT","Bodoni 72","Bodoni 72 Oldstyle","Bodoni 72 Smallcaps","Bodoni MT","Bodoni MT Black","Bodoni MT Condensed","Bodoni MT Poster Compressed","Bookshelf Symbol 7","Boulder","Bradley Hand","Bradley Hand ITC","Bremen Bd BT","Britannic Bold","Broadway","Browallia New","BrowalliaUPC","Brush Script MT","Californian FB","Calisto MT","Calligrapher","Candara","CaslonOpnface BT","Castellar","Centaur","Cezanne","CG Omega","CG Times","Chalkboard","Chalkboard SE","Chalkduster","Charlesworth","Charter Bd BT","Charter BT","Chaucer","ChelthmITC Bk BT","Chiller","Clarendon","Clarendon Condensed","CloisterBlack BT","Cochin","Colonna MT","Constantia","Cooper Black","Copperplate","Copperplate Gothic","Copperplate Gothic Bold","Copperplate Gothic Light","CopperplGoth Bd BT","Corbel","Cordia New","CordiaUPC","Cornerstone","Coronet","Cuckoo","Curlz MT","DaunPenh","Dauphin","David","DB LCD Temp","DELICIOUS","Denmark","DFKai-SB","Didot","DilleniaUPC","DIN","DokChampa","Dotum","DotumChe","Ebrima","Edwardian Script ITC","Elephant","English 111 Vivace BT","Engravers MT","EngraversGothic BT","Eras Bold ITC","Eras Demi ITC","Eras Light ITC","Eras Medium ITC","EucrosiaUPC","Euphemia","Euphemia UCAS","EUROSTILE","Exotc350 Bd BT","FangSong","Felix Titling","Fixedsys","FONTIN","Footlight MT Light","Forte","FrankRuehl","Fransiscan","Freefrm721 Blk BT","FreesiaUPC","Freestyle Script","French Script MT","FrnkGothITC Bk BT","Fruitger","FRUTIGER","Futura","Futura Bk BT","Futura Lt BT","Futura Md BT","Futura ZBlk BT","FuturaBlack BT","Gabriola","Galliard BT","Gautami","Geeza Pro","Geometr231 BT","Geometr231 Hv BT","Geometr231 Lt BT","GeoSlab 703 Lt BT","GeoSlab 703 XBd BT","Gigi","Gill Sans","Gill Sans MT","Gill Sans MT Condensed","Gill Sans MT Ext Condensed Bold","Gill Sans Ultra Bold","Gill Sans Ultra Bold Condensed","Gisha","Gloucester MT Extra Condensed","GOTHAM","GOTHAM BOLD","Goudy Old Style","Goudy Stout","GoudyHandtooled BT","GoudyOLSt BT","Gujarati Sangam MN","Gulim","GulimChe","Gungsuh","GungsuhChe","Gurmukhi MN","Haettenschweiler","Harlow Solid Italic","Harrington","Heather","Heiti SC","Heiti TC","HELV","Herald","High Tower Text","Hiragino Kaku Gothic ProN","Hiragino Mincho ProN","Hoefler Text","Humanst 521 Cn BT","Humanst521 BT","Humanst521 Lt BT","Imprint MT Shadow","Incised901 Bd BT","Incised901 BT","Incised901 Lt BT","INCONSOLATA","Informal Roman","Informal011 BT","INTERSTATE","IrisUPC","Iskoola Pota","JasmineUPC","Jazz LET","Jenson","Jester","Jokerman","Juice ITC","Kabel Bk BT","Kabel Ult BT","Kailasa","KaiTi","Kalinga","Kannada Sangam MN","Kartika","Kaufmann Bd BT","Kaufmann BT","Khmer UI","KodchiangUPC","Kokila","Korinna BT","Kristen ITC","Krungthep","Kunstler Script","Lao UI","Latha","Leelawadee","Letter Gothic","Levenim MT","LilyUPC","Lithograph","Lithograph Light","Long Island","Lydian BT","Magneto","Maiandra GD","Malayalam Sangam MN","Malgun Gothic","Mangal","Marigold","Marion","Marker Felt","Market","Marlett","Matisse ITC","Matura MT Script Capitals","Meiryo","Meiryo UI","Microsoft Himalaya","Microsoft JhengHei","Microsoft New Tai Lue","Microsoft PhagsPa","Microsoft Tai Le","Microsoft Uighur","Microsoft YaHei","Microsoft Yi Baiti","MingLiU","MingLiU_HKSCS","MingLiU_HKSCS-ExtB","MingLiU-ExtB","Minion","Minion Pro","Miriam","Miriam Fixed","Mistral","Modern","Modern No. 20","Mona Lisa Solid ITC TT","Mongolian Baiti","MONO","MoolBoran","Mrs Eaves","MS LineDraw","MS Mincho","MS PMincho","MS Reference Specialty","MS UI Gothic","MT Extra","MUSEO","MV Boli","Nadeem","Narkisim","NEVIS","News Gothic","News GothicMT","NewsGoth BT","Niagara Engraved","Niagara Solid","Noteworthy","NSimSun","Nyala","OCR A Extended","Old Century","Old English Text MT","Onyx","Onyx BT","OPTIMA","Oriya Sangam MN","OSAKA","OzHandicraft BT","Palace Script MT","Papyrus","Parchment","Party LET","Pegasus","Perpetua","Perpetua Titling MT","PetitaBold","Pickwick","Plantagenet Cherokee","Playbill","PMingLiU","PMingLiU-ExtB","Poor Richard","Poster","PosterBodoni BT","PRINCETOWN LET","Pristina","PTBarnum BT","Pythagoras","Raavi","Rage Italic","Ravie","Ribbon131 Bd BT","Rockwell","Rockwell Condensed","Rockwell Extra Bold","Rod","Roman","Sakkal Majalla","Santa Fe LET","Savoye LET","Sceptre","Script","Script MT Bold","SCRIPTINA","Serifa","Serifa BT","Serifa Th BT","ShelleyVolante BT","Sherwood","Shonar Bangla","Showcard Gothic","Shruti","Signboard","SILKSCREEN","SimHei","Simplified Arabic","Simplified Arabic Fixed","SimSun","SimSun-ExtB","Sinhala Sangam MN","Sketch Rockwell","Skia","Small Fonts","Snap ITC","Snell Roundhand","Socket","Souvenir Lt BT","Staccato222 BT","Steamer","Stencil","Storybook","Styllo","Subway","Swis721 BlkEx BT","Swiss911 XCm BT","Sylfaen","Synchro LET","System","Tamil Sangam MN","Technical","Teletype","Telugu Sangam MN","Tempus Sans ITC","Terminal","Thonburi","Traditional Arabic","Trajan","TRAJAN PRO","Tristan","Tubular","Tunga","Tw Cen MT","Tw Cen MT Condensed","Tw Cen MT Condensed Extra Bold","TypoUpright BT","Unicorn","Univers","Univers CE 55 Medium","Univers Condensed","Utsaah","Vagabond","Vani","Vijaya","Viner Hand ITC","VisualUI","Vivaldi","Vladimir Script","Vrinda","Westminster","WHITNEY","Wide Latin","ZapfEllipt BT","ZapfHumnst BT","ZapfHumnst Dm BT","Zapfino","Zurich BlkEx BT","Zurich Ex BT","ZWAdobeF"],function(){for(var e=function(){var e,n=document.getElementsByTagName("head")[0],i=document.createElement("span"),o=(i.style.fontSize="72px",i.innerHTML="mmmmmmmmmmlli",{}),r={};for(e in t)i.style.fontFamily=t[e],n.appendChild(i),o[t[e]]=i.offsetWidth,r[t[e]]=i.offsetHeight,n.removeChild(i);return{detect:function(e){var a,s=!1;for(a in t){i.style.fontFamily=e+","+t[a],n.appendChild(i);var c=i.offsetWidth!==o[t[a]]||i.offsetHeight!==r[t[a]];n.removeChild(i),s=s||c}return s}}}(),i=n,o="",r=0;r<i.length;r++)o+=e.detect(i[r])?"1":"0";return o}())+function(){var e=document.createElement("canvas"),t=(e.width=256,e.height=128,e.getContext("webgl2")||e.getContext("experimental-webgl2")||e.getContext("webgl")||e.getContext("experimental-webgl")||e.getContext("moz-webgl")),n=function(){var e="";try{var n=t.createBuffer(),i=(t.bindBuffer(t.ARRAY_BUFFER,n),new Float32Array([-.2,-.9,0,.4,-.26,0,0,.7321,0])),o=(t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),n.itemSize=3,n.numItems=3,t.createProgram()),r=t.createShader(t.VERTEX_SHADER),a=(t.shaderSource(r,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}"),t.compileShader(r),t.createShader(t.FRAGMENT_SHADER)),s=(t.shaderSource(a,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}"),t.compileShader(a),t.attachShader(o,r),t.attachShader(o,a),t.linkProgram(o),t.useProgram(o),o.vertexPosAttrib=t.getAttribLocation(o,"attrVertex"),o.offsetUniform=t.getUniformLocation(o,"uniformOffset"),t.enableVertexAttribArray(o.vertexPosArray),t.vertexAttribPointer(o.vertexPosAttrib,n.itemSize,t.FLOAT,!1,0,0),t.uniform2f(o.offsetUniform,1,1),t.drawArrays(t.TRIANGLE_STRIP,0,n.numItems),new Uint8Array(131072));t.readPixels(0,0,256,128,t.RGBA,t.UNSIGNED_BYTE,s),e=JSON.stringify(s).replace(/,?"[0-9]+":/g,"")}catch(e){console.warn("fAid error: getwebGlHash-getWebglImageHash",e)}return e}(),i=function(){var e,n,i="";try{var o=null==t?void 0:t.getExtension("WEBGL_debug_renderer_info");i=(null==t?void 0:t.getParameter(o.UNMASKED_VENDOR_WEBGL))+(null==t?void 0:t.getParameter(o.UNMASKED_RENDERER_WEBGL))}catch(i){console.warn("fAid error: getwebGlHash-getWebglReportHash-vendor&renderer info",i)}o="";try{var r=function(e){return t.clearColor(0,0,0,1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),"["+e[0]+", "+e[1]+"]"},a=[];a.push("extensions:"+(t.getSupportedExtensions()||[]).join(";")),a.push("webgl aliased line width range:"+r(t.getParameter(t.ALIASED_LINE_WIDTH_RANGE))),a.push("webgl aliased point size range:"+r(t.getParameter(t.ALIASED_POINT_SIZE_RANGE))),a.push("webgl alpha bits:"+t.getParameter(t.ALPHA_BITS)),a.push("webgl antialiasing:"+(t.getContextAttributes().antialias?"yes":"no")),a.push("webgl blue bits:"+t.getParameter(t.BLUE_BITS)),a.push("webgl depth bits:"+t.getParameter(t.DEPTH_BITS)),a.push("webgl green bits:"+t.getParameter(t.GREEN_BITS)),a.push("webgl max anisotropy:"+((n=(e=t).getExtension("EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic"))?0===(e=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT))?2:e:null)),a.push("webgl max combined texture image units:"+t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),a.push("webgl max cube map texture size:"+t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE)),a.push("webgl max fragment uniform vectors:"+t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS)),a.push("webgl max render buffer size:"+t.getParameter(t.MAX_RENDERBUFFER_SIZE)),a.push("webgl max texture image units:"+t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)),a.push("webgl max texture size:"+t.getParameter(t.MAX_TEXTURE_SIZE)),a.push("webgl max varying vectors:"+t.getParameter(t.MAX_VARYING_VECTORS)),a.push("webgl max vertex attribs:"+t.getParameter(t.MAX_VERTEX_ATTRIBS)),a.push("webgl max vertex texture image units:"+t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)),a.push("webgl max vertex uniform vectors:"+t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS)),a.push("webgl max viewport dims:"+r(t.getParameter(t.MAX_VIEWPORT_DIMS))),a.push("webgl red bits:"+t.getParameter(t.RED_BITS)),a.push("webgl renderer:"+t.getParameter(t.RENDERER)),a.push("webgl shading language version:"+t.getParameter(t.SHADING_LANGUAGE_VERSION)),a.push("webgl stencil bits:"+t.getParameter(t.STENCIL_BITS)),a.push("webgl vendor:"+t.getParameter(t.VENDOR)),o=a.join("*")||""}catch(i){console.warn("fAid error: getwebGlHash-getWebglReportHash-vendor&renderer info",i)}return i+o}(),o="";try{o=Gt(n+i)}catch(e){console.warn("fAid error: getwebGlHash-hashTo32",e)}return o}()}();return t=Gt(e),n=0,"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".split("").map((function(e){return"x"===e?t[n++]:e})).join("")}catch(e){console.warn(e)}var t,n,i,o,r;return""}()||l(),window.localStorage.setItem("AEGIS_FINGER_ID",n)),this.fId=n}catch(e){console.warn(e)}},onNewAegis:function(e){e.bean.fId=this.fId,e.config.fId=this.fId}})),$t=new xe({name:m.PV,init:function(e){var t;null!=(t=null==(t=e.config)?void 0:t.plugin)&&t.spa||this.publish({msg:"pv",type:d.PV},e)}}),en=!1,tn=[],nn=/^\/[^/]/,on=!1,rn=[],an=(new xe({name:m.API}),new xe({name:m.API,pipes:["repeatLimit","networkRefresh"],override:!1,onNewAegis:function(e){var t,n=((null==(n=null==e?void 0:e.config)?void 0:n.plugin)||{}).api;null!=n&&n.injectTraceHeader&&(this.traceRequestHeader=new L(n.injectTraceHeader,null!=(t=null==n?void 0:n.injectTraceIgnoreUrls)?t:[],null==n?void 0:n.injectTraceUrls)),this.overrideFetch(e.config,e),this.overrideXhr(e.config,e)},getRequestType:function(e,t,n){var i;return void 0===t&&(t=""),e="function"==typeof(null==(e=null==(e=e.plugin)?void 0:e.api)?void 0:e.resourceTypeHandler)?null==e?void 0:e.resourceTypeHandler(n):"",-1===S.indexOf(e)&&(i=void 0===t?"":t,t=(void 0===n?"":n).split("?")[0],e=Z.test(t)||J.some((function(e){return-1!==String(i).indexOf(e)}))?"static":"fetch"),e},overrideFetch:function(e,t){var n,i,o=this,r=((null==e?void 0:e.plugin)||{}).api;r={name:e.id,traceRequestHeader:null!=r&&r.injectTraceHeader?this.traceRequestHeader:null,then:function(n,i,r,a){var s,c;z(r,V(e,"hostUrl.url"))||(s=n.headers?n.headers.get("content-type"):"","fetch"===(c=o.getRequestType(e,s,r))&&n.clone().text().then((function(s){var l=n.status<=0||400<=n.status,h=null==(h=e.plugin)?void 0:h.api,f=(null==h?void 0:h.reqHeaders)||[],p=Vt(null==a?void 0:a.headers,f,"req"),v=(f=(null==h?void 0:h.resHeaders)||[],Vt(n.headers,f,"res")),g=(f=k(null==a?void 0:a.headers))[0],y=f[1],m=(f=function(e,t,n){var i,o;try{if("function"==typeof(null==t?void 0:t.retCodeHandler))return{code:void 0===(r=(o=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx,null==n?void 0:n.payload)||{}).code)?"unknown":r,isErr:o.isErr};if(!(e="string"==typeof e?JSON.parse(e):e))return{code:"unknown",isErr:!1};"function"==typeof(null==(i=null==t?void 0:t.ret)?void 0:i.join)&&($=[].concat(t.ret.map((function(e){return e.toLowerCase()}))));var r,a=Object.getOwnPropertyNames(e).filter((function(e){return-1!==$.indexOf(e.toLowerCase())}));return a.length?{code:""+(r="未知"!==(r=e[a[0]])&&""!==r?r:"unknown"),isErr:0!==r&&"0"!==r&&"unknown"!==r}:{code:"unknown",isErr:!1}}catch(e){return{code:"unknown",isErr:!1}}}(s,h,{url:r,ctx:n,payload:null==a?void 0:a.body}),f.code),E=f.isErr,b=(f=null==h?void 0:h.apiDetail)?F(null==a?void 0:a.body,null==h?void 0:h.reqParamHandler,{url:r}):"",T=f?F(s,null==h?void 0:h.resBodyHandler,{url:r,ctx:n}):"";setTimeout((function(){var s=(S=o.getPerformanceEntryByUrl(e,{url:r,duration:i,requestType:c,status:n.status||0,method:(null==a?void 0:a.method)||"get"})).duration,h=S.nextHopProtocol,f=S.domainLookup,S=S.connectTime,x=""+(l?"FETCH_ERROR":K(r,T,n.status,m));o.publish({msg:x,errorMsg:l||E?r+","+m:void 0,url:r,status:n.status,duration:s,method:(null==a?void 0:a.method)||"get",ret:m,isErr:E,param:b,data:T,reqHeaders:p,resHeaders:v,level:l?u.AJAX_ERROR:E?u.ERROR:u.INFO,type:d.API,trace:g,span:y,nextHopProtocol:h,domainLookup:f,connectTime:S},t)}),0)})))},catch:function(n,i,r,a){var s,c,l,h,f,p,v;throw z(r,V(e,"hostUrl.url"))||(s=o.getRequestType(e,"",r),h=(null==(c=null==(c=e.plugin)?void 0:c.api)?void 0:c.reqHeaders)||[],l=Vt(null==a?void 0:a.headers,h,"req"),h=k(null==a?void 0:a.headers),f=h[0],p=h[1],v=null!=c&&c.apiDetail?F(null==a?void 0:a.body,null==c?void 0:c.reqParamHandler,{url:r}):"",setTimeout((function(){var n=(y=o.getPerformanceEntryByUrl(e,{url:r,duration:i,requestType:s,status:0,method:(null==a?void 0:a.method)||"get"})).duration,c=y.method,h=y.nextHopProtocol,g=y.domainLookup,y=y.connectTime;o.publish({msg:"AJAX_ERROR: url: "+r+"\nresdata: \nstatus: 0\nretcode: -400\n ",errorMsg:r+",0",url:r,status:0,duration:n,method:c,param:v,reqHeaders:l,level:u.AJAX_ERROR,type:d.API,code:-400,trace:f,span:p,nextHopProtocol:h,domainLookup:g,connectTime:y},t)}),0)),n}},this.hackFetchOptions=r,n=this.hackFetchOptions,void 0===i&&(i=/\.flv(\?|$)/i),rn.find((function(e){return e.name===n.name}))||(rn.push(n),!on&&window.fetch&&(on=!0,Yt=window.fetch,window.fetch=function(e,t){void 0===t&&(t={});var o="string"==typeof e?e:null==e?void 0:e.url;if(null!=(c=null==i?void 0:i.test)&&c.call(i,o))return Yt(o,t);nn.test(o)&&(o=""+location.origin+o);var r,a,s,c=(n||{}).traceRequestHeader;c&&(a=((null==t?void 0:t.headers)instanceof Headers?(a=null==t?void 0:t.headers.entries(),r={},Array.from(a).forEach((function(e){var t=e[0];e=e[1],r[t]=e})),r):null==t?void 0:t.headers)||{},s=(c=c.generate(o,a)||{}).name,c=c.value)&&s&&(t.headers=Object.assign(a,((a={})[s]=c,a)));for(var l=0;l<rn.length;l++){var u=rn[l];try{"function"==typeof u.beforeFetch&&u.beforeFetch(o,t)}catch(e){}}var d=Date.now();return Yt(e,t).then((function(e){for(var n=e.clone(),i=0;i<rn.length;i++){var r=rn[i];try{"function"==typeof r.then&&r.then(n,Date.now()-d,o,t)}catch(e){}}return n})).catch((function(e){for(var n=0;n<rn.length;n++){var i=rn[n];try{"function"==typeof i.catch&&i.catch(e,Date.now()-d,o,t)}catch(e){}}throw e}))}))},overrideXhr:function(e,t){var n,i=this,o=((null==e?void 0:e.plugin)||{}).api,r={traceRequestHeader:null!=o&&o.injectTraceHeader?this.traceRequestHeader:null,name:e.id,send:function(n,r){var a,s,c=Date.now(),l=(null!=o&&o.injectTraceHeader&&(a=(s=i.traceRequestHeader.generate(n.aegisUrl)||{}).name,s=s.value,a)&&s&&n.setRequestHeader(a,s),n.addEventListener("loadend",(function(){var a,s,p,v=n.aegisUrl||"",g=!(null!=o&&o.reportAbort)&&"abort"===n.failType;z(v,V(e,"hostUrl.url"))||g||(a="",(n.failType||!n.status||400<=n.status)&&(a=n.failType||"failed"),s=Date.now()-c,g=n.getResponseHeader("content-type"),p=i.getRequestType(e,g,v),setTimeout((function(){var c,g=(S=i.getPerformanceEntryByUrl(e,{url:v,duration:s,requestType:p,status:n.status,method:n.aegisMethod||"get"})).status,y=S.duration,m=S.method,E=S.nextHopProtocol,b=S.domainLookup,T=S.connectTime;if("fetch"===p){var S=(null==o?void 0:o.reqHeaders)||[],x=Vt(n.aegisXhrReqHeader,S,"req"),O=(S=(null==o?void 0:o.resHeaders)||[],n.getAllResponseHeaders().split("\r\n").reduce((function(e,t){return(t=t.split(": "))[0]&&t[1]&&(e[t[0]]=t[1]),e}),{})),w=Vt(O,S,"res"),_=(O=k(n.aegisXhrReqHeader))[0],C=O[1],A=(S=null==o?void 0:o.apiDetail)?F(r,null==o?void 0:o.reqParamHandler,{url:v}):"",R=S?F(n.response,null==o?void 0:o.resBodyHandler,{url:v}):"";try{!function(e,t,n,i){var o,r,a,s;try{if("function"==typeof(null==t?void 0:t.retCodeHandlerAsync))return t.retCodeHandlerAsync(e,null==n?void 0:n.url,null==n?void 0:n.ctx,(function(e){var t=e.code;e=e.isErr,null!=i&&i({code:void 0===t?"unknown":t,isErr:e})}));if("function"==typeof(null==t?void 0:t.retCodeHandler))return a=(r=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx,null==n?void 0:n.payload)||{}).code,s=r.isErr,null!=i&&i({code:void 0===a?"unknown":a,isErr:s});if(!(e="string"==typeof e?JSON.parse(e):e))return null!=i&&i({code:"unknown",isErr:!1});"function"==typeof(null==(o=null==t?void 0:t.ret)?void 0:o.join)&&($=[].concat(t.ret.map((function(e){return e.toLowerCase()}))));var c=Object.getOwnPropertyNames(e).filter((function(e){return-1!==$.indexOf(e.toLowerCase())}));if(c.length)return"未知"!==(a=e[c[0]])&&""!==a||(a="unknown"),null!=i&&i({code:""+a,isErr:0!==a&&"0"!==a&&"unknown"!==a});null!=i&&i({code:"unknown",isErr:!1})}catch(e){null!=i&&i({code:"unknown",isErr:!1})}}(n.response,null==(c=e.plugin)?void 0:c.api,{url:v,ctx:n,payload:r},(function(e){var n=e.code,o=(e=e.isErr,a?"AJAX_ERROR: request "+a:K(v,R,g,n));i.publish({msg:o,url:v,status:g,duration:y,method:m,param:A,data:R,reqHeaders:x,resHeaders:w,level:a?u.AJAX_ERROR:e?u.ERROR:u.INFO,ret:n,isErr:e,trace:_,span:C,type:d.API,nextHopProtocol:E,domainLookup:b,connectTime:T},t)}))}catch(c){}}n.removeEventListener("abort",l),n.removeEventListener("error",h),n.removeEventListener("timeout",f)}),0))})),function(){n.failType="abort"}),h=function(){n.failType="error"},f=function(){n.failType="timeout"};n.addEventListener("abort",l),n.addEventListener("error",h),n.addEventListener("timeout",f)}};this.hackXHROptions=r,n=this.hackXHROptions,tn.find((function(e){return e.name===n.name}))||(tn.push(n),!en&&window.XMLHttpRequest&&(Kt=window.XMLHttpRequest.prototype.send,qt=window.XMLHttpRequest.prototype.open,Qt=window.XMLHttpRequest.prototype.setRequestHeader,en=!0,window.XMLHttpRequest.prototype.open=function(){this.aegisMethod=arguments[0];var e=arguments[1];if(nn.test(e)&&(e=""+location.origin+e),this.aegisUrl=e,this.aegisXhrStartTime=Date.now(),this.sendByAegis)Wt.isIE()||(this.timeout=5e3);else for(var t=0;t<tn.length;t++){var n=tn[t];try{"function"==typeof n.open&&n.open(this)}catch(e){}}return qt.apply(this,arguments)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var e,t=arguments[0],i=arguments[1];if(this.aegisXhrReqHeader=null!=(e=this.aegisXhrReqHeader)?e:{},!(null!=n&&n.traceRequestHeader&&-1<["traceparent","b3","sw8","sentry-trace"].indexOf(t)&&(this.aegisXhrReqHeader[t]||(arguments[1]=i),this.aegisXhrReqHeader[t])))return this.aegisXhrReqHeader[t]=arguments[1],Qt.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<tn.length;e++){var t=tn[e];try{"function"==typeof t.send&&t.send(this,arguments[0])}catch(e){}}return Kt.apply(this,arguments)}))},getPerformanceEntryByUrl:function(e,t){if("string"==typeof t.url){var n=null==(n=performance.getEntriesByName(t.url))?void 0:n.pop();if(n)return{msg:"api",type:d.API,url:t.url,isHttps:j(t.url),method:t.method,requestType:t.requestType,status:t.status,duration:Number(n.duration.toFixed(2)),nextHopProtocol:n.nextHopProtocol||"",domainLookup:B(n.domainLookupEnd-n.domainLookupStart),connectTime:B(n.connectEnd-n.connectStart)}}return{msg:"api",type:d.API,url:t.url,isHttps:j(t.url),method:t.method,requestType:t.requestType,status:t.status,duration:Number(t.duration.toFixed(2)),nextHopProtocol:"",domainLookup:R.number,connectTime:R.number}},destroy:function(){var e,t,n;this.publish=function(){},this.hackXHROptions&&(e=this.hackXHROptions,-1!==(n=tn.findIndex((function(t){return t.name===e.name}))))&&tn.splice(n,1),this.hackFetchOptions&&(t=this.hackFetchOptions,-1!==(n=rn.findIndex((function(e){return e.name===t.name}))))&&rn.splice(n,1),this.override=!1}}));function sn(e,t,n){var i,o,r,a,s,c=n.before,l=n.after;return a=(i=e)[o=t],r=a,s=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return c&&c.apply(this,t),"function"==typeof r&&(e=r.apply(this,t)),l&&l.apply(this,[e]),e},i[o]=u,{stop:function(){i[o]===u?i[o]=a:s=a}};function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("function"==typeof s)return s.apply(this,e)}}function cn(e){return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e}({},e)}function ln(){return(new Date).getTime()}function un(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}(hn=Xt=Xt||{}).INITIAL_LOAD="initial_load",hn.ROUTE_CHANGE="route_change",fn.prototype.subscribe=function(e){var t=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe(this)||void 0),this.observers.push(e),{unsubscribe:function(){t.observers=t.observers.filter((function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},fn.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))};var dn=fn,hn=new xe({name:m.SESSION,aid:"",onNewAegis:function(e){var t,n,i,r,a,s=this,c=(e.event.on(y.sampleChange,(function(){Math.random()>e.sampleMap[m.SESSION]&&s.stopSessionPlugin()})),function(t,n){s.publishSessionDataWithAegis(t,n,e)}),l=function(e){function t(e){void 0===e&&(e=!1),c=ln(),l=ln()+9e5,a(e),o=setInterval(i,1e3)}function n(){u()?l=ln()+9e5:t(!0)}function i(){u()||(s(),clearInterval(o))}var o,r,a=e.onCreateOrRebuild,s=e.onExpire,c=ln(),l=ln()+9e5,u=function(){return ln()-Number(c)<144e5&&ln()<Number(l)};return t(),(r=["click","touchstart","keydown","scroll"]).forEach((function(e){return window.addEventListener.call(window,e,n,!0)})),function(){clearInterval(o),r.forEach((function(e){return window.removeEventListener.call(window,e,n)}))}}({onCreateOrRebuild:function(t){e.updateSnapshootInfo({session:{id:_.generateTraceId()}}),c("session",!0),t&&(e.updateSnapshootInfo({view:{id:_.generateSpanId(),loading_type:Xt.INITIAL_LOAD,view_name:document.title,view_url:window.location.href,referrer:""}}),c("view",!0))},onExpire:function(){t(),e.updateSnapshootInfo({session:void 0,view:void 0,action:void 0})}}),u=function(e){var t=e.onStart,n=e.onChange;function i(){var e,t,i,o;c.href!==window.location.href&&(i=e=cn(window.location),(t=c).pathname===i.pathname&&(o=i.hash,document.getElementById(o.substring(1))||un(i.hash)===un(t.hash))||(n(c,e),c=cn(e)))}t();var o,r,a,s,c=cn(window.location),l=(o=i,window.addEventListener("hashchange",o),function(){window.removeEventListener("hashchange",o)}),u=(r=i,a=sn(history,"pushState",{after:r}).stop,s=sn(history,"replaceState",{after:r}).stop,window.addEventListener("popstate",r),function(){a(),s(),window.removeEventListener("popstate",r)});return function(){l(),u()}}({onStart:function(){e.updateSnapshootInfo({view:{id:_.generateSpanId(),loading_type:Xt.INITIAL_LOAD,view_name:document.title,view_url:window.location.href,referrer:""}}),c("view",!0)},onChange:function(t,n){var i;null!=(i=e.snapshootInfo)&&i.action&&(c("action",!1),e.updateSnapshootInfo({action:void 0})),c("view",!1),e.updateSnapshootInfo({view:{id:_.generateSpanId(),loading_type:Xt.ROUTE_CHANGE,view_name:document.title,view_url:n.href,referer:t.href}}),c("view",!0)}}),d=(null==(d=e.config.plugin)?void 0:d.session).actionTypes,h=function(){};function f(e){var t,n,o,s,c,l,u,d,h,f,p,v,g,y,m,E,b,T,S,x,O;i()&&(l={action_type:e.type,action_name:(y=e.target,l=[function(e){return s(e)}],n=function(e){return 100<e.length?(void 0===n&&(n=""),i=55296<=(i=(t=e).charCodeAt(99))&&i<=56319?101:100,(t.length<=i?t:""+t.slice(0,i)+n)+" [...]"):e;var t,n,i},o=function(e,t){return e.ownerDocument?e.ownerDocument.getElementById(t):null},s=function(e){if(!e.isContentEditable)return"innerText"in e?e.innerText:e.textContent},c=function(){return t=void 0===t?"labels"in HTMLInputElement.prototype:t},(g=function(e,t){for(var i=e,o=0;o<=10&&i&&!["BODY","HTML","HEAD"].includes(i.nodeName);){for(var r=0,a=t;r<a.length;r++){var s=(0,a[r])(i);if("string"==typeof s&&s.trim())return n(s.trim().replace(/\s+/g," "))}if("FORM"===i.nodeName)break;i=i.parentElement,o+=1}return""})(y,[function(e){var t;if(c()){if("labels"in e&&e.labels&&0<e.labels.length)return s(e.labels[0])}else if(e.id)return(t=e.ownerDocument&&function(t){for(var n=0;n<t.length;n+=1){var i=t[n];if(i.htmlFor===e.id)return i}}(e.ownerDocument.querySelectorAll("label")))&&s(t);return""},function(e){if("INPUT"===e.nodeName){var t=e.getAttribute("type");if(["button","submit","reset"].includes(t||""))return e.value}return""},function(e){return["BUTTON","LABEL"].includes(e.nodeName)||"button"===e.getAttribute("role")?s(e):""},function(e){return e.getAttribute("aria-label")},function(e){var t=e.getAttribute("aria-labelledby");return t?t.split(/\s+/).map((function(t){return o(e,t)})).filter((function(e){return Boolean(e)})).map((function(e){return s(e)})).join(" "):""},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e){return"options"in e&&0<e.options.length?s(e.options[0]):""}])||g(y,l)||""),action_target_name:null==(y=null==(g=e.target)?void 0:g.nodeName)?void 0:y.toLowerCase()},r(l),u=a,b=!1,T=setTimeout((function(){return O()}),100),S=setTimeout((function(){return O()}),1e4),h=function(e){clearTimeout(T),clearTimeout(d),e.isBusy||(d=setTimeout((function(){O()}),100))},p=0,v=function(){h({isBusy:0<p})},e=new dn((function(e){var t;if(MutationObserver)return(t=new MutationObserver((function(){return e.notify()}))).observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return t.disconnect()}})),g=new dn((function(e){var t,n,i;return"function"==typeof(null===window||void 0===window?void 0:window.PerformanceObserver)?((t=new window.PerformanceObserver((function(){e.notify()}))).observe({entryTypes:["resource"]}),function(){t.disconnect()}):(n=performance.getEntriesByType("resource").length,i=setInterval((function(){var t=performance.getEntriesByType("resource");n<=t.length&&e.notify(),n=t.length}),100),function(){clearInterval(i),n=0})})),y={subscribe:function(e){var t=1,n=new dn((function(e){var n=sn(XMLHttpRequest.prototype,"send",{before:function(){t+=1,this.requestIndex=t,e.notify({state:"start",requestIndex:t})},after:function(){var t=this,n=function(){t.removeEventListener("loadend",n),e.notify({state:"end",requestIndex:t.requestIndex})};this.addEventListener("loadend",n)}}).stop;return function(){return n()}})).subscribe(e),i=new dn((function(e){var n=sn(window,"fetch",{before:function(){t+=1,e.notify({state:"start",requestIndex:t})},after:function(n){n.finally((function(){e.notify({state:"end",requestIndex:t})}))}}).stop;return function(){return n()}})).subscribe(e);return{unsubscribe:function(){n.unsubscribe(),i.unsubscribe()}}}},m=[e.subscribe(v),g.subscribe(v),y.subscribe((function(e){var t=e.state;e=e.requestIndex,"start"===t?(void 0===f&&(f=e),p+=1,v()):"end"!==t||void 0===f||e<f||(--p,v())}))],E=sn(window,"open",{before:v}).stop,x=function(){E(),m.forEach((function(e){return e.unsubscribe()}))},O=function(){b||(u(),b=!0,clearTimeout(T),clearTimeout(S),x())})}!1!==(d=void 0===d?["click"]:d)&&0!==d.length&&(n=d,i=(d={onBeforeStart:function(){var t;return!(null!=(t=e.snapshootInfo)&&t.action)},onStart:function(t){e.updateSnapshootInfo({action:o({id:_.generateSpanId()},t)}),c("action",!0)},onEnd:function(){var t;null!=(t=e.snapshootInfo)&&t.action&&(c("action",!1),e.updateSnapshootInfo({action:void 0}))}}).onBeforeStart,r=d.onStart,a=d.onEnd,n.forEach((function(e){window.addEventListener.call(window,e,f,!0)})),h=function(){n.forEach((function(e){window.removeEventListener.call(window,e,f)}))},t=function(){var t=(i=e.snapshootInfo).session,n=i.view,i=i.action;t&&c("session",!1),n&&c("view",!1),i&&c("action",!1)},window.addEventListener.call(window,"beforeunload",(function(){e.sendNow=!0,t()}),!0),this.stopSessionPlugin=function(){e.updateSnapshootInfo({session:void 0,view:void 0,action:void 0}),l(),u(),h()})},publishSessionDataWithAegis:function(e,t,n){this.publish({msg:e,session_type:e,is_active:t,type:d.SESSION},n)},destroy:function(){var e;null!=(e=this.stopSessionPlugin)&&e.call(this)}});function fn(e){this.onFirstSubscribe=e,this.observers=[]}return Se.use(hn),Se.use(Zt),Se.use(Oe),Se.use($t),Se.use(rt),Se.use(_e),Se.use(an),Se.use(we),Se.use(st),Se.use(Bt),Se.use(et),Se.use(Mt),Se.use(Jt),Se}();var ie=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(ne.exports);function oe(e){return e?"string"==typeof e?e:JSON.stringify(e,Object.getOwnPropertyNames(e||{}),2):""}var re=function(){return 0===ee("env_id").indexOf("sit")},ae=function(){function t(){var t,n,i=this;this.lastSSETrace="",this.aegis=new ie({id:"SDK-107ed843efa89e3ef14a",hostUrl:{url:"https://galileotelemetry.tencent.com/collect"},uid:null===(n=null===(t=null==e?void 0:e.basicClientVars)||void 0===t?void 0:t.userInfo)||void 0===n?void 0:n.tinyId,env:re()?"test":"production",plugin:{pv:!0,aid:!0,error:!1,device:!0,close:!1,pagePerformance:!1,webVitals:!1,fId:!0,ie:!0,spa:!1,api:!1,apiSpeed:!1,assetSpeed:!1},onBeforeSend:function(e){return e.map((function(e){return I(I({},e),{lastSSETrace:i.lastSSETrace})}))}.bind(this)}),setTimeout((function(){i.aegis.setConfig({extField:{aiVersion:JSON.stringify((null===window||void 0===window?void 0:window.ai_version)||{})}})}),0)}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.prototype.setLastSSETrace=function(e){this.lastSSETrace=e},t.prototype.reportError=function(e,t){void 0===t&&(t="");var n="Error:\n ".concat(oe(e),"\nInfo: ").concat(t);console.error(n),this.aegis.error(n)},t.prototype.requestStart=function(e){this.aegis.reportEvent({name:"服务端请求发送",ext1:e})},t.prototype.requestError=function(e,t,n){this.aegis.error({name:"服务端请求错误",ext1:e,ext2:t,ext3:n})},t.prototype.taskChainStart=function(){this.aegis.reportEvent("任务编排开始")},t.prototype.taskChainError=function(e,t,n){void 0===n&&(n=""),this.aegis.error({name:"任务编排失败",ext1:e,ext2:t,ext3:n})},t.prototype.docsApiStart=function(e){this.aegis.reportEvent({name:"前端 API 调用",ext1:e})},t.prototype.docsApiError=function(e,t,n){this.aegis.error({name:"前端 API 错误",ext1:e,ext2:t,ext3:n})},t.prototype.agentStart=function(e){this.aegis.reportEvent({name:"前端 Agent 调用",ext1:e})},t.prototype.agentError=function(e,t,n){this.aegis.error({name:"前端 Agent 错误",ext1:e,ext2:t,ext3:n})},t.prototype.reportTime=function(e,t){this.aegis.reportTime(e,t)},t.prototype.vegaLiteError=function(e,t){this.aegis.error({name:"vegalite 图表绘制失败",ext1:e,ext2:t})},t.prototype.vegaLiteStart=function(){this.aegis.reportEvent({name:"vegalite 图表绘制"})},t.instance=null,t}(),se=ae;var ce=function(e,t){return void 0===e&&(e=K.FAIL),void 0===t&&(t=Z[K.FAIL]),$.includes(e)?{code:e,message:t}:{code:e,message:e===K.SUCCESS?"":Z[e]||J}},le=s.a.create({timeout:3e4,baseURL:location.origin});le.interceptors.request.use((function(e){se.getInstance().requestStart(e.url);var t=te();return I(I({},e),{params:I(I({},e.params),{xsrf:t})})})),le.interceptors.response.use((function(e){var t,n=function(e){var t,n,i=e.code,o=e.cgicode,r=e.msg,a=e.message,s=L(e,["code","cgicode","msg","message"]),c=ce(null!==(t=null!=i?i:o)&&void 0!==t?t:K.SUCCESS,null!==(n=null!=r?r:a)&&void 0!==n?n:"");return I(I({},s),c)}(e.data);return 200===e.status&&n.code===K.SUCCESS?Promise.resolve(n):(se.getInstance().requestError(e.request.url,null==n?void 0:n.code,null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t["x-trace-id"]),Promise.reject(n))}),(function(e){var t;return se.getInstance().requestError(e.request.url,e.code,null===(t=null==e?void 0:e.headers)||void 0===t?void 0:t["x-trace-id"]),Promise.reject({code:K.FAIL,message:Z[K.FAIL]})}));var ue;function de(e,t){return N(this,void 0,void 0,(function(){return B(this,(function(n){switch(n.label){case 0:return[4,le.post("/api/ai/v1/copilot/actions",e,t)];case 1:return[2,n.sent().result]}}))}))}!function(e){e[e.SHEET_EDITS=1001]="SHEET_EDITS",e[e.SHEET_SUMMARY=1002]="SHEET_SUMMARY",e[e.SHEET_IMAGE_GENERATION=1003]="SHEET_IMAGE_GENERATION",e[e.SHEET_FORMULA_GENERATION=1004]="SHEET_FORMULA_GENERATION"}(ue||(ue={}));var he,fe=function(e,t){var n,i=t.values(),o=e.replace(/{\w+}/g,(function(){return i.next().value}));return null===(n=i.return)||void 0===n||n.call(i),o},pe="/api/aiplatform/authorization";!function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LIKE=1]="LIKE",e[e.DISLIKE=2]="DISLIKE"}(he||(he={}));var ve,ge=function(e){return N(void 0,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,le.post(pe,{authorized:e?1:0})];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}}))}))},ye=function(e,t){var n=t.messageId,i=t.conversationId,o=t.fileId,r=t.sheetId;return N(void 0,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,le.post(fe("/v1/ai/copilot/conversations/{conversation_id}/message/{message_id}/feedback",[i,n]),{voteStatus:e,fileId:o,sheetId:r})];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}}))}))};!function(e){e[e.AI=1]="AI"}(ve||(ve={}));var me,Ee;!function(e){e[e.InvalidObj=0]="InvalidObj",e[e.General=1]="General",e[e.File=2]="File",e[e.Folder=3]="Folder",e[e.Element=4]="Element"}(me||(me={})),function(e){e[e.PrivateAccess=0]="PrivateAccess",e[e.DesignatedPeople=1]="DesignatedPeople",e[e.EveryOneReadable=2]="EveryOneReadable",e[e.EveryOneEditable=3]="EveryOneEditable",e[e.EveryOneExecutable=4]="EveryOneExecutable"}(Ee||(Ee={}));var be,Te,Se,xe=re()?"tdocs_ai_admin_test":"tdocs_ai_admin",Oe=s.a.create({timeout:3e4,baseURL:"https://cache.wuji.qq.com/x/api/wuji_cache"});Oe.interceptors.request.use((function(e){return I(I({},e),{params:I(I({},e.params),{appid:xe})})})),Oe.interceptors.response.use((function(e){return 200===e.status?Promise.resolve(e.data):Promise.reject(e)}),(function(){return Promise.reject({code:K.FAIL,message:Z[K.FAIL]})})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.CREATE_DOC=1]="CREATE_DOC",e[e.CREATE_SLIDE=2]="CREATE_SLIDE",e[e.CREATE_SHEET=3]="CREATE_SHEET",e[e.CREATE_FORM=4]="CREATE_FORM",e[e.CREATE_MIND_MAP=5]="CREATE_MIND_MAP",e[e.CREATE_SMART_CANVAS=6]="CREATE_SMART_CANVAS",e[e.CREATE_SMART_SHEET=7]="CREATE_SMART_SHEET",e[e.CREATE_RESUME=8]="CREATE_RESUME",e[e.CREATE_FLOW_CHART=9]="CREATE_FLOW_CHART",e[e.CREATE_FLOW_PDF=10]="CREATE_FLOW_PDF",e[e.REWRITE=11]="REWRITE",e[e.SHEET_EDIT=12]="SHEET_EDIT",e[e.SHEET_CREATE_FORMULA=13]="SHEET_CREATE_FORMULA",e[e.SHEET_CREATE_IMAGE=14]="SHEET_CREATE_IMAGE",e[e.SHEET_SUMMARIZE=15]="SHEET_SUMMARIZE",e[e.GENERATION_DOCUMENT_CONTENT=16]="GENERATION_DOCUMENT_CONTENT",e[e.EXPAND_MIND_NODE=17]="EXPAND_MIND_NODE",e[e.CREATE_SLIDE_SCRIPT=18]="CREATE_SLIDE_SCRIPT",e[e.FILE_QA=19]="FILE_QA",e[e.TRANSLATE=20]="TRANSLATE",e[e.URL_SUMMARY=21]="URL_SUMMARY",e[e.CREATE_UNSLICED=23]="CREATE_UNSLICED"}(be||(be={})),function(e){e[e.ACTION_TYPE_UNKNOWN=0]="ACTION_TYPE_UNKNOWN",e[e.ACTION_TYPE_RECOMMEND_INSTRUCTION=10001]="ACTION_TYPE_RECOMMEND_INSTRUCTION",e[e.ACTION_TYPE_GENERATE_IMAGE=10002]="ACTION_TYPE_GENERATE_IMAGE",e[e.ACTION_TYPE_SEARCH_IMAGE=10003]="ACTION_TYPE_SEARCH_IMAGE",e[e.ACTION_TYPE_GENERATE_DOCUMENT=10004]="ACTION_TYPE_GENERATE_DOCUMENT",e[e.ACTION_TYPE_MODIFY_CONTENT=10005]="ACTION_TYPE_MODIFY_CONTENT",e[e.ACTION_TYPE_SUMMARY_CONTENT=10006]="ACTION_TYPE_SUMMARY_CONTENT",e[e.ACTION_TYPE_TRANSLATE=10007]="ACTION_TYPE_TRANSLATE"}(Te||(Te={})),function(e){e[e.MODIFY_UNKNOWN=0]="MODIFY_UNKNOWN",e[e.MODIFY_EXPAND_CONTENT=1]="MODIFY_EXPAND_CONTENT",e[e.MODIFY_ABBREVIATION=2]="MODIFY_ABBREVIATION",e[e.MODIFY_CONTENT_FORMAL=3]="MODIFY_CONTENT_FORMAL",e[e.MODIFY_CONTENT_GOVERNMENT=4]="MODIFY_CONTENT_GOVERNMENT",e[e.MODIFY_CONTENT_LIVELY=5]="MODIFY_CONTENT_LIVELY",e[e.MODIFY_CONTENT_CONVERSATIONAL=6]="MODIFY_CONTENT_CONVERSATIONAL",e[e.MODIFY_CONTENT_REVIEW=7]="MODIFY_CONTENT_REVIEW",e[e.MODIFY_CONTENT_CONTINUE_WRITING=8]="MODIFY_CONTENT_CONTINUE_WRITING",e[e.MODIFY_CONTENT_SHOW_IN_TABLE=9]="MODIFY_CONTENT_SHOW_IN_TABLE"}(Se||(Se={}));(function(){function e(){}e.getRecommendInstruction=function(e){return N(this,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return[4,de({action_type:Te.ACTION_TYPE_RECOMMEND_INSTRUCTION,action_name:"recommend_instruction",recommend_instruction:{text:e}})];case 1:return[2,t.sent().recommend_instruction.instructions]}}))}))}})(),function(){function e(){var e=this;this.isAuthorized=!1,this.queryAIAuthorization=function(){return N(e,void 0,void 0,(function(){var e;return B(this,(function(t){switch(t.label){case 0:return[4,N(void 0,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,le.get(pe)];case 1:return[2,!!e.sent().authorized];case 2:return e.sent(),[2,!1];case 3:return[2]}}))}))];case 1:return e=t.sent(),this.setAuthorization(e),[2]}}))}))},this.updateAIAuthorization=function(t){return N(e,void 0,void 0,(function(){var e;return B(this,(function(n){switch(n.label){case 0:return[4,ge(t)];case 1:return e=n.sent(),this.setAuthorization(e),[2]}}))}))}}e.prototype.setAuthorization=function(e){this.isAuthorized=e}}();var we,_e="https://docs.qq.com";!function(){function e(){}e.getRecommendCommands=function(e,t){return function(e,t){return N(this,void 0,void 0,(function(){var n,i,o;return B(this,(function(r){switch(r.label){case 0:return[4,le.post("/v1/ai/copilot/question/recommend",e,t)];case 1:return n=r.sent(),i=n.instructions,o=L(n,["instructions"]),[2,I({commands:i},o)]}}))}))}(I(I({},e),{scene:ue.SHEET_FORMULA_GENERATION}),t)},e.sendCommand=function(e){var t={ai_command:"",ai_command_id:""};"string"==typeof e?t.ai_command=e:(null==e?void 0:e.promptText)?t.ai_command=null==e?void 0:e.promptText:(null==e?void 0:e.commandId)&&(t.ai_command_id=e.commandId),window.postMessage(t,_e)},e.listenForCommands=function(e){window.addEventListener("message",(function(t){t.origin===_e&&t.data&&(t.data.ai_command||t.data.ai_command_id)&&e({promptText:t.data.ai_command||"",commandId:t.data.ai_command_id||""})}))}}();!function(e){e[e.ACTIVITY=1]="ACTIVITY",e[e.IDENTITY=2]="IDENTITY",e[e.PURCHASE=3]="PURCHASE"}(we||(we={}));var Ce;!function(){function e(){this.isTryOutUser=!1}e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.fetchRemainTimes=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){return[2,N(void 0,void 0,void 0,(function(){return B(this,(function(e){return[2,le.post("/v2/vipcenter/right/get",{id:26})]}))}))]}))}))},e.fetchPurchasedRights=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){return[2,N(void 0,void 0,void 0,(function(){return B(this,(function(e){return[2,le.post("/v2/pay/rights/purchased",{id:26})]}))}))]}))}))},e.prototype.isTryOut=function(){var t,n;return N(this,void 0,void 0,(function(){var i,o,r;return B(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,e.fetchPurchasedRights()];case 1:return i=a.sent().result,o=null===(t=null==i?void 0:i.purchasedRights)||void 0===t?void 0:t.find((function(e){if(e.type!==we.ACTIVITY)return!0})),r=null===(n=null==i?void 0:i.purchasedRights)||void 0===n?void 0:n.find((function(e){if(e.type===we.ACTIVITY)return!0})),o?(this.isTryOutUser=!1,[2]):(this.isTryOutUser=!!r,[3,3]);case 2:return a.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.updateTryoutUser=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return this.isTryOutUser?[4,this.isTryOut()]:[2,""];case 1:return e.sent(),[2]}}))}))}}();!function(e){e.AI_SHOW="AIShow",e.AI_HIDE="AIHide"}(Ce||(Ce={}));!function(){function e(){}e.listenMessage=function(t,n){e.showCallback=t,e.hideCallback=n,window.addEventListener("message",e.handleMessage)},e.show=function(){e.postMessage(Ce.AI_SHOW)},e.hide=function(){e.postMessage(Ce.AI_HIDE)},e.postMessage=function(e){window.postMessage(e,_e)},e.handleMessage=function(t){var n,i;if(t.origin===_e){var o=t.data;o===Ce.AI_SHOW?null===(n=e.showCallback)||void 0===n||n.call(e):o===Ce.AI_HIDE&&(null===(i=e.hideCallback)||void 0===i||i.call(e))}}}();j(".feedback-success-tips {\n  position: absolute;\n  display: none;\n  flex-direction: row;\n  width: 64px;\n  height: 20px;\n  line-height: 16px;\n  align-items: center;\n  background-color: #fff;\n}\n.feedback-success-tips img {\n  width: 16px;\n  height: 16px;\n}\n.feedback-success-tips span {\n  color: rgba(0, 0, 0, 0.48);\n  font-size: 12px;\n  scale: 0.9;\n  margin-left: -2px;\n}\n.feedback-success-tips.show {\n  display: flex;\n  animation-name: tipsAnimation;\n  animation-duration: 2.5s;\n  transition-timing-function: ease-in-out;\n  animation-fill-mode: both;\n}\n@keyframes tipsAnimation {\n  0% {\n    transform: translateX(0);\n    clip-path: inset(0 100% 0 0);\n  }\n  40% {\n    transform: translateX(-100%);\n    clip-path: inset(0 0 0 0);\n  }\n  90% {\n    opacity: 1;\n    transform: translateX(-100%);\n  }\n  100% {\n    opacity: 0;\n    transform: translateX(-100%);\n  }\n}\n");var Ae=function(e){var t=e.show,n=e.position;return o.a.createElement("div",{className:"".concat(t?"show":""," feedback-success-tips"),style:I({},n)},o.a.createElement("img",{src:p.a,alt:Y("feedback.tips.done")}),o.a.createElement("span",null,Y("feedback.tips.done")))};j(".ai-feedback_tooltip-content {\n  width: 115px;\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n@keyframes fadeOutAnimation {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n.ai-feedback_tooltip-content-show {\n  position: relative;\n  overflow: hidden;\n  transition: width 0.5s ease;\n  display: flex;\n  padding: 7px 12px;\n  font-size: 12px;\n  line-height: 18px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 4px;\n  color: var(--text-ultrastrong, rgba(0, 0, 0, 0.88));\n  box-shadow: 0 6px 32px 2px rgba(68, 73, 77, 0.16), 0 4px 6px 2px rgba(0, 0, 0, 0.04);\n  word-break: break-word;\n  background-color: var(--bg-lv4-default, #fff);\n  box-sizing: unset;\n}\n.ai-feedback_tooltip-content-show_text {\n  position: absolute;\n  top: 7px;\n  left: 12px;\n  animation-name: fadeOutAnimation;\n  animation-duration: 0.5s;\n  animation-timing-function: ease;\n  animation-fill-mode: forwards;\n}\n.ai-feedback_tooltip-content-show_text-hide {\n  display: none;\n}\n.ai-feedback_tooltip-content-show_active-text {\n  position: relative;\n  z-index: 10;\n}\n.ai-feedback_tooltip-content-hide {\n  position: absolute;\n  height: 0px;\n  top: -10000px;\n}\n.ai-feedback_tooltip-content .ai-feedback_tooltip-active {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: var(--bg-lv4-default, #fff);\n}\n.ai-feedback_tooltip-content .ai-feedback_tooltip-active_smile-icon {\n  height: 16px;\n  width: 16px;\n  filter: var(--icon-invert);\n}\n");var ke,Re=function(e){var t=e.active,n=e.text,r=e.activeText,a=o.a.useRef(null),s=o.a.useRef(null),c=D(o.a.useState(!1),2),l=c[0],u=c[1],d=D(o.a.useState(void 0),2),h=d[0],f=d[1],p=D(o.a.useState(void 0),2),v=p[0],g=p[1];return Object(i.useEffect)((function(){var e,n;u(t);var i=null===(n=null===(e=a.current)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.parentElement;(null==i?void 0:i.classList.contains("dui-tooltip-content"))&&i.classList.add("feedback-tooltip_dui-cover")}),[]),Object(i.useEffect)((function(){var e,n;if(t){var i=null===(e=s.current)||void 0===e?void 0:e.offsetWidth;f(i||void 0)}else{var o=null===(n=a.current)||void 0===n?void 0:n.offsetWidth;f(o||void 0),g(o||void 0)}}),[t]),o.a.createElement("div",{className:"ai-feedback_tooltip-content"},o.a.createElement("div",{className:"ai-feedback_tooltip-content-show",style:{width:h}},o.a.createElement("span",{className:"ai-feedback_tooltip-content-show_active-text"},t&&r),o.a.createElement("span",{style:{width:v},className:"".concat(t?"ai-feedback_tooltip-content-show_text":""," ").concat(l?"ai-feedback_tooltip-content-show_text-hide":"")},n)),o.a.createElement("div",{className:"ai-feedback_tooltip-content-hide",ref:a},n),o.a.createElement("div",{className:"ai-feedback_tooltip-content-hide",ref:s},r))};j(".feedback-wrapper {\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  gap: 4px;\n}\n.feedback-wrapper .feedback-btn {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  border-radius: 2px;\n  cursor: pointer;\n  box-sizing: border-box;\n}\n.feedback-wrapper .feedback-btn img {\n  width: 24px;\n  height: 24px;\n}\n.feedback-wrapper .feedback-btn .feedback-btn_item--hide {\n  display: none;\n}\n.feedback-wrapper .feedback-btn:hover {\n  background-color: rgba(51, 77, 102, 0.06);\n}\n.dui-tooltip-container .dui-tooltip-content.feedback-tooltip_dui-cover {\n  padding: 0 12px;\n  box-shadow: none;\n  border: 1px solid transparent;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n}\n"),function(e){e.NONE="none",e.LEFT="left",e.BOTTOM="bottom"}(ke||(ke={}));var Pe=function(e){var t=e.conversationId,n=e.messageId,r=e.tipsType,a=void 0===r?ke.LEFT:r,s=e.showTooltips,l=void 0!==s&&s,u=e.onFeedbackFinished,d=e.isLike,h=e.isDislike,f=e.fileId,v=e.sheetId,y=D(Object(i.useState)(),2),E=y[0],T=y[1],x=D(Object(i.useState)(!0),2),O=x[0],w=x[1],_=D(Object(i.useState)(!1),2),C=_[0],A=_[1],k=D(Object(i.useState)(d||!1),2),R=k[0],P=k[1],I=D(Object(i.useState)(h||!1),2),L=I[0],N=I[1],B=function(e){O&&(ye(e,{conversationId:t,messageId:n,fileId:f,sheetId:v}),A(!0),T(e),w(!1),null==u||u(e),e===he.LIKE&&P(!0),e===he.DISLIKE&&N(!0))};Object(i.useEffect)((function(){C&&setTimeout((function(){A(!1)}),2500)}),[C]);var M=Object(i.useCallback)((function(e){return o.a.createElement(Re,{active:e===he.LIKE?R:L,text:Y("feedback.tips.feedback"),activeText:o.a.createElement("div",{className:"ai-feedback_tooltip-active"},o.a.createElement("img",{className:"ai-feedback_tooltip-active_smile-icon",src:p.a}),o.a.createElement("div",null,Y("feedback.tips.done")))})}),[R,L]);return Object(i.useEffect)((function(){h&&(T(he.DISLIKE),N(h),w(!1)),d&&(T(he.LIKE),P(d),w(!1))}),[h,d,E]),o.a.createElement("div",{className:"feedback-wrapper"},o.a.createElement(c.a,{disabled:!l,title:M(he.LIKE),trigger:"hover"},o.a.createElement("div",{className:"feedback-btn",onClick:function(){return B(he.LIKE)}},o.a.createElement("img",{className:E===he.LIKE?"":"feedback-btn_item--hide",src:m.a,alt:Y("feedback.options.like")}),o.a.createElement("img",{className:E!==he.LIKE?"":"feedback-btn_item--hide",src:g.a,alt:Y("feedback.options.like")}))),o.a.createElement(c.a,{disabled:!l,title:M(he.DISLIKE),trigger:"hover"},o.a.createElement("div",{className:"feedback-btn",onClick:function(){return B(he.DISLIKE)}},o.a.createElement("img",{className:E===he.DISLIKE?"":"feedback-btn_item--hide",src:S.a,alt:Y("feedback.options.dislike")}),o.a.createElement("img",{className:E!==he.DISLIKE?"":"feedback-btn_item--hide",src:b.a,alt:Y("feedback.options.dislike")}))),function(){switch(a){case ke.LEFT:var e=E===he.LIKE?{right:-16,top:2}:{right:-40,top:2};return o.a.createElement(Ae,{show:C,position:e});case ke.BOTTOM:return o.a.createElement(Ae,{show:C,position:{top:12,right:-64}});case ke.NONE:default:return o.a.createElement(o.a.Fragment,null)}}())},Ie=(function(){function e(){}e.agree=function(e){return ye(he.LIKE,e)},e.disagree=function(e){return ye(he.DISLIKE,e)},e.renderFeedback=function(e){return o.a.createElement(Pe,I({},e))}}(),"/v1/ai/history/messages"),Le=function(e){return I(I({},e),{role:e.author.role.trim(),messageStatus:x.g.FINISH})};!function(){function e(){}e.fetch=function(e){return N(this,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return[4,(n=e,N(void 0,void 0,void 0,(function(){return B(this,(function(e){return[2,le.get(Ie,{params:n})]}))})))];case 1:return[2,{messages:t.sent().messages.map(Le)}]}var n}))}))},e.commit=function(e){var t,n=e.message,i=L(e,["message"]),o=Object(O.a)(I(I({},n),{author:{role:n.role},id:void 0,display:!0}),this.filterSyncProperty);return t=I({message:o},i),N(void 0,void 0,void 0,(function(){return B(this,(function(e){return[2,le.post(Ie,t)]}))}))},e.update=function(e){var t,n;return n=I(I({},e),{message:Object(O.a)(I(I({},e.message),{author:I(I({},(null===(t=e.message)||void 0===t?void 0:t.author)||{}),{role:e.message.role})}),this.filterSyncProperty)}),N(void 0,void 0,void 0,(function(){return B(this,(function(e){return[2,le.put(fe("/v1/ai/history/messages/{message_id}",[n.message.id]),n)]}))}))},e.filterSyncProperty=M(M([],D(Array.from(Object.keys(x.b))),!1),["role"],!1)}();j(".ai-auth-modal .ai-auth-modal-title {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.ai-auth-modal .ai-auth-modal-title::before {\n  content: '';\n  display: block;\n  width: 24px;\n  height: 24px;\n  background-image: url('~@tencent/docs-design-resources/icon/mobile/png@3x/ai_newlogo_24@3x.png');\n}\n.ai-auth-modal .desc-info {\n  color: rgba(0, 0, 0, 0.88);\n  font-size: 14px;\n  margin-bottom: 22px;\n}\n.ai-auth-modal .desc-info .desc-purpose {\n  font-weight: 600;\n  user-select: none;\n}\n.ai-auth-modal .desc-info .desc-tips {\n  margin-top: 16px;\n  user-select: none;\n}\n.ai-auth-modal .scope-list {\n  margin-bottom: 22px;\n  margin-top: 16px;\n}\n.ai-auth-modal .scope-list .scope-item {\n  user-select: none;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-size: 12px;\n  line-height: 24px;\n  cursor: pointer;\n  color: rgba(0, 0, 0, 0.24);\n}\n.ai-auth-modal .scope-list .scope-item::before {\n  content: '';\n  display: block;\n  width: 16px;\n  height: 16px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width%3D%2216%22 height%3D%2216%22 viewBox%3D%220 0 16 16%22 fill%3D%22none%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath fill-rule%3D%22evenodd%22 clip-rule%3D%22evenodd%22 d%3D%22M12.9794 3.9656L14.3936 5.37981L7.79479 11.9782L7.79595 11.9793L7.51601 12.2569L6.37944 13.3934L6.37471 13.3887L4.96552 11.9795L1.66661 8.68057L3.08191 7.26527L6.38082 10.5642L12.9794 3.9656Z%22 fill%3D%22black%22 fill-opacity%3D%220.16%22%2F%3E%3C%2Fsvg%3E\");\n}\n.ai-auth-modal .scope-list .scope-item.scope-item-checked {\n  color: rgba(0, 0, 0, 0.64);\n}\n.ai-auth-modal .scope-list .scope-item.scope-item-checked::before {\n  background-image: url(\"data:image/svg+xml,%3Csvg width%3D%2216%22 height%3D%2216%22 viewBox%3D%220 0 16 16%22 fill%3D%22none%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath fill-rule%3D%22evenodd%22 clip-rule%3D%22evenodd%22 d%3D%22M12.9794 3.9656L14.3936 5.37981L7.79479 11.9782L7.79595 11.9793L7.51601 12.2569L6.37944 13.3934L6.37471 13.3887L4.96552 11.9795L1.66661 8.68057L3.08191 7.26527L6.38082 10.5642L12.9794 3.9656Z%22 fill%3D%22%231E6FFF%22%2F%3E%3C%2Fsvg%3E\");\n}\n.ai-auth-modal .policy-agree-wrapper {\n  margin-bottom: 12px;\n}\n.ai-auth-modal .policy-agree-wrapper .policy-agree-label {\n  display: block;\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.64);\n}\n.ai-auth-modal .policy-agree-wrapper .policy-agree-label .agree-link {\n  font-size: 12px;\n  margin: 0;\n  display: inline-block;\n  text-decoration: none;\n  color: #1e6fff;\n  cursor: pointer;\n}\n.ai-auth-modal .policy-agree-wrapper .policy-agree-label .agree-link:hover {\n  text-decoration: underline;\n}\n");var Ne={"view-edit-smartcanvas-content":Y("auth.scopes.view-edit-smartcanvas-content"),"view-edit-sheet-content":Y("auth.scopes.view-edit-sheet-content"),"view-edit-slide-content":Y("auth.scopes.view-edit-slide-content"),"view-edit-doc-content":Y("auth.scopes.view-edit-doc-content"),"view-edit-pdf-content":Y("auth.scopes.view-edit-pdf-content"),"view-edit-mind-content":Y("auth.scopes.view-edit-mind-content")};function Be(e){var t,n=this,r=e.onConsent,a=L(e,["onConsent"]),s=D(Object(i.useState)(!1),2),c=s[0],f=s[1],p=D(Object(i.useState)(!1),2),v=p[0],g=p[1],y=D(Object(i.useState)(Object.entries(Ne).map((function(e){var t=D(e,2);return{id:t[0],label:t[1],checked:!0}}))),2),m=y[0],E=y[1],b=function(e){Object(A.tencentDocOpenUrlForAll)({url:e})};return o.a.createElement(l.a,I({},a,{className:"ai-auth-modal",zIndex:1e4,style:{width:320},title:o.a.createElement("div",{className:"ai-auth-modal-title"},Y("auth.title")),content:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"desc-info"},o.a.createElement("div",{className:"desc-purpose"},Y("auth.desc.purpose")),o.a.createElement("div",{className:"desc-tips"},Y("auth.desc.tips"))),o.a.createElement(u.a,null),o.a.createElement("div",{className:"scope-list"},m.map((function(e){var t=e.id,n=e.checked,i=e.label;return o.a.createElement("div",{key:t,onClick:function(){return function(e){var t=m.find((function(t){return t.id===e}));t&&(t.checked=!t.checked,!t.checked&&m.every((function(e){return!e.checked}))&&m.forEach((function(e){return e.checked=!0})),E(M([],D(m),!1)))}(t)},className:"scope-item".concat(n?" scope-item-checked":"")},i)}))),o.a.createElement("div",{className:"policy-agree-wrapper"},o.a.createElement(d.a,{shape:"circle",checked:c,onChange:function(e){return f(e)},labelClickable:!1},o.a.createElement("span",{className:"policy-agree-label"},o.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return f(!c)}},Y("auth.policy.desc")),o.a.createElement("p",{className:"agree-link",onClick:function(){return b("https://docs.qq.com/doc/DZHVMdVRPS0lQeWRD?pub=1&dver=2.1.0")}},Y("auth.policy.service-agreement"))," ",o.a.createElement("p",{className:"agree-link",onClick:function(){return b("https://docs.qq.com/doc/DZG1Vd1B4bmN6cWRh?pub=1&dver=2.1.0")}},Y("auth.policy.privacy-agreement")))))),footer:(t=c&&m.every((function(e){return e.checked})),o.a.createElement(h.a,{style:{width:"100%",cursor:"pointer"},type:"primary",disabled:!t,onClick:function(){return N(n,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return v?[2]:(g(!0),[4,ge(!0)]);case 1:return e.sent()&&(null==r||r()),g(!1),[2]}}))}))}},Y("auth.options.agree")))}))}var De,Me=function(e){try{return JSON.parse(e)}catch(e){return null}};!function(e){e.CONTROL="control",e.CONTENT="content",e.REFERENCES="references",e.BUTTON="button",e.SUGGESTION="suggestion",e.FUNCTION_CALL="functionCall",e.ERROR="error",e.DONE="done",e.STOP="stop",e.DESCRIPTION="description"}(De||(De={}));var je,Fe=function(){function e(){}return e.setScenario=function(e){this.scenario=e},e.setCurrentFileId=function(e){this.currentFileId=e},e.setChannel=function(e){this.channel=e},e.call=function(e,t){return N(this,void 0,void 0,(function(){var n,i,r,a,s,c,l,u,d=this;return B(this,(function(h){var f,p,v;return n=this.getCGIPath(e),se.getInstance().requestStart(n),v=[],r=(i={stop:function(){clearInterval(f)},addTask:function(e){Array.isArray(e)?v.push.apply(v,M([],D(e),!1)):v.push(e),f&&clearInterval(f),f=setInterval((function(){try{var e=v.shift();null==e||e.cb(null==e?void 0:e.data)}catch(e){clearInterval(f)}v.length||(clearInterval(f),null==p||p())}),30)},setDown:function(e){p=e,v.length||e()}}).addTask,a=i.stop,s=i.setDown,this.stopRender=a,this.abortController=new AbortController,c=!1,this.currentTraceId="",l=function(e){se.getInstance().requestError(n,e.code,d.currentTraceId),t({type:De.ERROR,data:e})},u=Date.now(),this.fetchEventSourceWithTimeout("".concat(n,"?xsrf=").concat(te()),{headers:I({"X-AI-Scenario":this.scenario,"X-AI-Channel":this.channel},this.currentFileId?{"X-AI-File-Id":this.currentFileId}:{}),method:"POST",body:this.getBody(e),timeout:12e4,fetch:this.getFetchObject(),signal:this.abortController.signal,openWhenHidden:!0,onopen:function(n){return N(d,void 0,void 0,(function(){var i,r,a,s,d=this;return B(this,(function(h){switch(h.label){case 0:if(this.currentTraceId=null===(s=null===(a=n.headers)||void 0===a?void 0:a.get)||void 0===s?void 0:s.call(a,"X-Trace-Id"),se.getInstance().reportTime("SSE 首帧时间",Date.now()-u),se.getInstance().setLastSSETrace(this.currentTraceId),200!==n.status)return c=!0,[2,Promise.reject()];if("application/json"!==n.headers.get("content-type"))return[3,4];c=!0,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.clone().json()];case 2:return i=h.sent(),r=ce(i.code,i.message),i.code===K.UNAUTHORIZED?(function(e){var t="ai-auth-modal-container",n=document.querySelector(".".concat(t));n||((n=document.createElement("div")).className=t,document.body.appendChild(n)),C.a.render(o.a.createElement(Be,{visible:!0,onClose:function(){var t;null===(t=null==e?void 0:e.onClose)||void 0===t||t.call(e),Object(_.unmountComponentAtNode)(n)},onConsent:function(){var t;null===(t=null==e?void 0:e.onConsent)||void 0===t||t.call(e),Object(_.unmountComponentAtNode)(n)}}),n)}({onClose:function(){l(r)},onConsent:function(){d.call(e,t)}}),[2]):(l(r),[3,4]);case 3:return h.sent(),[2,Promise.reject()];case 4:return[2,Promise.resolve()]}}))}))},onmessage:function(e){var n,i,o=e.event,a=e.data,s=Me(a)||{},u=s.references,h=void 0===u?{}:u,f=s.content,p=void 0===f?{}:f,v=s.controlMessage,g=s.buttons,y=s.suggestedResponses,m=s.error,E=s.functionCall,b=s.describe,T=((n={})[De.CONTROL]=function(){return t({type:De.CONTROL,data:v})},n[De.CONTENT]=function(){return d.handleContentEvent(p,(function(e){return r({cb:function(){return t({type:De.CONTENT,data:e})}})}))},n[De.REFERENCES]=function(){return d.handleReferencesEvent(h,(function(){return t({type:De.REFERENCES,data:h})}))},n[De.BUTTON]=function(){return r({cb:function(){return t({type:De.BUTTON,data:g})}})},n[De.SUGGESTION]=function(){return r({cb:function(){return t({type:De.SUGGESTION,data:y})}})},n[De.FUNCTION_CALL]=function(){return t({type:De.FUNCTION_CALL,data:I(I({},E),{parameter:Me(E.parameter)||{}})})},n[De.DESCRIPTION]=function(){return t({type:De.DESCRIPTION,data:b||{}})},n[De.ERROR]=function(){d.stopRender(),c=!0,l(ce(null==m?void 0:m.code,null==m?void 0:m.message))},n);return null===(i=T[o])||void 0===i?void 0:i.call(T)},onerror:function(e){throw e},ontimeout:function(){c=!0,l(ce(K.TIMEOUT,"")),d.stop()},onclose:function(){s((function(){d.close(),c||t({type:De.DONE,data:null})}))}}).catch((function(e){c=!0,l(ce(K.FAIL,"")),se.getInstance().reportError(e,"sse catch")})),this.abortController.signal.addEventListener("abort",(function(){c||t({type:De.STOP,data:null})})),[2]}))}))},e.stop=function(){this.abortController&&(this.abortController.abort(),this.stopRender(),this.stopRender=null,this.close())},e.close=function(){this.abortController=null},e.stopRender=null,e.abortController=null,e.getFetchObject=function(){var e;return(null===(e=window.AI_SPACE)||void 0===e?void 0:e.fetch)||window.fetch},e.handleContentEvent=function(e,t){if(e.type===x.e.TEXT_MARKDOWN){var n=e.content,i=(void 0===n?{}:n).text;if(!i)return;(function(e){return/^.*!\[(.*?)\]\((.*?)\).*$/m.test(e)}(i)||function(e){return void 0===e&&(e=""),/```tdocs-vega-lite([\s\S]*?)```/g.test(e)}(i)||(void 0===(o=i)&&(o=""),/^\|.*\|.*\n\|[\s-]*\|[\s-]*\n\|.*\|/gm.test(o))?[i]:function(e,t){for(var n=[],i=0;i<e.length;)n.push(e.substr(i,3)),i+=3;return n}(i)).forEach((function(n){return t(I(I({},e),{content:{text:n}}))}))}else t(e);var o},e.handleReferencesEvent=function(e,t){t()},e.fetchEventSourceWithTimeout=function(e,t){var n=t.onopen,i=t.onerror,o=t.ontimeout,r=t.onclose,a=t.timeout,s=L(t,["onopen","onerror","ontimeout","onclose","timeout"]),c=setTimeout(o,a);return Object(w.a)(e,I(I({},s),{onerror:function(e){return clearTimeout(c),i(e)},onopen:function(e){return clearTimeout(c),n(e)},onclose:function(){clearTimeout(c),r()}}))},e.getCGIPath=function(e){var t,n="/v1/ai/copilot/conversations/";if("conversationId"in e)t="".concat(n).concat(e.conversationId);else{if(!("action_type"in e))return n;t="/api/ai/v1/copilot/streamactions"}return t},e.getBody=function(e){return"conversationId"in e?JSON.stringify(I(I({},e),{author:{role:x.f.USER}})):JSON.stringify(e)},e}(),He=function(){function e(){}return e.correctFormulaError=function(e){return function(e){return le.post("/api/ai/sheet/formula:error_correction",e)}(e)},e.getExplainMessageError=function(e){return N(this,void 0,void 0,(function(){return B(this,(function(t){return[2,(n=e,le.post("/api/ai/sheet/formula:explain",n))];var n}))}))},e.formulaGeneration=function(e){return new Promise((function(t,n){var i;Fe.setScenario(x.a.SHEET),Fe.setCurrentFileId(e.operatingData.fileId),Fe.call({content:{text:e.input},author:{role:x.f.USER},action:{type:be.SHEET_CREATE_FORMULA,createSheetFormula:{activeRanges:e.operatingData.activeRange}}},(function(e){switch(e.type){case De.CONTROL:var o=e.data;i=o;break;case De.BUTTON:var r=e.data.items,a=null==r?void 0:r[0].sheetInsertFormula;t({result:{formula:null==a?void 0:a.formula,explanation:null==a?void 0:a.explanation,conversationId:null==i?void 0:i.conversationId,messageId:null==i?void 0:i.messageId}});break;case De.ERROR:o=e.data,n(o);break;case De.DONE:n(null)}}))}))},e}(),Ue=(function(){function e(){}e.sheet=He}(),function(e){return N(void 0,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return[4,le.post("/api/ai/prompt/optimize",e)];case 1:return[2,t.sent()]}}))}))}),ze=(function(){function e(){}e.startPolish=function(e){return N(this,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return[4,Ue({prompt:e})];case 1:return[2,{optimizedValue:t.sent().optimizedPrompt}]}}))}))}}(),function(){function e(){}e.uploadShareInfo=function(e){return function(e){return N(void 0,void 0,void 0,(function(){return B(this,(function(t){return[2,le.post("/api/aiplatform/share",e)]}))}))}(e)}}(),k.a.getInstance());!function(e){e.SUPPORT_AI="96",e.APPLICATION_PASSED="101",e.OPEN_YELLOW_BAR="113",e.OPEN_YELLOW_BAR_SVIP="114",e.OPEN_YELLOW_BAR_STORAGE="115",e.SHOW_AI_ASSISTANT_REMAIN_TIMES="116",e.HOME_PAGE_OPEN_AI_ASSISTANT="122"}(je||(je={}));var We,Ge=function(){function e(){}return e.isSupportAI=function(){return ze.getStatusByToggleId(je.SUPPORT_AI)},e.isApplicationPassed=function(){return ze.getStatusByToggleId(je.APPLICATION_PASSED)},e.isOpenYellowBar=function(){return ze.getStatusByToggleId(je.OPEN_YELLOW_BAR)},e.isOpenYellowBarSVIP=function(){return ze.getStatusByToggleId(je.OPEN_YELLOW_BAR_SVIP)},e.isOpenYellowBarStorage=function(){return ze.getStatusByToggleId(je.OPEN_YELLOW_BAR_STORAGE)},e.isShowAIAssistantRemainTimes=function(){return ze.getStatusByToggleId(je.SHOW_AI_ASSISTANT_REMAIN_TIMES)},e.isHomePageOpenAIAssistant=function(){return this.isSupportAI()&&ze.getStatusByToggleId(je.HOME_PAGE_OPEN_AI_ASSISTANT)},e}();!function(e){e.SUPPORT_AI="96",e.APPLICATION_PASSED="101",e.OPEN_YELLOW_BAR="113",e.OPEN_YELLOW_BAR_SVIP="114",e.OPEN_YELLOW_BAR_STORAGE="115",e.SHOW_AI_ASSISTANT_REMAIN_TIMES="116",e.HOME_PAGE_OPEN_AI_ASSISTANT="122",e.ENABLE_IMAGE_GENERATION="140"}(We||(We={}));!function(){function e(){this.tdCanaryAIData=[],this.tdCanaryAIDataPromise=this.initTDCanaryAIData()}e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.initTDCanaryAIData=function(){return N(this,void 0,void 0,(function(){var e;return B(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(void 0===n&&(n=[30]),N(void 0,void 0,void 0,(function(){return B(this,(function(e){return[2,le.post("/api/frontedcfgreader/scenes_calc",{scene_ids:n})]}))})))];case 1:return e=t.sent().result,this.tdCanaryAIData=(null==e?void 0:e.strategy_toggles)||[],[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}var n}))}))},e.prototype.findSceneStatus=function(e){return 0!==this.tdCanaryAIData.length&&!!this.tdCanaryAIData.find((function(t){return t.id===e&&t.status}))},e.prototype.getStatusById=function(e){return N(this,void 0,void 0,(function(){return B(this,(function(t){switch(t.label){case 0:return[4,this.tdCanaryAIDataPromise];case 1:return t.sent(),[2,this.findSceneStatus(e)]}}))}))},e.prototype.isSupportAI=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,this.getStatusById(We.SUPPORT_AI)];case 1:return[2,e.sent()]}}))}))},e.prototype.isApplicationPassed=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,this.getStatusById(We.APPLICATION_PASSED)];case 1:return[2,e.sent()]}}))}))},e.prototype.isOpenYellowBar=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,this.getStatusById(We.OPEN_YELLOW_BAR)];case 1:return[2,e.sent()]}}))}))},e.prototype.isOpenYellowBarSVIP=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,this.getStatusById(We.OPEN_YELLOW_BAR_SVIP)];case 1:return[2,e.sent()]}}))}))},e.prototype.isOpenYellowBarStorage=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,this.getStatusById(We.OPEN_YELLOW_BAR_STORAGE)];case 1:return[2,e.sent()]}}))}))},e.prototype.isShowAIAssistantRemainTimes=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,this.getStatusById(We.SHOW_AI_ASSISTANT_REMAIN_TIMES)];case 1:return[2,e.sent()]}}))}))},e.prototype.isHomePageOpenAIAssistant=function(){return N(this,void 0,void 0,(function(){var e;return B(this,(function(t){switch(t.label){case 0:return[4,this.isSupportAI()];case 1:return(e=t.sent())?[4,this.getStatusById(We.HOME_PAGE_OPEN_AI_ASSISTANT)]:[3,3];case 2:e=t.sent(),t.label=3;case 3:return[2,e]}}))}))},e.prototype.isEnableImageGeneration=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){switch(e.label){case 0:return[4,this.getStatusById(We.ENABLE_IMAGE_GENERATION)];case 1:return[2,e.sent()]}}))}))}}();var Ve,Ke=function(e,t){return{callback:window.mqq.callback((function(n){var i=n.code,o=n.data;console.log("getHandler",n),0===i?null==e||e(o):null==t||t(n)}),!0,!0)}};!function(e){e.DISCARD="discard",e.ADJUST="adjust"}(Ve||(Ve={}));!function(){function e(){}e.getUserInput=function(){return new Promise((function(e,t){try{window.mqq.invoke("nav","ai.getUserInput",Ke(e,t))}catch(t){e({input:"",commandId:""})}}))},e.getPageTitle=function(){var e=this;return new Promise((function(t){return N(e,void 0,void 0,(function(){var e;return B(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getContextContent()];case 1:return e=n.sent(),t(null==e?void 0:e.title),[3,3];case 2:return n.sent(),t(""),[3,3];case 3:return[2]}}))}))}))},e.getContextContent=function(){return new Promise((function(e,t){try{window.mqq.invoke("nav","ai.getContextParam",Ke(e,t))}catch(t){e({docType:x.c.DOC,docId:"",title:"",content:"",prevContent:"",nextContent:""})}}))},e.getSelectedContent=function(){var e=this;return new Promise((function(t){return N(e,void 0,void 0,(function(){var e;return B(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getContextContent()];case 1:return e=n.sent(),t(null==e?void 0:e.content),[3,3];case 2:return n.sent(),t(""),[3,3];case 3:return[2]}}))}))}))},e.insertContent=function(e){var t;return N(this,void 0,void 0,(function(){return B(this,(function(n){return null===(t=window.mqq)||void 0===t||t.invoke("nav","ai.insertResult",e),[2]}))}))},e.getScreenHeight=function(){return N(this,void 0,void 0,(function(){return B(this,(function(e){return[2,new Promise((function(e,t){try{window.mqq.invoke("nav","ai.getScreenHeight",Ke(e,t))}catch(t){e({screenHeight:0})}}))]}))}))},e.setWebViewHeight=function(e){var t;return N(this,void 0,void 0,(function(){return B(this,(function(n){return null===(t=window.mqq)||void 0===t||t.invoke("nav","ai.setWebViewHeight",{height:e}),[2]}))}))},e.showModal=function(e){var t,n=e.type,i=e.options,o=e.callback;return N(this,void 0,void 0,(function(){return B(this,(function(e){return null===(t=window.mqq)||void 0===t||t.invoke("nav","ai.showModal",I({type:n,options:i},Ke(o,(function(){})))),[2]}))}))},e.closeH5AI=function(e){var t;return N(this,void 0,void 0,(function(){var n;return B(this,(function(i){switch(i.label){case 0:return[4,this.getContextContent()];case 1:return n=i.sent().docId,null===(t=window.mqq)||void 0===t||t.invoke("nav","closeH5AI",I({docId:n},Ke(e,(function(){})))),[2]}}))}))}}();j(".ai-auth-panel {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  row-gap: 12px;\n  align-self: stretch;\n}\n.ai-auth-panel__content {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  row-gap: 12px;\n  align-self: stretch;\n  font-family: 'PingFang SC';\n  font-style: normal;\n}\n.ai-auth-panel__title {\n  font-size: 17px;\n  font-weight: 500;\n  line-height: 24px;\n  color: var(--TDoc-Light-Text-text-ultrastrong, var(--text-ultrastrong, rgba(0, 0, 0, 0.88)));\n}\n.ai-auth-panel__desc {\n  font-size: 16px;\n  font-weight: 400;\n  line-height: 22px;\n}\n.ai-auth-panel .scope-list {\n  align-self: flex-start;\n}\n.ai-auth-panel .scope-list .scope-item {\n  user-select: none;\n  display: flex;\n  align-items: center;\n  column-gap: 5px;\n  font-size: 12px;\n  line-height: 24px;\n  cursor: pointer;\n  color: rgba(0, 0, 0, 0.24);\n}\n.ai-auth-panel .scope-list .scope-item::before {\n  content: '';\n  display: block;\n  width: 16px;\n  height: 16px;\n  background-image: url(\"data:image/svg+xml,%3Csvg width%3D%2216%22 height%3D%2216%22 viewBox%3D%220 0 16 16%22 fill%3D%22none%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath fill-rule%3D%22evenodd%22 clip-rule%3D%22evenodd%22 d%3D%22M12.9794 3.9656L14.3936 5.37981L7.79479 11.9782L7.79595 11.9793L7.51601 12.2569L6.37944 13.3934L6.37471 13.3887L4.96552 11.9795L1.66661 8.68057L3.08191 7.26527L6.38082 10.5642L12.9794 3.9656Z%22 fill%3D%22black%22 fill-opacity%3D%220.16%22%2F%3E%3C%2Fsvg%3E\");\n}\n.ai-auth-panel .scope-list .scope-item.scope-item-checked {\n  color: rgba(0, 0, 0, 0.64);\n}\n.ai-auth-panel .scope-list .scope-item.scope-item-checked::before {\n  background-image: url(\"data:image/svg+xml,%3Csvg width%3D%2216%22 height%3D%2216%22 viewBox%3D%220 0 16 16%22 fill%3D%22none%22 xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Cpath fill-rule%3D%22evenodd%22 clip-rule%3D%22evenodd%22 d%3D%22M12.9794 3.9656L14.3936 5.37981L7.79479 11.9782L7.79595 11.9793L7.51601 12.2569L6.37944 13.3934L6.37471 13.3887L4.96552 11.9795L1.66661 8.68057L3.08191 7.26527L6.38082 10.5642L12.9794 3.9656Z%22 fill%3D%22%231E6FFF%22%2F%3E%3C%2Fsvg%3E\");\n}\n.ai-auth-panel .policy-agree-wrapper {\n  display: flex;\n  align-items: center;\n}\n.ai-auth-panel .policy-agree-wrapper .policy-agree-label {\n  display: block;\n  font-family: 'PingFang SC';\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 20px;\n  color: var(--TDoc-Light-Text-text-strong, rgba(0, 0, 0, 0.64));\n}\n.ai-auth-panel .policy-agree-wrapper .policy-agree-label .agree-link {\n  text-decoration: none;\n  color: #1e6fff;\n  margin: 0;\n  display: inline-block;\n  font-size: 12px;\n  cursor: pointer;\n}\n.ai-auth-panel .policy-agree-wrapper .policy-agree-label .agree-link:hover {\n  text-decoration: underline;\n}\n.ai-auth-panel__button {\n  display: flex;\n  width: 200px;\n  height: 36px;\n  padding: 0;\n  justify-content: center;\n  align-items: center;\n  border-radius: 4px;\n  background: linear-gradient(257deg, #db94ff 0%, #5179ff 45.66%, #5ab0ff 100%);\n  color: var(--TDoc-Light-Text-text-white, #fff);\n  text-align: center;\n  font-feature-settings: 'init' on, 'fina' on;\n  font-family: 'PingFang SC';\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 600;\n  line-height: 20px;\n  border: 0;\n  cursor: pointer;\n}\n");var qe;Y("auth.scopes.view-edit-smartcanvas-content"),Y("auth.scopes.view-edit-sheet-content"),Y("auth.scopes.view-edit-slide-content"),Y("auth.scopes.view-edit-doc-content"),Y("auth.scopes.view-edit-pdf-content"),Y("auth.scopes.view-edit-mind-content");!function(e){e.TEXT_INPUT="text-input",e.TEXT_INPUT_VALUE="text-input-value"}(qe||(qe={}));var Qe="​";j(".ai-template-input {\n  line-height: 28px;\n  margin: -1px 0;\n  width: 100%;\n  overflow: auto;\n}\n.ai-template-input > * {\n  vertical-align: middle;\n}\n.ai-template-input__input {\n  word-break: break-all;\n  cursor: text;\n  caret-color: #1e6fff;\n  font-size: 14px;\n  color: var(--text-ultrastrong, rgba(0, 0, 0, 0.88));\n  font-feature-settings: 'fina' on, 'init' on;\n  font-family: 'PingFang SC';\n  font-style: normal;\n  font-weight: 400;\n  outline: none;\n}\n.ai-template-input__input[data-empty='true']:after {\n  content: attr(placeholder);\n  color: var(--text-strong, rgba(0, 0, 0, 0.64));\n}\n.ai-template-input__float-left {\n  float: left;\n  max-height: 300px;\n  overflow: auto;\n  min-width: calc(100% - 42px);\n}\n.ai-template-input__send {\n  float: right;\n  height: 28px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.ai-template-input__pre {\n  float: left;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 28px;\n}\n.ai-template-input__icon {\n  width: 24px;\n  height: 24px;\n  cursor: default;\n  margin-right: 4px;\n  user-select: none;\n}\n.ai-template-input__label {\n  position: relative;\n  display: block;\n  background: linear-gradient(82deg, #5aabff 0%, #5681ff 73.05%, #d192ff 100%);\n  padding: 2px 4px;\n  border-radius: 4px;\n  display: inline-flex;\n  justify-content: center;\n  align-items: center;\n  margin: 0 4px;\n  height: 22px;\n  cursor: default;\n  text-indent: 0;\n}\n.ai-template-input__label-bg {\n  background: var(--bg-lv4-default, #fff);\n  position: absolute;\n  top: 1px;\n  bottom: 1px;\n  left: 1px;\n  right: 1px;\n  border-radius: 3px;\n}\n.ai-template-input__label-text {\n  background: linear-gradient(82deg, #5aabff 0%, #5681ff 73.05%, #d192ff 100%);\n  background-clip: text;\n  -webkit-background-clip: text;\n  font-feature-settings: 'fina' on, 'init' on;\n  font-family: 'PingFang SC';\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  color: transparent;\n  line-height: 26px;\n  z-index: 1;\n}\n.ai-template-input__slot-text {\n  word-break: break-all;\n  display: inline-block;\n  height: 20px;\n  border-radius: var(---, 4px);\n  border: 1px solid var(--TDoc-Light-Border-border-medium, rgba(0, 0, 0, 0.08));\n  background: var(--TDoc-Light-Opaque-Fill-fill-weak, #f9fafb);\n  color: var(--TDoc-Light-Text-text-ultrastrong, var(--text-ultrastrong, rgba(0, 0, 0, 0.88)));\n  padding: 2px 4px;\n  margin: 0 4px;\n  font-feature-settings: 'fina' on, 'init' on;\n  font-family: 'PingFang SC';\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  cursor: text;\n  line-height: 20px;\n  text-indent: 0;\n  box-sizing: content-box;\n}\n.ai-template-input__slot-text > div {\n  width: 100%;\n  height: 100%;\n  display: inline-block;\n  outline: none;\n}\n.ai-template-input__slot-text > div[data-placeholder]:empty:after {\n  content: attr(data-placeholder);\n  color: var(--text-strong, rgba(0, 0, 0, 0.64));\n}\n");Object(i.forwardRef)((function(e,t){var n=e.onInput,r=e.icon,a=e.placeholder,s=e.sendElement,c=e.onCompositionStart,l=e.onCompositionEnd,u=e.className,d=e.iconClassName,h=e.onFocus,f=e.onBlur,p=e.onPaste,v=D(Object(i.useState)(""),2),g=v[0],y=v[1],m=Object(i.useRef)(),E=Object(i.useRef)(!1);Object(i.useImperativeHandle)(t,(function(){return{focus:S,setContent:function(e){y(e.label),C(e)}}}));var b=Object(i.useRef)(!1),T=Object(i.useCallback)((function(){var e=m.current;return(null==e?void 0:e.childNodes.length)?Array.prototype.map.call(null==e?void 0:e.childNodes,(function(e){var t,n;return(null===(t=null==e?void 0:e.dataset)||void 0===t?void 0:t.inputType)===qe.TEXT_INPUT?e.textContent||(null===(n=e.childNodes[0].dataset)||void 0===n?void 0:n.placeholder):(null==e?void 0:e.textContent)||""})).join(""):(null==e?void 0:e.textContent)||""}),[]),S=Object(i.useCallback)((function(){var e;if(m.current){var t=Array.prototype.find.call((null===(e=m.current)||void 0===e?void 0:e.childNodes)||[],(function(e){var t;return(null===(t=e.dataset)||void 0===t?void 0:t.inputType)===qe.TEXT_INPUT}));t?O(t,"end"):x()}}),[]),x=function(){var e,t;null===(e=m.current)||void 0===e||e.focus({preventScroll:!R.default.isIOS});var n=new Range;n.setStart(m.current,null===(t=m.current)||void 0===t?void 0:t.childNodes.length),n.collapse();var i=window.getSelection();i.removeAllRanges(),i.addRange(n)},O=function(e,t){void 0===t&&(t="start");var n=null==e?void 0:e.childNodes[0];null==n||n.focus({preventScroll:!R.default.isIOS});var i=new Range;i.setStart(n,"end"===t&&n.textContent.length?1:0),i.collapse();var o=window.getSelection();o.removeAllRanges(),o.addRange(i)},w=function(e,t){var n,i;return 0===e.startOffset&&(null===(i=null===(n=t.previousElementSibling)||void 0===n?void 0:n.dataset)||void 0===i?void 0:i.inputType)===qe.TEXT_INPUT},_=function(){if(m.current){var e=T();if(""===e&&(m.current.textContent=Qe),m.current.dataset.empty=String(""===e||e===Qe),!b.current){var t=e.replace(new RegExp(Qe,"g"),"");n(t)}}},C=function(e){m.current&&(e.value&&(m.current.innerHTML=e.value.split(/({{\..*?}})/).map((function(t){var n,i=D(/^{{\.(.*?)}}$/.exec(t)||[],2)[1];if(i){var o=e.valueOptions.find((function(e){return e.name===i}));return"text"===(null==o?void 0:o.type)?(n=o.defaultValue,'<span\n    data-input-type="'.concat(qe.TEXT_INPUT,'"\n    class="ai-template-input__slot-text"\n    contenteditable="false"\n  ><div\n      tabindex="-1"\n      data-input-type="').concat(qe.TEXT_INPUT_VALUE,'"\n      contenteditable="false"\n      data-placeholder="').concat(n,'"\n    ></div></span>')):""}return t})).join("")),_(),S())};return o.a.createElement("div",{className:"ai-template-input ".concat(u)},o.a.createElement("div",{className:"ai-template-input__float-left"},o.a.createElement("div",{onClick:function(){return S()},className:"ai-template-input__pre"},r?o.a.createElement("img",{className:"ai-template-input__icon ".concat(d),src:r}):"",g?o.a.createElement("span",{className:"ai-template-input__label"},o.a.createElement("div",{className:"ai-template-input__label-bg"}),o.a.createElement("span",{className:"ai-template-input__label-text"},g)):null),o.a.createElement("div",{role:"textbox",className:"ai-template-input__input",suppressContentEditableWarning:!0,spellCheck:!1,ref:m,"data-empty":"true",onInput:function(){_()},onKeyDown:function(e){var t,n;(null===(n=null===(t=e.target)||void 0===t?void 0:t.dataset)||void 0===n?void 0:n.inputType)===qe.TEXT_INPUT_VALUE&&function(e){var t=e.target.parentElement;if("Tab"===e.key)return e.preventDefault(),void function(e){var t,n=Array.prototype.filter.call((null===(t=m.current)||void 0===t?void 0:t.childNodes)||[],(function(e){var t;return(null===(t=e.dataset)||void 0===t?void 0:t.inputType)===qe.TEXT_INPUT})),i=n.indexOf(e);if(-1!==i){var o=n[(i+1)%n.length];O(o,"end")}}(t);"ArrowUp"!==e.key&&"ArrowDown"!==e.key||e.preventDefault()}(e);var i=window.getSelection();if(!i.rangeCount)return null;var o=i.getRangeAt(0),r=o.startContainer,a=null==r?void 0:r.previousElementSibling,s=null==r?void 0:r.nextElementSibling;return"ArrowRight"===e.key&&function(e,t){var n,i;return e.startOffset===t.textContent.length&&(null===(i=null===(n=t.nextElementSibling)||void 0===n?void 0:n.dataset)||void 0===i?void 0:i.inputType)===qe.TEXT_INPUT}(o,r)?(e.preventDefault(),void O(s,"start")):"ArrowLeft"===e.key&&w(o,r)?(e.preventDefault(),void O(a,"end")):void(function(e){return"Backspace"===e.key||"Delete"===e.key}(e)&&function(e,t,n,i,o){if(function(e){var t,n;return""===(null===(t=m.current)||void 0===t?void 0:t.textContent)||(null===(n=m.current)||void 0===n?void 0:n.textContent)===Qe||e.collapsed&&0===e.startOffset&&!e.startContainer.previousSibling&&e.startContainer.parentElement===m.current}(o)&&y(""),w(o,t)&&""!==(null==n?void 0:n.textContent))e.preventDefault(),O(n,"end")}(e,r,a,0,o))},onPaste:function(e){var t,n;if(null==p||p(),(null===(n=null===(t=e.target)||void 0===t?void 0:t.dataset)||void 0===n?void 0:n.inputType)===qe.TEXT_INPUT_VALUE){var i=e.target;if(!i.textContent)return e.preventDefault(),i.textContent=e.clipboardData.getData("text/plain"),O(i.parentElement,"end"),void _()}!function(e){e.preventDefault(),e.stopPropagation();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}(e)},placeholder:a,onCompositionStart:function(e){b.current=!0,null==c||c(e)},onCompositionEnd:function(e){b.current=!1,_(),null==l||l(e)},onFocus:function(e){var t;(null===(t=e.target.dataset)||void 0===t?void 0:t.inputType)===qe.TEXT_INPUT_VALUE&&e.target.setAttribute("contenteditable","true"),E.current||null==h||h(),E.current=!0},onBlur:function(e){var t;setTimeout((function(){E.current||null==f||f()})),(null===(t=e.target.dataset)||void 0===t?void 0:t.inputType)===qe.TEXT_INPUT_VALUE&&e.target.setAttribute("contenteditable","false"),E.current=!1},contentEditable:!0},Qe)),o.a.createElement("div",{className:"ai-template-input__send"},s))}));window.ai_version=I(I({},window.ai_version||{}),{common:"1.164.0 - November 15, 2024 15:19:08"})}).call(this,n("5ef37df1a0"))},"2980634bca":function(e,t){e.exports=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},"2a5f3314a4":function(e,t,n){"use strict";n.d(t,"c",(function(){return N})),n.d(t,"f",(function(){return ae})),n.d(t,"g",(function(){return bn})),n.d(t,"h",(function(){return i})),n.d(t,"k",(function(){return o})),n.d(t,"p",(function(){return de})),n.d(t,"q",(function(){return P})),n.d(t,"r",(function(){return Sn})),n.d(t,"s",(function(){return xn}));var i,o,r=n("8f13b2352e");function a(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,s()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"d",(function(){return r.c})),n.d(t,"e",(function(){return r.o})),n.d(t,"i",(function(){return r.l})),n.d(t,"j",(function(){return r.n})),n.d(t,"l",(function(){return r.H})),n.d(t,"m",(function(){return r.D})),n.d(t,"n",(function(){return r.u})),n.d(t,"o",(function(){return r.v})),n.d(t,"t",(function(){return r.q})),n.d(t,"u",(function(){return r.Q})),function(e){e.text="text",e.all="all",e.maxBlock="maxBlock",e.none="none"}(i||(i={})),function(e){e.pc="pc",e.iosMobile="iosMobile",e.androidMobile="androidMobile"}(o||(o={}));var c=function(e){function t(){var e;Object(r.y)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=a(this,t,[].concat(i))).customizeProps=new Map,e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"setCustomizeProp",value:function(e,t){this.customizeProps.set(e,t)}},{key:"getCustomizeProp",value:function(e){return this.customizeProps.get(e)}},{key:"setRenderColor",value:function(e){this.setCustomizeProp("renderColor",e)}},{key:"getRenderColor",value:function(){return this.getCustomizeProp("renderColor")}}])}(r.s);function l(e){if(null==e)return"";try{return String(e)}catch(e){return console.log("legalizeText text error: ",e),""}}function u(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,d()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function d(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(d=function(){return!!e})()}function h(e,t){var n=new c,i=e.fontWeight,o=e.fontSize,a=e.fontFamily,s=e.background,l=e.color,u=e.italic,d=void 0!==u&&u,h=e.underline,f=void 0!==h&&h,p=e.strike,v=void 0!==p&&p,g=e.letterSpacing,y=e.baselineOffset;return n.underline=f,n.strike=v,n.italic=d,i&&(n.fontWeight=i),o&&(n.fontSize=Object(r.M)(o)),a&&(n.fontFamily=a),l&&(n.textColor=l),s&&(n.textBackground=s),g&&(n.letterSpacing=Object(r.M)(g)),y&&(n.baselineOffset=y),n.setCustomizeProp("slatePath",t),n}var f=function(e){function t(e,n){var i;return Object(r.y)(this,t),(i=u(this,t,[e])).index=n,i}return Object(r.w)(t,e),Object(r.x)(t,[{key:"getProperty",value:function(){return h(this.getElement(),this.getPath())}},{key:"getNextSibling",value:function(){var e=this.index+1;return this.getParentNode().getChild(e)}},{key:"getPrevSibling",value:function(){var e=this.index-1;return this.getParentNode().getChild(e)}},{key:"getText",value:function(){return l(this.getElement().text)}},{key:"getPath",value:function(){var e=this.getParentNode().getPath();return[].concat(Object(r.B)(e),[this.index])}},{key:"getElement",value:function(){return this.getParentNode().getElementChildren()[this.index]}}])}(r.t);function p(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,v()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(v=function(){return!!e})()}var g=function(e){function t(e,n){var i;return Object(r.y)(this,t),(i=p(this,t,[e])).index=n,i}return Object(r.w)(t,e),Object(r.x)(t,[{key:"getProperty",value:function(){return h(this.getElement(),this.getPath())}},{key:"getNextSibling",value:function(){var e=this.index+1;return this.getParentNode().getChild(e)}},{key:"getInlineProperty",value:function(){return function(e){var t,n=new r.C,i=Object(r.M)(e.fontSize||28);if(n.containerSize={width:i,height:i},e.inlineType&&(n.inlineType=e.inlineType),e.baselineOffset&&(n.baselineOffset=e.baselineOffset),n.isRotateInVertLayout=!0,(null===(t=e.inlineProps)||void 0===t?void 0:t.icon)&&(n.drawingSrc={picSrc:e.inlineProps.icon,width:e.fontSize||28,height:e.fontSize||28}),e.margin){var o=e.margin||{},a=o.start,s=void 0===a?0:a,c=o.end,l=void 0===c?5:c,u=o.before,d=void 0===u?0:u,h=o.after,f=void 0===h?0:h;n.containerMargin={start:Object(r.M)(s),end:Object(r.M)(l),before:Object(r.M)(d),after:Object(r.M)(f)}}return n}(this.getElement())}},{key:"getPrevSibling",value:function(){var e=this.index-1;return this.getParentNode().getChild(e)}},{key:"getText",value:function(){return l(this.getElement().text)}},{key:"getPath",value:function(){var e=this.getParentNode().getPath();return[].concat(Object(r.B)(e),[this.index])}},{key:"getElement",value:function(){return this.getParentNode().getElementChildren()[this.index]}}])}(r.i);function y(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,m()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function E(e){var t=e.textAlign,n=void 0===t?r.D.Center:t,i=e.marginLeft,o=void 0===i?0:i,a=e.lineSpacing,s=void 0===a?1:a,l=e.lineSpacingRule,u=void 0===l?r.l.Multiple:l,d=e.textIndent,h=void 0===d?0:d,f=e.spaceBefore,p=void 0===f?0:f,v=e.spaceAfter,g=void 0===v?0:v,y=e.characterProps,m=e.defaultTabSize,E=y?function(e){var t=e.listFormat,n=e.levelText,i=void 0===n?"":n,o=new r.F;o.listFormat=t,o.levelText=i;var a=e.opacity,s=new c;"number"==typeof a&&s.setCustomizeProp("opacity",a),o.listMarkerSpanProp=s;var l=e.fontSize;if(l&&(s.fontSize=Object(r.M)(l)),"src"in e){var u=e.src,d=e.width,h=e.height;o.listPicMarkProp={picSrc:u,width:Object(r.M)(d),height:Object(r.M)(h)}}else{var f=e.color,p=e.fontFamily;f&&(s.textColor=f),p&&(s.fontFamily=p)}return o}(y):new r.E;if(E.textAlignment=n,E.marginLeft=Object(r.M)(o),E.lineSpacing=u===r.l.Exactly?Object(r.M)(s):s,E.lineSpacingRule=u,E.indent=Object(r.M)(h),E.spaceBefore=Object(r.M)(p),E.spaceAfter=Object(r.M)(g),E.spaceZeroInEdge=!0,"number"==typeof m&&(E.defaultTabSize=Object(r.M)(m)),e.tabList){var b=e.tabList.map((function(e){return{position:Object(r.M)(e.position),alignment:e.alignment}}));E.tabList=b}return E}var b=function(e){function t(e,n){var i;return Object(r.y)(this,t),(i=y(this,t,[e])).index=n,i}return Object(r.w)(t,e),Object(r.x)(t,[{key:"getProperty",value:function(){return E(this.getElement())}},{key:"getNextSibling",value:function(){var e=this.index+1;return this.getParentNode().getChild(e)}},{key:"getPrevSibling",value:function(){var e=this.index-1;return this.getParentNode().getChild(e)}},{key:"getChild",value:function(e){var t=this.getElementChildren()[e];return t?t.inlineProps&&t.text?new g(this,e):new f(this,e):null}},{key:"getBeginChild",value:function(){return this.getChild(0)}},{key:"getElementChildren",value:function(){var e;return null===(e=this.getElement())||void 0===e?void 0:e.children}},{key:"getElement",value:function(){return this.getParentNode().getElementChildren()[this.index]}},{key:"getPath",value:function(){var e=this.getParentNode().getPath();return[].concat(Object(r.B)(e),[this.index])}}])}(r.p);function T(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,S()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}var x=function(e){function t(e){var n;return Object(r.y)(this,t),(n=T(this,t)).getElement=e,n}return Object(r.w)(t,e),Object(r.x)(t,[{key:"getProperty",value:function(){var e,t,n,i,o,a,s,c,l,u,d,h,f,p,v,g,y,m,E,b,T,S,x,O,w,_,C,A=this.getElement();return e=A,t=new r.G,n=e.paddingLeft,i=void 0===n?0:n,o=e.paddingTop,a=void 0===o?0:o,s=e.paddingBottom,c=void 0===s?0:s,l=e.paddingRight,u=void 0===l?0:l,d=e.anchor,h=void 0===d?r.a.Top:d,f=e.vertical,p=e.anchorCenter,v=void 0!==p&&p,g=e.whiteSpaceType,y=void 0===g?r.v.Normal:g,m=e.docSizeType,E=e.columnNumber,b=void 0===E?1:E,T=e.columnSpace,S=e.handingChar4OneLine,x=void 0!==S&&S,O=e.handingMaxSpace,w=void 0===O?-1:O,_=e.tailWhitespaceCalculation,C=void 0===_?r.H.Exclude:_,t.leftPadding=Object(r.M)(i),t.rightPadding=Object(r.M)(u),t.topPadding=Object(r.M)(a),t.bottomPadding=Object(r.M)(c),t.anchor=h,t.whiteSpaceType=y,t.anchorCenter=v,m&&(t.docSizeType=m),f&&(t.vertical=f),t.columnNumber=b,T&&(t.columnSpace=Object(r.M)(T)),t.handingChar4OneLine=x,w>=0&&(t.handingMaxSpace=Object(r.M)(w)),t.tailWhitespaceCalculation=C,t}},{key:"getChild",value:function(e){return this.getElementChildren()[e]?new b(this,e):null}},{key:"getBeginChild",value:function(){return this.getChild(0)}},{key:"getElementChildren",value:function(){var e;return null===(e=this.getElement())||void 0===e?void 0:e.children}},{key:"getPath",value:function(){return[]}}])}(r.d);function O(e,t){if(!(null==e?void 0:e.parentBox))return null;for(var n=e.parentBox;n&&n.kind!==t;)n=n.parentBox;return n}function w(e){var t,n=e.parentBox;if(!n)return null;var i=e.nextSibling;return i||(null===(t=w(n))||void 0===t?void 0:t.firstChild)}function _(e){var t,n=null==e?void 0:e.parentBox;if(!n)return null;var i=e.prevSibling;return i||(null===(t=_(n))||void 0===t?void 0:t.lastChild)}function C(e,t){for(var n=0,i=0,o=e;o!==t;)n+=o.logicPoint.start,i+=o.logicPoint.before,o=o.parentBox;return{start:Object(r.Q)(n),before:Object(r.Q)(i)}}function A(e,t){if(e){var n=C(e,void 0),i=n.start,o=n.before,a=function(e,t){if(t+1===e.text.length)return Object(r.Q)(e.measure);var n=r.J.getDefaultEngine().measureChar(e.text,e.textStyle,0,t+1).width;return Object(r.Q)(n)}(e,t);return{start:i+a,before:o}}}function k(e,t,n,i){var o=n.start,a=n.before;switch(e){case r.c.RIGHT_TOP:return{x:i.width-a,y:o};case r.c.LEFT_BOTTOM:return{x:a,y:i.height-o};case r.c.LEFT_TOP:if(t===r.I.HORIZONTAL)return{x:a,y:o};default:return{x:o,y:a}}}function R(e){return function(){return function(e){var t=e.children,n=e.extent,i=t.find((function(e){return!e.isListMark&&!e.textStyle.baselineOffset}))||t[0],o=i.extent,a=i.descent+(n-i.logicPoint.before-o);return Object(r.Q)(a)}(e)}}function P(e){var t=0,n=function(e){e.kind!==r.b.TextLine?e.children&&e.children.forEach((function(e){return n(e)})):t=Math.max(t,e.measure)};return n(e),Object(r.Q)(t)}function I(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,L()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(L=function(){return!!e})()}var N,B=function(e){function t(e){var n;return Object(r.y)(this,t),(n=I(this,t)).getEditorValue=e,n}return Object(r.w)(t,e),Object(r.x)(t,[{key:"getRootNode",value:function(){return new x(this.getEditorValue)}}])}(r.L),D=function(){return Object(r.x)((function e(t){var n=this;Object(r.y)(this,e),this.getPointFromViewPoint=function(e,t){var i,o,a=n.layoutController.findHitViewPoint({x:Object(r.M)(e),y:Object(r.M)(t)});if(!a)return null;var s=a.leafBox,c=a.runOffset;return{caretRect:a.caretRect,box:s,point:{path:null===(o=null===(i=s.textStyle)||void 0===i?void 0:i.getCustomizeProp)||void 0===o?void 0:o.call(i,"slatePath"),offset:c}}};var i=e.getLayoutEngine(),o=new B(t);this.layoutController=i.createTextLayout(o)}),[{key:"layout",value:function(e){var t=e.width,n=e.height;this.layoutController.doLayout(0,0,t,n),this.layoutBox=this.layoutController.getLayoutBox()}},{key:"getLineLogicRect",value:function(e){var t=function(e,t){var n,i=-1,o=function(e){e.kind!==r.b.TextLine||(i+=1)!==t?e.children&&e.children.forEach((function(e){return o(e)})):n=e};return o(e),n}(this.layoutBox,e);if(!t)return null;var n=C(t,void 0);return{logicX:n.start,logicY:n.before,logicWidth:Object(r.Q)(t.measure),logicHeight:Object(r.Q)(t.extent)}}}],[{key:"setDefaultFontFamily",value:function(e,t){this.getLayoutEngine().setDefaultFontFamily(e,t)}},{key:"invalidateMeasureCache",value:function(e){r.K.getInstance().invalidateMeasureCache(e)}},{key:"setPreciseMeasurement",value:function(e){this.preciseMeasurement=e,r.K.getInstance().setPreciseMeasurement(e)}},{key:"getPreciseMeasurement",value:function(){return this.preciseMeasurement}},{key:"getLayoutEngine",value:function(){return this.layoutEngine||(this.layoutEngine=r.K.initWithDefaultMeasureContext(this.preciseMeasurement)),this.layoutEngine}}])}();D.preciseMeasurement=!1,function(e){e.text="text",e.background="background",e.selection="selection",e.eventArea="eventArea"}(N||(N={}));var M=function(){return Object(r.x)((function e(t){Object(r.y)(this,e);var n=t.drawContext,o=t.renderUtils,a=t.renderText,s=t.traverseTextHook,c=t.getNodeByPath,l=t.eventArea,u=t.coordinate,d=t.lineExpandDirection,h=t.isTextElementExpired;this.drawContext=n,this.renderUtils=o,this.coordinate=u,this.lineExpandDirection=d,this.renderText=a,this.traverseTextHook=s,this.getNodeByPath=c,this.isTextElementExpired=h,this.eventArea=l,this.bgContainer=this.drawContext.createContainer(0,{type:N.background}),this.eventArea!==i.none&&(this.eventAreaContainer=this.drawContext.createContainer(2,{type:N.eventArea})),this.textContainer=this.drawContext.createContainer(3,{type:N.text})}),[{key:"startDraw",value:function(e,t){this.drawEventArea(e,t);var n=t.x,i=t.y;this.drawParentBox(e,{x:Object(r.M)(n),y:Object(r.M)(i)})}},{key:"clearRect",value:function(e){var t=e.x,n=e.y,i=e.width,o=e.height;this.drawContext.clearRect(this.textContainer,t,n,i,o),this.bgContainer&&this.drawContext.clearRect(this.bgContainer,t,n,i,o),this.eventAreaContainer&&this.drawContext.clearRect(this.eventAreaContainer,t,n,i,o)}},{key:"drawEventArea",value:function(e,t){if(this.eventArea!==i.none)switch(this.eventArea){case i.all:var n=t.x,o=t.y,a=t.width,s=t.height;this.drawContext.fillRect(this.eventAreaContainer,{x:n,y:o,width:a,height:s,color:"transparent"});break;case i.maxBlock:var c=e.rect,l=c.x,u=c.y,d=c.width,h=c.height,f=t.x,p=t.y,v=t.width,g=t.height,y=Object(r.Q)(l)+f,m=Object(r.Q)(u)+p,E=Math.max(Object(r.Q)(d),v),b=Math.max(Object(r.Q)(h),g);this.drawContext.fillRect(this.eventAreaContainer,{x:y,y:m,width:E,height:b,color:"transparent"});break;case i.text:default:var T=e.contentRect,S=T.x,x=T.y,O=T.width,w=T.height;this.drawContext.fillRect(this.eventAreaContainer,{x:Object(r.Q)(S)+t.x,y:Object(r.Q)(x)+t.y,width:Object(r.Q)(O),height:Object(r.Q)(w),color:"transparent"})}}},{key:"traverseBox",value:function(e,t){if(e){var n=e.kind;n===r.b.Text?this.drawTextNode(e,t):n===r.b.Inline?this.drawInlineNode(e,t):this.drawParentBox(e,t)}}},{key:"drawParentBox",value:function(e,t){var n=this,i=e.children,o=e.rect,r={x:t.x+o.x,y:t.y+o.y};i.forEach((function(e){n.traverseBox(e,r)}))}},{key:"drawTextNode",value:function(e,t){e.glyph.picSrc?this.drawImage(e,t,this.textContainer):this.drawText(e,t,this.textContainer)}},{key:"drawInlineNode",value:function(e,t){var n=this.createInlineContainer(),i={drawLineOffsetX:0};e.glyph.picSrc&&(this.drawImage(e,t,n),i.drawLineOffsetX=Object(r.Q)(e.glyph.width)),this.drawText(e,t,n,i)}},{key:"drawText",value:function(e,t,n,i){var o,a,s,c,l=this,u=O(e,r.b.TextLine),d=null===(a=null===(o=e.textStyle)||void 0===o?void 0:o.getCustomizeProp)||void 0===a?void 0:a.call(o,"slatePath"),h=this.getTextElement(d),f=e.text,p=e.textStyle,v=e.rect,g=e.rotate,y=e.rotateOrigin,m=e.isListMark,E=Object(r.Q)(t.x+v.x),b=Object(r.Q)(t.y+v.y),T=E+Object(r.Q)(e.fontOffsetX),S=b+Object(r.Q)(e.fontOffsetY),x=p.fontSize,w=p.italic,_=p.strike,A=p.underline,k=p.fontFamily,P=p.fontWeight,I=p.textColor,L=void 0===I?"#000":I,N=p.letterSpacing,B=null===(s=null==p?void 0:p.getCustomizeProp)||void 0===s?void 0:s.call(p,"opacity"),D=this.drawTextBackground(e,t.x,t.y),M=this.drawContext.fillText(n,f,Object.assign({x:T,y:S,boxX:E,boxY:b,width:Object(r.Q)(v.width),height:Object(r.Q)(v.height),fontSize:Object(r.Q)(x),fontWeight:P,fontFamily:this.addWithDefaultFontFamily(k),opacity:B,letterSpacing:Object(r.Q)(N),strike:_&&!m,underline:A&&!m,italic:w&&!m,color:L,rotate:g,rotateOrigin:y&&{x:Object(r.Q)(y.x),y:Object(r.Q)(y.y)},textElement:h,getTextElement:function(){return h&&!l.isTextElementExpired(h)?h:h=l.getTextElement(d)},lineId:u._uuid},i));if(this.renderText){var j=e.measure,F=e.extent,H=e.bgRect,U=C(e,u),z=function(e){var t=e.children,n=e.extent,i=t.reduce((function(e,t){return e+t.measure}),0);return{measure:Object(r.Q)(i),extent:Object(r.Q)(n)}}(u),W=function(e,t,n,i){var o,a,s,c,l=n.x,u=n.y,d=n.width,h=n.height;switch(e){case r.c.RIGHT_TOP:o=u,a=i.extent-d-l,s=h,c=d;break;case r.c.LEFT_BOTTOM:o=i.measure-u-h,a=l,s=h,c=d;break;case r.c.LEFT_TOP:if(t===r.I.HORIZONTAL){o=u,a=l,s=h,c=d;break}default:o=l,a=u,s=d,c=h}return{start:o,before:a,measure:s,extent:c}}(this.coordinate,this.lineExpandDirection,H,u),G={textNode:M,textBgNode:D,text:f,x:T,y:S,logicWidth:Object(r.Q)(j),logicHeight:Object(r.Q)(F),textStyle:p,logicOffsetXOfLine:U.start,logicOffsetYOfLine:U.before,logicLineWidth:z.measure,logicLineHeight:z.extent,textElement:h,getLineBaselinePosition:R(u),bgLogicHeight:Object(r.Q)(W.extent),bgLogicWidth:Object(r.Q)(W.measure),bgLogicOffsetXOfLine:Object(r.Q)(W.start),bgLogicOffsetYOfLine:Object(r.Q)(W.before)};this.renderText(G)}d&&(null===(c=this.traverseTextHook)||void 0===c||c.call(this,d,e,h)),this.setTextRenderColor(M,e)}},{key:"setTextRenderColor",value:function(e,t){var n,i,o=null===(n=this.renderUtils)||void 0===n?void 0:n.getTextColor(e);o&&(null===(i=t.textStyle)||void 0===i||i.setRenderColor(o))}},{key:"getTextElement",value:function(e){if(e)return this.getNodeByPath(e)}},{key:"drawTextBackground",value:function(e,t,n){var i=e.textStyle.textBackground;if(i&&"transparent"!==i){var o=e.bgRect,a=o.x,s=o.y,c=o.width,l=o.height;return this.drawContext.fillRect(this.bgContainer,{x:Object(r.Q)(t+a),y:Object(r.Q)(n+s),width:Object(r.Q)(c),height:Object(r.Q)(l),color:i})}}},{key:"drawImage",value:function(e,t,n){var i,o,a,s=e.rect,c=e.glyph,l=e.textStyle,u=e.rotate,d=e.rotateOrigin,h=e.imgOffsetY,f=e.imgOffsetX,p=Object(r.Q)(t.x+s.x+f),v=Object(r.Q)(t.y+s.y+h),g=null===(i=null==l?void 0:l.getCustomizeProp)||void 0===i?void 0:i.call(l,"opacity");null===(a=null===(o=this.drawContext)||void 0===o?void 0:o.drawImage)||void 0===a||a.call(o,n,{x:p,y:v,width:Object(r.Q)(c.width),height:Object(r.Q)(c.height),rotate:u,rotateOrigin:d&&{x:Object(r.Q)(d.x),y:Object(r.Q)(d.y)},src:c.picSrc,opacity:g})}},{key:"createInlineContainer",value:function(){var e=this.drawContext.createContainer(0);return this.textContainer.addChild(e),e}},{key:"addWithDefaultFontFamily",value:function(e){return bn.defaultFontFamilyString?e?"".concat(e,",").concat(bn.defaultFontFamilyString):bn.defaultFontFamilyString:e}}])}(),j="style_caret__PMMaU",F="style_alloy-caret__JhBbP",H="style_alloy-caret-blink-transparent__Fo08H";Object(r.P)(".style_caret__PMMaU .style_alloy-caret__JhBbP {\n  position: absolute;\n  left: 0;\n  top: 0;\n  background-color: #1e6fff;\n  pointer-events: none;\n  cursor: text;\n  width: 1px;\n  transform-origin: left top;\n}\n.style_caret__PMMaU .style_alloy-caret-blink-transparent__Fo08H {\n  animation: style_fadeOutIn-blink-transparent__gXK2s 1s infinite linear;\n}\n@keyframes style_fadeOutIn-blink-transparent__gXK2s {\n  from {\n    opacity: 1;\n  }\n  13%, 50% {\n    opacity: 0;\n  }\n  63%, to {\n    opacity: 1;\n  }\n}");var U="#1e6fff",z=function(){return Object(r.x)((function e(){Object(r.y)(this,e),this.state={height:20,width:1,x:0,y:0,isBlink:!1,visible:!1,color:U}}),[{key:"attach",value:function(e){this.surfaceDom=e,this.containerDom=document.createElement("div"),this.containerDom.className=j,this.caretDom=document.createElement("div"),this.containerDom.appendChild(this.caretDom),e.appendChild(this.containerDom)}},{key:"detach",value:function(){this.surfaceDom.removeChild(this.containerDom)}},{key:"update",value:function(e,t,n,i,o){this.setState({x:e,y:t,width:n,height:i,color:o})}},{key:"hide",value:function(){this.clearDelayBlink(),this.setState({isBlink:!1,visible:!1})}},{key:"hideAndReset",value:function(){this.clearDelayBlink(),this.setState({x:0,y:0,height:20,width:1,isBlink:!1,visible:!1})}},{key:"show",value:function(){var e=this;this.clearDelayBlink(),this.setState({visible:!0,isBlink:!1}),this.timeout=setTimeout((function(){e.setState({isBlink:!0})}),500)}},{key:"visible",get:function(){return this.state.visible}},{key:"clearDelayBlink",value:function(){clearTimeout(this.timeout)}},{key:"stateToStyle",value:function(e,t){var n,i={x:function(e){return["left","".concat(e,"px")]},y:function(e){return["top","".concat(e,"px")]},width:function(e){return["width","".concat(e,"px")]},height:function(e){return["height","".concat(e,"px")]},visible:function(e){return["visibility",e?"visible":"hidden"]},color:function(e){return["background-color",e||U]}};return(null===(n=i[e])||void 0===n?void 0:n.call(i,t))||[]}},{key:"setState",value:function(e){this.state=Object.assign(this.state,e),this.render()}},{key:"render",value:function(){var e=this,t=[F];this.state.isBlink&&t.push(H),this.caretDom.className=t.join(" "),Object.entries(this.state).forEach((function(t){var n=Object(r.N)(t,2),i=n[0],o=n[1],a=e.stateToStyle(i,o),s=Object(r.N)(a,2),c=s[0],l=s[1];c&&(e.caretDom.style[c]=l)}))}}])}();function W(e){var t=e.charCodeAt(0);return t>=65&&t<=90||t>=97&&t<=122}function G(e){return W(e)||function(e){var t=e.charCodeAt(0);return t>=48&&t<=57}(e)}var V="style_hidden-editor__p2PlP",K="style_hidden-editor-input__d1UFL";Object(r.P)(".style_hidden-editor__p2PlP {\n  width: 0;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n}\n.style_hidden-editor-input__d1UFL {\n  position: absolute;\n  left: 0;\n  top: 0;\n  opacity: 0;\n  background: transparent;\n  color: transparent;\n  caret-color: rgba(255, 255, 255, 0);\n  overflow: hidden;\n  outline: none;\n  width: 50px;\n  height: 5px;\n  font-size: 1px;\n  z-index: -2;\n  white-space: pre-wrap;\n  transform: scale(0.1);\n}");var q="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),Q=function(e){return e===o.iosMobile||e===o.androidMobile},Y=/^((?!chrome|android|mqbhd|MQQBrowser).)*safari/i.test(navigator.userAgent),X=/mobile|android/i.test(navigator.userAgent),J=Y&&!X;function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return e;var t=new RegExp(/([\u0000-\u001F]|\u007F)+/,"g");return e.replace(t,"")}var $=function(){return Object(r.x)((function e(t){var n=this;Object(r.y)(this,e),this.attach=function(e){var t=n.initContainer(),i=n.initInputDom();t.appendChild(i),e.appendChild(t),n.inputDomRef=i,n.initEventListener()},this.detach=function(){n.removeEventListener()},this.initEventListener=function(){n.inputDomRef.addEventListener("input",n.handleInput),n.inputDomRef.addEventListener("keydown",n.handleKeyDown),n.inputDomRef.addEventListener("focus",n.handleFocus),n.inputDomRef.addEventListener("blur",n.handleBlur),n.inputDomRef.addEventListener("paste",n.handlePaste),n.inputDomRef.addEventListener("copy",n.handleCopy),n.inputDomRef.addEventListener("cut",n.handleCut),n.inputDomRef.addEventListener("compositionstart",n.handleCompositionStart),n.inputDomRef.addEventListener("compositionupdate",n.handleCompositionUpdate),n.inputDomRef.addEventListener("compositionend",n.handleCompositionEnd)},this.removeEventListener=function(){n.inputDomRef.removeEventListener("input",n.handleInput),n.inputDomRef.removeEventListener("keydown",n.handleKeyDown),n.inputDomRef.removeEventListener("focus",n.handleFocus),n.inputDomRef.removeEventListener("blur",n.handleBlur),n.inputDomRef.removeEventListener("paste",n.handlePaste),n.inputDomRef.removeEventListener("copy",n.handleCopy),n.inputDomRef.removeEventListener("cut",n.handleCut),n.inputDomRef.removeEventListener("compositionstart",n.handleCompositionStart),n.inputDomRef.removeEventListener("compositionupdate",n.handleCompositionUpdate),n.inputDomRef.removeEventListener("compositionend",n.handleCompositionEnd)},this.handleCompositionStart=function(e){var t;n.clearInput(),clearTimeout(n.clearComposingStateTimer),n.isComposing=!0,null===(t=n.onCompositionStart)||void 0===t||t.call(n,e)},this.handleCompositionUpdate=function(e){var t,i=Z(e.data);null===(t=n.onCompositionText)||void 0===t||t.call(n,i)},this.handleCompositionEnd=function(e){var t,i=Z(e.data);null===(t=n.onCompositionEnd)||void 0===t||t.call(n,i),n.isComposing=!1,n.clearInput()},this.handleInput=function(){var e;if(!n.isComposing){var t=Z(n.processTextContent());t&&(null===(e=n.onTypeText)||void 0===e||e.call(n,t))}},this.handleKeyDown=function(e){var t;n.isComposing||J&&229===e.keyCode&&"Backspace"===e.key||null===(t=n.onKeyDown)||void 0===t||t.call(n,e)},this.handleFocus=function(e){var t;e.preventDefault(),n.isFocus=!0,null===(t=n.onFocus)||void 0===t||t.call(n),n.clearInput()},this.handleBlur=function(e){e.preventDefault(),n.isComposing=!1,n.isFocus=!1,setTimeout((function(){var e;n.isFocus||null===(e=n.onBlur)||void 0===e||e.call(n)}),100),n.clearInput()},this.handleCopy=function(e){var t;e.preventDefault(),null===(t=n.onCopy)||void 0===t||t.call(n,e)},this.handlePaste=function(e){var t;e.preventDefault(),null===(t=n.onPaste)||void 0===t||t.call(n,e)},this.handleCut=function(e){var t;e.preventDefault(),null===(t=n.onCut)||void 0===t||t.call(n,e)},this.initContainer=function(){var e=document.createElement("div");return e.classList.add(V),e},this.initInputDom=function(){var e=document.createElement("input");return e.classList.add(K),e},this.initHooks(t),this.state={x:0,y:0,visible:!1}}),[{key:"show",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.setState({x:e,y:t,visible:!0}),n&&this.setFocus(i)}},{key:"hide",value:function(){this.setState({x:0,y:0,visible:!1}),this.setBlur()}},{key:"stateToStyle",value:function(e,t){var n,i={x:function(e){return["left","".concat(e,"px")]},y:function(e){return["top","".concat(e,"px")]},visible:function(e){return["visibility",e?"visible":"hidden"]}};return(null===(n=i[e])||void 0===n?void 0:n.call(i,t))||[]}},{key:"setFocus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.inputDomRef&&this.inputDomRef.focus({preventScroll:e})}},{key:"setBlur",value:function(){this.inputDomRef&&this.inputDomRef.blur()}},{key:"initHooks",value:function(e){var t=e.onKeyDown,n=e.onTypeText,i=e.onBlur,o=e.onFocus,r=e.onCompositionText,a=e.onCompositionStart,s=e.onCompositionEnd,c=e.deleteCharacterBack,l=e.clearCompositionState,u=e.onCopy,d=e.onCut,h=e.onPaste;this.onTypeText=n,this.onCompositionText=r,this.onCompositionStart=a,this.onCompositionEnd=s,this.onBlur=i,this.onFocus=o,this.onKeyDown=t,this.deleteCharacterBack=c,this.clearCompositionState=l,this.onCopy=u,this.onPaste=h,this.onCut=d}},{key:"setState",value:function(e){this.state=Object.assign(this.state,e),this.render()}},{key:"render",value:function(){var e=this;Object.entries(this.state).forEach((function(t){var n=Object(r.N)(t,2),i=n[0],o=n[1],a=e.stateToStyle(i,o),s=Object(r.N)(a,2),c=s[0],l=s[1];c&&(e.inputDomRef.style[c]=l)}))}}])}();function ee(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,te()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function te(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(te=function(){return!!e})()}var ne=function(e){function t(){var e;return Object(r.y)(this,t),(e=ee(this,t,arguments)).cacheInputValue="",e.processTextContent=function(){var t=e.inputDomRef.value||"",n=e.findDiff(t),i=n.toDeleteLength,o=n.toInputValue;i&&e.deleteCharacterBack(i),e.cacheInputValue=t;var r,a=o[o.length-1];return(o.length>1||a&&!W(a)&&(65281!==(r=a.charCodeAt(0))&&65292!==r&&65311!==r&&12290!==r))&&e.clearInput(),o},e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"triggerTouchStart",value:function(e){e===o.iosMobile&&this.isComposing||this.clearInput(),this.clearCompositionState()}},{key:"clearInput",value:function(){this.cacheInputValue="",this.inputDomRef&&(this.inputDomRef.value="")}},{key:"findDiff",value:function(e){for(var t=this.cacheInputValue,n=0;n<t.length&&n<e.length&&t[n]===e[n];)n+=1;return{toDeleteLength:t.length-n,toInputValue:e.substring(n,e.length)}}}])}($);function ie(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,oe()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function oe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(oe=function(){return!!e})()}var re=function(e){function t(){var e;return Object(r.y)(this,t),(e=ie(this,t,arguments)).processTextContent=function(){var t=e.inputDomRef.value||"";return e.clearInput(),t},e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"clearInput",value:function(){this.inputDomRef&&(this.inputDomRef.value="")}}])}($),ae=K;var se=function(){return Object(r.x)((function e(){Object(r.y)(this,e)}),[{key:"coordinate",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.coordinate)||r.c.LEFT_TOP}},{key:"lineExpandDirection",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.lineExpandDirection)||r.I.VERTICAL}},{key:"transformScale",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.transformScale)||1}},{key:"scale",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.scale)||1}},{key:"blockRect",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.blockRect)||{x:0,y:0,width:0,height:0}}},{key:"textRect",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.textRect)||{x:0,y:0,width:0,height:0}}},{key:"appPosition",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.appPosition)||{x:0,y:0}}},{key:"attachEditor",value:function(e){this.editor!==e&&(this.editor=e,this.afterEditorAttached())}},{key:"detachEditor",value:function(e){this.editor===e&&(this.beforeEditorDetached(),this.editor=null)}},{key:"afterEditorAttached",value:function(){}},{key:"beforeEditorDetached",value:function(){}}])}();function ce(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return le(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ue=function(){return!!e})()}function de(e){var t=e.layoutManager.layoutBox.children.map((function(e){return e.children})).reduce((function(e,t){return e.concat(t)}),[]),n=new(function(e){function t(){return Object(r.y)(this,t),e=this,n=t,i=arguments,n=Object(r.z)(n),Object(r.A)(e,ue()?Reflect.construct(n,i||[],Object(r.z)(e).constructor):n.apply(e,i));var e,n,i}return Object(r.w)(t,e),Object(r.x)(t)}(se));n.attachEditor(e);var i=n.coordinate,o=n.lineExpandDirection,a=n.blockRect,s={x:1/0,y:1/0,x1:-1/0,y1:-1/0};t.forEach((function(e){var t=he(e,i,o,a),n=t.x,r=t.y,c=fe({x:n,y:r},{x:n,y:r,width:t.width,height:t.height},i,o);s.x=Math.min(s.x,c.x),s.y=Math.min(s.y,c.y),s.x1=Math.max(s.x1,c.x+c.width),s.y1=Math.max(s.y1,c.y+c.height)}));var c=e.positionOfEditorToPositionOfApp(s.x,s.y),l=c.x,u=c.y,d=e.positionOfEditorToPositionOfApp(s.x1,s.y),h=d.x,f=d.y,p=e.positionOfEditorToPositionOfApp(s.x1,s.y1),v=p.x,g=p.y,y=e.positionOfEditorToPositionOfApp(s.x,s.y1),m=y.x,E=y.y,b=Math.min(l,h,v,m),T=Math.max(l,h,v,m),S=Math.min(u,f,g,E),x=Math.max(u,f,g,E);return{x:b,y:S,left:b,right:T,top:S,bottom:x,width:T-b,height:x-S}}function he(e,t,n,i){var o=C(e,void 0),a=Object(r.Q)(e.measure);if(e.children.length){var s=e.children[e.children.length-1];a=Object(r.Q)(s.measure+s.logicPoint.start)}var c,l=Object(r.Q)(e.extent),u=ce(e.children);try{for(u.s();!(c=u.n()).done;){var d=c.value;if(!d.isListMark){var h=Object(r.Q)(d.logicPoint.start);o.start+=h,a-=h;break}}}catch(e){u.e(e)}finally{u.f()}var f=k(t,n,o,i),p=function(e,t,n){var i=n.measure,o=n.extent;switch(e){case r.c.RIGHT_TOP:case r.c.LEFT_BOTTOM:return{width:o,height:i};case r.c.LEFT_TOP:if(t===r.I.HORIZONTAL)return{width:o,height:i};default:return{width:i,height:o}}}(t,n,{measure:a,extent:l});return Object.assign(Object.assign({},f),p)}function fe(e,t,n,i){var o=e.x,a=e.y,s=t.x,c=t.y,l=t.width,u=t.height;switch(n){case r.c.LEFT_BOTTOM:return{x:s,y:c-u,width:l,height:a-(c-u)};case r.c.RIGHT_TOP:return{x:s-l,y:a,width:l,height:u+c-a};case r.c.LEFT_TOP:if(i===r.I.HORIZONTAL)return{x:s,y:a,width:l,height:u+c-a};default:return{x:o,y:c,width:l+s-o,height:u}}}function pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function ge(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,ye()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ye=function(){return!!e})()}var me="rgba(187, 225, 255, 0.7)",Ee=function(e){function t(){var e;return Object(r.y)(this,t),(e=ge(this,t,arguments)).selectionRects=[],e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"detach",value:function(){this.selectionContainer=null,this.editor=null}},{key:"attachControlBar",value:function(e){}},{key:"detachControlBar",value:function(){}},{key:"selection",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.selection)||null}},{key:"drawContext",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.drawContext}},{key:"slatePathToBox",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.slatePathToBox}},{key:"selectionBlockRect",get:function(){var e=this,t=this.getSelectionRects();if(!(null==t?void 0:t.length))return{x:0,y:0,left:0,right:0,top:0,bottom:0,width:0,height:0};var n=1/0,i=1/0,o=-1/0,r=-1/0;return t.forEach((function(t){var a=t.x,s=t.y,c=t.width,l=t.height,u=e.editor.positionOfEditorToPositionOfApp(a,s),d=u.x,h=u.y,f=e.editor.positionOfEditorToPositionOfApp(a+c,s),p=f.x,v=f.y,g=e.editor.positionOfEditorToPositionOfApp(a+c,s+l),y=g.x,m=g.y,E=e.editor.positionOfEditorToPositionOfApp(a,s+l),b=E.x,T=E.y;n=Math.min(d,p,y,b,n),o=Math.max(d,p,y,b,o),i=Math.min(h,v,m,T,i),r=Math.max(h,v,m,T,r)})),{x:n,y:i,left:n,right:o,top:i,bottom:r,width:o-n,height:r-i}}},{key:"caretInfo",get:function(){var e=this.selection,t=this.caretPosition,n=this.caretBox;return e&&t?{caretPosition:t,caretBox:n}:null}},{key:"update",value:function(){this.clear(),this.updateCaretInfo(),this.render()}},{key:"clear",value:function(){var e;this.selectionContainer&&(null===(e=this.drawContext)||void 0===e||e.clearRect(this.selectionContainer)),this.selectionRects=[],this.caretPosition=null,this.caretBox=null}},{key:"beforeEditorDetached",value:function(){var e;this.clear(),this.selectionContainer&&(null===(e=this.drawContext)||void 0===e||e.removeContainer(this.selectionContainer,{type:N.selection}),this.selectionContainer=null)}},{key:"getStartPoint",value:function(){var e,t=r.r.start(this.selection);return null===(e=this.editor)||void 0===e?void 0:e.normalizePoint(t)}},{key:"getEndPoint",value:function(){var e,t=r.r.end(this.selection);return null===(e=this.editor)||void 0===e?void 0:e.normalizePoint(t)}},{key:"getSelectionRects",value:function(){return this.selectionRects}},{key:"render",value:function(){var e=this;if(this.startPosition=null,this.endPosition=null,this.startLine=null,this.endLine=null,this.selection&&!r.r.isCollapsed(this.selection)){var t=this.getStartPoint(),n=this.getEndPoint(),i=this.getBoxAndOffset(t),o=this.getBoxAndOffset(n);if(i&&o){var a=this.normalizeBoxAndOffset(i),s=a.box,c=a.offset,l=o.box,u=o.offset,d=this.getPointPosition(s,c),h=this.getPointPosition(l,u),f=this.getPointLine(s),p=this.getPointLine(l),v=this.getLinesBetween(f,p);this.startPosition=d,this.endPosition=h,this.startLine=f,this.endLine=p;var g=he(f,this.coordinate,this.lineExpandDirection,this.blockRect),y=g.x,m=g.y,E=g.width,b=g.height,T=he(p,this.coordinate,this.lineExpandDirection,this.blockRect),S=T.x,x=T.y,O=T.width,w=T.height;if(f===p){var _=function(e,t,n,i,o){var a=e.x,s=e.y,c=t.x,l=t.y,u=n.x,d=n.y,h=n.width,f=n.height;switch(i){case r.c.LEFT_BOTTOM:return{x:u,y:l,width:h,height:s-l};case r.c.RIGHT_TOP:return{x:u-h,y:s,width:h,height:l-s};case r.c.LEFT_TOP:if(o===r.I.HORIZONTAL)return{x:u,y:s,width:h,height:l-s};default:return{x:a,y:d,width:c-a,height:f}}}(d,h,{x:y,y:m,width:E,height:b},this.coordinate,this.lineExpandDirection);return this.fillRect(Object.assign(Object.assign({},_),{color:me})),void(this.selectionRects=[_])}this.selectionRects=[];var C=fe(d,{x:y,y:m,width:E,height:b},this.coordinate,this.lineExpandDirection);this.selectionRects.push(C),this.fillRect(Object.assign(Object.assign({},C),{color:me}));var A=function(e,t,n,i){var o=e.x,a=e.y,s=t.x,c=t.y,l=t.width,u=t.height;switch(n){case r.c.LEFT_BOTTOM:return{x:s,y:a,width:l,height:c-a};case r.c.RIGHT_TOP:return{x:s-l,y:c,width:l,height:a-c};case r.c.LEFT_TOP:if(i===r.I.HORIZONTAL)return{x:s,y:c,width:l,height:a-c};default:return{x:s,y:c,width:o-s,height:u}}}(h,{x:S,y:x,width:O,height:w},this.coordinate,this.lineExpandDirection);this.selectionRects.push(A),this.fillRect(Object.assign(Object.assign({},A),{color:me})),v.forEach((function(t){var n=he(t,e.coordinate,e.lineExpandDirection,e.blockRect),i=n.x,o=n.y,r=fe({x:i,y:o},{x:i,y:o,width:n.width,height:n.height},e.coordinate,e.lineExpandDirection);e.selectionRects.push(r),e.fillRect(Object.assign(Object.assign({},r),{color:me}))}))}}}},{key:"updateCaretInfo",value:function(){if(this.selection){var e=this.selection.focus,t=this.getBoxAndOffset(e);if(t){var n=t.box,i=t.offset,o=this.getPointPosition(n,i);this.caretPosition=o,this.caretBox=n}}}},{key:"fillRect",value:function(e){var t,n;this.selectionContainer||(this.selectionContainer=null===(t=this.drawContext)||void 0===t?void 0:t.createContainer(1,{type:N.selection})),null===(n=this.drawContext)||void 0===n||n.fillRect(this.selectionContainer,Object.assign(Object.assign({},e),{x:e.x+this.blockRect.x,y:e.y+this.blockRect.y}))}},{key:"getLinesBetween",value:function(e,t){if(e===t)return[];for(var n=[],i=e;;){var o=w(i);if(o===t)break;n.push(o),i=o}return n}},{key:"getPointLine",value:function(e){return O(e,r.b.TextLine)}},{key:"getPointPosition",value:function(e,t){if(e){var n=A(e,t);return k(this.coordinate,this.lineExpandDirection,n,this.blockRect)}}},{key:"getBoxAndOffset",value:function(e){var t,n,i;if(!e)return null;var o=null===(t=this.slatePathToBox)||void 0===t?void 0:t.getBox(e.path);if(!o)return null;var r,a=e.offset-1,s=pe(o);try{for(s.s();!(r=s.n()).done;){var c=r.value;if((null===(n=null==c?void 0:c.runRange)||void 0===n?void 0:n.gcpBegin)+c.text.length>=a){var l=a-(null===(i=null==c?void 0:c.runRange)||void 0===i?void 0:i.gcpBegin),u=c;return l>=c.text.length&&(u=w(c),l=0),{box:u,offset:l}}}}catch(e){s.e(e)}finally{s.f()}return null}},{key:"normalizeBoxAndOffset",value:function(e){var t=e.box,n=e.offset;if(n===t.text.length-1){for(var i=w(t);i.isListMark;)i=w(i);return{box:i,offset:-1}}return{box:t,offset:n}}}])}(se),be="style_selection-control-bar__RJ6cD",Te="style_selection-control-hot-spot__SYM0n",Se="style_selection-control-symbol__pTxKX",xe="style_ios-selection-control-bar__v-9Ha",Oe="style_inner-symbol__JxLWR",we="style_ios-start-selection-control-bar__SJAHV",_e="style_left-top-symbol__sRVHr",Ce="style_right-top-symbol__1Tpxy",Ae="style_left-bottom-symbol__Wr-Q3",ke="style_left-top-horizontal-symbol__kJx1u",Re="style_left-top-hot-spot__bLSRD",Pe="style_right-top-hot-spot__hKSLx",Ie="style_left-bottom-hot-spot__zz-WE",Le="style_ios-end-selection-control-bar__KmL5N",Ne="style_android-selection-control-bar__0bLxg",Be="style_android-start-selection-control-bar__ENhyk",De="style_android-end-selection-control-bar__l9rqD";function Me(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,je()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function je(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(je=function(){return!!e})()}Object(r.P)(".style_selection-control-bar__RJ6cD {\n  background-color: rgb(30, 111, 255);\n  position: absolute;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.style_selection-control-bar__RJ6cD .style_selection-control-hot-spot__SYM0n {\n  position: absolute;\n  touch-action: none;\n}\n.style_selection-control-bar__RJ6cD .style_selection-control-symbol__pTxKX {\n  position: absolute;\n  touch-action: none;\n}\n\n.style_ios-selection-control-bar__v-9Ha .style_selection-control-symbol__pTxKX .style_inner-symbol__JxLWR {\n  transform-origin: center center;\n  border-radius: 50%;\n  width: 100%;\n  height: 100%;\n  background: #1e6fff;\n  transition: transform 300ms;\n}\n\n.style_ios-start-selection-control-bar__SJAHV .style_selection-control-symbol__pTxKX.style_left-top-symbol__sRVHr {\n  left: 50%;\n  top: 0;\n  transform: translate(-50%, -100%);\n}\n.style_ios-start-selection-control-bar__SJAHV .style_selection-control-symbol__pTxKX.style_right-top-symbol__1Tpxy {\n  left: 100%;\n  top: 50%;\n  transform: translate(0, -50%);\n}\n.style_ios-start-selection-control-bar__SJAHV .style_selection-control-symbol__pTxKX.style_left-bottom-symbol__Wr-Q3 {\n  left: 0;\n  top: 50%;\n  transform: translate(-100%, -50%);\n}\n.style_ios-start-selection-control-bar__SJAHV .style_selection-control-symbol__pTxKX.style_left-top-horizontal-symbol__kJx1u {\n  left: 0;\n  top: 0;\n  transform: translate(-100%, -50%);\n}\n.style_ios-start-selection-control-bar__SJAHV .style_selection-control-hot-spot__SYM0n.style_left-top-hot-spot__bLSRD {\n  top: 100%;\n  left: 50%;\n  transform: translate(-50%, -100%);\n}\n.style_ios-start-selection-control-bar__SJAHV .style_selection-control-hot-spot__SYM0n.style_right-top-hot-spot__hKSLx {\n  top: 50%;\n  left: 0;\n  transform: translate(0, -50%);\n}\n.style_ios-start-selection-control-bar__SJAHV .style_selection-control-hot-spot__SYM0n.style_left-bottom-hot-spot__zz-WE {\n  left: 100%;\n  top: 50%;\n  transform: translate(-100%, -50%);\n}\n\n.style_ios-end-selection-control-bar__KmL5N .style_selection-control-symbol__pTxKX.style_left-top-symbol__sRVHr {\n  left: 50%;\n  top: 100%;\n  transform: translate(-50%, 0);\n}\n.style_ios-end-selection-control-bar__KmL5N .style_selection-control-symbol__pTxKX.style_right-top-symbol__1Tpxy {\n  left: 0;\n  top: 50%;\n  transform: translate(-100%, -50%);\n}\n.style_ios-end-selection-control-bar__KmL5N .style_selection-control-symbol__pTxKX.style_left-bottom-symbol__Wr-Q3 {\n  left: 100%;\n  top: 50%;\n  transform: translate(0, -50%);\n}\n.style_ios-end-selection-control-bar__KmL5N .style_selection-control-symbol__pTxKX.style_left-top-horizontal-symbol__kJx1u {\n  left: 100%;\n  top: 0;\n  transform: translate(0, -50%);\n}\n.style_ios-end-selection-control-bar__KmL5N .style_selection-control-hot-spot__SYM0n.style_left-top-hot-spot__bLSRD {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, 0);\n}\n.style_ios-end-selection-control-bar__KmL5N .style_selection-control-hot-spot__SYM0n.style_right-top-hot-spot__hKSLx {\n  left: 100%;\n  top: 50%;\n  transform: translate(-100%, -50%);\n}\n.style_ios-end-selection-control-bar__KmL5N .style_selection-control-hot-spot__SYM0n.style_left-bottom-hot-spot__zz-WE {\n  top: 50%;\n  left: 0;\n  transform: translate(0, -50%);\n}\n\n.style_android-selection-control-bar__0bLxg .style_selection-control-symbol__pTxKX {\n  position: absolute;\n  transform-origin: center center;\n}\n.style_android-selection-control-bar__0bLxg .style_selection-control-symbol__pTxKX .style_inner-symbol__JxLWR {\n  width: 100%;\n  height: 100%;\n  background-size: contain;\n  background-repeat: no-repeat;\n  transition: transform 300ms;\n}\n\n.style_android-start-selection-control-bar__ENhyk .style_selection-control-symbol__pTxKX .style_inner-symbol__JxLWR {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAYKADAAQAAAABAAAAYAAAAACpM19OAAAHJ0lEQVR4Ae2dT2gcVRzHf2+2aXNwK0i9VRpLcf2DeigJ2BZBD4Ie6kGiiIQoevJkDLTSU0/FFmJ6ErxEpYhoEVREwUMFsQrtqYpKpNQUehBMlDYBkya7z+93dmZ39m/2z8y8TeY3sMzbnffe773P9/2bmffeGhnQo3DM5tfXpVC0UkASCxYfY2WvNZI3InlrcYYb550DmoWOkoW8DMZx4KTdffuWPG6K8qQYeQJgH0XKBiZ9SVFymsH9x+2dxTUZR+meECuHkclcUhkd1HhTF8Baa0am5Wlbkkk0KUcBf3hQ4aSRrtQEGP/U5i79JC+gaTmB0v5QGpnbCjYSFyAA/zLAvwXwB7YClDTTmKgA+960h6Qk7wYdapr52jK2EhHgvmm7Z60opwH+FZBIxMaWIbxJQmOHMzJlny1ZmUNzc9cmtvUyCMQmwMH37NDibyj1IlNKtnMCsQgw8oYdKYl8glI/1rlp9UkCfQuwf9qObhTla8Dfo0i7J+B1H6Qa4t4p+9TGhlxQ+FUm3bp6FgDNzoulknwFg3d0a1T9Vwn01AT58K18hGh6Cl81r66uAbLZYcnHaGdI8fVPoCsB/A6Xbb42O/2TD2LoWIBgqHlZO9zY2PsRddQJ8yYrGOfrUDNe/tKRAH//Lmf0Jitm8kF0mzZB/rOdknyejHmNta0AfKq5WpR5lH59sJZQWWnbBPGRssJPiHwQbcsawJcptig/wF9LP8kmLRuxN60BfI3IN1kKP/lC0FQAvDznO1zOy9EjYQINArD0+y/QEzas0ZcJNAjAqSPoeHX2QkolpEYATppC6T+Rkm01AwI1AnDGGkq/TppKsWjUCMDpginaVlMgUBnj+xNlV+WvrM/VTLtUVGpAMEs50xNl04ZPexUBUPInXCQg6zb9JshfHPGv/AMYmZuf77oA+DWAK1MUvhspfAH8ZUFu7GfearkPMFiXpYcTAoarEf9bk5uwXhmSOklJRo16XAqq8N2p7wXrcN2lIOOW2QewBujhiICHGzAVwBF8mvXQ897j0H7mTbMG6PRyh8WANSDv0H7mTXt4A6YCOCwGHrd8cWg/86bLjyIyj8ENABT+22yClt2YV6tkzyZIBXBUFsiew1AVwJEAZO9h0yQVwJEAZO9hE7wbjuxn3izZ80ZsPvMkHAEgew5DVQBHApC9lzMqgCv+ZO8NDfkCoEPWI2UCluy9+TNmGePRKykbz7w5Mif78qMIK99lnkjaAALmvgBYEcb9H/RIkUDI3Bdg5275HraLKdrPuqliwLw8OffqSXMLs4IuZp1KavkHa585DJb7ADhwU3AutQRk3FCUdUWA3C45jwurGWeTePbJmKxDQxUBrp02N/Fs4svwgp6TIUDGZB3GXhGAPxhPPgwv6DkZAvWMUSOqB5ep7puSX3SlZJVJrC4jv16flYeNwYPo4KitAbiAO7RT4UU9x0uAbKPwGXuNAPxh7DFsQWzkKt16xEgATH22dVE2CHD+eVOEUm/X+dOvfRIgU7Ktj6ZBAHqAUh8ggD6gq6fV43eyJNNmwWs64agH3bApSqMvtzU5OXL9HfNjs1ia1gB6ZAAo936zQPpb5wTIsBV8xtJSAF7clZPjOC3RrUdPBJYChi0DtxXgjxmz6HnyasvQeqEtAbIjw3ae2grAgAuz5gsMS8+2i0SvNRJA5zrrs2u8VPPLpgLQ990PyDGIcKkmpH5pTQCs9jzoN9+t/QRXWo6C6kPq5t31RFp8N7KIUj26cNYstPBR83NHNYAhGOGOnDwD50pNDPolSmCFjDqFz4AdC0DP12bM5Zwnz6HarPO7HlUCZEI2ZFT9dXNXVwIwuj9nzbcY207CWXmit7mZbe+DDzEnyabbnHYtAA2gin2MSaUvaU3wX+WukwWZdAuf/jvuhJtFzv+TKZbkM1zL6lLXFTY7vZT8kGdfAjCSzP6RG0Y77HC7bfND8OG5pyYoDMwzE4BIRjN1n4BxPvPcL3zy61sARsJhF27WjmTijhlPBZjXboaaZNTq6LsJqo94G/+d7RKf7XTyeKGeSbvvsdSAqAEmcDgnBQzL5vD7dhiqcog5N7xD7o8bPrnFXgOiYmz1vzQH+CtopF9v9zw/mt9e3LHXgGgimPCxQ3IQc2Feg9Rb50U/0so0M+1JwierRGtAVAz+MQT/m8DfHn9Qd2jHvB2U+lOcvdDsBXo0P3G5UxMgTDAnf3GbfO7UjulJR9FJON2vGgBWOV2QM9YWZuSb+nk7YbqTOqcuQDQj/o7tazIOESbQXR/GtbS2Ti6i7l9E5s9xomx0rmY0fWm4nQoQzaC/fzW2UPZ38cVGsmiqHsH1uNLHkczPEPkCV6ZwcUQ4Pz+aBhfuuDIYe9q5oSz3NA221SyglhTQZO1Fc5FHovMQKA+o/l5H3HUE7mX4Webyf/i5AT9c/zzPpaBcjcgFcbEnMoYI/wdRXPXipjIbhgAAAABJRU5ErkJggg==);\n  transform-origin: 100% 0;\n}\n.style_android-start-selection-control-bar__ENhyk .style_selection-control-symbol__pTxKX.style_left-top-symbol__sRVHr {\n  left: 100%;\n  top: 100%;\n  transform: translate(-100%, -5%);\n}\n.style_android-start-selection-control-bar__ENhyk .style_selection-control-symbol__pTxKX.style_right-top-symbol__1Tpxy {\n  left: 0;\n  top: 100%;\n  transform: rotate(90deg) translate(-100%, 95%);\n}\n.style_android-start-selection-control-bar__ENhyk .style_selection-control-symbol__pTxKX.style_left-bottom-symbol__Wr-Q3 {\n  left: 100%;\n  top: 0%;\n  transform: rotate(-90deg) translate(0, -5%);\n}\n.style_android-start-selection-control-bar__ENhyk .style_selection-control-symbol__pTxKX.style_left-top-horizontal-symbol__kJx1u {\n  left: 100%;\n  top: 0%;\n  transform: rotate(180deg) translate(0, 90%);\n}\n.style_android-start-selection-control-bar__ENhyk .style_selection-control-hot-spot__SYM0n.style_left-top-hot-spot__bLSRD {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, 0);\n}\n.style_android-start-selection-control-bar__ENhyk .style_selection-control-hot-spot__SYM0n.style_right-top-hot-spot__hKSLx {\n  left: 100%;\n  top: 50%;\n  transform: translate(-100%, -50%);\n}\n.style_android-start-selection-control-bar__ENhyk .style_selection-control-hot-spot__SYM0n.style_left-bottom-hot-spot__zz-WE {\n  top: 50%;\n  left: 0;\n  transform: translate(0, -50%);\n}\n\n.style_android-end-selection-control-bar__l9rqD .style_selection-control-symbol__pTxKX .style_inner-symbol__JxLWR {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAYKADAAQAAAABAAAAYAAAAACpM19OAAAHZElEQVR4Ae2dT2wUVRzHf2+WSk1YSARvxlZCrEqUA4FEICZyMNGDHgwaYwj+O3mhlQQMJ04ESEo5mXgQJcQYJCZKjCQeMDGgCZzQGF1DsCTchIOUQ6HdfX6/253u29md7ezuzNsu85tD5/3/zXy+fTNvZt/8nnl8r7UywJsxch9nMIP9DE5kxiBsjdw0IiWcVqlgpDQ0JKXSMTOzHE/TDLoACaFaCHRVrPxkC3LhodXy87VD5k7CupkWy4sAUYhlMXIJveR0YaWcvX7U/Bct4CueVwEW+UKEWVyyzplATk1PynljcBHzuOVegAbWRv7Aperw1uflzNk3TLkhL6OICtAKrJFrEOIIhPgiayFUgFYC1NKqN+5APrxx3PzSplhPWUFPtR/wyhjebrJluTgybj97cp9dl8XpqgBLUzUQ4r3ZeflrdMK+tnTxzkqoAMl5ra1U5NuRvfb45k/tUPJq7UuqAO35NOVijDrx759ycXTcjjZldpGgAnQBDU/UWysiV9bvs1u6qe7WUQFcGp2Eraybn5cLT0zYlzqpFi2rAkSJdBZfhfvC97gcvdVZtXppFaDOoqsQ7glDFStfdiuCCtAV9qZKHKqe6uZypAI0sewugT2hXJFvOr0xqwDd8Y6rtWq+LD90MkRVAeJQdpuO0RGGqGeSPqypAN2CblcPzwl4WDvWrkiYpwKEJNLeWxlP8u5IBUgbvNMenhGWfIuqAjjAMgiuvVeWo+3aVQHa0UkhD88H7458ZLfFNaUCxJFJL91IRT7Z9TUmxLTYVIAWUNJO4i9rl3+Vd1q1qwK0opJBGkT4uFUvUAEygN2ySSsb0AvejOapAFEiGcbRCw5ai2lgzqYCODAyD1rZOLpPXnbtqAAuDQ9hW5E9rhkVwKXhIYyZp6+uP2DXhKZUgJCEpz1+Nxgu35NdoTkVICThcQ8RdofmVICQhM+9le0bDtnVNKkC+ARft1W4f0deUAHqQLyH8PXBThXAO3bHoJEXGdPvAxwmnoP24ZWyRu8Bnqk75szcnIypAA4R38GyVQF8M4/a0x4QJeIzjgcyFcAn8KgtvBd6TO8BUSoe4/hloKgCeAQeNYVfZlSAKBSfcfxCpgL4BB61hQ/BiwH+3I9maNwfgQDdYFk6MvKHoH+WyJ49QAXokwZkH+BhQAXokwBkH9DHWp/s594s2Qd0cJd7En0CQPYBHgboXVC3PhAgez4JqwB9gF8zWQroV7N/9vNtmewDOjUFBtyQdfNMwJJ9QI+yGI9e9Ww89+bInOwX3obCo2zuifgGUGNeFYDufH3bz7u9kHlVAPpSBhAvjkrzDr52/uUa84WpiVVH1vClrHA8EQDr0Hn4wj0AdvFQcNqT+dybcVkvCkAv4siYzT2djAGQMVmHZhYFoAt3vJs4F2boPhsCZOy6y18UgObowj0bs9pqSCDKGD2ivvETypEJ+R3PxRvrqRpKjQDc49+YkmfdNQoaewAWL8AT2uHUDGpDDQTI1oXPzAYBmMDFCzAkusawbikSANMq20iTTQJwwQIodSRSTqM9EiDTVotBNAlAO1w5AhX0BV2P0MPqZEmmYdzdN9yE3Qw6GeLiBUiLLeOW13AsAWsKsiNuFY6WPYBNsQKU+zy2Wc1IRIAM4+CzgVgBmLmyIAewu82wbl0RuF1jGFu5rQB/T5pbQSDvx9bWjLYEyI4M2xVqKwArTk+Z73AXONGuEc1rJoAb51SVXXNWQ8qSArD0o0/LfohwuaGmRuIJgNW6Z6qX7/gytZzEIxw6pOayHXhNkclyTkse6aAUMHIL/9Vbpk+Y6SSHnKgHsCE2uKIgryB4N0nDOS1zl4ySwiejxAKw8PVJc6UQyOvoNnOM61YnQCZkQ0b11KVDHQnA5v6ZMj9ibLsHQZ1LVOfLl5h7yKaelCzUsQBsFl3sK0wqfVt7QvU1wRxZkEky5I2lEt+EG6stxLhmCpftQGxVq/wcpN3lZaeb//yQTU8CsBGumcJlO3I3OsJohzfcTq/5Ifhw39UlKKzMPQ8AjWzJ1XMCxvk8517hk1/PArARDrvwsLYjF0/MeCvAc+1kqElGcVvPl6Bow1y2AwubncQl6ZFo3oDHb/PdTpLXC52cZyo9wDXIAxwuyBiGZSeR/iAMVTnEPDm8Qp5KGz65pd4DXDGqK0dg8QJ8D7vJTR+UMMBfxUV6cJc05w8RW7fJZsyF+QBSD84P/ThWHjOPvd2PKWn8I2XaA9wD5OIF9J+P3nAQF6blOe8I83bwX3+Ysxda/YDunk9aYW8ChAfMyV904U4v4nRkjZvEcJjXjz0AzHK6IGesTU/K+ei8nayPybsA7gnRizgdWUOE3egV25HXcqEbt05K4TIuiZdw8qc5Udadq5lS+4mb6asA7lHSlzLd+VY9yhrZiUvVc8hP6/g4kvkNIl/glyn8OCKcn+8eQz/CaZ1g6sc+tt8W6VeTrh3R+Bh6yRh9rOFyUcRBFyFQEVCLNIwwPzScQZkZfv6PMjdRhl9/lvgpKL9G5AdxLLvctv8BmRv+DjS6yY0AAAAASUVORK5CYII=);\n  transform-origin: 0 0;\n}\n.style_android-end-selection-control-bar__l9rqD .style_selection-control-symbol__pTxKX.style_left-top-symbol__sRVHr {\n  top: 100%;\n  left: 0;\n}\n.style_android-end-selection-control-bar__l9rqD .style_selection-control-symbol__pTxKX.style_right-top-symbol__1Tpxy {\n  top: 0;\n  left: 0;\n  transform: rotate(90deg) translate(0, 95%);\n}\n.style_android-end-selection-control-bar__l9rqD .style_selection-control-symbol__pTxKX.style_left-bottom-symbol__Wr-Q3 {\n  left: 100%;\n  top: 100%;\n  transform: rotate(-90deg) translate(100%, -5%);\n}\n.style_android-end-selection-control-bar__l9rqD .style_selection-control-symbol__pTxKX.style_left-top-horizontal-symbol__kJx1u {\n  left: 100%;\n  top: 100%;\n  transform: rotate(0deg) translate(0, -10%);\n}\n.style_android-end-selection-control-bar__l9rqD .style_selection-control-hot-spot__SYM0n.style_left-top-hot-spot__bLSRD {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, 0);\n}\n.style_android-end-selection-control-bar__l9rqD .style_selection-control-hot-spot__SYM0n.style_right-top-hot-spot__hKSLx {\n  left: 100%;\n  top: 50%;\n  transform: translate(-100%, -50%);\n}\n.style_android-end-selection-control-bar__l9rqD .style_selection-control-hot-spot__SYM0n.style_left-bottom-hot-spot__zz-WE {\n  top: 50%;\n  left: 0;\n  transform: translate(0, -50%);\n}");var Fe=function(e){function t(){var e;return Object(r.y)(this,t),(e=Me(this,t,arguments)).touchstartExtentOffset=0,e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"updateCurrentLine",value:function(e){this.currentLine=e}},{key:"updateTouchstartExtentOffset",value:function(e){var t=this.getCurrentLineExtentOffset(),n=this.getPositionFromTouch(e),i=n.x,o=n.y,a=this.coordinate,s=this.lineExpandDirection;switch(a){case r.c.LEFT_BOTTOM:case r.c.RIGHT_TOP:this.touchstartExtentOffset=i-t;break;case r.c.LEFT_TOP:if(s===r.I.HORIZONTAL){this.touchstartExtentOffset=i-t;break}default:this.touchstartExtentOffset=o-t}}},{key:"clearTouchstartExtentOffset",value:function(){this.touchstartExtentOffset=0}},{key:"getPointFromTouch",value:function(e){if(this.editor){var t=this.getPositionFromTouch(e),n=this.processPosition(t),i=n.x,o=n.y,r=this.editor.layoutManager.getPointFromViewPoint(i,o);return null==r?void 0:r.point}}},{key:"getPositionFromTouch",value:function(e){if(!this.editor)return{x:0,y:0};var t=function(e){return function(e){return"changedTouches"in e}(e)?e.changedTouches[0]:e}(e),n=t.pageX,i=t.pageY,o=this.appPosition,r=o.x,a=o.y;return this.editor.positionOfAppToPositionOfEditor(n-r,i-a)}},{key:"getCurrentLineExtentOffset",value:function(){var e=C(this.currentLine,void 0).before+Object(r.Q)(this.currentLine.extent)/2;switch(this.coordinate){case r.c.RIGHT_TOP:return this.blockRect.width-e;case r.c.LEFT_TOP:case r.c.LEFT_BOTTOM:default:return e}}},{key:"processPosition",value:function(e){var t=e.x,n=e.y,i=this.coordinate,o=this.touchstartExtentOffset,a=this.lineExpandDirection;switch(i){case r.c.LEFT_BOTTOM:case r.c.RIGHT_TOP:return{x:t-o,y:n};case r.c.LEFT_TOP:if(a===r.I.HORIZONTAL)return{x:t-o,y:n};default:return{x:t,y:n-o}}}}])}(se);function He(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,Ue()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ue=function(){return!!e})()}var ze=function(e){function t(e){var n,i=e.startDragCallback,o=e.stopDragCallback;return Object(r.y)(this,t),(n=He(this,t)).isStartDrag=!1,n.handleMouseDown=function(e){bn.supportMouseOnTouchScreen?(document.addEventListener("mousemove",n.handleTouchMove),document.addEventListener("mouseup",n.handleMouseUp),n.handleTouchStart(e)):(e.preventDefault(),e.stopPropagation())},n.handleMouseUp=function(e){n.unregisterDocumentMouseEvent(),n.handleTouchEnd(e)},n.handleTouchStart=function(e){e.preventDefault(),e.stopPropagation(),n.startDrag(),n.initOtherPoint(),n.updateTouchstartExtentOffset(e)},n.handleTouchMove=function(e){e.preventDefault(),n.isStartDrag&&n.editor&&n.updateSelectionFromTouch(e)},n.updateSelectionFromTouch=Object(r.O)((function(e){var t,i=n.getPointFromTouch(e);i&&(n.isSamePoint(n.otherPoint,i)||null===(t=n.editor)||void 0===t||t.model.setSelectionPoints(n.otherPoint,i))}),50),n.handleTouchEnd=function(e){e.stopPropagation(),n.stopDrag(),n.clearTouchstartExtentOffset()},n.startDragCallback=i,n.stopDragCallback=o,n.initControlBar(),n.initControlSymbol(),n.initHotSpot(),n.registerEvent(),n}return Object(r.w)(t,e),Object(r.x)(t,[{key:"controlBarLineWidth",get:function(){return 2/this.transformScale}},{key:"hotSpotExtraExtent",get:function(){return this.hotSpotExtraExtentRealSize/this.transformScale}},{key:"hotSpotMeasure",get:function(){return this.hotSpotMeasureRealSize/this.transformScale}},{key:"controlSymbolMeasure",get:function(){return this.controlSymbolMeasureRealSize/this.transformScale}},{key:"controlSymbolExtent",get:function(){return this.controlSymbolExtentRealSize/this.transformScale}},{key:"hide",value:function(){this.controlBar.style.cssText+="left: 0px; top: 0px; visibility: hidden;"}},{key:"show",value:function(e){this.updateHotSpot(e),this.updateControlSymbol(),this.updateControlBar(e),this.controlBar.style.visibility="visible",this.delayEnableEvent()}},{key:"attach",value:function(e){this.surfaceDom=e,this.surfaceDom.appendChild(this.controlBar)}},{key:"detach",value:function(){this.surfaceDom.removeChild(this.controlBar),this.unregisterEvent()}},{key:"rect",get:function(){var e=this.controlSymbol.getBoundingClientRect(),t=e.x,n=e.y,i=parseFloat(this.controlSymbol.style.width),o=parseFloat(this.controlSymbol.style.height),r=this.editor.appPosition,a=t-r.x,s=n-r.y,c=this.editor.positionOfAppToPositionOfEditor(a,s),l=c.x,u=c.y;return{width:i*this.scale,height:o*this.scale,x:l,y:u}}},{key:"changeDirection",value:function(e){var t=this;this.innerSymbol.style.transition="none",e===this.direction?this.openDragMark():this.closeDragMark(),requestAnimationFrame((function(){t.innerSymbol.style.transition="transform 300ms"}))}},{key:"closeDragMark",value:function(){this.innerSymbol.style.transform="none"}},{key:"openDragMark",value:function(){this.innerSymbol.style.transform="scale(1.3)"}},{key:"initControlBar",value:function(){var e=document.createElement("div");e.classList.add(be),this.controlBar=e}},{key:"delayEnableEvent",value:function(){var e=this;clearTimeout(this.timer),this.controlBar.style.pointerEvents="none",this.timer=setTimeout((function(){e.controlBar.style.pointerEvents="auto"}),350)}},{key:"initControlSymbol",value:function(){var e=document.createElement("div");e.classList.add(Se),this.controlSymbol=e;var t=document.createElement("div");t.classList.add(Oe),e.appendChild(t),this.innerSymbol=t,this.controlBar.appendChild(e)}},{key:"initHotSpot",value:function(){var e=document.createElement("div");e.classList.add(Te),this.hotSpot=e,this.controlBar.appendChild(e)}},{key:"registerEvent",value:function(){this.hotSpot.addEventListener("mousedown",this.handleMouseDown),this.hotSpot.addEventListener("touchstart",this.handleTouchStart),this.hotSpot.addEventListener("touchmove",this.handleTouchMove),this.hotSpot.addEventListener("touchend",this.handleTouchEnd),this.hotSpot.addEventListener("touchcancel",this.handleTouchEnd)}},{key:"unregisterEvent",value:function(){this.unregisterDocumentMouseEvent(),this.hotSpot.removeEventListener("mousedown",this.handleMouseDown),this.hotSpot.removeEventListener("touchstart",this.handleTouchStart),this.hotSpot.removeEventListener("touchmove",this.handleTouchMove),this.hotSpot.removeEventListener("touchend",this.handleTouchEnd),this.hotSpot.removeEventListener("touchcancel",this.handleTouchEnd)}},{key:"unregisterDocumentMouseEvent",value:function(){document.removeEventListener("mousemove",this.handleTouchMove),document.removeEventListener("mouseup",this.handleMouseUp)}},{key:"isSamePoint",value:function(e,t){var n,i=null===(n=this.editor)||void 0===n?void 0:n.model.slate;return!!i&&i.isSamePoint(e,t)}},{key:"startDrag",value:function(){this.isStartDrag=!0,this.openDragMark(),this.startDragCallback()}},{key:"stopDrag",value:function(){this.isStartDrag=!1,this.closeDragMark(),this.stopDragCallback()}},{key:"updateControlBar",value:function(e){var t=e.x,n=e.y,i=e.width,o=e.height;this.controlBar.style.cssText="left: ".concat(t,"px; top: ").concat(n,"px; width: ").concat(i,"px; height: ").concat(o,"px")}},{key:"updateControlSymbol",value:function(){this.controlSymbol.classList.remove(Ae),this.controlSymbol.classList.remove(Ce),this.controlSymbol.classList.remove(_e),this.controlSymbol.classList.remove(ke);var e,t,n=this.controlSymbolMeasure,i=this.controlSymbolExtent,o=this.coordinate,a=this.lineExpandDirection;switch(o){case r.c.LEFT_BOTTOM:this.controlSymbol.classList.add(Ae),e=i,t=n;break;case r.c.RIGHT_TOP:this.controlSymbol.classList.add(Ce),e=i,t=n;break;case r.c.LEFT_TOP:if(a===r.I.HORIZONTAL){this.controlSymbol.classList.add(ke),e=i,t=n;break}default:this.controlSymbol.classList.add(_e),e=n,t=i}this.controlSymbol.style.cssText+="width: ".concat(e,"px; height: ").concat(t,"px;")}},{key:"updateHotSpot",value:function(e){this.hotSpot.classList.remove(Ie),this.hotSpot.classList.remove(Pe),this.hotSpot.classList.remove(Re);var t,n,i=this.hotSpotMeasure,o=this.hotSpotExtraExtent,a=this.coordinate,s=this.lineExpandDirection,c=e.width,l=e.height;switch(a){case r.c.LEFT_BOTTOM:this.hotSpot.classList.add(Ie),t=c+o,n=i;break;case r.c.RIGHT_TOP:this.hotSpot.classList.add(Pe),t=c+o,n=i;break;case r.c.LEFT_TOP:if(s===r.I.HORIZONTAL){this.hotSpot.classList.add(Ie),t=c+o,n=i;break}default:this.hotSpot.classList.add(Re),t=i,n=l+o}this.hotSpot.style.cssText+="width: ".concat(t,"px; height: ").concat(n,"px;")}}])}(Fe);function We(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,Ge()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function Ge(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ge=function(){return!!e})()}function Ve(e,t,n,i){var o=Object(r.R)(Object(r.z)(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var Ke=function(e){function t(){var e;return Object(r.y)(this,t),(e=We(this,t,arguments)).hotSpotExtraExtentRealSize=20,e.hotSpotMeasureRealSize=30,e.controlSymbolMeasureRealSize=18,e.controlSymbolExtentRealSize=18,e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"initControlBar",value:function(){Ve(t,"initControlBar",this,3)([]),this.controlBar.classList.add(Ne)}}])}(ze),qe=function(e){function t(){var e;return Object(r.y)(this,t),(e=We(this,t,arguments)).direction="start",e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"initControlBar",value:function(){Ve(t,"initControlBar",this,3)([]),this.controlBar.classList.add(Be)}},{key:"initOtherPoint",value:function(){var e,t=null===(e=this.editor)||void 0===e?void 0:e.selection;t&&(this.otherPoint=r.r.end(t))}}])}(Ke),Qe=function(e){function t(){var e;return Object(r.y)(this,t),(e=We(this,t,arguments)).direction="end",e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"initControlBar",value:function(){Ve(t,"initControlBar",this,3)([]),this.controlBar.classList.add(De)}},{key:"initOtherPoint",value:function(){var e,t=null===(e=this.editor)||void 0===e?void 0:e.selection;t&&(this.otherPoint=r.r.start(t))}}])}(Ke);function Ye(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,Xe()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function Xe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Xe=function(){return!!e})()}function Je(e,t,n,i){var o=Object(r.R)(Object(r.z)(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var Ze=function(e){function t(){var e;return Object(r.y)(this,t),(e=Ye(this,t,arguments)).hotSpotExtraExtentRealSize=20,e.hotSpotMeasureRealSize=20,e.controlSymbolMeasureRealSize=12,e.controlSymbolExtentRealSize=12,e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"initControlBar",value:function(){Je(t,"initControlBar",this,3)([]),this.controlBar.classList.add(xe)}}])}(ze),$e=function(e){function t(){var e;return Object(r.y)(this,t),(e=Ye(this,t,arguments)).direction="start",e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"initControlBar",value:function(){Je(t,"initControlBar",this,3)([]),this.controlBar.classList.add(we)}},{key:"initOtherPoint",value:function(){var e,t=null===(e=this.editor)||void 0===e?void 0:e.selection;t&&(this.otherPoint=r.r.end(t))}}])}(Ze),et=function(e){function t(){var e;return Object(r.y)(this,t),(e=Ye(this,t,arguments)).direction="end",e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"initControlBar",value:function(){Je(t,"initControlBar",this,3)([]),this.controlBar.classList.add(Le)}},{key:"initOtherPoint",value:function(){var e,t=null===(e=this.editor)||void 0===e?void 0:e.selection;t&&(this.otherPoint=r.r.start(t))}}])}(Ze);function tt(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,nt()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function nt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(nt=function(){return!!e})()}function it(e,t,n,i){var o=Object(r.R)(Object(r.z)(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var ot=function(e){function t(e){var n;return Object(r.y)(this,t),(n=tt(this,t)).handleStartDrag=function(e){var t,i,o=n.getStartPoint(),r=n.getEndPoint();n.prevStartPoint=o,n.prevEndPoint=r,n.direction=e,null===(i=null===(t=n.editor)||void 0===t?void 0:t.onSelectionDragStart)||void 0===i||i.call(t)},n.handleStopDrag=function(){var e,t,i,o;n.direction=null,n.prevStartPoint=null,n.prevEndPoint=null,null===(e=n.startSelectionControlBar)||void 0===e||e.closeDragMark(),null===(t=n.endSelectionControlBar)||void 0===t||t.closeDragMark(),null===(o=null===(i=n.editor)||void 0===i?void 0:i.onSelectionDragEnd)||void 0===o||o.call(i)},n.startSelectionControlBar=function(e,t){return e===o.androidMobile?new qe(t):e===o.iosMobile?new $e(t):null}(e,{startDragCallback:function(){n.handleStartDrag("start")},stopDragCallback:n.handleStopDrag}),n.endSelectionControlBar=function(e,t){return e===o.androidMobile?new Qe(t):e===o.iosMobile?new et(t):null}(e,{startDragCallback:function(){n.handleStartDrag("end")},stopDragCallback:n.handleStopDrag}),n}return Object(r.w)(t,e),Object(r.x)(t,[{key:"attachControlBar",value:function(e){var t,n;null===(t=this.startSelectionControlBar)||void 0===t||t.attach(e),null===(n=this.endSelectionControlBar)||void 0===n||n.attach(e)}},{key:"detachControlBar",value:function(){var e,t;null===(e=this.startSelectionControlBar)||void 0===e||e.detach(),null===(t=this.endSelectionControlBar)||void 0===t||t.detach()}},{key:"attachEditor",value:function(e){var n,i;it(t,"attachEditor",this,3)([e]),null===(n=this.startSelectionControlBar)||void 0===n||n.attachEditor(e),null===(i=this.endSelectionControlBar)||void 0===i||i.attachEditor(e)}},{key:"detachEditor",value:function(e){var n,i;it(t,"detachEditor",this,3)([e]),null===(n=this.startSelectionControlBar)||void 0===n||n.detachEditor(e),null===(i=this.endSelectionControlBar)||void 0===i||i.detachEditor(e)}},{key:"update",value:function(){it(t,"update",this,3)([]),this.updateDirection(),this.renderControlBar()}},{key:"clear",value:function(){it(t,"clear",this,3)([]),this.clearControlBar()}},{key:"getSelectionRects",value:function(){var e=Object(r.B)(this.selectionRects),t=this.startSelectionControlBar,n=this.endSelectionControlBar;return t&&e.push(t.rect),n&&e.push(n.rect),e}},{key:"updateDirection",value:function(){var e,t;if(this.selection&&this.direction){var n=this.prevStartPoint,i=this.prevEndPoint;if(n&&i){var o=this.getStartPoint(),r=this.getEndPoint(),a=!this.isSamePoint(o,n),s=!this.isSamePoint(r,i),c=this.direction;a&&s?this.direction="end"===c?"start":"end":a?this.direction="start":s&&(this.direction="end"),this.prevStartPoint=o,this.prevEndPoint=r,this.direction&&this.direction!==c&&(null===(e=this.startSelectionControlBar)||void 0===e||e.changeDirection(this.direction),null===(t=this.endSelectionControlBar)||void 0===t||t.changeDirection(this.direction))}}}},{key:"isSamePoint",value:function(e,t){var n,i=null===(n=this.editor)||void 0===n?void 0:n.model.slate;return!!i&&i.isSamePoint(e,t)}},{key:"renderControlBar",value:function(){var e;if(this.startSelectionControlBar&&this.endSelectionControlBar){var t=this.startPosition,n=this.endPosition,i=this.startLine,o=this.endLine;if(t&&n&&i&&o){var a,s,c=he(i,this.coordinate,this.lineExpandDirection,this.blockRect),l=c.x,u=c.y,d=c.width,h=c.height,f=he(o,this.coordinate,this.lineExpandDirection,this.blockRect),p=f.x,v=f.y,g=f.width,y=f.height,m=(null===(e=this.editor)||void 0===e?void 0:e.scale)||1;switch(this.coordinate){case r.c.LEFT_BOTTOM:a={x:l/m,y:t.y/m,width:d/m,height:this.startSelectionControlBar.controlBarLineWidth},s={x:p/m,y:n.y/m,width:g/m,height:this.endSelectionControlBar.controlBarLineWidth};break;case r.c.RIGHT_TOP:a={x:(l-d)/m,y:t.y/m,width:d/m,height:this.startSelectionControlBar.controlBarLineWidth},s={x:(p-g)/m,y:n.y/m,width:g/m,height:this.endSelectionControlBar.controlBarLineWidth};break;case r.c.LEFT_TOP:if(this.lineExpandDirection===r.I.HORIZONTAL){a={x:l/m,y:t.y/m,width:d/m,height:this.startSelectionControlBar.controlBarLineWidth},s={x:p/m,y:n.y/m,width:g/m,height:this.endSelectionControlBar.controlBarLineWidth};break}default:a={x:t.x/m,y:u/m,width:this.startSelectionControlBar.controlBarLineWidth,height:h/m},s={x:n.x/m,y:v/m,width:this.endSelectionControlBar.controlBarLineWidth,height:y/m}}this.startSelectionControlBar.updateCurrentLine(i),this.startSelectionControlBar.show(a),this.endSelectionControlBar.updateCurrentLine(o),this.endSelectionControlBar.show(s)}else this.clearControlBar()}}},{key:"clearControlBar",value:function(){var e,t;null===(e=this.startSelectionControlBar)||void 0===e||e.hide(),null===(t=this.endSelectionControlBar)||void 0===t||t.hide()}}])}(Ee);function rt(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,at()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function at(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(at=function(){return!!e})()}var st,ct=function(e){function t(){return Object(r.y)(this,t),rt(this,t,arguments)}return Object(r.w)(t,e),Object(r.x)(t,[{key:"caretRect",get:function(){if(!this.caretRectOfEditor)return{x:0,y:0,left:0,right:0,top:0,bottom:0,width:0,height:0};var e=this.caretRectOfEditor,t=e.x,n=e.y,i=e.width,o=e.height,r=this.editor.positionOfEditorToPositionOfApp(t,n),a=r.x,s=r.y,c=this.editor.positionOfEditorToPositionOfApp(t+i,n),l=c.x,u=c.y,d=this.editor.positionOfEditorToPositionOfApp(t+i,n+o),h=d.x,f=d.y,p=this.editor.positionOfEditorToPositionOfApp(t,n+o),v=p.x,g=p.y,y=Math.min(a,l,h,v),m=Math.max(a,l,h,v),E=Math.min(s,u,f,g),b=Math.max(s,u,f,g);return{x:y,y:E,left:y,right:m,top:E,bottom:b,width:m-y,height:b-E}}},{key:"deprecateLayoutCaretRect",value:function(){this.caretRectFromLayout=null}},{key:"updatePointByPointPosition",value:function(e){var t,n,i=this,o=e.x,a=e.y,s=null===(n=null===(t=this.editor)||void 0===t?void 0:t.layoutManager)||void 0===n?void 0:n.getPointFromViewPoint(o,a);if(!s)return null;var c=s.point,l=s.caretRect,u=s.box;return this.caretRectFromLayout={x:Object(r.Q)(l.x),y:Object(r.Q)(l.y),height:l.height>l.width?Object(r.Q)(l.height):0,width:l.width>l.height?Object(r.Q)(l.width):0},this.updateLineBox(u),this.updateLastCaretLogicPosition(this.caretRectFromLayout,u),setTimeout((function(){i.caretRectFromLayout=null}),50),c}},{key:"getCaretRectOfWindow",value:function(e,t){var n=this.caretRectFromLayout||this.pointToCaretRect(e,t),i=n.x,o=n.y,r=n.height,a=n.width;this.caretRectOfEditor={x:i,y:o,height:r,width:a};var s=!!this.caretRectFromLayout;this.caretRectFromLayout||(this.updateLineBox(e),this.updateLastCaretLogicPosition({x:i,y:o,height:r,width:a},e)),this.caretRectFromLayout=null;var c=this.scale,l=this.getCaretRealSize(a,r);return{x:i/c,y:o/c,width:l.width,height:l.height,isCaretFromLayout:s}}},{key:"isCaretInLineEnd",value:function(){var e=this.caretLineBox,t=this.caretBox,n=e.children;return t===n[n.length-1]}},{key:"moveToPrevLine",value:function(){var e=_(this.caretLineBox);if(e){var t,n=this.lastCaretLogicPosition,i=n.start,o=n.before,a=O(e,r.b.Column),s=O(this.caretLineBox,r.b.Column);if(a!==s){var c=C(s,void 0).start,l=C(a,void 0);t={start:l.start+(i-c),before:l.before+Object(r.Q)(a.extent)}}else{var u=Object(r.Q)(e.extent);t={start:i,before:o-this.getParagraphGapBetweenLines(e,this.caretLineBox)-u/2}}var d=k(this.coordinate,this.lineExpandDirection,t,this.blockRect);return this.updatePointByPointPosition(d)}}},{key:"moveToNextLine",value:function(){var e=w(this.caretLineBox);if(e){var t,n=this.lastCaretLogicPosition,i=n.start,o=n.before,a=O(e,r.b.Column),s=O(this.caretLineBox,r.b.Column);if(a!==s){var c=C(s,void 0).start,l=C(a,void 0);t={start:l.start+(i-c),before:l.before}}else{var u=Object(r.Q)(e.extent);t={start:i,before:o+Object(r.Q)(this.caretLineBox.extent)+this.getParagraphGapBetweenLines(this.caretLineBox,e)+u/2}}var d=k(this.coordinate,this.lineExpandDirection,t,this.blockRect);return this.updatePointByPointPosition(d)}}},{key:"moveToNextLineStart",value:function(){var e=w(this.caretLineBox);if(e){var t=this.lastCaretLogicPosition.before,n=Object(r.Q)(e.extent),i=Object(r.Q)(this.caretLineBox.extent),o=this.getParagraphGapBetweenLines(this.caretLineBox,e),a={start:C(e,void 0).start,before:t+i+o+n/2},s=k(this.coordinate,this.lineExpandDirection,a,this.blockRect);return this.updatePointByPointPosition(s)}}},{key:"moveToLineStart",value:function(){var e=this.lastCaretLogicPosition.before,t=Object(r.Q)(this.caretLineBox.extent),n={start:C(this.caretLineBox,void 0).start,before:e+t/2},i=k(this.coordinate,this.lineExpandDirection,n,this.blockRect);return this.updatePointByPointPosition(i)}},{key:"moveToLineEnd",value:function(){var e=this.lastCaretLogicPosition.before,t={start:C(this.caretLineBox,void 0).start+Object(r.Q)(this.caretLineBox.measure),before:e+Object(r.Q)(this.caretLineBox.extent)/2},n=k(this.coordinate,this.lineExpandDirection,t,this.blockRect);return this.updatePointByPointPosition(n)}},{key:"updateLineBox",value:function(e){this.caretBox=e;var t=O(e,r.b.TextLine);this.caretLineBox=t}},{key:"pointToCaretRect",value:function(e,t){var n=e.rect,i=n.width,o=n.height,a=t.x,s=t.y;switch(this.coordinate){case r.c.RIGHT_TOP:return{x:a-Object(r.Q)(i),y:s,width:Object(r.Q)(i),height:0};case r.c.LEFT_BOTTOM:return{x:a,y:s,width:Object(r.Q)(i),height:0};case r.c.LEFT_TOP:if(this.lineExpandDirection===r.I.HORIZONTAL)return{x:a,y:s,width:Object(r.Q)(i),height:0};default:return{x:a,y:s,width:0,height:Object(r.Q)(o)}}}},{key:"updateLastCaretLogicPosition",value:function(e,t){var n=e.x,i=e.y,o=e.width,a=Object(r.Q)(t.logicPoint.before);switch(this.coordinate){case r.c.RIGHT_TOP:return void(this.lastCaretLogicPosition={start:i,before:this.blockRect.width-n-o-a});case r.c.LEFT_BOTTOM:return void(this.lastCaretLogicPosition={start:this.blockRect.height-i,before:n-a});case r.c.LEFT_TOP:return this.lineExpandDirection===r.I.HORIZONTAL?void(this.lastCaretLogicPosition={start:i,before:n-a}):void(this.lastCaretLogicPosition={start:n,before:i-a})}}},{key:"getParagraphGapBetweenLines",value:function(e,t){var n=O(t,r.b.Paragraph),i=O(e,r.b.Paragraph);return n&&i&&n!==i?Object(r.Q)(n.paraProps.spaceBefore+i.paraProps.spaceAfter):0}},{key:"getCaretRealSize",value:function(e,t){var n=this.scale,i=this.transformScale,o=e<t,r=Math.ceil(1/i);return o?{width:r,height:t/n}:{height:r,width:e/n}}}])}(se);function lt(e){return"[object Object]"===Object.prototype.toString.call(e)}function ut(e,t){if(e===t)return!0;if(!lt(e)||!lt(t))return e===t;var n=e,i=t,o=Object.keys(n),r=Object.keys(i);if(o.length!==r.length)return!1;for(var a=0,s=o;a<s.length;a++){var c=s[a];if(n[c]!==i[c])return!1}return!0}function dt(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,ht()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function ht(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ht=function(){return!!e})()}!function(e){e.backward="backward",e.forward="forward"}(st||(st={}));var ft=function(e){function t(e){var n,i=e.deprecateLayoutCaretRect,o=e.getPrevLinePoint,a=e.getNextLinePoint,s=e.getLineStartPoint,c=e.getLineEndPoint,l=e.getNextLineStartPoint,u=e.updateCaretInfo;return Object(r.y)(this,t),(n=dt(this,t)).movingDirection=null,n.deprecateLayoutCaretRect=i,n.getPrevLinePoint=o,n.getNextLinePoint=a,n.getLineStartPoint=s,n.getLineEndPoint=c,n.getNextLineStartPoint=l,n.updateCaretInfo=u,n}return Object(r.w)(t,e),Object(r.x)(t,[{key:"backDeleteTextProps",get:function(){var e,t;return null===(t=null===(e=this.editor)||void 0===e?void 0:e.getBackDeleteTextProps)||void 0===t?void 0:t.call(e)}},{key:"editorModel",get:function(){var e;return null===(e=this.editor)||void 0===e?void 0:e.model}},{key:"slate",get:function(){var e;return null===(e=this.editorModel)||void 0===e?void 0:e.slate}},{key:"selection",get:function(){var e;return null===(e=this.slate)||void 0===e?void 0:e.selection}},{key:"selectionStartPoint",get:function(){return this.selection?r.r.start(this.selection):null}},{key:"selectionEndPoint",get:function(){return this.selection?r.r.end(this.selection):null}},{key:"onSelectionChange",value:function(){var e;this.selection&&(null===(e=this.slate)||void 0===e?void 0:e.isRangeCollapsed(this.selection))&&(this.movingDirection=null)}},{key:"moveBackward",value:function(){var e=this.selection,t=this.slate;if(e&&r.r.isCollapsed(e)){var n=this.getBeforePoint(this.selectionStartPoint);this.setSelectionByPoint(n,st.backward)}else{r.S.collapse(t,{edge:"start"});var i=this.slate.normalizePoint(this.selection.anchor);this.editorModel.setSelectionPoints(i,i)}this.updateCaretInfo()}},{key:"moveForward",value:function(){var e=this.selection,t=this.slate;if(e&&r.r.isCollapsed(e)){var n=this.getAfterPoint(this.selectionEndPoint);this.setSelectionByPoint(n,st.forward)}else{r.S.collapse(t,{edge:"end"});var i=this.slate.normalizePoint(this.selection.anchor);this.editorModel.setSelectionPoints(i,i)}}},{key:"moveLineBackward",value:function(){var e=this.getPrevLinePoint();e&&this.setSelectionByPoint(e,st.backward)}},{key:"moveLineForward",value:function(){var e=this.getNextLinePoint();e&&this.setSelectionByPoint(e,st.forward)}},{key:"moveWordBackward",value:function(){var e=this.selection,t=this.slate;if(e){(null==t?void 0:t.isRangeExpanded(e))&&r.S.collapse(t,{edge:"focus"});var n=null==t?void 0:t.getPrevWordPoint(r.r.start(e));n&&this.setSelectionByPoint(n,st.backward,!0)}}},{key:"moveWordForward",value:function(){var e=this.selection,t=this.slate;if(e){(null==t?void 0:t.isRangeExpanded(e))&&r.S.collapse(t,{edge:"focus"});var n=null==t?void 0:t.getNextWordPoint(r.r.start(e));n&&this.setSelectionByPoint(n,st.forward,!0)}}},{key:"moveToLineStart",value:function(){var e=this.getLineStartPoint();e&&this.setSelectionByPoint(e,st.backward)}},{key:"moveToLineEnd",value:function(){var e=this.getLineEndPoint();e&&this.setSelectionByPoint(e,st.forward)}},{key:"moveToParagraphStart",value:function(){var e=this.selection,t=this.slate;if(e&&t){var n=r.e.path(t,e,{edge:"start",depth:1}),i=r.e.start(t,n);this.editorModel.setSelectionPoints(i,i)}}},{key:"moveToParagraphEnd",value:function(){var e=this.selection,t=this.slate;if(e&&t){var n=r.e.path(t,e,{edge:"end",depth:1}),i=r.e.end(t,n);this.editorModel.setSelectionPoints(i,i)}}},{key:"moveToDocStart",value:function(){var e;null===(e=this.slate)||void 0===e||e.selectStart()}},{key:"moveToDocEnd",value:function(){var e;null===(e=this.slate)||void 0===e||e.selectEnd()}},{key:"extendToDocStart",value:function(){var e=this.slate.getStartPoint();r.S.setPoint(this.slate,e,{edge:"focus"})}},{key:"extendToDocEnd",value:function(){var e=this.slate.getEndPoint();r.S.setPoint(this.slate,e,{edge:"focus"})}},{key:"extendBackward",value:function(){this.extendCharacterSelection(st.backward)}},{key:"extendForward",value:function(){this.extendCharacterSelection(st.forward)}},{key:"extendLineBackward",value:function(){var e=this.getPrevLinePoint();e&&(e=this.walkPointWithCaretEffect(e,st.backward),r.S.setPoint(this.slate,e,{edge:"focus"}))}},{key:"extendLineForward",value:function(){var e=this.getNextLinePoint();e&&(e=this.walkPointWithCaretEffect(e,st.forward),r.S.setPoint(this.slate,e,{edge:"focus"}))}},{key:"extendWordBackward",value:function(){this.extendWordSelection(st.backward)}},{key:"extendWordForward",value:function(){this.extendWordSelection(st.forward)}},{key:"extendToLineStart",value:function(){var e=this.getLineStartPoint();e&&(e=this.walkPointWithCaretEffect(e,st.backward),r.S.setPoint(this.slate,e,{edge:"focus"}))}},{key:"extendToLineEnd",value:function(){var e=this.getLineEndPoint();e&&(e=this.walkPointWithCaretEffect(e,st.forward),r.S.setPoint(this.slate,e,{edge:"focus"}))}},{key:"extendToParagraphStart",value:function(){r.S.move(this.slate,{unit:"line",edge:"anchor",reverse:!0});var e=this.selectionStartPoint;0!==(null==e?void 0:e.offset)&&r.S.move(this.slate,{unit:"line",edge:"anchor",reverse:!0})}},{key:"extendToParagraphEnd",value:function(){var e;r.S.move(this.slate,{unit:"line",edge:"anchor"});var t=this.selectionEndPoint,n=null===(e=this.editorModel)||void 0===e?void 0:e.getNodeByPath(t.path);0===(null==t?void 0:t.offset)&&0!==n.text.length&&r.S.move(this.slate,{unit:"line",edge:"anchor"})}},{key:"deleteBackward",value:function(){var e;if(!this.handleBackDeleteTextProps())if(this.selection&&(null===(e=this.slate)||void 0===e?void 0:e.isRangeExpanded(this.selection)))this.slate.deleteFragment({direction:"backward"});else{var t=this.selectionStartPoint,n=this.getBeforePoint(this.selectionStartPoint),i=this.walkPoint(n,st.backward);r.T.equals(n,i)?this.slate.deleteBackward("character"):r.S.delete(this.slate,{at:{anchor:t,focus:i},reverse:!0})}}},{key:"deleteForward",value:function(){var e;if(this.selection&&(null===(e=this.slate)||void 0===e?void 0:e.isRangeExpanded(this.selection)))this.slate.deleteFragment({direction:"forward"});else{var t=this.selectionStartPoint,n=this.getAfterPoint(this.selectionStartPoint),i=this.walkPoint(n,st.forward);r.T.equals(n,i)?this.slate.deleteForward("character"):r.S.delete(this.slate,{at:{anchor:t,focus:i},reverse:!1})}}},{key:"deleteWordBackward",value:function(){var e=this.selection,t=this.slate;if(e)if(null==t?void 0:t.isRangeExpanded(e))t.deleteFragment({direction:"forward"});else{var n=e.anchor,i=t.getPrevWordPoint(n);i&&(i=this.walkPoint(i,st.backward),r.S.delete(t,{at:{anchor:i,focus:n}}))}}},{key:"deleteWordForward",value:function(){var e=this.selection,t=this.slate;if(e)if(null==t?void 0:t.isRangeExpanded(e))t.deleteFragment({direction:"forward"});else{var n=e.anchor,i=t.getNextWordPoint(n);i&&(i=this.walkPoint(i,st.forward),r.S.delete(t,{at:{anchor:i,focus:n}}))}}},{key:"deleteToLineStart",value:function(){var e=this.selection,t=this.slate;e&&((null==t?void 0:t.isRangeExpanded(e))?t.deleteFragment({direction:"forward"}):this.slate.deleteBackward("line"))}},{key:"deleteToLineEnd",value:function(){var e=this.selection,t=this.slate;e&&((null==t?void 0:t.isRangeExpanded(e))?t.deleteFragment({direction:"forward"}):this.slate.deleteForward("line"))}},{key:"insertBreak",value:function(){var e;null===(e=this.editor)||void 0===e||e.insertBreak()}},{key:"insertSoftBreak",value:function(){var e;null===(e=this.editor)||void 0===e||e.insertSoftBreak()}},{key:"selectAll",value:function(){this.slate.selectAll()}},{key:"isAfterSoftEnter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection;return!!e&&(!r.r.isExpanded(e)&&this.isBeforeTextEqualWith(e.anchor,"\n"))}},{key:"extendSelection",value:function(e,t,n){var i,o,r,a;if(e===st.backward)if(this.movingDirection===st.forward){var s=t(this.selectionEndPoint);s=this.walkPoint(s,st.backward),null===(i=this.editorModel)||void 0===i||i.setSelectionPoints(this.selectionStartPoint,s)}else{this.movingDirection=e;var c=t(this.selectionStartPoint);c=this.walkPoint(c,st.backward),null===(o=this.editorModel)||void 0===o||o.setSelectionPoints(c,this.selectionEndPoint)}else if(this.movingDirection===st.backward){var l=n(this.selectionStartPoint);l=this.walkPoint(l,st.forward),null===(r=this.editorModel)||void 0===r||r.setSelectionPoints(l,this.selectionEndPoint)}else{this.movingDirection=e;var u=n(this.selectionEndPoint);u=this.walkPoint(u,st.forward),null===(a=this.editorModel)||void 0===a||a.setSelectionPoints(this.selectionStartPoint,u)}}},{key:"extendCharacterSelection",value:function(e){var t=this;return this.extendSelection(e,(function(e){return t.getBeforePoint(e)}),(function(e){return t.getAfterPoint(e)}))}},{key:"extendWordSelection",value:function(e){var t=this;return this.extendSelection(e,(function(e){return t.slate.getPrevWordPoint(e)}),(function(e){return t.slate.getNextWordPoint(e)}))}},{key:"getBeforePoint",value:function(e){return e&&r.e.before(this.slate,e,{distance:1,unit:"character"})||e}},{key:"getAfterPoint",value:function(e){return e&&r.e.after(this.slate,e,{distance:1,unit:"character"})||e}},{key:"handleBackDeleteTextProps",value:function(){var e,t,n=this;if(!this.selection)return!1;if(null===(e=this.slate)||void 0===e?void 0:e.isRangeExpanded(this.selection))return!1;var i=this.selection,o=this.slate,a=this.backDeleteTextProps;if(!o||!a)return!1;var s=o.normalizePoint(i.anchor),c=r.e.node(o,s),l=Object(r.N)(c,2),u=l[0],d=l[1];if(!o.isSamePoint(r.e.end(o,d),s))return!1;var h=null===(t=r.e.next(o,{at:s,mode:"lowest"}))||void 0===t?void 0:t[0],f=this.filterBackDeleteTextProps(u,h);return!(!f.length||""===u.text)&&(r.e.withoutNormalizing(o,(function(){f.forEach((function(e){n.editorModel.removeTextProps(e,r.e.range(o,d))}))})),!0)}},{key:"filterBackDeleteTextProps",value:function(e,t){var n=this.backDeleteTextProps;return(void 0===n?[]:n).filter((function(n){return!!Object.prototype.hasOwnProperty.call(e,n)&&!ut(null==t?void 0:t[n],e[n])}))}},{key:"isBeforeTextEqualWith",value:function(e,t){var n;if(!e||!t)return!1;var i=this.getBeforePoint(e);return(null===(n=this.editor)||void 0===n?void 0:n.getString({anchor:e,focus:i}))===t}},{key:"setSelectionByPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.editorModel){var i=this.editorModel.getVoidInfoByPoint(e),o=i.range;if(i.isInsideVoid){var r=o.anchor,a=o.focus;t===st.forward?this.editorModel.setSelectionPoints(n?a:r,a):this.editorModel.setSelectionPoints(r,n?r:a)}else{var s=this.slate.normalizePoint(e);this.editorModel.setSelectionPoints(s,s)}}}},{key:"walkPoint",value:function(e,t){var n=this;return[this.pointVoidWalker].reduce((function(e,i){return i.call(n,e,t)}),e)}},{key:"walkPointWithCaretEffect",value:function(e,t){var n=this.walkPoint(e,t);return r.T.equals(n,e)||this.deprecateLayoutCaretRect(),n}},{key:"pointVoidWalker",value:function(e,t){var n,i=(null===(n=this.editorModel)||void 0===n?void 0:n.getVoidInfoByPoint(e))||{},o=i.range;if(i.isInsideVoid){var r=o.anchor,a=o.focus;return t===st.forward?a:r}return e}}])}(se),pt="style_ios-caret-dragger-container__DlqSc",vt="style_follow-finger-caret__o7rB4",gt="style_fake-caret__1y5ML",yt="style_android-caret-dragger-container__Nev0H",mt="style_caret-hot-spot__rKrAO",Et="style_caret-symbol__0P4aQ",bt="style_left-top__C-Uav",Tt="style_right-top__QjgXN",St="style_left-bottom__1B6Th";function xt(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,Ot()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function Ot(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ot=function(){return!!e})()}Object(r.P)(".style_ios-caret-dragger-container__DlqSc {\n  visibility: hidden;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.style_ios-caret-dragger-container__DlqSc .style_follow-finger-caret__o7rB4 {\n  position: absolute;\n  background-color: #1e6fff;\n  transform-origin: center center;\n  transition: transform 200ms;\n}\n.style_ios-caret-dragger-container__DlqSc .style_fake-caret__1y5ML {\n  position: absolute;\n  background-color: #cccccc;\n  transform-origin: center center;\n  transition: transform 200ms;\n}\n\n.style_android-caret-dragger-container__Nev0H {\n  visibility: hidden;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n.style_android-caret-dragger-container__Nev0H .style_fake-caret__1y5ML {\n  position: absolute;\n  background-color: #1e6fff;\n  transition: transform 300ms;\n}\n.style_android-caret-dragger-container__Nev0H .style_fake-caret__1y5ML .style_caret-hot-spot__rKrAO {\n  position: absolute;\n}\n.style_android-caret-dragger-container__Nev0H .style_fake-caret__1y5ML .style_caret-symbol__0P4aQ {\n  position: absolute;\n  width: 22px;\n  height: 22px;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAYAAABRRIOnAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAhKADAAQAAAABAAAAhAAAAADOBoV4AAAJdElEQVR4Ae2da4xdVRXH1z5zZxgF7NSCDz4408G01CpGiyEtmEobXylfJAFUxAcxgCHSTltFFM0ENAh2emuDgRoNJsQYi4EoEU1EjcYMiWLiIwqUdh5aDBHtTDO1nXFmzva/p9w43N5O78zdaz/XTW7uOfucu/Za//07a+/zJsr4865+Xck4/IahFw1LMyjs6dedQ2P0ePc2/eUMwm06RNX0mgmtaGAox+hHCOndJiyl6Cuje9QdCYW45FCyA6IehppyAsVJJbIC4nQwCBQ1BZAt/z+Z9tSZYKhFn3umyAKIZmEQKDLIEIuFIXcoks4QS4UhZyiSBaJVGHKFIkkgbMGQIxTJAWEbhtygSAoILhhygiIZILhhyAWKJIBwBUMOUEQPhGsYUociaiB8wZAyFNEC4RuGVKGIEohQYEgRiuiACA2G1KCICohQYUgJimiACB2GVKCIAohYYEgBiuCBiA2G2KEIGohYYYgZimCBiB2GWKEIEohUYIgRiuCASA2G2KAICohUYYgJimCASB2GWKAIAohcYIgBCu9A5AZD6FB4fRzA2n7dUY7TDyHS3F3YNbFy+NWavhDiowi8AaG1VsfG6Tuk6T05ANAoxpeguLPRMl9l3oDo2UYDEORDvgIPpV5o8MWePr01FH+8jCG6t+rPaKJ7QxEhAD90oei6kT3qe759cQ5E93Z9hS7pCXQV3rKTb9Eb1Y+GmC4qtGV4QP2s0XJXZU6BWLVDnzc5Q39EcBe4CjCmevBsiomKorcfqqqDvvx2upVOzdCDAsPpmxrjiXNnStr/xr36rNOvxbvEGRA92/SnMG64kjec+K1Do7dNH6JdviJx0mVcdLtecfw4PYcgl/sKNLZ6VUFXjVbVo679dpIhTpyguwSGRTZtSff33qaXLfJfLa/ODsTKnfpi9I03tuxpZgbQdby2/C/d6TpsdiDKaboHQbW5DiyF+sqSblm5Xb/VZSysQPT26beA9Pe5DCixutoAxTdcxsQKxIym7S6DSbEudLeX4dC2s42KDQicyXs9dmE+nGIjuY6p1PR5V3WyAYGu4kbQ3eEqkKTr0fTO3h36chcxsgGhNH3QRQC51DE76yZLsByYunCnfvP0NP05l8ZyFKduq9BKnPwa5ayPJUPMzNA1nE5naluVs/QR7thZgMD44SpuxzO1fz133NaBWNunX41rHd7E7XiO9jFIX43B5Ts4Y7cOxDFN6+Ewy9iEU4hYbM/M0gc4fbUOBLLDBk6Hc7eNLW0Tpwb2gVACBGeDodu4hPMsqH0giFZzCiK2qU1P0kYuHawCYe7CAsGv43JW7J5UoCyI7ailVSDUGHXDZRlQcpPLuBdnFQgcf+jh1kLsQ4FYgCgVvUYajF8Brah7fZ9+BUdNVjME+gpvl49ziBOsTdzk9IKiVRz+WQUCo4dODifF5qkKzGo6/9TS1kvsAqEFiNabpEkLJc8tDVaBwC6nXEzbZHtaWK3Lgo1TTFgFoijo6Ck1SAGPAiqCDEEljfFEL1brFcCNwZX6MhvzVjMEbj8TIGy0SjM2NE02s9pi1xEgFqtYOOtPcbhiFYiODhricFJsNlBARZAhnrlb/Rt92z8buC9FlhXAljxh2eScOasZ4iUHn+ZwVGy+XAE8lmn05SV25qwDgWMRAoSdtlnQSls7DS+4whIXWgcCexpPLdEX+VvzChw/tEuxdM32gdD08+bjkjWXpIDiyQ7GF+tA4FmLIzjryZLOliRemn/6HVdY1oGYc1RJluBqsDm7mga57PMAUdBPuRwWu0QdRWRAqFfRj3E8Ylwaz74CRtfndtNf7Vs+aZElQ4z0q0lcLPMwl9OZ2/2JUnjYAtOHBQjjKww/xORz1mYxYN/PKQAbEEO76TfIEt6e2cwpmi/b6C4mqIt3fMYGhElrhfb3iF5fjcZar6bH5rpjxkrYgDA+Vy7EG3OI/mGm5WNBAUXftmBlQROsQBy8VU0hzQ0s6IEsbEoB6PiH0T3qF02t3MJKrEAYv5ZVaB8GQi+24KP8FQrows2GxQ7En3ap/2Bw+Tlp1ZYUOHz+avp+Sxaa/DM7EMaPkSo9iJT3ZJM+yWr1ChR01+9vUtP1xRzzToCYO5BS0C0IYJYjiJRtmrHDDcvoW65iRPfu7vOGbXoP7lze6q7G+GvCnU8bh7+ufu0qEicZohZMRy/dZoivzcvvGRRQtN8lDMYbp0CY3dC2gq5FvcfOIEX2i5G6X2iv0KddC+EUCBPc0G51AFniZteBRlafxjs8P8p1mdxCWjgHwjiDAyzfxX2gexdyLOdleMvv13y90NULEKaxP76M+nB8gvXMXYxQoasYXLGG7vDlu9O9jPog1/brjmNj9DhO7m+uX5bjPBrjmXMKuuwvVXXEV/xegTBBr/6sPvfEFP0Sk+t8iRBEvYqer5xFG4buUX/z6Y+3LqMW9LP3qolKJ23GQPNXtbLcfhH7ON75/X7fMBjdvQNhnIAQR9t76b0Q5hEzn9MHKRrPD6MrhqoqiBfOBAGEAcAco/hEF12Ngea+XIDABnCA2mkD7mUJ5mCd9zFEo8bHawlvxs2sVQw2032qnaLfdrbRlgMD6l+NNPBVFkyGmC/ASFU9ULTTpdiCnp1fnso04rq/6KKNocFg9A0yQ9QaHrul50yM0304IfaxWlnUv4qOAIZPjlbVo6HGETQQNdHwUthNmL4PjxpYUyuL7lfRE+0F3XBot/p7yL5HAYQRcN0+3f7i0zi6SfQlZIyzQxZ1vm8QeBj7cjtCzgp1/s6fDX/avEIaXu7EgPOmkMFA1zCBDvmr7StpwOxBha/sSQ+jyRD1gl50u14xOUm3luXcKeLl9cs9zh+GqHvbOumb5viKRz+WVHW0QNSivXinPnt8Bu8J1XQ9tsjN+PWx56SREQZxZfQD5mJYV9c/1jSw+Rs9EPPFwHmRCyan6DqAsQXl6zEI5XwZPV5bQU/iEUr7UckPDlTV8/N9iXU6KSDmN8K6fv3KI0fpclzVuwlZYz3ul16DcceSXykAoSbx/6dwrcIggBvE+ZfBg3er5O43SRaI+XDUplft0OdNl7SmJFqF7LEC5V2AZTlE6MLmbrQwjwue+6LfMc+3GEHpMLLAyCWX0uGHr1Fy1ThEkY8oIAqIAqKAKCAKiAKigCggCogCooAoIAqIAqKAKCAKiAKigCggCogCooAoIAqIAqKAKCAKiAKigCggCogCooAoIAqIAqKAKJCVAv8DZbGdp0bCnDEAAAAASUVORK5CYII=);\n  transform-origin: center;\n  touch-action: none;\n}\n.style_android-caret-dragger-container__Nev0H .style_fake-caret__1y5ML.style_left-top__C-Uav {\n  transform-origin: center 100%;\n}\n.style_android-caret-dragger-container__Nev0H .style_fake-caret__1y5ML.style_left-top__C-Uav .style_caret-symbol__0P4aQ {\n  top: 100%;\n  left: 50%;\n  transform: translate(-50%, -10%);\n}\n.style_android-caret-dragger-container__Nev0H .style_fake-caret__1y5ML.style_right-top__QjgXN {\n  transform-origin: 0 center;\n}\n.style_android-caret-dragger-container__Nev0H .style_fake-caret__1y5ML.style_right-top__QjgXN .style_caret-symbol__0P4aQ {\n  top: 50%;\n  left: 0;\n  transform: translate(-90%, -50%) rotate(90deg);\n}\n.style_android-caret-dragger-container__Nev0H .style_fake-caret__1y5ML.style_left-bottom__1B6Th {\n  transform-origin: 100% center;\n}\n.style_android-caret-dragger-container__Nev0H .style_fake-caret__1y5ML.style_left-bottom__1B6Th .style_caret-symbol__0P4aQ {\n  top: 50%;\n  left: 100%;\n  transform: translate(-10%, -50%) rotate(-90deg);\n}");var wt=function(e){function t(){var e;return Object(r.y)(this,t),(e=xt(this,t)).initContainer(),e.initFakeCaret(),e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"caretThickness",get:function(){return 2/this.transformScale}},{key:"attach",value:function(e){this.surfaceDom=e,this.surfaceDom.appendChild(this.container)}},{key:"detach",value:function(){this.surfaceDom.removeChild(this.container),this.clear()}},{key:"hide",value:function(){this.container.style.visibility="hidden",this.fakeCaret.style.cssText+="left: 0px; top: 0px;"}},{key:"show",value:function(){this.container.style.visibility="visible"}},{key:"update",value:function(e,t,n,i,o){this.updateFakeCaret(e,t,n,i)}},{key:"triggerTouchStart",value:function(e){}},{key:"triggerTouchMove",value:function(e){}},{key:"triggerTouchEnd",value:function(e,t){}},{key:"triggerLongTouch",value:function(e){this.onLongTouch(e)&&this.selectWord(e)}},{key:"onLongTouch",value:function(e){return!0}},{key:"selectWord",value:function(e){var t,n,i=null===(t=this.editor)||void 0===t?void 0:t.getPointByPosition(e);i&&(null===(n=this.editor)||void 0===n||n.model.selectCurrentWord(i))}},{key:"initContainer",value:function(){this.container=document.createElement("div")}},{key:"clear",value:function(){}},{key:"initFakeCaret",value:function(){this.fakeCaret=document.createElement("div"),this.fakeCaret.classList.add(gt),this.container.appendChild(this.fakeCaret)}},{key:"updateFakeCaret",value:function(e,t,n,i){var o,r;n<i?(o=this.caretThickness,r=i):(o=n,r=this.caretThickness),this.fakeCaret.style.cssText+="left: ".concat(e,"px; top: ").concat(t,"px; width: ").concat(o,"px; height: ").concat(r,"px;"),this.fakeCaretX=e,this.fakeCaretY=t,this.fakeCaretWidth=o,this.fakeCaretHeight=r}}])}(Fe);function _t(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,Ct()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function Ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ct=function(){return!!e})()}function At(e,t,n,i){var o=Object(r.R)(Object(r.z)(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var kt=function(e){function t(){var e;return Object(r.y)(this,t),(e=_t(this,t)).isStartDrag=!1,e.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation()},e.handleTouchStart=function(t){t.preventDefault(),t.stopPropagation(),e.startDrag(),e.updateTouchstartExtentOffset(t),e.handleTouchPoint(t)},e.handleTouchMove=function(t){t.preventDefault(),e.isStartDrag&&e.editor&&(e.updateSelectionFromTouch(t),e.show())},e.handleTouchEnd=function(t){t.stopPropagation(),e.stopDrag()},e.updateSelectionFromTouch=Object(r.O)((function(t){var n,i=e.getPointFromTouch(t);i&&(null===(n=e.editor)||void 0===n||n.model.setSelectionPoints(i,i))}),50),e.initCaretSymbol(),e.initHotSpot(),e.registerEvent(),e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"caretSymbolWidth",get:function(){return 22/this.transformScale}},{key:"caretSymbolHeight",get:function(){return 22/this.transformScale}},{key:"hotSpotMeasure",get:function(){return 30/this.transformScale}},{key:"update",value:function(e,n,i,o,r){At(t,"update",this,3)([e,n,i,o,r]),this.updateFakeCaretClass(),this.updateCaretSymbol(),this.updateCurrentLine(r),this.updateHotSpot()}},{key:"show",value:function(){var e=this;At(t,"show",this,3)([]),clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout((function(){e.hide()}),2800)}},{key:"clear",value:function(){this.unregisterEvent()}},{key:"triggerTouchEnd",value:function(e){var t;!(arguments.length>1&&void 0!==arguments[1]&&arguments[1])&&(null===(t=this.editor)||void 0===t?void 0:t.isSelectionCollapsed())&&this.show()}},{key:"isCaretDragging",value:function(){return this.isStartDrag}},{key:"initContainer",value:function(){At(t,"initContainer",this,3)([]),this.container.classList.add(yt)}},{key:"initCaretSymbol",value:function(){this.caretSymbol=document.createElement("div"),this.caretSymbol.classList.add(Et),this.fakeCaret.appendChild(this.caretSymbol)}},{key:"initHotSpot",value:function(){this.hotSpot=document.createElement("div"),this.hotSpot.classList.add(mt),this.fakeCaret.appendChild(this.hotSpot)}},{key:"registerEvent",value:function(){this.hotSpot.addEventListener("mousedown",this.handleMouseDown),this.hotSpot.addEventListener("touchstart",this.handleTouchStart),this.hotSpot.addEventListener("touchmove",this.handleTouchMove),this.hotSpot.addEventListener("touchend",this.handleTouchEnd),this.hotSpot.addEventListener("touchcancel",this.handleTouchEnd)}},{key:"unregisterEvent",value:function(){this.hotSpot.removeEventListener("mousedown",this.handleMouseDown),this.hotSpot.removeEventListener("touchstart",this.handleTouchStart),this.hotSpot.removeEventListener("touchmove",this.handleTouchMove),this.hotSpot.removeEventListener("touchend",this.handleTouchEnd),this.hotSpot.removeEventListener("touchcancel",this.handleTouchEnd)}},{key:"handleTouchPoint",value:function(e){var t,n=this.getPointFromTouch(e);n&&(null===(t=this.editor)||void 0===t||t.handleTouchPoint(n))}},{key:"startDrag",value:function(){this.isStartDrag=!0,this.fakeCaret.style.transform="scale(1.3)"}},{key:"stopDrag",value:function(){this.isStartDrag=!1,this.fakeCaret.style.transform="none"}},{key:"updateFakeCaretClass",value:function(){switch(this.fakeCaret.classList.remove(St),this.fakeCaret.classList.remove(Tt),this.fakeCaret.classList.remove(bt),this.coordinate){case r.c.LEFT_BOTTOM:this.fakeCaret.classList.add(St);break;case r.c.RIGHT_TOP:this.fakeCaret.classList.add(Tt);break;case r.c.LEFT_TOP:if(this.lineExpandDirection===r.I.HORIZONTAL){this.fakeCaret.classList.add(St);break}default:this.fakeCaret.classList.add(bt)}}},{key:"updateHotSpot",value:function(){var e,t,n,i,o=this.fakeCaretWidth,a=this.fakeCaretHeight,s=this.caretSymbolWidth,c=this.caretSymbolHeight,l=this.hotSpotMeasure;switch(this.coordinate){case r.c.LEFT_BOTTOM:e=o+s,t=l,n=0,i=-l/2;break;case r.c.RIGHT_TOP:e=o+s,t=l,n=-s,i=-l/2;break;case r.c.LEFT_TOP:if(this.lineExpandDirection===r.I.HORIZONTAL){e=o+s,t=l,n=0,i=-l/2;break}default:e=l,t=a+c,n=-l/2,i=0}this.hotSpot.style.cssText+="\n      width: ".concat(e,"px; height: ").concat(t,"px;\n      left: ").concat(n,"px; top: ").concat(i,"px;\n    ")}},{key:"updateCaretSymbol",value:function(){this.caretSymbol.style.cssText+="\n      width: ".concat(this.caretSymbolWidth,"px;\n      height: ").concat(this.caretSymbolHeight,"px;\n    ")}}])}(wt);function Rt(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,Pt()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function Pt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pt=function(){return!!e})()}function It(e,t,n,i){var o=Object(r.R)(Object(r.z)(1&i?e.prototype:e),t,n);return 2&i&&"function"==typeof o?function(e){return o.apply(n,e)}:o}var Lt=function(e){function t(){var e;return Object(r.y)(this,t),(e=Rt(this,t)).isStartDrag=!1,e.updateCaretFromTouch=Object(r.O)((function(t){var n;if(e.editor){var i=e.editor.getPointByPosition(t);i&&(null===(n=e.editor)||void 0===n||n.model.setSelectionPoints(i,i))}}),50),e.initFollowFingerCaret(),e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"detach",value:function(){It(t,"detach",this,3)([])}},{key:"onLongTouch",value:function(e){var t,n,i=null===(t=this.editor)||void 0===t?void 0:t.getPointByPosition(e);return!!i&&(!(null===(n=this.editor)||void 0===n?void 0:n.isSelectionCollapsed())||!r.T.equals(this.editor.selection.focus,i)||(this.startDrag(),this.editor.updateSurface(),this.updateFollowFingerCaret(e),!1))}},{key:"triggerTouchMove",value:function(e){this.isStartDrag&&this.editor&&(this.updateCaretFromTouch(e),this.updateFollowFingerCaret(e))}},{key:"triggerTouchEnd",value:function(){this.stopDrag()}},{key:"show",value:function(){It(t,"show",this,3)([]),this.followFingerCaret.style.cssText+="transform: scale(1.3);"}},{key:"hide",value:function(){It(t,"hide",this,3)([]),this.followFingerCaret.style.cssText+="transform: scale(1); left: 0px; top: 0px;"}},{key:"isCaretDragging",value:function(){return this.isStartDrag}},{key:"initContainer",value:function(){It(t,"initContainer",this,3)([]),this.container.classList.add(pt)}},{key:"initFollowFingerCaret",value:function(){this.followFingerCaret=document.createElement("div"),this.followFingerCaret.classList.add(vt),this.container.appendChild(this.followFingerCaret)}},{key:"startDrag",value:function(){this.isStartDrag=!0,this.show()}},{key:"stopDrag",value:function(){this.isStartDrag=!1,this.hide()}},{key:"updateFollowFingerCaret",value:function(e){var t,n=e.posXOfWorld,i=e.posYOfWorld;if(this.editor){var o,a,s=this.editor.positionOfAppToPositionOfEditor(n,i),c=s.x,l=s.y,u=(null===(t=this.editor)||void 0===t?void 0:t.scale)||1,d=this.fakeCaretWidth,h=this.fakeCaretHeight;d<h?(o=c/u,a=l/u-h/2):(o=c/u-d/2,a=l/u);var f=this.legalizeFollowFingerCaretOffset(o,a),p=Object(r.N)(f,2);o=p[0],a=p[1],this.followFingerCaret.style.cssText+="\n      left: ".concat(o,"px; top: ").concat(a,"px; width: ").concat(d,"px; height: ").concat(h,"px;\n    ")}}},{key:"legalizeFollowFingerCaretOffset",value:function(e,t){var n,i=this.fakeCaretWidth,o=this.fakeCaretHeight,r=this.textRect,a=this.blockRect,s=(null===(n=this.editor)||void 0===n?void 0:n.scale)||1,c=a.x,l=a.y,u=r.x-c,d=r.y-l,h=e,f=t;return e-u/s<0&&(h=u/s),t-d/s<0&&(f=d/s),e+i-u/s>r.width/s&&(h=(u+r.width)/s-i),t+o-d/s>r.height/s&&(f=(d+r.height)/s-o),[h,f]}}])}(wt);var Nt={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",moveToLineStart:"home",moveToLineEnd:"end",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendLineBackward:"shift+up",extendLineForward:"shift+down",italic:"mod+i",splitBlock:"enter",insertSoftBreak:"shift?+enter",undo:"mod+z",selectAll:"mod+a",left:"left",right:"right",up:"up",down:"down"},Bt={moveWordBackward:"opt+left",moveWordForward:"opt+right",moveToLineStart:"cmd+left",moveToLineEnd:"cmd+right",moveToParagraphStart:"ctrl+a",moveToParagraphEnd:"ctrl+e",moveToDocStart:"cmd+up",moveToDocEnd:"cmd+down",extendWordBackward:"shift+left+opt",extendWordForward:"shift+right+opt",extendLineStart:"shift+cmd+left",extendLineEnd:"shift+cmd+right",extendParagraphStart:"opt+shift+up",extendParagraphEnd:"opt+shift+down",extendDocStart:"cmd+shift+up",extendDocEnd:"cmd+shift+down",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:"cmd+shift?+delete",deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Dt={moveToDocStart:"pageup",moveToDocEnd:"pagedown",extendWordBackward:"shift+left+ctrl",extendWordForward:"shift+right+ctrl",deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",extendLineStart:"shift+home",extendLineEnd:"shift+end",extendParagraphStart:"ctrl+shift+up",extendParagraphEnd:"ctrl+shift+down",extendDocStart:"shift+pageup",extendDocEnd:"shift+pagedown",redo:["ctrl+y","ctrl+shift+z"]},Mt=function(e){var t=Nt[e],n=Bt[e],i=Dt[e],o=t&&Object(r.U)(t),a=n&&Object(r.U)(n),s=i&&Object(r.U)(i);return function(e){return!!(null==o?void 0:o(e))||(!!(q&&a&&a(e))||!(q||!s||!s(e)))}},jt=Mt("left"),Ft=Mt("right"),Ht=Mt("up"),Ut=Mt("down");var zt={isBold:Mt("bold"),isCompose:Mt("compose"),isDeleteBackward:Mt("deleteBackward"),isDeleteForward:Mt("deleteForward"),isDeleteLineBackward:Mt("deleteLineBackward"),isDeleteLineForward:Mt("deleteLineForward"),isDeleteWordBackward:Mt("deleteWordBackward"),isDeleteWordForward:Mt("deleteWordForward"),isExtendBackward:Mt("extendBackward"),isExtendForward:Mt("extendForward"),isExtendLineBackward:Mt("extendLineBackward"),isExtendLineForward:Mt("extendLineForward"),isItalic:Mt("italic"),isMoveWordBackward:Mt("moveWordBackward"),isMoveWordForward:Mt("moveWordForward"),isRedo:Mt("redo"),isSplitBlock:Mt("splitBlock"),isInsertSoftBreak:Mt("insertSoftBreak"),isTransposeCharacter:Mt("transposeCharacter"),isUndo:Mt("undo"),isSelectAll:Mt("selectAll"),isMoveBackward:function(e,t,n){switch(t){case r.c.LEFT_BOTTOM:return Ut(e);case r.c.RIGHT_TOP:return Ht(e);case r.c.LEFT_TOP:if(n===r.I.HORIZONTAL)return Ht(e);default:return jt(e)}},isMoveForward:function(e,t,n){switch(t){case r.c.LEFT_BOTTOM:return Ht(e);case r.c.RIGHT_TOP:return Ut(e);case r.c.LEFT_TOP:if(n===r.I.HORIZONTAL)return Ut(e);default:return Ft(e)}},isMoveLineBackward:function(e,t,n){switch(t){case r.c.LEFT_BOTTOM:return jt(e);case r.c.RIGHT_TOP:return Ft(e);case r.c.LEFT_TOP:if(n===r.I.HORIZONTAL)return jt(e);default:return Ht(e)}},isMoveLineForward:function(e,t,n){switch(t){case r.c.LEFT_BOTTOM:return Ft(e);case r.c.RIGHT_TOP:return jt(e);case r.c.LEFT_TOP:if(n===r.I.HORIZONTAL)return Ft(e);default:return Ut(e)}},isExtendWordBackward:Mt("extendWordBackward"),isExtendWordForward:Mt("extendWordForward"),isExtendLineStart:Mt("extendLineStart"),isExtendLineEnd:Mt("extendLineEnd"),isExtendParagraphStart:Mt("extendParagraphStart"),isExtendParagraphEnd:Mt("extendParagraphEnd"),isMoveToLineStart:Mt("moveToLineStart"),isMoveToLineEnd:Mt("moveToLineEnd"),isMoveToParagraphStart:Mt("moveToParagraphStart"),isMoveToParagraphEnd:Mt("moveToParagraphEnd"),isMoveToDocStart:Mt("moveToDocStart"),isMoveToDocEnd:Mt("moveToDocEnd"),isExtendDocStart:Mt("extendDocStart"),isExtendDocEnd:Mt("extendDocEnd")},Wt=function(){return Object(r.x)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;Object(r.y)(this,e),this.a=t,this.b=n,this.c=i,this.d=o,this.tx=a,this.ty=s}),[{key:"set",value:function(e,t,n,i,o,r){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=o,this.ty=r,this}},{key:"translate",value:function(e,t){return this.tx+=e,this.ty+=t,this}},{key:"scale",value:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}},{key:"scaleInSitu",value:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this}},{key:"rotate",value:function(e){if(0===e)return this;var t=Math.cos(e),n=Math.sin(e),i=this.a,o=this.c,r=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=o*t-this.d*n,this.d=o*n+this.d*t,this.tx=r*t-this.ty*n,this.ty=r*n+this.ty*t,this}},{key:"append",value:function(e){var t=this.a,n=this.b,i=this.c,o=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*o,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*o,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*o+this.ty,this}},{key:"prepend",value:function(e){var t=this.a,n=this.c,i=this.tx;return 1===e.a&&0===e.b&&0===e.c&&1===e.d||(this.a=t*e.a+this.b*e.c,this.b=t*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d),this.tx=i*e.a+this.ty*e.c+e.tx,this.ty=i*e.b+this.ty*e.d+e.ty,this}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}},{key:"invert",value:function(){var e=this.a,t=this.b,n=this.c,i=this.d,o=this.tx,r=e*i-t*n;return this.a=i/r,this.b=-t/r,this.c=-n/r,this.d=e/r,this.tx=(n*this.ty-i*o)/r,this.ty=-(e*this.ty-t*o)/r,this}},{key:"copyFrom",value:function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t}},{key:"applyInverse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0},n=e.x,i=e.y,o=1/(this.a*this.d+this.c*-this.b);return t.x=this.d*o*n+-this.c*o*i+(this.ty*this.c-this.tx*this.d)*o,t.y=this.a*o*i+-this.b*o*n+(-this.ty*this.a+this.tx*this.b)*o,t}}])}();Wt.Identity=new Wt;var Gt=function(){return Object(r.x)((function e(){Object(r.y)(this,e)}),null,[{key:"setFlag",value:function(){this.isHandledFlag=!0}},{key:"resetFlag",value:function(){this.isHandledFlag=!1}}])}();Gt.isHandledFlag=!1;var Vt=function(){function e(){Object(r.y)(this,e),this.attached=!1,this.isKeepCaretShow=!1,this.isKeepCaretHide=!1}return Object(r.x)(e,[{key:"attach",value:function(){var e=this;this.attached||(this.attachEditingComponent(),this.caretManager=new ct,this.selectionHandler=new ft({deprecateLayoutCaretRect:function(){var t;return null===(t=e.caretManager)||void 0===t?void 0:t.deprecateLayoutCaretRect()},getPrevLinePoint:function(){return e.caretManager.moveToPrevLine()},getNextLinePoint:function(){return e.caretManager.moveToNextLine()},getLineStartPoint:function(){return e.caretManager.moveToLineStart()},getLineEndPoint:function(){return e.caretManager.moveToLineEnd()},getNextLineStartPoint:function(){return e.caretManager.moveToNextLineStart()},updateCaretInfo:function(){return e.update()}}),this.attached=!0)}},{key:"detach",value:function(){this.detachEditingComponent(),this.selectionOverlay=null,this.caretManager=null,this.selectionHandler=null,this.attached=!1}},{key:"attachEditor",value:function(e){var t;this.editor!==e&&(this.editor&&this.detachEditor(this.editor),this.selectionOverlay.attachEditor(e),this.caretManager.attachEditor(e),this.selectionHandler.attachEditor(e),null===(t=this.caretDragger)||void 0===t||t.attachEditor(e),this.updateSurfaceContainer(e.container),null==e||e.focusHook(),this.editor=e)}},{key:"detachEditor",value:function(e){var t,n;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(null==e||e.blurHook()),this.editor===e&&(this.editor=null,this.hideSurfaceDom(),this.isKeepCaretShow=!1,this.isKeepCaretHide=!1),null===(t=this.selectionOverlay)||void 0===t||t.detachEditor(e),this.readonly||(this.caretManager.detachEditor(e),this.selectionHandler.detachEditor(e),null===(n=this.caretDragger)||void 0===n||n.detachEditor(e))}},{key:"isCaretDragging",get:function(){var e;return(null===(e=this.caretDragger)||void 0===e?void 0:e.isCaretDragging())||!1}},{key:"selection",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.selection)||null}},{key:"readonly",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.readonly)||!1}},{key:"isSelectionCollapsed",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.isSelectionCollapsed())||!1}},{key:"preventScrollOnFocus",get:function(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.preventScrollOnFocus)||!1}},{key:"selectionBlockRect",get:function(){var e;if(this.selection)return r.r.isCollapsed(this.selection)?this.caretManager.caretRect:null===(e=this.selectionOverlay)||void 0===e?void 0:e.selectionBlockRect}},{key:"getPointFromPointPosition",value:function(e){return this.caretManager.updatePointByPointPosition(e)}},{key:"update",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.needUpdateSelection,i=void 0===n||n,o=t.needFocus,r=void 0===o||o;i&&this.selectionOverlay.update(),this.readonly||(this.updateCaretAndHiddenEditor(r),null===(e=this.selectionHandler)||void 0===e||e.onSelectionChange())}},{key:"triggerTouchStart",value:function(e){var t;null===(t=this.caretDragger)||void 0===t||t.triggerTouchStart(e),this.hiddenEditor instanceof ne&&this.hiddenEditor.triggerTouchStart(bn.platform)}},{key:"triggerTouchMove",value:function(e){var t;null===(t=this.caretDragger)||void 0===t||t.triggerTouchMove(e)}},{key:"triggerTouchEnd",value:function(e,t){var n;null===(n=this.caretDragger)||void 0===n||n.triggerTouchEnd(e,t)}},{key:"triggerLongTouch",value:function(e){var t;null===(t=this.caretDragger)||void 0===t||t.triggerLongTouch(e)}},{key:"clear",value:function(){var e;null===(e=this.selectionOverlay)||void 0===e||e.clear()}},{key:"startKeepCaretShow",value:function(){this.isKeepCaretShow=!0,this.isKeepCaretHide=!1,!this.readonly&&this.isSelectionCollapsed&&this.caret.show()}},{key:"stopKeepCaretShow",value:function(){this.isKeepCaretShow&&(this.isKeepCaretShow=!1,this.caret.hide())}},{key:"startKeepCaretHide",value:function(){this.isKeepCaretHide=!0,this.isKeepCaretShow=!1,this.caret.hide()}},{key:"stopKeepCaretHide",value:function(){this.isKeepCaretHide&&(this.isKeepCaretHide=!1,!this.readonly&&this.isSelectionCollapsed&&this.isHiddenInputFocus&&this.caret.show())}},{key:"updateCaretAndHiddenEditor",value:function(){var e,t,n,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.updateSurfaceMatrix(),!this.readonly&&this.selection){var o=this.selectionOverlay.caretInfo;if(!o)return this.caret.hide(),void(null===(e=this.caretDragger)||void 0===e||e.hide());var r=this.caretManager.getCaretRectOfWindow(o.caretBox,o.caretPosition),a=r.x,s=r.y,c=r.width,l=r.height,u=r.isCaretFromLayout,d=this.caretManager,h=d.caretLineBox,f=d.caretBox;if(!this.dealSoftEnter(u)){var p=this.getCaretColor(f.textStyle);this.caret.update(a,s,c,l,p),null===(t=this.caretDragger)||void 0===t||t.update(a,s,c,l,h),this.isSelectionCollapsed&&(i||this.isHiddenInputFocus||this.isKeepCaretShow)&&!this.isKeepCaretHide?this.caret.show():(this.caret.hide(),null===(n=this.caretDragger)||void 0===n||n.hide()),this.hiddenEditor.show(a,s+l,i,this.preventScrollOnFocus)}}}},{key:"dealSoftEnter",value:function(e){var t;if(!e&&!Gt.isHandledFlag&&(null===(t=this.caretManager)||void 0===t?void 0:t.isCaretInLineEnd())&&this.selectionHandler.isAfterSoftEnter()){var n=this.caretManager.moveToNextLineStart();return!!n&&(r.T.equals(n,this.selection.anchor)?this.updateCaretAndHiddenEditor():(Gt.setFlag(),this.editor.model.setSelectionPoints(n,n)),!0)}return!1}},{key:"updateSurfaceMatrix",value:function(){var e,t,n,i=null===(e=this.editor)||void 0===e?void 0:e.matrix;if(i){var o=(null===(t=this.editor)||void 0===t?void 0:t.blockRect)||{},r=o.x,a=void 0===r?0:r,s=o.y,c=void 0===s?0:s,l=(null===(n=this.editor)||void 0===n?void 0:n.scale)||1,u=(new Wt).translate(a/l,c/l),d=i.append(u),h=d.a,f=d.b,p=d.c,v=d.d,g=d.tx,y=d.ty;this.surfaceDom.style.transform="matrix(".concat(h,", ").concat(f,", ").concat(p,", ").concat(v,", ").concat(g,", ").concat(y,")")}}},{key:"getCaretColor",value:function(e){return(null==e?void 0:e.getRenderColor())||e.textColor}},{key:"attachEditingComponent",value:function(){var e=document.createElement("div");e.className="extended-components",e.style.cssText="position: absolute; left: 0; top: 0; z-index: 2;",this.surfaceDom=e,this.attachCaret(),this.attachHiddenEditor(),this.attachSelectionOverlay(),this.attachCaretDragger()}},{key:"updateSurfaceContainer",value:function(e){e!==this.surfaceContainer&&(this.surfaceDom.parentElement&&this.surfaceDom.parentElement.removeChild(this.surfaceDom),e&&e.appendChild(this.surfaceDom),this.surfaceContainer=e)}},{key:"hideSurfaceDom",value:function(){var e;this.hiddenEditor.hide(),this.caret.hideAndReset(),null===(e=this.caretDragger)||void 0===e||e.hide()}},{key:"attachCaret",value:function(){this.caret=new z,this.caret.attach(this.surfaceDom)}},{key:"attachSelectionOverlay",value:function(){var e,t;this.selectionOverlay=(t=bn.platform,Q(t)?new ot(t):new Ee),null===(e=this.selectionOverlay)||void 0===e||e.attachControlBar(this.surfaceDom)}},{key:"attachCaretDragger",value:function(){var e,t;this.caretDragger=(t=bn.platform)===o.iosMobile?new Lt:t===o.androidMobile?new kt:null,null===(e=this.caretDragger)||void 0===e||e.attach(this.surfaceDom)}},{key:"handleBlur",value:function(){var e,t;this.isKeepCaretShow||this.caret.hide(),null===(e=this.caretDragger)||void 0===e||e.hide(),this.isHiddenInputFocus=!1,null===(t=this.editor)||void 0===t||t.handleInputBlur()}},{key:"handleFocus",value:function(){this.readonly||(this.editor?(this.isHiddenInputFocus=!0,this.isSelectionCollapsed&&!this.isKeepCaretHide&&this.caret.show()):this.hiddenEditor.hide())}},{key:"attachHiddenEditor",value:function(){var e,t,n=this;this.hiddenEditor=(e=bn.platform,t={onTypeText:function(e){var t;null===(t=n.editor)||void 0===t||t.insertText(e)},onBlur:function(){n.handleBlur()},onFocus:function(){n.handleFocus()},onCompositionStart:function(){var e;null===(e=n.editor)||void 0===e||e.handleCompositionStart()},onCompositionEnd:function(e){var t;null===(t=n.editor)||void 0===t||t.handleCompositionEnd(e)},onCompositionText:function(e){var t;null===(t=n.editor)||void 0===t||t.changeCompositionText(e)},onKeyDown:function(e){var t,i;(null===(i=null===(t=n.editor)||void 0===t?void 0:t.handleKeyDown)||void 0===i?void 0:i.call(t,e))||n.handleHotKeys(e)},onCopy:function(e){var t;null===(t=n.editor)||void 0===t||t.handleCopy(e)},onPaste:function(e){var t;null===(t=n.editor)||void 0===t||t.handlePaste(e)},onCut:function(e){var t;null===(t=n.editor)||void 0===t||t.handleCut(e)},deleteCharacterBack:function(e){var t;null===(t=n.editor)||void 0===t||t.deleteCharacterBack(e)},clearCompositionState:function(){var e;null===(e=n.editor)||void 0===e||e.clearCompositionState()}},e===o.pc?new re(t):new ne(t)),this.hiddenEditor.attach(this.surfaceDom)}},{key:"handleHotKeys",value:function(e){var t,n,i,o,r,a,s,c;if(this.selectionHandler)return zt.isMoveBackward(e,null===(t=this.editor)||void 0===t?void 0:t.coordinate,null===(n=this.editor)||void 0===n?void 0:n.lineExpandDirection)?(e.preventDefault(),void this.selectionHandler.moveBackward()):zt.isMoveForward(e,null===(i=this.editor)||void 0===i?void 0:i.coordinate,null===(o=this.editor)||void 0===o?void 0:o.lineExpandDirection)?(e.preventDefault(),void this.selectionHandler.moveForward()):zt.isMoveLineBackward(e,null===(r=this.editor)||void 0===r?void 0:r.coordinate,null===(a=this.editor)||void 0===a?void 0:a.lineExpandDirection)?(e.preventDefault(),void this.selectionHandler.moveLineBackward()):zt.isMoveLineForward(e,null===(s=this.editor)||void 0===s?void 0:s.coordinate,null===(c=this.editor)||void 0===c?void 0:c.lineExpandDirection)?(e.preventDefault(),void this.selectionHandler.moveLineForward()):zt.isExtendBackward(e)?(e.preventDefault(),void this.selectionHandler.extendBackward()):zt.isExtendForward(e)?(e.preventDefault(),void this.selectionHandler.extendForward()):zt.isExtendLineBackward(e)?(e.preventDefault(),void this.selectionHandler.extendLineBackward()):zt.isExtendLineForward(e)?(e.preventDefault(),void this.selectionHandler.extendLineForward()):zt.isMoveWordBackward(e)?(e.preventDefault(),void this.selectionHandler.moveWordBackward()):zt.isMoveWordForward(e)?(e.preventDefault(),void this.selectionHandler.moveWordForward()):zt.isMoveToLineStart(e)?(e.preventDefault(),void this.selectionHandler.moveToLineStart()):zt.isMoveToLineEnd(e)?(e.preventDefault(),void this.selectionHandler.moveToLineEnd()):zt.isMoveToParagraphStart(e)?(e.preventDefault(),void this.selectionHandler.moveToParagraphStart()):zt.isMoveToParagraphEnd(e)?(e.preventDefault(),void this.selectionHandler.moveToParagraphEnd()):zt.isMoveToDocStart(e)?(e.preventDefault(),void this.selectionHandler.moveToDocStart()):zt.isMoveToDocEnd(e)?(e.preventDefault(),void this.selectionHandler.moveToDocEnd()):zt.isExtendWordBackward(e)?(e.preventDefault(),void this.selectionHandler.extendWordBackward()):zt.isExtendWordForward(e)?(e.preventDefault(),void this.selectionHandler.extendWordForward()):zt.isExtendLineStart(e)?(e.preventDefault(),void this.selectionHandler.extendToLineStart()):zt.isExtendLineEnd(e)?(e.preventDefault(),void this.selectionHandler.extendToLineEnd()):zt.isExtendParagraphStart(e)?(e.preventDefault(),void this.selectionHandler.extendToParagraphStart()):zt.isExtendParagraphEnd(e)?(e.preventDefault(),void this.selectionHandler.extendToParagraphEnd()):zt.isExtendDocStart(e)?(e.preventDefault(),void this.selectionHandler.extendToDocStart()):zt.isExtendDocEnd(e)?(e.preventDefault(),void this.selectionHandler.extendToDocEnd()):zt.isSplitBlock(e)?(e.preventDefault(),void this.selectionHandler.insertBreak()):zt.isInsertSoftBreak(e)?(e.preventDefault(),void this.selectionHandler.insertSoftBreak()):zt.isDeleteBackward(e)?(e.preventDefault(),void this.selectionHandler.deleteBackward()):zt.isDeleteForward(e)?(e.preventDefault(),void this.selectionHandler.deleteForward()):zt.isDeleteWordBackward(e)?(e.preventDefault(),void this.selectionHandler.deleteWordBackward()):zt.isDeleteWordForward(e)?(e.preventDefault(),void this.selectionHandler.deleteWordForward()):zt.isDeleteLineBackward(e)?(e.preventDefault(),void this.selectionHandler.deleteToLineStart()):zt.isDeleteLineForward(e)?(e.preventDefault(),void this.selectionHandler.deleteToLineEnd()):zt.isSelectAll(e)?(e.preventDefault(),void this.selectionHandler.selectAll()):void((zt.isUndo(e)||zt.isRedo(e))&&e.preventDefault())}},{key:"detachEditingComponent",value:function(){}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}])}(),Kt=function(){return Object(r.x)((function e(){Object(r.y)(this,e),this.map=new Map}),[{key:"link",value:function(e,t){var n,i=e.join("-");this.map.get(i)?null===(n=this.map.get(i))||void 0===n||n.push(t):this.map.set(i,[t])}},{key:"getBox",value:function(e){var t=e.join("-");return this.map.get(t)}},{key:"clear",value:function(){this.map.clear()}}])}(),qt=function(){return Object(r.x)((function e(t){var n=t.model,i=t.getPointByPosition,o=t.setFocus,a=t.initSelection;Object(r.y)(this,e),this.model=n,this.getPointByPosition=i,this.setFocus=o,this.initSelection=a}),[{key:"handleDoubleClick",value:function(e){this.model.selectCurrentWord(e)}},{key:"handleTripleClick",value:function(e){this.model.selectCurrentParagraph(e)}}])}();function Qt(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,Yt()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function Yt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Yt=function(){return!!e})()}var Xt=function(e){function t(){var e;return Object(r.y)(this,t),(e=Qt(this,t,arguments)).mouseDownTempPoint=null,e.triggerMouseMove=Object(r.O)((function(t){if(e.isMouseDown){var n=e.getPointByPosition(t);if(n&&(!e.mouseDownTempPoint||!r.T.equals(e.mouseDownTempPoint,n))){e.clearMouseDownTempPoint();var i=e.model.getVoidInfoByPoint(n),o=i.range;if(i.isInsideVoid){var a=r.T.isAfter(e.selection.focus,e.selection.anchor);e.model.setSelectionFocus(a?o.focus:o.anchor)}else e.model.setSelectionFocus(n)}}}),30),e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"selection",get:function(){return this.model.selection}},{key:"triggerMouseDown",value:function(e,t){this.isMouseDown=!0,this.setFocus(!1);var n=this.getPointByPosition(e);if(n)if(this.setMouseDownTempPoint(n),t){var i=t.detail;1===i?this.handleSingleClick(n,t):2===i?this.handleDoubleClick(n):i>2&&this.handleTripleClick(n)}else this.handleSingleClick(n)}},{key:"triggerMouseUp",value:function(){this.isMouseDown=!1,this.clearMouseDownTempPoint(),this.cancelMouseMoveThrottle()}},{key:"clear",value:function(){this.cancelMouseMoveThrottle()}},{key:"handleSingleClick",value:function(e,t){var n=this.model.getVoidInfoByPoint(e),i=n.range,o=n.isInsideVoid;if(t&&function(e,t){return null==e?void 0:e[t]}(t,"shiftKey")&&this.selection){var r=o?i.focus:e;this.model.setSelectionFocus(r)}else o?this.initSelection(i.anchor,i.focus):this.initSelection(e)}},{key:"setMouseDownTempPoint",value:function(e){this.mouseDownTempPoint=e}},{key:"clearMouseDownTempPoint",value:function(){this.mouseDownTempPoint=null}},{key:"cancelMouseMoveThrottle",value:function(){this.triggerMouseMove.cancel()}}])}(qt);function Jt(e,t,n){return t=Object(r.z)(t),Object(r.A)(e,Zt()?Reflect.construct(t,n||[],Object(r.z)(e).constructor):t.apply(e,n))}function Zt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Zt=function(){return!!e})()}var $t,en=function(e){function t(){var e;return Object(r.y)(this,t),(e=Jt(this,t,arguments)).lastTouchTime=0,e.touchTimes=0,e.isLongTouchFlag=!1,e.isLongTouched=!1,e}return Object(r.w)(t,e),Object(r.x)(t,[{key:"triggerTouchStart",value:function(e){var t=this;this.isLongTouched=!1,this.touchStartPosition=e,bn.surface.triggerTouchStart(e),this.longTouch().then((function(){t.isLongTouched=!0,bn.surface.triggerLongTouch(e)})).catch((function(){}))}},{key:"triggerTouchMove",value:function(e){this.stopLongTouch(),bn.surface.triggerTouchMove(e)}},{key:"triggerTouchEnd",value:function(e){if(this.stopLongTouch(),bn.surface.triggerTouchEnd(e,this.isLongTouched),!this.isLongTouched&&this.isSamePosition(e)){this.setFocus(!1);var t=this.getPointByPosition(e);t&&(this.handleTouchPoint(t),this.touchStartPosition=null)}}},{key:"handleTouchPoint",value:function(e){var t=Date.now();this.touchTimes+=1;var n=!1;return t-this.lastTouchTime<300?(2===this.touchTimes&&this.handleDoubleClick(e),3===this.touchTimes&&this.handleTripleClick(e)):(this.handleSingleClick(e),n=!0,this.touchTimes=1),this.lastTouchTime=t,n}},{key:"handleSingleClick",value:function(e){var t=this.model.getVoidInfoByPoint(e),n=t.range;t.isInsideVoid?this.initSelection(n.anchor,n.focus):this.initSelection(e)}},{key:"longTouch",value:function(){var e=this;return this.isLongTouchFlag=!0,clearTimeout(this.longTouchTimer),new Promise((function(t,n){e.longTouchTimer=setTimeout((function(){e.isLongTouchFlag?t():n()}),300)}))}},{key:"stopLongTouch",value:function(){this.isLongTouchFlag=!1}},{key:"isSamePosition",value:function(e){if(!this.touchStartPosition)return!1;var t=this.touchStartPosition,n=t.posXOfWorld,i=t.posYOfWorld,o=e.posXOfWorld,r=e.posYOfWorld;return Math.abs(o-n)<=10&&Math.abs(r-i)<=10}}])}(qt);!function(e){e.normal="normal",e.maxContentSize="maxContentSize"}($t||($t={}));var tn=function(){return Object(r.x)((function e(t){Object(r.y)(this,e);var n=t.rect,i=t.getMatrix,o=t.getScale,a=t.getAppPosition,s=t.getCoordinate;this.getMatrix=i,this.getScale=o,this.getAppPosition=a,this.getCoordinate=s,this.updateBlockRect(n)}),[{key:"matrix",get:function(){var e,t=null===(e=this.getMatrix)||void 0===e?void 0:e.call(this);if(!t)return new Wt;var n=t.a,i=t.b,o=t.c,r=t.d,a=t.tx,s=t.ty;return new Wt(n,i,o,r,a,s)}},{key:"scale",get:function(){var e;return(null===(e=this.getScale)||void 0===e?void 0:e.call(this))||1}},{key:"appPosition",get:function(){var e;return(null===(e=this.getAppPosition)||void 0===e?void 0:e.call(this))||{x:0,y:0}}},{key:"coordinate",get:function(){return this.getCoordinate()}},{key:"minSize",get:function(){return this.originRect.minSize||0}},{key:"maxSize",get:function(){return this.originRect.maxSize}},{key:"textAlignStandard",get:function(){var e=this.originRect,t=e.width,n=e.height,i=e.maxSize;if(this.isNumber(i)){if(this.coordinate===r.c.LEFT_TOP&&!this.isNumber(t))return $t.maxContentSize;if(this.coordinate!==r.c.LEFT_TOP&&!this.isNumber(n))return $t.maxContentSize}return $t.normal}},{key:"updateBlockRect",value:function(e){this.originRect=Object.assign({},e),this.blockRect=this.createBlockRect(e)}},{key:"isPositionChange",value:function(e){var t=this.blockRect,n=t.x,i=t.y,o=e.x,r=e.y;return o!==n||r!==i}},{key:"isSizeChange",value:function(e){var t=this.originRect,n=t.width,i=t.height,o=t.maxSize,r=t.minSize,a=e.width,s=e.height,c=e.maxSize,l=e.minSize;return a!==n||s!==i||c!==o||l!==r}},{key:"legalizeSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.minSize,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxSize;return this.isNumber(t)&&e<t?t:this.isNumber(n)&&e>n?n:e}},{key:"createBlockRect",value:function(e){var t=this.coordinate;if(!this.isNumber(e.maxSize))return{x:e.x,y:e.y,width:e.width,height:e.height};var n=e.x,i=e.y,o=e.width,a=e.height,s=e.minSize,c=e.maxSize;return t===r.c.LEFT_TOP?{x:n,y:i,width:this.isNumber(o)?this.legalizeSize(o,s,c):c,height:a}:{x:n,y:i,width:o,height:this.isNumber(a)?this.legalizeSize(a,s,c):c}}},{key:"isNumber",value:function(e){return"number"==typeof e}}])}(),nn={type:"",children:[],paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,vertical:void 0,anchor:r.a.Top,whiteSpaceType:r.v.Normal,anchorCenter:!1,docSizeType:void 0,columnNumber:1,columnSpace:0,handingChar4OneLine:!1,handingMaxSpace:-1,tailWhitespaceCalculation:r.H.Exclude},on=function(e,t){if(r.W.isElement(t)){var n=t;return!!r.e.isVoid(e,t)||1===n.children.length&&on(e,n.children[0])}return!r.e.isEditor(t)};var rn=[].concat(Object(r.B)(["characterProps","textIndent","marginLeft","spaceBefore","spaceAfter","textAlign","lineSpacing","lineSpacingRule","defaultTabSize","tabList"]),Object(r.B)(["fontSize","fontFamily","letterSpacing","fontWeight"]));var an=new WeakMap,sn=new WeakMap,cn=function(e){var t=e;t.isChangeValue=!1,t.isNeedReLayout=!1,t.onBeforeChange=function(){};var n=t.apply,i=t.deleteFragment,o=t.mergeNodes;return t.apply=function(e){"set_selection"!==e.type&&(t.isChangeValue=!0),sn.get(t)||(sn.set(t,!0),t.onBeforeChange(),Promise.resolve().then((function(){sn.set(t,!1)}))),n(e),function(e){var t=e.type;if(["set_selection","merge_node","split_node"].includes(t))return!1;if("set_node"===t){var n=e.newProperties;return Object.keys(n).some((function(e){return rn.includes(e)}))}return!0}(e)&&(t.isNeedReLayout=!0),an.get(t)||(an.set(t,!0),Promise.resolve().then((function(){an.set(t,!1),t.isNeedReLayout=!1,t.isChangeValue=!1})))},t.isSelectAll=function(){var e=t.selection;if(!e)return!1;var n=t.getStartPoint(),i=t.getEndPoint();return r.r.includes(e,n)&&r.r.includes(e,i)},t.selectAll=function(){var e={anchor:t.getStartPoint(),focus:t.getEndPoint()};r.S.select(t,e)},t.getStartPoint=function(){return r.e.start(t,[])},t.getEndPoint=function(){return r.e.end(t,[])},t.selectStart=function(){var e=t.getStartPoint(),n={anchor:e,focus:e};r.S.select(t,n)},t.selectEnd=function(){var e=t.getEndPoint(),n={anchor:e,focus:e};r.S.select(t,n)},t.isSamePoint=function(e,n){if(r.T.equals(e,n))return!0;if(0===e.offset){var i=t.normalizePoint(e);return r.T.equals(i,n)}if(0===n.offset){var o=t.normalizePoint(n);return r.T.equals(e,o)}return!1},t.isRangeCollapsed=function(e){var n=e.anchor,i=e.focus;return t.isSamePoint(n,i)},t.isRangeExpanded=function(e){return!t.isRangeCollapsed(e)},t.normalizePoint=function(e){if(e.offset>0)return e;var n=r.e.before(t,e,{distance:1,unit:"character"});return n?r.e.after(t,n,{distance:1,unit:"character"}):e},t.getPrevCharacter=function(e){var n=r.e.before(t,e,{distance:1,unit:"character"});if(!n)return"";var i={anchor:n,focus:e};return r.e.string(t,i)},t.getPrevWordPoint=function(e){if(!e)return null;var n=r.e.before(t,e,{distance:1,unit:"character"});if(!n)return null;var i=r.e.string(t,{anchor:n,focus:e});if(i.length>1)return n;if(!G(i))return n;for(var o=n;o;){var a=r.e.before(t,o,{distance:1,unit:"character"});if(a)if(t.getVoidInfoByPoint(a).isInsideVoid)return o;if(!G(t.getPrevCharacter(o)))return o;o=a}return null},t.getNextCharacter=function(e){var n=r.e.after(t,e,{distance:1,unit:"character"});if(!n)return"";var i={anchor:n,focus:e};return r.e.string(t,i)},t.getNextWordPoint=function(e){if(!e)return null;var n=r.e.after(t,e,{distance:1,unit:"character"});if(!n)return null;var i=r.e.string(t,{anchor:n,focus:e});if(i.length>1)return n;if(!G(i))return n;for(var o=n;o;){var a=r.e.after(t,o,{distance:1,unit:"character"});if(a)if(t.getVoidInfoByPoint(a).isInsideVoid)return o;if(!G(t.getNextCharacter(o)))return o;o=a}return null},t.isVoid=function(e){return!!e.void},t.getNodeByPath=function(e){var n;return null===(n=r.e.node(t,e))||void 0===n?void 0:n[0]},t.getVoidInfoByPoint=function(e){var n=e.path,i=t.getNodeByPath(n),o=r.e.range(t,n),a=e.offset===o.focus.offset||0===e.offset;return{isInsideVoid:t.isVoid(i)&&!a,range:o}},t.addMarks=function(e,n){Object.entries(e).forEach((function(e){var i,o=Object(r.N)(e,2),a=o[0],s=o[1],c=n?n(a,null===(i=t.marks)||void 0===i?void 0:i[a],s):s;t.addMark(a,c)}))},t.deleteFragment=function(n){t.mergeNodes=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.e.withoutNormalizing(e,(function(){var n=t.match,i=t.at,o=void 0===i?e.selection:i,a=t.hanging,s=void 0!==a&&a,c=t.voids,l=void 0!==c&&c,u=t.mode,d=void 0===u?"lowest":u;if(o){if(null==n)if(r.V.isPath(o)){var h=r.e.parent(e,o),f=Object(r.N)(h,1)[0];n=function(e){return f.children.includes(e)}}else n=function(t){return r.W.isElement(t)&&r.e.isBlock(e,t)};if(!s&&r.r.isRange(o)&&(o=r.e.unhangRange(e,o,{voids:l})),r.r.isRange(o))if(r.r.isCollapsed(o))o=o.anchor;else{var p=r.r.edges(o),v=Object(r.N)(p,2)[1],g=r.e.pointRef(e,v);r.S.delete(e,{at:o}),o=g.unref(),null==t.at&&r.S.select(e,o)}var y=r.e.nodes(e,{at:o,match:n,voids:l,mode:d}),m=Object(r.N)(y,1)[0],E=r.e.previous(e,{at:o,match:n,voids:l,mode:d});if(m&&E){var b=Object(r.N)(m,2),T=b[0],S=b[1],x=Object(r.N)(E,2),O=x[0],w=x[1];if(0!==S.length&&0!==w.length){var _,C,A=r.V.next(w),k=r.V.common(S,w),R=r.V.isSibling(S,w),P=Array.from(r.e.levels(e,{at:S}),(function(e){return Object(r.N)(e,1)[0]})).slice(k.length).slice(0,-1),I=r.e.above(e,{at:S,mode:"highest",match:function(t){return P.includes(t)&&on(e,t)}}),L=I&&r.e.pathRef(e,I[1]);if(r.f.isText(T)&&r.f.isText(O)){T.text;var N=Object(r.g)(T,["text"]);C=O.text.length,_=N}else{if(!r.W.isElement(T)||!r.W.isElement(O))throw new Error("Cannot merge the node at path [".concat(S,"] with the previous sibling because it is not the same kind: ").concat(r.h.stringify(T)," ").concat(r.h.stringify(O)));T.children;var B=Object(r.g)(T,["children"]);C=O.children.length,_=B}R||r.S.moveNodes(e,{at:S,to:A,voids:l}),L&&r.S.removeNodes(e,{at:L.current,voids:l}),r.W.isElement(O)&&r.e.isEmpty(e,O)||r.f.isText(O)&&""===O.text&&0!==w[w.length-1]?r.W.isElement(T)&&r.e.isEmpty(e,T)?r.S.removeNodes(e,{at:S,voids:l}):r.S.removeNodes(e,{at:w,voids:l}):e.apply({type:"merge_node",path:A,position:C,properties:_}),L&&L.unref()}}}}))}}(e),i.apply(n),t.mergeNodes=o},t},ln=Object(r.j)(Object(r.j)(Object(r.j)(Object(r.j)(Object(r.j)({},r.u.Vertical,r.c.RIGHT_TOP),r.u.Vertical90,r.c.RIGHT_TOP),r.u.WordArtVerticalRtl,r.c.RIGHT_TOP),r.u.WordArtVerticalLtr,r.c.LEFT_TOP),r.u.Vertical270,r.c.LEFT_BOTTOM);var un,dn=function(){function e(t){Object(r.y)(this,e),this.slate=t}return Object(r.x)(e,[{key:"convertToParagraph",value:function(t){return e.convertToParagraph(t,this.slate)}},{key:"convertToText",value:function(t){return e.convertToText(t,this.slate)}}],[{key:"convertToParagraph",value:function(e,t){if(!e)return e;var n=e.anchor,i=e.focus;return{anchor:this.convertPointToParagraph(n,t),focus:this.convertPointToParagraph(i,t)}}},{key:"convertToText",value:function(e,t){if(!e)return e;var n=e.anchor,i=e.focus,o=this.convertPointToText(n,t),r=this.convertPointToText(i,t);return o&&r?{anchor:o,focus:r}:o?{anchor:o,focus:o}:r?{anchor:r,focus:r}:null}},{key:"convertPointToParagraph",value:function(e,t){var n=e.path;if(0===n[n.length-1])return e;var i=r.e.parent(t,n);return{path:n,offset:Object(r.N)(i,1)[0].children.slice(0,n[n.length-1]).reduce((function(e,t){return e+t.text.length||0}),e.offset)}}},{key:"convertPointToText",value:function(e,t){try{for(var n=r.e.parent(t,e.path),i=Object(r.N)(n,2),o=i[0],a=i[1],s=o.children,c=0,l=0;l<s.length;l++){var u=s[l].text;if(c+u.length>=e.offset)return{path:[].concat(Object(r.B)(a),[l]),offset:e.offset-c};c+=u.length}return r.e.end(t,a)}catch(e){return null}}}])}();!function(e){e.PRE="pre",e.AFTER="after"}(un||(un={}));var hn=function(){return Object(r.x)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(r.y)(this,e),this.noExtendProps={void:{afterNoExtend:!0,preNoExtend:!0}},this.noExtendProps=Object.assign(Object.assign({},this.noExtendProps),this.normalizeNoExtendProps(t))}),[{key:"filterNoExtendProps",value:function(e,t,n){var i,o,a=this;if(!e)return{props:e,hasFiltered:!1};var s,c,l=this.isInCurrentNodeEdge(n,t),u=l.isStart,d=l.isEnd;if(!u&&!d)return{props:e,hasFiltered:!1};d?(s=un.AFTER,c=null===(i=r.e.next(n,{at:t,mode:"lowest"}))||void 0===i?void 0:i[0]):(s=un.PRE,c=null===(o=r.e.previous(n,{at:t,mode:"lowest"}))||void 0===o?void 0:o[0]);var h={},f=!1;return Object.keys(e).forEach((function(t){a.isNoExtendProp(t,s)?(null==c?void 0:c[t])&&ut(null==c?void 0:c[t],e[t])?h[t]=e[t]:f=!0:h[t]=e[t]})),{props:h,hasFiltered:f}}},{key:"isInCurrentNodeEdge",value:function(e,t){var n=r.e.range(e,t.path);return{isStart:r.T.equals(t,n.anchor),isEnd:r.T.equals(t,n.focus)}}},{key:"isNoExtendProp",value:function(e,t){var n,i=t===un.PRE?"preNoExtend":"afterNoExtend";return!!(null===(n=this.noExtendProps[e])||void 0===n?void 0:n[i])}},{key:"normalizeNoExtendProps",value:function(e){var t={afterNoExtend:!0,preNoExtend:!1};return e.reduce((function(e,n){return"string"==typeof n?Object.assign(Object.assign({},e),Object(r.j)({},n,t)):Object.assign(Object.assign({},e),Object(r.j)({},n.prop,{afterNoExtend:!!n.afterNoExtend,preNoExtend:!!n.preNoExtend}))}),{})}}])}();function fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if("object"!==Object(r.k)(e)||null===e)return e;if(t.has(e))return e;if(t.add(e),Array.isArray(e)){var n=[];return e.forEach((function(e){return n.push(fn(e,t))})),n}var i={};return Object.keys(e).forEach((function(n){return i[n]=fn(e[n],t)})),i}function pn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw r}}}}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var gn=cn(Object(r.m)()),yn=function(){return Object(r.x)((function e(t){var n=this;Object(r.y)(this,e),this.lastCompositionText="",this.lastSelection=null,this.getNodeByPath=function(e){return n.slate.getNodeByPath(e)},this.handleSlateChange=function(){var e;Gt.resetFlag(),null===(e=n.onChange)||void 0===e||e.call(n,n.slate),n.handleSelection()},this.handleBeforeSlateChange=function(){n.onBeforeChange(n.slate)},this.handleBeforeInsertText=function(e,t){var i,o=r.r.start(n.selection).path,a=r.e.leaf(n.slate,o),s=Object(r.N)(a,1)[0],c=Object.assign(Object.assign({},s),t);return(null===(i=n.onBeforeInput)||void 0===i?void 0:i.call(n,e,c))||null};var i=t.value,o=t.onChange,a=t.onBeforeChange,s=t.onSelectionChange,c=t.onBeforeInput,l=t.noExtendProps,u=void 0===l?[]:l;this.onChange=o,this.onBeforeChange=a,this.onBeforeInput=c,this.onSelectionChange=s,this.noExtendPropsHelper=new hn(u),this.initSlate(i)}),[{key:"selection",get:function(){return this.slate.selection}},{key:"coordinate",get:function(){var e,t;return(t=null===(e=null==this?void 0:this.slate)||void 0===e?void 0:e.vertical)&&ln[t]||r.c.LEFT_TOP}},{key:"lineExpandDirection",get:function(){var e;return(null===(e=null==this?void 0:this.slate)||void 0===e?void 0:e.vertical)===r.u.WordArtVerticalLtr?r.I.HORIZONTAL:r.I.VERTICAL}},{key:"setSelectionFocus",value:function(e){r.S.setPoint(this.slate,e,{edge:"focus"})}},{key:"selectEnd",value:function(){this.slate.selectEnd()}},{key:"setSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?r.S.select(this.slate,e):this.clearSelection()}},{key:"paste",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.pasteWithProps(e):this.pasteAsPureText(e)}},{key:"copy",value:function(){if(this.selection)return this.slate.fragment(this.selection)}},{key:"cut",value:function(){if(this.selection){var e=this.copy();return this.slate.deleteFragment(),e}}},{key:"selectCurrentText",value:function(){if(this.selection&&r.r.isCollapsed(this.selection)){var e=this.selection.focus.path,t=this.getRange(e);this.setSelection(t)}}},{key:"setSelectionPoints",value:function(e,t){r.S.select(this.slate,{anchor:e,focus:t})}},{key:"getValue",value:function(){if(!(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]))return this.slate;var e={};return Object.entries(this.slate).forEach((function(t){var n=Object(r.N)(t,2),i=n[0],o=n[1];"children"!==i&&i in gn||(e[i]=o)})),e}},{key:"resetValue",value:function(e){var t=this;if(this.slate!==e){var n=dn.convertToParagraph(this.selection,this.slate);if(Object.entries(this.slate).forEach((function(e){var n=Object(r.N)(e,1)[0];"type"===n||"children"===n||n in gn||delete t.slate[n]})),Object.assign(this.slate,nn,e),n){var i=dn.convertToText(n,this.slate);this.setSelection(i)}}}},{key:"clearSelection",value:function(){r.S.deselect(this.slate)}},{key:"isSelectionExpanded",value:function(){var e=this.selection,t=this.slate;return e&&t.isRangeExpanded(e)}},{key:"isSelectionCollapsed",value:function(){var e=this.selection,t=this.slate;return e&&t.isRangeCollapsed(e)}},{key:"changeTextProps",value:function(e,t,n,i){if(e){var o=i?function(t,n){var o=Object.keys(e).find((function(t){return e[t]===n}));return i(o,t,n)}:void 0,a=this.getRangeFromLocation(n);if(a){var s=!r.r.isExpanded(a);this.selection&&s&&t&&r.r.equals(a,this.selection)?this.slate.addMarks(e,i):r.S.setNodes(this.slate,e,{match:r.f.isText,at:a,split:!0,hanging:!0,compare:function(e,t){return!ut(e,t)},merge:o})}else{var c=this.selection;c&&(r.r.isExpanded(c)?r.S.setNodes(this.slate,e,{match:r.f.isText,split:!0,hanging:!0,merge:o}):this.slate.addMarks(e,i))}}}},{key:"deleteText",value:function(e){var t=this.getRangeFromLocation(e)||this.selection;t&&r.S.delete(this.slate,{at:t})}},{key:"getStyle",value:function(){return r.e.marks(this.slate)}},{key:"getFilteredStyle",value:function(){var e=this.getStyle(),t=this.normalizePoint(this.selection.focus),n=this.noExtendPropsHelper.filterNoExtendProps(e,t,this.slate);return{style:n.props,hasFiltered:n.hasFiltered}}},{key:"getStartPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection;return e?r.e.start(this.slate,e):null}},{key:"getEndPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection;return e?r.e.end(this.slate,e):null}},{key:"getBeforePoint",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection,n=arguments.length>1?arguments[1]:void 0;return t&&null!==(e=r.e.before(this.slate,t,{distance:n,unit:"character"}))&&void 0!==e?e:null}},{key:"getAfterPoint",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection,n=arguments.length>1?arguments[1]:void 0;return t&&null!==(e=r.e.after(this.slate,t,{distance:n,unit:"character"}))&&void 0!==e?e:null}},{key:"removeTextProps",value:function(e,t){t?this.slate.isRangeExpanded(t)&&r.S.unsetNodes(this.slate,e,{match:r.f.isText,at:t,split:!0}):this.slate.removeMark(e)}},{key:"changeParagraphProps",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selection;if(n&&e){var i=[];try{i=Object(r.B)(r.e.nodes(this.slate,{match:function(e){return r.W.isElement(e)},at:n}))}catch(e){return}i.forEach((function(n){var i=Object(r.N)(n,2)[1];r.S.setNodes(t.slate,fn(e),{at:i,compare:function(e,t){return!ut(e,t)}})}))}}},{key:"changeDocumentProps",value:function(e){e&&Object.assign(this.slate,e)}},{key:"insertText",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.selection){(0,this.slate.isRangeCollapsed)(this.selection)||this.slate.deleteFragment();var i=n?this.getFilteredStyle():null,o=this.handleBeforeInsertText(e,Object.assign(Object.assign({},null==i?void 0:i.style),t));return t||o||(null==i?void 0:i.hasFiltered)?this.slate.insertNode(Object.assign(Object.assign(Object.assign(Object.assign({},null==i?void 0:i.style),t),o),{text:e})):this.slate.insertText(e)}}},{key:"insertBreak",value:function(){this.slate.insertBreak(),this.insertText(" "),this.slate.deleteBackward("character")}},{key:"getSelectionProps",value:function(){var e=this,t=this.selection;if(!t)return[];var n=this.getSelectionNodes((function(e){return r.f.isText(e)})).reduce((function(n,i,o,a){var s=Object(r.N)(i,2),c=s[0],l=s[1],u=r.r.isCollapsed(t)?r.e.marks(e.slate):c,d=e.getParent(l),h=Object(r.N)(d,2),f=h[0],p=h[1];if(!n.has(f)){var v=e.isIncludedInRange(p);n.set(f,{textProps:[],isComplete:v})}var g=c.text;return 0!==o&&o!==a.length-1||(g=e.getStringInSelectionByPath(l)),n.get(f).textProps.push(Object.assign(Object.assign({},u),{text:g})),n}),new Map);return Object(r.B)(n).map((function(e){var t=Object(r.N)(e,2),n=t[0],i=t[1],o=i.textProps,a=i.isComplete;return n.children,{paragraphProps:Object(r.g)(n,["children"]),isComplete:a,textProps:o}}))}},{key:"getSelectionNodes",value:function(e){var t=this.selection;if(!t)return[];var n=Object(r.B)(r.e.nodes(this.slate,{match:e}));if(r.r.isCollapsed(t))return n;var i=Object(r.N)(n[0],2)[1],o=r.e.end(this.slate,i),a=r.r.start(t);return r.T.equals(o,a)?n.slice(1):n}},{key:"getNodes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=null;return(n=t&&"unref"in t?t.current:t)?Object(r.B)(r.e.nodes(this.slate,{match:e,at:n})):[]}},{key:"getString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection;return e?r.e.string(this.slate,e):""}},{key:"getRange",value:function(e){return r.e.range(this.slate,e)}},{key:"selectCurrentWord",value:function(e){if(!this.getVoidInfoByPoint(e).isInsideVoid){var t=this.getNextWordPointWithinVoids(e),n=(null==t?void 0:t.path[0])!==e.path[0];if(t&&!r.T.equals(t,e)&&!n){var i=t,o=this.getPrevWordPointWithinVoids(t);this.setSelectionPoints(o,i)}}}},{key:"selectCurrentParagraph",value:function(e){var t=e.path.slice(0,e.path.length-1),n=this.getRange(t),i=n.anchor,o=n.focus;this.setSelectionPoints(i,o)}},{key:"selectAll",value:function(){this.slate.selectAll()}},{key:"getVoidInfoByPoint",value:function(e){return this.slate.getVoidInfoByPoint(e)}},{key:"getPrevWordPointWithinVoids",value:function(e){var t=this.slate.getPrevWordPoint(e);if(!t)return t;var n=this.getVoidInfoByPoint(t),i=n.isInsideVoid,o=n.range;return i?o.anchor:t}},{key:"getNextWordPointWithinVoids",value:function(e){var t=this.slate.getNextWordPoint(e);if(!t)return t;var n=this.getVoidInfoByPoint(t),i=n.isInsideVoid,o=n.range;return i?o.focus:t}},{key:"getLeafNodeAndRangeRef",value:function(e){var t=this;return e?Array.from(r.e.nodes(this.slate,{mode:"lowest",at:e})).map((function(n,i,o){var a=Object(r.N)(n,2),s=a[0],c=a[1],l=0===i?r.r.start(e):{path:c,offset:0},u=i===o.length-1?r.r.end(e):{path:c,offset:s.text.length};return{node:s,rangeRef:r.e.rangeRef(t.slate,{anchor:l,focus:u})}})):[]}},{key:"getParent",value:function(e){return r.e.parent(this.slate,e)}},{key:"isSelectAll",value:function(){return this.slate.isSelectAll()}},{key:"handleCompositionStart",value:function(){var e=this.selection;e&&this.slate.isRangeExpanded(e)&&r.e.deleteFragment(this.slate)}},{key:"handleCompositionEnd",value:function(e){this.changeCompositionText(e),this.clearCompositionState()}},{key:"clearCompositionState",value:function(){this.lastCompositionText=""}},{key:"isVoid",value:function(e){return this.slate.isVoid(e)}},{key:"deleteCharacterBack",value:function(e){var t,n=null===(t=this.selection)||void 0===t?void 0:t.anchor;n&&r.S.delete(this.slate,{at:n,unit:"character",reverse:!0,distance:e})}},{key:"changeCompositionText",value:function(e){var t;if(this.lastCompositionText!==e){var n=null===(t=this.selection)||void 0===t?void 0:t.anchor,i=this.getFilteredStyle().style;this.lastCompositionText.length&&r.S.delete(this.slate,{at:n,unit:"character",reverse:!0,distance:this.lastCompositionText.length}),this.insertText(e,i,!1),this.lastCompositionText=e}}},{key:"normalizePoint",value:function(e){return this.slate.normalizePoint(e)}},{key:"getPrevTextElement",value:function(e){if(!e)return null;var t=r.e.previous(this.slate,{at:e,match:r.f.isText});return t?t[0]:null}},{key:"getNextTextElement",value:function(e){if(!e)return null;var t=r.e.next(this.slate,{at:e,match:r.f.isText});return t?t[0]:null}},{key:"traverseTextElements",value:function(e){var t=function(n,i){r.f.isText(n)?e(n,i):n.children&&n.children.forEach((function(e,n){t(e,[].concat(Object(r.B)(i),[n]))}))};t(this.slate,[])}},{key:"traverseParagraphElements",value:function(e){for(var t=this.slate.children,n=0;n<t.length;n++){if(e(t[n],[n]))break}}},{key:"isIncludedInRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selection;if(!t||!e)return!1;var n=r.e.range(this.slate,e),i=n.anchor,o=n.focus;return r.r.includes(t,i)&&r.r.includes(t,o)}},{key:"clearRefs",value:function(){var e=this;Promise.resolve().then((function(){var t,n=pn(r.e.pathRefs(e.slate));try{for(n.s();!(t=n.n()).done;){t.value.unref()}}catch(e){n.e(e)}finally{n.f()}var i,o=pn(r.e.pointRefs(e.slate));try{for(o.s();!(i=o.n()).done;){i.value.unref()}}catch(e){o.e(e)}finally{o.f()}var a,s=pn(r.e.rangeRefs(e.slate));try{for(s.s();!(a=s.n()).done;){a.value.unref()}}catch(e){s.e(e)}finally{s.f()}}))}},{key:"initSlate",value:function(e){var t=cn(Object(r.m)());this.slate=Object.assign(t,e),this.slate.onChange=this.handleSlateChange,this.slate.onBeforeChange=this.handleBeforeSlateChange}},{key:"handleSelection",value:function(){var e,t=this.selection,n=this.lastSelection;(t||n)&&(t&&!n||!t&&n||!r.r.equals(t,n))&&(null===(e=this.onSelectionChange)||void 0===e||e.call(this,n,t,this.slate),this.lastSelection=t)}},{key:"getStringInSelectionByPath",value:function(e){if(!this.selection||r.r.isCollapsed(this.selection))return"";var t=r.e.range(this.slate,e);return this.getIntersectString(this.selection,t)}},{key:"getIntersectString",value:function(e,t){var n=r.r.intersection(e,t);return this.getString(n)}},{key:"getRangeFromLocation",value:function(e){return e?"unref"in e?this.getRangeFromLocation(e.current):r.V.isPath(e)?this.getRange(e):(r.r.isRange(e),e):null}},{key:"pasteWithProps",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t.length)if(1!==t.length){var n=this.slate.start(this.selection).path.slice(0,-1);this.slate.insertNodes(t);var i=this.selection.focus.path.slice(0,-1),o=this.slate.getNodeByPath(i),a=r.V.next(i),s=function(e){try{return e()}catch(e){return null}}((function(){return e.slate.getNodeByPath(a)}));s&&(this.changeParagraphProps(Object.assign(Object.assign(Object.assign({},s),o),{children:void 0}),i),this.slate.mergeNodes({at:a}));var c=this.slate.getNodeByPath(n),l=r.V.next(n),u=this.slate.getNodeByPath(l);this.changeParagraphProps(Object.assign(Object.assign(Object.assign({},c),u),{children:void 0}),n),this.slate.mergeNodes({at:l})}else{var d=t[0].children;this.slate.insertNodes(d)}}},{key:"pasteAsPureText",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.length&&t.forEach((function(t,n){var i=t.children;n>0&&e.insertBreak(),i.forEach((function(t){e.insertText(t.text)}))}))}}])}(),mn=function(){return Object(r.x)((function e(){Object(r.y)(this,e),this.map=new Map}),[{key:"link",value:function(e,t){this.map.set(e,t)}},{key:"get",value:function(e){return this.map.get(e)}},{key:"has",value:function(e){return this.map.has(e)}},{key:"clear",value:function(){this.map.clear()}}])}(),En=0;var bn=function(){function e(t){var n=this;Object(r.y)(this,e),this.slatePathToBox=new Kt,this.id=En+=1,this.preventScrollOnFocus=!1,this.isComposing=!1,this.mouseManager=null,this.textElementToPath=new mn,this.setReadyEditingFlag=!1,this.focus=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e.surface.attachEditor(n),t&&!n.selection&&n.model.selectEnd(),n.selection&&n.updateEditorSurface(),e.surface.attachEditor(n),n.enterRealEditing()},this.setReadyEditing=function(){var e=n.isEditing;n.setReadyEditingFlag=!0,e?n.realEditingToReadyEditing():n.blurredToReadyEditing()},this.removeReadyEditing=function(){var e=n.isReadyEditing;n.setReadyEditingFlag=!1,e&&n.readyEditingToBlurred()},this.getPointByPosition=function(t){var i=t.posXOfWorld,o=t.posYOfWorld,r=n.positionOfAppToPositionOfEditor(i,o);return e.surface.getPointFromPointPosition(r)},this.initSelection=function(e,t){var i={anchor:e,focus:t||e};n.selection&&r.r.equals(i,n.selection)?n.updateEditorSurface():n.setSelection(i)},this.handleBeforeChange=function(e){var t;e.isChangeValue&&(null===(t=n.onBeforeValueChange)||void 0===t||t.call(n))},this.handleSelectionChange=function(e,t,i){var o;i.isChangeValue||n.updateEditorSurface(),null===(o=n.onSelectionChange)||void 0===o||o.call(n,e,t)},this.traverseTextHook=function(e,t,i){n.slatePathToBox.link(e,t),i&&n.textElementToPath.link(i,e)},this.getNodeByPath=function(e){return n.model.getNodeByPath(e)};var o=t.rect,a=t.getScale,s=t.readonly,c=void 0!==s&&s,l=t.value,u=t.drawContext,d=t.renderUtils,h=t.eventArea,f=void 0===h?i.text:h,p=t.preventScrollOnFocus,v=void 0!==p&&p,g=t.renderText,y=t.getMatrix,m=t.getAppPosition,E=t.getBackDeleteTextProps,b=t.getContainer,T=t.onBeforeInput,S=t.noExtendProps;e.attachSurface(),this.model=new yn({value:l,onChange:function(e){n.handleChange(e)},onBeforeChange:this.handleBeforeChange,onSelectionChange:this.handleSelectionChange,onBeforeInput:T,noExtendProps:S}),this.view=new tn({rect:o,getMatrix:y,getScale:a,getAppPosition:m,getCoordinate:function(){return n.coordinate}}),Q(e.platform)||(this.mouseManager=new Xt({model:this.model,getPointByPosition:this.getPointByPosition,setFocus:this.focus,initSelection:this.initSelection})),this.touchManager=new en({model:this.model,getPointByPosition:this.getPointByPosition,setFocus:this.focus,initSelection:this.initSelection}),this.getContainer=b,this.readonly=c,this.drawContext=u,this.renderUtils=d,this.getBackDeleteTextProps=E,this.preventScrollOnFocus=v,this.initHook(t),this.initLayout(),this.initRender(g,f)}return Object(r.x)(e,[{key:"rangeUtil",get:function(){return this._rangeUtil||(this._rangeUtil=new dn(this.model.slate)),this._rangeUtil}},{key:"selection",get:function(){return this.model.selection}},{key:"isEditing",get:function(){return!this.readonly&&(!!this.selection&&!this.isReadyEditing)}},{key:"isReadyEditing",get:function(){return!this.readonly&&(!!this.selection&&this.setReadyEditingFlag&&e.isKeepCaretHide&&this.isSelectionCollapsed())}},{key:"isTextEnterable",get:function(){return this.isEditing&&this.isFocused&&e.surface.isHiddenInputFocus}},{key:"scale",get:function(){return this.view.scale}},{key:"container",get:function(){return this.getContainer?this.getContainer()||null:document.body}},{key:"matrix",get:function(){return this.view.matrix}},{key:"transformScale",get:function(){var e=this.matrix,t=e.a,n=e.b;return Math.sqrt(Math.pow(t,2)+Math.pow(n,2))}},{key:"blockRect",get:function(){return this.view.blockRect}},{key:"textRect",get:function(){var e=this.layoutManager.layoutBox.rect,t=e.width,n=e.height,i=e.x,o=e.y;return{x:Object(r.Q)(i),y:Object(r.Q)(o),width:Object(r.Q)(t),height:Object(r.Q)(n)}}},{key:"appPosition",get:function(){return this.view.appPosition}},{key:"coordinate",get:function(){return this.model.coordinate}},{key:"lineExpandDirection",get:function(){return this.model.lineExpandDirection}},{key:"triggerMouseDown",value:function(e,t){var n;null===(n=this.mouseManager)||void 0===n||n.triggerMouseDown(e,t)}},{key:"triggerMouseMove",value:function(e){var t;null===(t=this.mouseManager)||void 0===t||t.triggerMouseMove(e)}},{key:"triggerMouseUp",value:function(){var e;null===(e=this.mouseManager)||void 0===e||e.triggerMouseUp()}},{key:"triggerTouchStart",value:function(e){this.touchManager.triggerTouchStart(e)}},{key:"triggerTouchMove",value:function(e){this.touchManager.triggerTouchMove(e)}},{key:"triggerTouchEnd",value:function(e){this.touchManager.triggerTouchEnd(e)}},{key:"handleTouchPoint",value:function(e){this.touchManager.handleTouchPoint(e)}},{key:"updateSurface",value:function(){this.updateEditorSurface({needUpdateSelection:!1,needFocus:!1})}},{key:"selectEnd",value:function(){this.model.selectEnd()}},{key:"selectAll",value:function(){this.model.selectAll()}},{key:"blur",value:function(){e.surface.detachEditor(this)}},{key:"startKeepCaretShow",value:function(){this.isFocused&&e.surface.startKeepCaretShow()}},{key:"stopKeepCaretShow",value:function(){this.isFocused&&e.surface.stopKeepCaretShow()}},{key:"startKeepCaretHide",value:function(){this.isFocused&&e.surface.startKeepCaretHide()}},{key:"stopKeepCaretHide",value:function(){this.isFocused&&e.surface.stopKeepCaretHide()}},{key:"blurHook",value:function(){var e;if(this.isReadyEditing)return this.setReadyEditingFlag=!1,void this.clearEditStatus();this.clearEditStatus(),this.readonly||this.isFocused&&(null===(e=this.onBlur)||void 0===e||e.call(this))}},{key:"focusHook",value:function(){var e;this.readonly||this.isReadyEditing||this.isFocused||null===(e=this.onFocus)||void 0===e||e.call(this)}},{key:"getValue",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.model.getValue(e)}},{key:"changeReadonly",value:function(e){e!==this.readonly&&(this.readonly=e,this.readonly&&this.blur())}},{key:"resetValue",value:function(e,t){this.model.resetValue(e),t&&this.view.updateBlockRect(t),this.handleValueChange(!1)}},{key:"resetValueWithoutEffect",value:function(e){this.model.resetValue(e),this.updateTextElementToPath()}},{key:"clearSelection",value:function(){this.model.clearSelection()}},{key:"setSelection",value:function(e){this.model.setSelection(e)}},{key:"changeRect",value:function(e){this.view.isSizeChange(e)?this.onSizeChange(e):this.view.isPositionChange(e)&&this.onPositionChange(e)}},{key:"forceRender",value:function(){this.clearRect(),this.layout(),this.draw(),this.updateEditorSurface({needFocus:!1})}},{key:"isSelectionExpanded",value:function(){return this.model.isSelectionExpanded()}},{key:"isSelectionCollapsed",value:function(){return this.model.isSelectionCollapsed()}},{key:"getSelectionRect",value:function(){if(this.isFocused)return e.surface.selectionBlockRect}},{key:"changeTextProps",value:function(e,t,n){return this.model.changeTextProps(e,this.isEditing,t,n)}},{key:"deleteText",value:function(e){return this.model.deleteText(e)}},{key:"removeTextProps",value:function(e,t){return this.model.removeTextProps(e,t)}},{key:"changeParagraphProps",value:function(e,t){return this.model.changeParagraphProps(e,t)}},{key:"changeDocumentProps",value:function(e){var t=this;this.model.changeDocumentProps(e),Promise.resolve().then((function(){t.handleValueChange()}))}},{key:"insertText",value:function(e,t){return this.enterRealEditing(),this.model.insertText(e,t)}},{key:"insertBreak",value:function(){this.model.insertBreak()}},{key:"insertSoftBreak",value:function(){this.insertText("\n")}},{key:"paste",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.model.paste(e,t)}},{key:"copy",value:function(){return this.model.copy()}},{key:"cut",value:function(){return this.model.cut()}},{key:"handleCompositionStart",value:function(){this.isComposing=!0,this.enterRealEditing(),this.model.handleCompositionStart()}},{key:"handleCompositionEnd",value:function(e){var t;this.model.handleCompositionEnd(e),e&&(null===(t=this.onValueChange)||void 0===t||t.call(this)),this.isComposing=!1}},{key:"changeCompositionText",value:function(e){var t=this;this.model.changeCompositionText(e),Promise.resolve().then((function(){var e;null===(e=t.onCompositionInput)||void 0===e||e.call(t)}))}},{key:"clearCompositionState",value:function(){this.model.clearCompositionState()}},{key:"normalizePoint",value:function(e){return this.model.normalizePoint(e)}},{key:"getSelectionProps",value:function(){return this.model.getSelectionProps()}},{key:"getSelectionNodes",value:function(e){return this.model.getSelectionNodes(e)}},{key:"getNodes",value:function(e,t){return this.model.getNodes(e,t)}},{key:"getStyle",value:function(){return this.model.getStyle()}},{key:"getString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection;return this.model.getString(e)}},{key:"getStartPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection;return this.model.getStartPoint(e)}},{key:"getEndPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection;return this.model.getEndPoint(e)}},{key:"getBeforePoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection,t=arguments.length>1?arguments[1]:void 0;return this.model.getBeforePoint(e,t)}},{key:"getAfterPoint",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selection,t=arguments.length>1?arguments[1]:void 0;return this.model.getAfterPoint(e,t)}},{key:"getSelectionLeafNodeAndRange",value:function(){return this.getSelectionLeafNodeAndRangeRef()}},{key:"getSelectionLeafNodeAndRangeRef",value:function(){return this.model.getLeafNodeAndRangeRef(this.selection)}},{key:"getLeafNodeAndRangeRef",value:function(e){return this.model.getLeafNodeAndRangeRef(e)}},{key:"getParent",value:function(e){return this.model.getParent(e)}},{key:"isSelectAll",value:function(){return this.model.isSelectAll()}},{key:"getLayoutSize",value:function(){var e=this.layoutManager.layoutBox.rect,t=e.width,n=e.height;return{width:Object(r.Q)(t),height:Object(r.Q)(n)}}},{key:"positionOfEditorToPositionOfApp",value:function(e,t){var n=this.blockRect,i=n.x,o=n.y,r=this.matrix.apply({x:e+i,y:t+o});return{x:r.x/this.scale,y:r.y/this.scale}}},{key:"positionOfAppToPositionOfEditor",value:function(e,t){var n={x:e*this.scale,y:t*this.scale},i=this.matrix.applyInverse(n),o=this.blockRect,r=o.x,a=o.y;return{x:i.x-r,y:i.y-a}}},{key:"selectTextElement",value:function(e){var t=this.textElementToPath.get(e);if(t){var n=this.model.getRange(t);this.setSelection(n)}}},{key:"getRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.model.getRange(e)}},{key:"selectTextElements",value:function(e){var t=this,n=null,i=null;if(e.forEach((function(e){var o=t.textElementToPath.get(e);o&&(n&&i?(r.V.isBefore(o,n)&&(n=o),r.V.isAfter(o,i)&&(i=o)):(n=o,i=o))})),n&&i){var o=this.model.getStartPoint(n),a=this.model.getEndPoint(i);this.model.setSelectionPoints(o,a)}}},{key:"getPrevTextElement",value:function(e){var t=this.textElementToPath.get(e);return this.model.getPrevTextElement(t)}},{key:"getNextTextElement",value:function(e){var t=this.textElementToPath.get(e);return this.model.getNextTextElement(t)}},{key:"selectCurrentText",value:function(){this.model.selectCurrentText()}},{key:"handleKeyDown",value:function(e){var t;return null===(t=this.onKeyDown)||void 0===t?void 0:t.call(this,e)}},{key:"handleCopy",value:function(e){var t;return null===(t=this.onCopy)||void 0===t?void 0:t.call(this,e)}},{key:"handlePaste",value:function(e){var t;return null===(t=this.onPaste)||void 0===t?void 0:t.call(this,e)}},{key:"handleCut",value:function(e){var t;return null===(t=this.onCut)||void 0===t?void 0:t.call(this,e)}},{key:"detach",value:function(){e.surface.detachEditor(this,!1),this.clearRect(),this.clearEditStatus()}},{key:"isCaretDragging",get:function(){return e.surface.isCaretDragging}},{key:"deleteCharacterBack",value:function(e){return this.model.deleteCharacterBack(e)}},{key:"isIncludedInRange",value:function(e,t){return this.model.isIncludedInRange(e,t)}},{key:"getLineLogicRect",value:function(e){return this.layoutManager.getLineLogicRect(e)}},{key:"handleInputBlur",value:function(){this.model.clearCompositionState(),this.isComposing=!1}},{key:"updateEditorSurface",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.needUpdateSelection,i=void 0===n||n,o=t.needFocus,r=void 0===o||o;this.isFocused&&e.surface.update({needUpdateSelection:i,needFocus:r})}},{key:"initHook",value:function(e){var t=e.onSelectionChange,n=e.onSelectionDragStart,i=e.onSelectionDragEnd,o=e.onValueChange,r=e.onBeforeValueChange,a=e.onKeyDown,s=e.onFocus,c=e.onBlur,l=e.onBeforeLayout,u=e.onCompositionInput,d=e.onCopy,h=e.onPaste,f=e.onCut;this.onSelectionChange=t,this.onSelectionDragStart=n,this.onSelectionDragEnd=i,this.onValueChange=o,this.onBeforeValueChange=r,this.onKeyDown=a,this.onCopy=d,this.onPaste=h,this.onCut=f,this.onFocus=s,this.onBlur=c,this.onBeforeLayout=l,this.onCompositionInput=u}},{key:"isFocused",get:function(){return e.surface.editor===this}},{key:"onSizeChange",value:function(e){this.clearRect();var t=this.model.slate,n=t.anchor,i=void 0===n?r.a.Top:n,o=t.paddingTop,a=void 0===o?0:o,s=t.paddingBottom,c=void 0===s?0:s,l=t.columnNumber,u=void 0===l?1:l,d=a+c>this.blockRect.height,h=a+c>e.height,f=!(1===u&&this.coordinate===r.c.LEFT_TOP&&this.lineExpandDirection===r.I.VERTICAL&&i===r.a.Top&&e.width===this.blockRect.width&&d===h);this.view.updateBlockRect(e),f&&this.layout(),this.draw(),this.updateEditorSurface({needFocus:!1})}},{key:"onPositionChange",value:function(e){this.clearRect(),this.view.updateBlockRect(e),this.draw(),this.updateEditorSurface({needFocus:!1})}},{key:"handleValueChange",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.clearRect(),this.layout(),this.draw(),this.updateEditorSurface({needFocus:!1}),t&&!this.isComposing&&(null===(e=this.onValueChange)||void 0===e||e.call(this))}},{key:"handleChange",value:function(e){e.isChangeValue&&this.handleValueChange()}},{key:"initLayout",value:function(){var e=this;this.layoutManager=new D((function(){return e.layoutData||e.getValue(!1)})),this.layout()}},{key:"layout",value:function(){var e;this.layoutData=(null===(e=this.onBeforeLayout)||void 0===e?void 0:e.call(this,this.getValue()))||null,this.layoutManager.layout(this.blockRect),this.ifLayoutAgain()}},{key:"ifLayoutAgain",value:function(){if(this.view.textAlignStandard===$t.maxContentSize){if(this.isAllParagraphAlignLeft())return;var e=Math.ceil(P(this.layoutManager.layoutBox)),t=this.model.slate,n=t.paddingTop,i=void 0===n?0:n,o=t.paddingBottom,a=void 0===o?0:o,s=t.paddingLeft,c=void 0===s?0:s,l=t.paddingRight,u=void 0===l?0:l,d=this.blockRect,h=d.width,f=d.height,p=this.coordinate===r.c.LEFT_TOP?{width:this.view.legalizeSize(e+c+u),height:f}:{width:h,height:this.view.legalizeSize(e+i+a)};this.layoutManager.layout(Object.assign(Object.assign({},this.blockRect),p))}}},{key:"isAllParagraphAlignLeft",value:function(){var e=!0;return this.model.traverseParagraphElements((function(t){if(t.textAlign!==r.D.Left)return e=!1,!0})),e}},{key:"initRender",value:function(e,t){var n=this,i=this.drawContext,o=this.renderUtils,r=this.traverseTextHook,a=this.getNodeByPath,s=this.coordinate,c=this.lineExpandDirection;this.renderManager=new M({drawContext:i,renderText:e,traverseTextHook:r,eventArea:t,renderUtils:o,coordinate:s,lineExpandDirection:c,getNodeByPath:a,isTextElementExpired:function(e){return!n.textElementToPath.has(e)}}),this.draw()}},{key:"clearRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockRect;this.renderManager.clearRect(t),this.slatePathToBox.clear(),this.textElementToPath.clear(),this.isFocused&&e.surface.clear()}},{key:"draw",value:function(){var e=this.layoutManager.layoutBox;this.renderManager.startDraw(e,this.blockRect)}},{key:"clearEditStatus",value:function(){var e;null===(e=this.mouseManager)||void 0===e||e.clear(),this.clearSelection(),this.model.clearRefs()}},{key:"updateTextElementToPath",value:function(){var e=this;this.textElementToPath.clear(),this.model.traverseTextElements((function(t,n){e.textElementToPath.link(t,n)}))}},{key:"enterRealEditing",value:function(){this.isReadyEditing&&this.readyEditingToRealEditing()}},{key:"readyEditingToRealEditing",value:function(){var t,n;e.stopKeepCaretHide(),this.setReadyEditingFlag=!1,null===(t=this.onFocus)||void 0===t||t.call(this),null===(n=this.onSelectionChange)||void 0===n||n.call(this,null,this.selection)}},{key:"realEditingToReadyEditing",value:function(){var t;e.startKeepCaretHide(),this.model.selectEnd(),this.updateEditorSurface(),null===(t=this.onBlur)||void 0===t||t.call(this)}},{key:"blurredToReadyEditing",value:function(){e.startKeepCaretHide(),this.model.selectEnd(),e.surface.attachEditor(this),this.updateEditorSurface()}},{key:"readyEditingToBlurred",value:function(){e.surface.detachEditor(this),e.stopKeepCaretHide()}}],[{key:"setDefaultFontFamily",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.defaultFontFamilyString){this.defaultFontFamilyString=e.map((function(e){return'"'.concat(e,'"')})).join(",");var n={};Object.entries(t).forEach((function(e){var t=Object(r.N)(e,2),i=t[0],o=t[1];i&&o&&(n[i]=o.map((function(e){return'"'.concat(e,'"')})).join(","))})),D.setDefaultFontFamily(this.defaultFontFamilyString,n)}}},{key:"setPlatform",value:function(e){this.platform=e}},{key:"setSupportMouseOnTouchScreen",value:function(e){this.supportMouseOnTouchScreen=e}},{key:"attachSurface",value:function(){var e;this.surface=((e=Vt.getInstance()).attach(),e)}},{key:"invalidateMeasureCache",value:function(e){D.invalidateMeasureCache(e)}},{key:"isKeepCaretHide",get:function(){return this.surface.isKeepCaretHide}},{key:"startKeepCaretHide",value:function(){e.surface.startKeepCaretHide()}},{key:"stopKeepCaretHide",value:function(){e.surface.stopKeepCaretHide()}}])}();bn.defaultFontFamilyString="",bn.platform=o.pc;var Tn={preciseMeasurement:!1};function Sn(e,t){return function(e,t){var n=D.getPreciseMeasurement();if(n===t)return e();D.setPreciseMeasurement(t);var i=e();return D.setPreciseMeasurement(n),i}((function(){var n=new D((function(){return e})),i=Object.assign({x:0,y:0},function(e){if("number"==typeof e)return{width:e,height:e};return e}(t));return n.layout(i),n.layoutBox}),(arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tn).preciseMeasurement)}function xn(e,t){var n=Sn(e,t).rect,i=n.width,o=n.height;return{width:Object(r.Q)(i),height:Object(r.Q)(o)}}},"2dc700e1e6":function(e,t){e.exports=function(e,t,n,i,o){var r={};return Object.keys(i).forEach((function(e){r[e]=i[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),r),o&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(o):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r},e.exports.default=e.exports,e.exports.__esModule=!0},"311f2fc38c":function(e,t,n){"use strict";function i(e,t,n,i,o,r,a){try{var s=e[r](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function s(e){i(a,o,r,s,c,"next",e)}function c(e){i(a,o,r,s,c,"throw",e)}s(void 0)}))}}n.d(t,"a",(function(){return o}))},"3546bcf123":function(e,t,n){"use strict";function i(){this._listeners={}}e.exports=i,i.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},i.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},i.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this}},"391b34a2ca":function(e,t){function n(t,i){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,i)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},"3b458e5d14":function(e,t,n){"use strict";e.exports=function(e,t){var n=new Array(arguments.length-1),i=0,o=2,r=!0;for(;o<arguments.length;)n[i++]=arguments[o++];return new Promise((function(o,a){n[i]=function(e){if(r)if(r=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];o.apply(null,t)}};try{e.apply(t||null,n)}catch(e){r&&(r=!1,a(e))}}))}},"3ef2352f0b":function(e,t,n){e.exports=n("2810e53ad7")},"433aa513cc":function(e,t){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},"46e08ef6ed":function(e,t,n){"use strict";function i(e){let t,n,i,o=!1;return function(r){void 0===t?(t=r,n=0,i=-1):t=function(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(t,r);const a=t.length;let s=0;for(;n<a;){o&&(10===t[n]&&(s=++n),o=!1);let r=-1;for(;n<a&&-1===r;++n)switch(t[n]){case 58:-1===i&&(i=n-s);break;case 13:o=!0;case 10:r=n}if(-1===r)break;e(t.subarray(s,r),i),s=n,i=-1}s===a?t=void 0:0!==s&&(t=t.subarray(s),n-=s)}}n.d(t,"a",(function(){return c}));var o=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n};const r="text/event-stream",a=1e3,s="last-event-id";function c(e,t){var{signal:n,headers:c,onopen:u,onmessage:d,onclose:h,onerror:f,openWhenHidden:p,fetch:v}=t,g=o(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(((t,o)=>{const y=Object.assign({},c);let m;function E(){m.abort(),document.hidden||w()}y.accept||(y.accept=r),p||document.addEventListener("visibilitychange",E);let b=a,T=0;function S(){document.removeEventListener("visibilitychange",E),window.clearTimeout(T),m.abort()}null==n||n.addEventListener("abort",(()=>{S(),t()}));const x=null!=v?v:window.fetch,O=null!=u?u:l;async function w(){var n;m=new AbortController;try{const n=await x(e,Object.assign(Object.assign({},g),{headers:y,signal:m.signal}));await O(n),await async function(e,t){var n;const i=null===(n=e.body)||void 0===n?void 0:n.getReader();if(i){let e=await i.read();for(;!e.done;)t(e.value),e=await i.read()}else t(new Uint8Array(await e.arrayBuffer()))}(n,i(function(e,t,n){let i={data:"",event:"",id:"",retry:void 0};const o=new TextDecoder;return function(r,a){if(0===r.length)null==n||n(i),i={data:"",event:"",id:"",retry:void 0};else if(a>0){const n=o.decode(r.subarray(0,a)),s=a+(32===r[a+1]?2:1),c=o.decode(r.subarray(s));switch(n){case"data":i.data=i.data?i.data+"\n"+c:c;break;case"event":i.event=c;break;case"id":e(i.id=c);break;case"retry":const n=parseInt(c,10);isNaN(n)||t(i.retry=n)}}}}((e=>{e?y[s]=e:delete y[s]}),(e=>{b=e}),d))),null==h||h(),S(),t()}catch(e){if(!m.signal.aborted)try{const t=null!==(n=null==f?void 0:f(e))&&void 0!==n?n:b;window.clearTimeout(T),T=window.setTimeout(w,t)}catch(e){S(),o(e)}}}w()}))}function l(e){const t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(r)))throw new Error(`Expected content-type to be ${r}, Actual: ${t}`)}},"47428193b0":function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},"51767cbdc7":function(e,t,n){"use strict";function i(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}n.d(t,"a",(function(){return i}))},"547611bd96":function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},"550955e676":function(e,t,n){var i=n("e405005dcd");e.exports=function(e){if(Array.isArray(e))return i(e)},e.exports.default=e.exports,e.exports.__esModule=!0},6136199546:function(e,t,n){var i=n("029f7158fd"),o=n("225df5544d"),r=n("689828fd37"),a=n("47428193b0");e.exports=function(e){return i(e)||o(e)||r(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},"641f0f7395":function(e,t,n){"use strict";var i={};n.r(i),n.d(i,"hasBrowserEnv",(function(){return y})),n.d(i,"hasStandardBrowserWebWorkerEnv",(function(){return b})),n.d(i,"hasStandardBrowserEnv",(function(){return m}));var o=n("6ae287e149"),r=n("86987c705b"),a=n("c4e208f9b2");function s(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function c(e,t){this._pairs=[],e&&Object(a.a)(e,this,t)}const l=c.prototype;l.append=function(e,t){this._pairs.push([e,t])},l.toString=function(e){const t=e?function(t){return e.call(this,t,s)}:s;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var u=c;function d(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function h(e,t,n){if(!t)return e;const i=n&&n.encode||d,r=n&&n.serialize;let a;if(a=r?r(t,n):o.a.isURLSearchParams(t)?t.toString():new u(t,n).toString(i),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}var f=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){o.a.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},p=n("b967e9ffe0"),v={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},g={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:u,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const y="undefined"!=typeof window&&"undefined"!=typeof document,m=(E="undefined"!=typeof navigator&&navigator.product,y&&["ReactNative","NativeScript","NS"].indexOf(E)<0);var E;const b="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var T={...i,...g};var S=function(e){function t(e,n,i,r){let a=e[r++];const s=Number.isFinite(+a),c=r>=e.length;if(a=!a&&o.a.isArray(i)?i.length:a,c)return o.a.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!s;i[a]&&o.a.isObject(i[a])||(i[a]=[]);return t(e,n,i[a],r)&&o.a.isArray(i[a])&&(i[a]=function(e){const t={},n=Object.keys(e);let i;const o=n.length;let r;for(i=0;i<o;i++)r=n[i],t[r]=e[r];return t}(i[a])),!s}if(o.a.isFormData(e)&&o.a.isFunction(e.entries)){const n={};return o.a.forEachEntry(e,((e,i)=>{t(function(e){return o.a.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),i,n,0)})),n}return null};const x={transitional:v,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=o.a.isObject(e);r&&o.a.isHTMLForm(e)&&(e=new FormData(e));if(o.a.isFormData(e))return i&&i?JSON.stringify(S(e)):e;if(o.a.isArrayBuffer(e)||o.a.isBuffer(e)||o.a.isStream(e)||o.a.isFile(e)||o.a.isBlob(e))return e;if(o.a.isArrayBufferView(e))return e.buffer;if(o.a.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Object(a.a)(e,new T.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,i){return T.isNode&&o.a.isBuffer(e)?(this.append(t,e.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=o.a.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Object(a.a)(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),function(e,t,n){if(o.a.isString(e))try{return(t||JSON.parse)(e),o.a.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||x.transitional,n=t&&t.forcedJSONParsing,i="json"===this.responseType;if(e&&o.a.isString(e)&&(n&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(e){if(n){if("SyntaxError"===e.name)throw p.a.from(e,p.a.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:T.classes.FormData,Blob:T.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};o.a.forEach(["delete","get","head","post","put","patch"],(e=>{x.headers[e]={}}));var O=x;const w=o.a.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const _=Symbol("internals");function C(e){return e&&String(e).trim().toLowerCase()}function A(e){return!1===e||null==e?e:o.a.isArray(e)?e.map(A):String(e)}function k(e,t,n,i,r){return o.a.isFunction(i)?i.call(this,t,n):(r&&(t=n),o.a.isString(t)?o.a.isString(i)?-1!==t.indexOf(i):o.a.isRegExp(i)?i.test(t):void 0:void 0)}class R{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(e,t,n){const r=C(t);if(!r)throw new Error("header name must be a non-empty string");const a=o.a.findKey(i,r);(!a||void 0===i[a]||!0===n||void 0===n&&!1!==i[a])&&(i[a||t]=A(e))}const a=(e,t)=>o.a.forEach(e,((e,n)=>r(e,n,t)));return o.a.isPlainObject(e)||e instanceof this.constructor?a(e,t):o.a.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a((e=>{const t={};let n,i,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),i=e.substring(o+1).trim(),!n||t[n]&&w[n]||("set-cookie"===n?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)})),t})(e),t):null!=e&&r(t,e,n),this}get(e,t){if(e=C(e)){const n=o.a.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}(e);if(o.a.isFunction(t))return t.call(this,e,n);if(o.a.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=C(e)){const n=o.a.findKey(this,e);return!(!n||void 0===this[n]||t&&!k(0,this[n],n,t))}return!1}delete(e,t){const n=this;let i=!1;function r(e){if(e=C(e)){const r=o.a.findKey(n,e);!r||t&&!k(0,n[r],r,t)||(delete n[r],i=!0)}}return o.a.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const o=t[n];e&&!k(0,this[o],o,e,!0)||(delete this[o],i=!0)}return i}normalize(e){const t=this,n={};return o.a.forEach(this,((i,r)=>{const a=o.a.findKey(n,r);if(a)return t[a]=A(i),void delete t[r];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();s!==r&&delete t[r],t[s]=A(i),n[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return o.a.forEach(this,((n,i)=>{null!=n&&!1!==n&&(t[i]=e&&o.a.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach((e=>n.set(e))),n}static accessor(e){const t=(this[_]=this[_]={accessors:{}}).accessors,n=this.prototype;function i(e){const i=C(e);t[i]||(!function(e,t){const n=o.a.toCamelCase(" "+t);["get","set","has"].forEach((i=>{Object.defineProperty(e,i+n,{value:function(e,n,o){return this[i].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[i]=!0)}return o.a.isArray(e)?e.forEach(i):i(e),this}}R.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),o.a.reduceDescriptors(R.prototype,(({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}})),o.a.freezeMethods(R);var P=R;function I(e,t){const n=this||O,i=t||n,r=P.from(i.headers);let a=i.data;return o.a.forEach(e,(function(e){a=e.call(n,a,r.normalize(),t?t.status:void 0)})),r.normalize(),a}function L(e){return!(!e||!e.__CANCEL__)}function N(e,t,n){p.a.call(this,null==e?"canceled":e,p.a.ERR_CANCELED,t,n),this.name="CanceledError"}o.a.inherits(N,p.a,{__CANCEL__:!0});var B=N,D=n("7b9b002cb4");var M=T.hasStandardBrowserEnv?{write(e,t,n,i,r,a){const s=[e+"="+encodeURIComponent(t)];o.a.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),o.a.isString(i)&&s.push("path="+i),o.a.isString(r)&&s.push("domain="+r),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function j(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var F=T.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function i(n){let i=n;return e&&(t.setAttribute("href",i),i=t.href),t.setAttribute("href",i),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=i(window.location.href),function(e){const t=o.a.isString(e)?i(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0};var H=function(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o,r=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),l=i[a];o||(o=c),n[r]=s,i[r]=c;let u=a,d=0;for(;u!==r;)d+=n[u++],u%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),c-o<t)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}};function U(e,t){let n=0;const i=H(50,250);return o=>{const r=o.loaded,a=o.lengthComputable?o.total:void 0,s=r-n,c=i(s);n=r;const l={loaded:r,total:a,progress:a?r/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&r<=a?(a-r)/c:void 0,event:o};l[t?"download":"upload"]=!0,e(l)}}var z="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){let i=e.data;const r=P.from(e.headers).normalize();let a,s,{responseType:c,withXSRFToken:l}=e;function u(){e.cancelToken&&e.cancelToken.unsubscribe(a),e.signal&&e.signal.removeEventListener("abort",a)}if(o.a.isFormData(i))if(T.hasStandardBrowserEnv||T.hasStandardBrowserWebWorkerEnv)r.setContentType(!1);else if(!1!==(s=r.getContentType())){const[e,...t]=s?s.split(";").map((e=>e.trim())).filter(Boolean):[];r.setContentType([e||"multipart/form-data",...t].join("; "))}let d=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",n=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+n))}const f=j(e.baseURL,e.url);function g(){if(!d)return;const i=P.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders());!function(e,t,n){const i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new p.a("Request failed with status code "+n.status,[p.a.ERR_BAD_REQUEST,p.a.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),u()}),(function(e){n(e),u()}),{data:c&&"text"!==c&&"json"!==c?d.response:d.responseText,status:d.status,statusText:d.statusText,headers:i,config:e,request:d}),d=null}if(d.open(e.method.toUpperCase(),h(f,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,"onloadend"in d?d.onloadend=g:d.onreadystatechange=function(){d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))&&setTimeout(g)},d.onabort=function(){d&&(n(new p.a("Request aborted",p.a.ECONNABORTED,e,d)),d=null)},d.onerror=function(){n(new p.a("Network Error",p.a.ERR_NETWORK,e,d)),d=null},d.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const i=e.transitional||v;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new p.a(t,i.clarifyTimeoutError?p.a.ETIMEDOUT:p.a.ECONNABORTED,e,d)),d=null},T.hasStandardBrowserEnv&&(l&&o.a.isFunction(l)&&(l=l(e)),l||!1!==l&&F(f))){const t=e.xsrfHeaderName&&e.xsrfCookieName&&M.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===i&&r.setContentType(null),"setRequestHeader"in d&&o.a.forEach(r.toJSON(),(function(e,t){d.setRequestHeader(t,e)})),o.a.isUndefined(e.withCredentials)||(d.withCredentials=!!e.withCredentials),c&&"json"!==c&&(d.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&d.addEventListener("progress",U(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",U(e.onUploadProgress)),(e.cancelToken||e.signal)&&(a=t=>{d&&(n(!t||t.type?new B(null,e,d):t),d.abort(),d=null)},e.cancelToken&&e.cancelToken.subscribe(a),e.signal&&(e.signal.aborted?a():e.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(f);y&&-1===T.protocols.indexOf(y)?n(new p.a("Unsupported protocol "+y+":",p.a.ERR_BAD_REQUEST,e)):d.send(i||null)}))};const W={http:D.a,xhr:z};o.a.forEach(W,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const G=e=>`- ${e}`,V=e=>o.a.isFunction(e)||null===e||!1===e;var K=e=>{e=o.a.isArray(e)?e:[e];const{length:t}=e;let n,i;const r={};for(let o=0;o<t;o++){let t;if(n=e[o],i=n,!V(n)&&(i=W[(t=String(n)).toLowerCase()],void 0===i))throw new p.a(`Unknown adapter '${t}'`);if(i)break;r[t||"#"+o]=i}if(!i){const e=Object.entries(r).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));let n=t?e.length>1?"since :\n"+e.map(G).join("\n"):" "+G(e[0]):"as no adapter specified";throw new p.a("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return i};function q(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new B(null,e)}function Q(e){q(e),e.headers=P.from(e.headers),e.data=I.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return K(e.adapter||O.adapter)(e).then((function(t){return q(e),t.data=I.call(e,e.transformResponse,t),t.headers=P.from(t.headers),t}),(function(t){return L(t)||(q(e),t&&t.response&&(t.response.data=I.call(e,e.transformResponse,t.response),t.response.headers=P.from(t.response.headers))),Promise.reject(t)}))}const Y=e=>e instanceof P?e.toJSON():e;function X(e,t){t=t||{};const n={};function i(e,t,n){return o.a.isPlainObject(e)&&o.a.isPlainObject(t)?o.a.merge.call({caseless:n},e,t):o.a.isPlainObject(t)?o.a.merge({},t):o.a.isArray(t)?t.slice():t}function r(e,t,n){return o.a.isUndefined(t)?o.a.isUndefined(e)?void 0:i(void 0,e,n):i(e,t,n)}function a(e,t){if(!o.a.isUndefined(t))return i(void 0,t)}function s(e,t){return o.a.isUndefined(t)?o.a.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function c(n,o,r){return r in t?i(n,o):r in e?i(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c,headers:(e,t)=>r(Y(e),Y(t),!0)};return o.a.forEach(Object.keys(Object.assign({},e,t)),(function(i){const a=l[i]||r,s=a(e[i],t[i],i);o.a.isUndefined(s)&&a!==c||(n[i]=s)})),n}const J="1.6.2",Z={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{Z[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const $={};Z.transitional=function(e,t,n){function i(e,t){return"[Axios v1.6.2] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,r)=>{if(!1===e)throw new p.a(i(o," has been removed"+(t?" in "+t:"")),p.a.ERR_DEPRECATED);return t&&!$[o]&&($[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,r)}};var ee={assertOptions:function(e,t,n){if("object"!=typeof e)throw new p.a("options must be an object",p.a.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const r=i[o],a=t[r];if(a){const t=e[r],n=void 0===t||a(t,r,e);if(!0!==n)throw new p.a("option "+r+" must be "+n,p.a.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new p.a("Unknown option "+r,p.a.ERR_BAD_OPTION)}},validators:Z};const te=ee.validators;class ne{constructor(e){this.defaults=e,this.interceptors={request:new f,response:new f}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=X(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;void 0!==n&&ee.assertOptions(n,{silentJSONParsing:te.transitional(te.boolean),forcedJSONParsing:te.transitional(te.boolean),clarifyTimeoutError:te.transitional(te.boolean)},!1),null!=i&&(o.a.isFunction(i)?t.paramsSerializer={serialize:i}:ee.assertOptions(i,{encode:te.function,serialize:te.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=r&&o.a.merge(r.common,r[t.method]);r&&o.a.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=P.concat(a,r);const s=[];let c=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(c=c&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let u;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,h=0;if(!c){const e=[Q.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),d=e.length,u=Promise.resolve(t);h<d;)u=u.then(e[h++],e[h++]);return u}d=s.length;let f=t;for(h=0;h<d;){const e=s[h++],t=s[h++];try{f=e(f)}catch(e){t.call(this,e);break}}try{u=Q.call(this,f)}catch(e){return Promise.reject(e)}for(h=0,d=l.length;h<d;)u=u.then(l[h++],l[h++]);return u}getUri(e){return h(j((e=X(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}o.a.forEach(["delete","get","head","options"],(function(e){ne.prototype[e]=function(t,n){return this.request(X(n||{},{method:e,url:t,data:(n||{}).data}))}})),o.a.forEach(["post","put","patch"],(function(e){function t(t){return function(n,i,o){return this.request(X(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}ne.prototype[e]=t(),ne.prototype[e+"Form"]=t(!0)}));var ie=ne;class oe{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const i=new Promise((e=>{n.subscribe(e),t=e})).then(e);return i.cancel=function(){n.unsubscribe(t)},i},e((function(e,i,o){n.reason||(n.reason=new B(e,i,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new oe((function(t){e=t})),cancel:e}}}var re=oe;const ae={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ae).forEach((([e,t])=>{ae[t]=e}));var se=ae;const ce=function e(t){const n=new ie(t),i=Object(r.a)(ie.prototype.request,n);return o.a.extend(i,ie.prototype,n,{allOwnKeys:!0}),o.a.extend(i,n,null,{allOwnKeys:!0}),i.create=function(n){return e(X(t,n))},i}(O);ce.Axios=ie,ce.CanceledError=B,ce.CancelToken=re,ce.isCancel=L,ce.VERSION=J,ce.toFormData=a.a,ce.AxiosError=p.a,ce.Cancel=ce.CanceledError,ce.all=function(e){return Promise.all(e)},ce.spread=function(e){return function(t){return e.apply(null,t)}},ce.isAxiosError=function(e){return o.a.isObject(e)&&!0===e.isAxiosError},ce.mergeConfig=X,ce.AxiosHeaders=P,ce.formToJSON=e=>S(o.a.isHTMLForm(e)?new FormData(e):e),ce.getAdapter=K,ce.HttpStatusCode=se,ce.default=ce;t.a=ce},"66de10b9fd":function(e,t,n){"use strict";e.exports=function(e,t,n){var i=n||8192,o=i>>>1,r=null,a=i;return function(n){if(n<1||n>o)return e(n);a+n>i&&(r=e(i),a=0);var s=t.call(r,a,a+=n);return 7&a&&(a=1+(7|a)),s}}},"689828fd37":function(e,t,n){var i=n("e405005dcd");e.exports=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},"6a364eb35c":function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0},"6ab2696dd0":function(e,t,n){var i=n("391b34a2ca"),o=n("433aa513cc");function r(t,n,a){return o()?(e.exports=r=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&i(r,n.prototype),r},e.exports.default=e.exports,e.exports.__esModule=!0),r.apply(null,arguments)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},"6ae287e149":function(e,t,n){"use strict";(function(e){var i=n("86987c705b");const{toString:o}=Object.prototype,{getPrototypeOf:r}=Object,a=(s=Object.create(null),e=>{const t=o.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())});var s;const c=e=>(e=e.toLowerCase(),t=>a(t)===e),l=e=>t=>typeof t===e,{isArray:u}=Array,d=l("undefined");const h=c("ArrayBuffer");const f=l("string"),p=l("function"),v=l("number"),g=e=>null!==e&&"object"==typeof e,y=e=>{if("object"!==a(e))return!1;const t=r(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},m=c("Date"),E=c("File"),b=c("Blob"),T=c("FileList"),S=c("URLSearchParams");function x(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let i,o;if("object"!=typeof e&&(e=[e]),u(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{const o=n?Object.getOwnPropertyNames(e):Object.keys(e),r=o.length;let a;for(i=0;i<r;i++)a=o[i],t.call(null,e[a],a,e)}}function O(e,t){t=t.toLowerCase();const n=Object.keys(e);let i,o=n.length;for(;o-- >0;)if(i=n[o],t===i.toLowerCase())return i;return null}const w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:e,_=e=>!d(e)&&e!==w;const C=(A="undefined"!=typeof Uint8Array&&r(Uint8Array),e=>A&&e instanceof A);var A;const k=c("HTMLFormElement"),R=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),P=c("RegExp"),I=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};x(n,((n,o)=>{let r;!1!==(r=t(n,o,e))&&(i[o]=r||n)})),Object.defineProperties(e,i)},L="abcdefghijklmnopqrstuvwxyz",N="0123456789",B={DIGIT:N,ALPHA:L,ALPHA_DIGIT:L+L.toUpperCase()+N};const D=c("AsyncFunction");t.a={isArray:u,isArrayBuffer:h,isBuffer:function(e){return null!==e&&!d(e)&&null!==e.constructor&&!d(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=a(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&h(e.buffer),t},isString:f,isNumber:v,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:y,isUndefined:d,isDate:m,isFile:E,isBlob:b,isRegExp:P,isFunction:p,isStream:e=>g(e)&&p(e.pipe),isURLSearchParams:S,isTypedArray:C,isFileList:T,forEach:x,merge:function e(){const{caseless:t}=_(this)&&this||{},n={},i=(i,o)=>{const r=t&&O(n,o)||o;y(n[r])&&y(i)?n[r]=e(n[r],i):y(i)?n[r]=e({},i):u(i)?n[r]=i.slice():n[r]=i};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&x(arguments[e],i);return n},extend:(e,t,n,{allOwnKeys:o}={})=>(x(t,((t,o)=>{n&&p(t)?e[o]=Object(i.a)(t,n):e[o]=t}),{allOwnKeys:o}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,i)=>{let o,a,s;const c={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)s=o[a],i&&!i(s,e,t)||c[s]||(t[s]=e[s],c[s]=!0);e=!1!==n&&r(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:c,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return-1!==i&&i===n},toArray:e=>{if(!e)return null;if(u(e))return e;let t=e.length;if(!v(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const n=i.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const i=[];for(;null!==(n=e.exec(t));)i.push(n);return i},isHTMLForm:k,hasOwnProperty:R,hasOwnProp:R,reduceDescriptors:I,freezeMethods:e=>{I(e,((t,n)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const i=e[n];p(i)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},i=e=>{e.forEach((e=>{n[e]=!0}))};return u(e)?i(e):i(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:O,global:w,isContextDefined:_,ALPHABET:B,generateString:(e=16,t=B.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n},isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,i)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[i]=e;const o=u(e)?[]:{};return x(e,((e,t)=>{const r=n(e,i+1);!d(r)&&(o[t]=r)})),t[i]=void 0,o}}return e};return n(e,0)},isAsyncFn:D,isThenable:e=>e&&(g(e)||p(e))&&p(e.then)&&p(e.catch)}}).call(this,n("5ef37df1a0"))},"6e7f419c38":function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},"730477bb20":function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},"7a5536c9bf":function(e,t,n){var i=n("550955e676"),o=n("225df5544d"),r=n("689828fd37"),a=n("d4fd518f3c");e.exports=function(e){return i(e)||o(e)||r(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},"7b9b002cb4":function(e,t,n){"use strict";t.a=null},"7c878d3916":function(e,t){e.exports=function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}},e.exports.default=e.exports,e.exports.__esModule=!0},"85d0a7609b":function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},"86987c705b":function(e,t,n){"use strict";function i(e,t){return function(){return e.apply(t,arguments)}}n.d(t,"a",(function(){return i}))},"899dc68894":function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}n.d(t,"a",(function(){return o}))},"8c0defe94d":function(e,t,n){"use strict";function i(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.d(t,"a",(function(){return i}))},"8dcd4324d9":function(e,t,n){"use strict";t.PluginPrefix="DocsCdnRetryPlugin",t.RuntimeNamespace="DCR"},"8eec1e4a03":function(e,t,n){var i=n("08f3b74f2c");function o(t,n,r){return"undefined"!=typeof Reflect&&Reflect.get?(e.exports=o=Reflect.get,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=o=function(e,t,n){var o=i(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}},e.exports.default=e.exports,e.exports.__esModule=!0),o(t,n,r||t)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},9132715560:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},"9af8f0fa82":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return h})),n.d(t,"g",(function(){return g}));var i,o,r,a,s,c,l,u,d,h,f,p,v,g,y,m,E,b,T,S,x,O,w,_,C,A,k=function(){return k=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError,function(e){e.TENCENT_DOCS="tencentdocs",e.TENCENT_QQ="tencentqq",e.TENCENT_WENKU="tencentwenku"}(i||(i={})),function(e){e[e.CHAT_BUBBLE=1]="CHAT_BUBBLE",e[e.CHAT_INPUT=2]="CHAT_INPUT"}(o||(o={})),function(e){e[e.SEND=1]="SEND",e[e.PASTE=2]="PASTE",e[e.FILE=3]="FILE",e[e.GET_RECOMMEND_COMMAND=4]="GET_RECOMMEND_COMMAND"}(r||(r={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.INSERT_BELOW=1]="INSERT_BELOW",e[e.REPLACE_SELECTION=2]="REPLACE_SELECTION"}(a||(a={})),function(e){e[e.SOURCE_UNSPECIFIED=0]="SOURCE_UNSPECIFIED",e[e.SOURCE_SMARTCANVAS=1]="SOURCE_SMARTCANVAS",e[e.SOURCE_DOC=2]="SOURCE_DOC",e[e.SOURCE_SHEET=3]="SOURCE_SHEET",e[e.SOURCE_SLIDE=4]="SOURCE_SLIDE",e[e.SOURCE_PDF=5]="SOURCE_PDF",e[e.SOURCE_RESUME=6]="SOURCE_RESUME",e[e.SOURCE_MIND=7]="SOURCE_MIND",e[e.SOURCE_DESKTOP=8]="SOURCE_DESKTOP",e[e.SOURCE_FORM=9]="SOURCE_FORM",e[e.SOURCE_FLOWCHART=10]="SOURCE_FLOWCHART",e[e.SOURCE_SMARTSHEET=11]="SOURCE_SMARTSHEET"}(s||(s={})),function(e){e.FORM="form",e.DOC="doc",e.SHEET="sheet",e.SLIDE="slide",e.PDF="pdf",e.MIND="mind",e.FLOWCHART="flowchart",e.SMARTCANVAS="smartcanvas",e.SMARTSHEET="smartsheet"}(c||(c={})),function(e){e[e.FULLSCREEN=0]="FULLSCREEN",e[e.NON_FULLSCREEN=1]="NON_FULLSCREEN"}(l||(l={})),function(e){e.DESKTOP="desktop",e.DOC="doc",e.SMARTCANVAS="smartcanvas",e.SHEET="sheet",e.SMARTSHEET="smartsheet",e.SLIDE="slide",e.PDF="pdf",e.FORM="form",e.MIND="mind",e.FLOWCHART="flowchart",e.RESUME="resume"}(u||(u={})),function(e){e[e.INSERT=0]="INSERT",e[e.REPLACE=1]="REPLACE",e[e.INSERT_BELOW=2]="INSERT_BELOW"}(d||(d={})),function(e){e.SYSTEM="system",e.BOT="assistant",e.USER="user"}(h||(h={})),function(e){e[e.CREATE_FROM_MATERIALS=0]="CREATE_FROM_MATERIALS",e[e.VIEW_RESULTS=1]="VIEW_RESULTS",e[e.REGENERATE=2]="REGENERATE"}(f||(f={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.CREATE_SLIDE=1]="CREATE_SLIDE",e[e.CREATE_DOC=2]="CREATE_DOC",e[e.CREATE_SHEET=3]="CREATE_SHEET",e[e.CREATE_FORM=4]="CREATE_FORM",e[e.CREATE_MINDMAP=5]="CREATE_MINDMAP",e[e.CREATE_SMART_CANVAS=6]="CREATE_SMART_CANVAS",e[e.CREATE_SMART_SHEET=7]="CREATE_SMART_SHEET",e[e.CREATE_RESUME=8]="CREATE_RESUME",e[e.CREATE_FLOW_CHART=9]="CREATE_FLOW_CHART",e[e.CREATE_PDF=10]="CREATE_PDF",e[e.SHEET_ROLLBACK=11]="SHEET_ROLLBACK",e[e.SHEET_CONFIRM=12]="SHEET_CONFIRM",e[e.SHEET_INSERT_FORMULA=13]="SHEET_INSERT_FORMULA",e[e.INSERT_CHART=14]="INSERT_CHART",e[e.INSERT_CONTENT=16]="INSERT_CONTENT",e[e.APPEND_NEW_CONTENT=17]="APPEND_NEW_CONTENT",e[e.MIND_ADD_CHILD_NODE=18]="MIND_ADD_CHILD_NODE",e[e.MIND_UPDATE_TITLE=19]="MIND_UPDATE_TITLE",e[e.MIND_INSERT_AS_DETACHED=20]="MIND_INSERT_AS_DETACHED",e[e.MIND_INSERT_TO_FILE=21]="MIND_INSERT_TO_FILE",e[e.GENERATE_SLIDE=22]="GENERATE_SLIDE",e[e.APPEND_REMARK=23]="APPEND_REMARK",e[e.INSERT_SHEET=24]="INSERT_SHEET"}(p||(p={})),function(e){e.LOADING="loading",e.SUCCESS="success",e.NOMORE="nomore",e.ERROR="error"}(v||(v={})),function(e){e[e.START=-1]="START",e[e.IN_PROGRESS=0]="IN_PROGRESS",e[e.FINISH=1]="FINISH",e[e.ERROR=2]="ERROR",e[e.STOP=3]="STOP"}(g||(g={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.TEXT_MARKDOWN=1]="TEXT_MARKDOWN",e[e.DOCUMENT=2]="DOCUMENT",e[e.TASK_CARD=4]="TASK_CARD",e[e.SLIDE_TEMPLATES=5]="SLIDE_TEMPLATES",e[e.RECOMMENDED_QUESTION=6]="RECOMMENDED_QUESTION",e[e.RECOMMENDED_COMMAND=7]="RECOMMENDED_COMMAND",e[e.RECOMMENDED_SUMARRY=8]="RECOMMENDED_SUMARRY",e[e.AUTH_TIP=9]="AUTH_TIP",e[e.MINIPROGRAM_IMPORT_DOC=10]="MINIPROGRAM_IMPORT_DOC",e[e.TEXT_SELECTION=11]="TEXT_SELECTION"}(y||(y={})),function(e){e[e.HISTORY_MESSAGE=0]="HISTORY_MESSAGE",e[e.COMMERCIALIZE_NOTIFICATION=1]="COMMERCIALIZE_NOTIFICATION"}(m||(m={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.DOC=1]="DOC",e[e.SHEET=2]="SHEET",e[e.SLIDE=3]="SLIDE",e[e.FORM=4]="FORM",e[e.MINDMAP=5]="MINDMAP",e[e.SMART_CANVAS=6]="SMART_CANVAS",e[e.SMART_SHEET=7]="SMART_SHEET",e[e.RESUME=8]="RESUME",e[e.FLOW_CHART=9]="FLOW_CHART",e[e.PDF=10]="PDF",e[e.IMAGE=11]="IMAGE",e[e.FOLDER=12]="FOLDER"}(E||(E={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LIKE=1]="LIKE",e[e.DISLIKE=2]="DISLIKE"}(b||(b={})),function(e){e.messageStatus="messageStatus",e.renderId="renderId",e.customDescription="customDescription",e.hideAvatar="hideAvatar"}(T||(T={})),function(e){e.SLEEP="sleep",e.STAND_BY="standBy",e.WRITING="writing",e.INPUT_COMPLETE="inputComplete",e.EDIT_COMPLETE="editComplete"}(S||(S={})),function(e){e.IDLE="idle",e.WRITING="writing",e.RE_WRITING="reWriting",e.CONTINUE_WRITING="continueWriting",e.STOPPED="stopped"}(x||(x={})),function(e){e.IN_CONTEXT="inContext",e.ON_BOARD="onBoard"}(O||(O={})),function(e){e[e.TBD=-1]="TBD",e[e.LIKE=0]="LIKE",e[e.UNLIKE=1]="UNLIKE"}(w||(w={})),function(e){e.WRITE="write",e.WRITE_FROM_EMPTY="writeFromEmpty",e.SELECTION="selection",e.COMPLETED="completed"}(_||(_={})),function(e){e.TO_SLEEP="toSleep",e.TO_STAND_BY="toStandBy",e.TO_WRITING="toWriting",e.TO_EDIT_COMPLETE="toEditComplete",e.TO_INPUT_COMPLETE="toInputComplete",e.BACK_TO_STAND_BY="backToStandBy",e.AI_BE_WAKE="aiBeWake"}(C||(C={})),function(e){e.POLISHING="polishing"}(A||(A={})),window.ai_version=k(k({},window.ai_version||{}),{interface:"1.84.0 - November 15, 2024 15:18:57"})},"9b674918eb":function(e,t,n){var i=n("2980634bca");e.exports=function(e,t){if(null==e)return{};var n,o,r=i(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r},e.exports.default=e.exports,e.exports.__esModule=!0},a22e6b5fb6:function(e,t,n){"use strict";var i=t;i.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},i.read=function(e,t,n){if(n-t<1)return"";for(var i,o=null,r=[],a=0;t<n;)(i=e[t++])<128?r[a++]=i:i>191&&i<224?r[a++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,r[a++]=55296+(i>>10),r[a++]=56320+(1023&i)):r[a++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,r)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,r.slice(0,a))),o.join("")):String.fromCharCode.apply(String,r.slice(0,a))},i.write=function(e,t,n){for(var i,o,r=n,a=0;a<e.length;++a)(i=e.charCodeAt(a))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(o=e.charCodeAt(a+1)))?(i=65536+((1023&i)<<10)+(1023&o),++a,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-r}},a3392e0014:function(e,t){e.exports=function(e,t){return t.get?t.get.call(e):t.value},e.exports.default=e.exports,e.exports.__esModule=!0},ab5eb40518:function(e,t,n){var i=n("0cf3719522").default,o=n("547611bd96");e.exports=function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return o(e)},e.exports.default=e.exports,e.exports.__esModule=!0},ad3f08c87d:function(e,t){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,n(t)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},b04733d69b:function(e,t,n){var i=n("7c878d3916"),o=n("148ad16515");e.exports=function(e,t,n){var r=o(e,t,"set");return i(e,r,n),n},e.exports.default=e.exports,e.exports.__esModule=!0},b6035c5438:function(e,t,n){var i=n("a3392e0014"),o=n("148ad16515");e.exports=function(e,t){var n=o(e,t,"get");return i(e,n)},e.exports.default=e.exports,e.exports.__esModule=!0},b967e9ffe0:function(e,t,n){"use strict";var i=n("6ae287e149");function o(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}i.a.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:i.a.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const r=o.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{a[e]={value:e}})),Object.defineProperties(o,a),Object.defineProperty(r,"isAxiosError",{value:!0}),o.from=(e,t,n,a,s,c)=>{const l=Object.create(r);return i.a.toFlatObject(e,l,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),o.call(l,e.message,t,n,a,s),l.cause=e,l.name=e.name,c&&Object.assign(l,c),l},t.a=o},bd29e2df90:function(e,t,n){var i=n("391b34a2ca");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},c143c5cd35:function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}},e.exports.default=e.exports,e.exports.__esModule=!0},c4e208f9b2:function(e,t,n){"use strict";(function(e){var i=n("6ae287e149"),o=n("b967e9ffe0"),r=n("7b9b002cb4");function a(e){return i.a.isPlainObject(e)||i.a.isArray(e)}function s(e){return i.a.endsWith(e,"[]")?e.slice(0,-2):e}function c(e,t,n){return e?e.concat(t).map((function(e,t){return e=s(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const l=i.a.toFlatObject(i.a,{},null,(function(e){return/^is[A-Z]/.test(e)}));t.a=function(t,n,u){if(!i.a.isObject(t))throw new TypeError("target must be an object");n=n||new(r.a||FormData);const d=(u=i.a.toFlatObject(u,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!i.a.isUndefined(t[e])}))).metaTokens,h=u.visitor||y,f=u.dots,p=u.indexes,v=(u.Blob||"undefined"!=typeof Blob&&Blob)&&i.a.isSpecCompliantForm(n);if(!i.a.isFunction(h))throw new TypeError("visitor must be a function");function g(t){if(null===t)return"";if(i.a.isDate(t))return t.toISOString();if(!v&&i.a.isBlob(t))throw new o.a("Blob is not supported. Use a Buffer instead.");return i.a.isArrayBuffer(t)||i.a.isTypedArray(t)?v&&"function"==typeof Blob?new Blob([t]):e.from(t):t}function y(e,t,o){let r=e;if(e&&!o&&"object"==typeof e)if(i.a.endsWith(t,"{}"))t=d?t:t.slice(0,-2),e=JSON.stringify(e);else if(i.a.isArray(e)&&function(e){return i.a.isArray(e)&&!e.some(a)}(e)||(i.a.isFileList(e)||i.a.endsWith(t,"[]"))&&(r=i.a.toArray(e)))return t=s(t),r.forEach((function(e,o){!i.a.isUndefined(e)&&null!==e&&n.append(!0===p?c([t],o,f):null===p?t:t+"[]",g(e))})),!1;return!!a(e)||(n.append(c(o,t,f),g(e)),!1)}const m=[],E=Object.assign(l,{defaultVisitor:y,convertValue:g,isVisitable:a});if(!i.a.isObject(t))throw new TypeError("data must be an object");return function e(t,o){if(!i.a.isUndefined(t)){if(-1!==m.indexOf(t))throw Error("Circular reference detected in "+o.join("."));m.push(t),i.a.forEach(t,(function(t,r){!0===(!(i.a.isUndefined(t)||null===t)&&h.call(n,t,i.a.isString(r)?r.trim():r,o,E))&&e(t,o?o.concat(r):[r])})),m.pop()}}(t),n}}).call(this,n("ec247fcea0").Buffer)},d4fd518f3c:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},e405005dcd:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i},e.exports.default=e.exports,e.exports.__esModule=!0},ef04007a06:function(e,t,n){"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var o=new Array(64),r=new Array(123),a=0;a<64;)r[o[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;i.encode=function(e,t,n){for(var i,r=null,a=[],s=0,c=0;t<n;){var l=e[t++];switch(c){case 0:a[s++]=o[l>>2],i=(3&l)<<4,c=1;break;case 1:a[s++]=o[i|l>>4],i=(15&l)<<2,c=2;break;case 2:a[s++]=o[i|l>>6],a[s++]=o[63&l],c=0}s>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=o[i],a[s++]=61,1===c&&(a[s++]=61)),r?(s&&r.push(String.fromCharCode.apply(String,a.slice(0,s))),r.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var s="invalid encoding";i.decode=function(e,t,n){for(var i,o=n,a=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&a>1)break;if(void 0===(l=r[l]))throw Error(s);switch(a){case 0:i=l,a=1;break;case 1:t[n++]=i<<2|(48&l)>>4,i=l,a=2;break;case 2:t[n++]=(15&i)<<4|(60&l)>>2,i=l,a=3;break;case 3:t[n++]=(3&i)<<6|l,a=0}}if(1===a)throw Error(s);return n-o},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},f0d5c52ccf:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n("ad3f08c87d"),o=n.n(i),r=n("c77ea260db"),a=n("011cf17f63"),s=n("2b29bc2d80"),c=n("2bd218fcee"),l=n("570b26a0fa"),u=function(){function e(){this.calculatedTogglesCache={}}return e.prototype.bind=function(e){if(!Object(r.a)(e))if(Array.isArray(e)){var t=e.reduce((function(e,t){var n=Object(a.a)(t);return e[t.id]=n,e[t.name]=n,e}),{});Object(s.a)(this.calculatedTogglesCache,t)}else Object(s.a)(this.calculatedTogglesCache,Object(a.a)(e))},e.prototype.get=function(e){return Object(c.a)(this.calculatedTogglesCache,e)},e.prototype.clear=function(){this.calculatedTogglesCache={}},e.prototype.getAll=function(){return this.calculatedTogglesCache},e}();function d(e,t){if(void 0===t&&(t={}),"string"!=typeof e)return e;try{return JSON.parse(e)}catch(e){return t}}var h=function(){return h=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},h.apply(this,arguments)},f="toggle_failure",p="toggle_success",v="not_array",g="zero_len",y="valid";function m(e,t,n){void 0===n&&(n={});var i=h({table:"dc03111",module:e,action:t,opername:"docs_toggle"},n);Object(l.tdw)(i,{showLog:!0})}var E=function(){function e(e){this.toggleCache=new u,this.init(e)}return e.getInstance=function(t){return void 0===t&&(t=!0),this.instance||(this.instance=new e(t)),this.instance},e.prototype.getStatusByKey=function(e,t){var n;void 0===t&&(t=!1);var i=this.toggleCache.get(e);return null!==(n=null==i?void 0:i.status)&&void 0!==n?n:t},e.prototype.getDatasetByKey=function(e,t){var n;void 0===t&&(t={});var i=this.toggleCache.get(e);return null!==(n=d(null==i?void 0:i.dataset,t))&&void 0!==n?n:t},e.prototype.getToggleByKey=function(e,t){void 0===t&&(t={});var n=this.toggleCache.get(e);return null!=n?n:t},e.prototype.getExpBucketByKey=function(e,t){void 0===t&&(t={});var n=this.toggleCache.get(e);return n&&2===n.type?{experimentName:n.experimentName,bucketName:n.bucketName,bucketType:n.bucketType,dataset:d(n.dataset)}:t},e.prototype.getStatusByToggleId=function(e,t){return void 0===t&&(t=!1),this.getStatusByKey(e,t)},e.prototype.getDatasetByToggleId=function(e,t){return void 0===t&&(t={}),this.getDatasetByKey(e,t)},e.prototype.getToggleByToggleId=function(e,t){return void 0===t&&(t={}),this.getToggleByKey(e,t)},e.prototype.getExpBucketByToggleId=function(e,t){return void 0===t&&(t={}),this.getExpBucketByKey(e,t)},e.prototype.getAllToggleConfig=function(e){var t;return void 0===e&&(e={}),null!==(t=this.toggleCache.getAll())&&void 0!==t?t:e},e.prototype.rebindToggleConfig=function(e){this.toggleCache.clear(),this.toggleCache.bind(e)},e.prototype.init=function(e){var t;if(e&&(t="undefined"==typeof self?void 0:self.ToggleConfig,Array.isArray(t)?t.length?t.forEach((function(e){var t;if(1===e.type)m(p,y,{ver6:(n=e).id,ver7:1,ver8:n.name,ver9:Number(n.status)});else if(2===e.type){var n;m(p,y,{ver6:(n=e).id,ver7:2,ver8:null!==(t=n.name)&&void 0!==t?t:n.experimentName,ver10:n.bucketType,ver11:n.bucketName})}})):m(f,g):m(f,v)),"undefined"!=typeof self){var n=self.ToggleConfig;"object"===o()(n)?this.toggleCache.bind(n):console.error("加载 ToggleConfig 配置出错")}},e}()},f1054791f4:function(e,t){e.exports=function(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")},e.exports.default=e.exports,e.exports.__esModule=!0}}]);
//# sourceMappingURL=slide-common~9b312c24-6edcc9.js.map