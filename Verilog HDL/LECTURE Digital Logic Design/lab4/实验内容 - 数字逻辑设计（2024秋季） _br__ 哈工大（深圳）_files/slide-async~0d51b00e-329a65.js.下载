(this.webpackJsonp=this.webpackJsonp||[]).push([["async~0d51b00e"],{"01313920d5":function(e,t,n){"use strict";n.r(t);var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("bd29e2df90"),l=n.n(c),s=n("ab5eb40518"),d=n.n(s),u=n("1b4cdd6a36"),p=n.n(u),f=(n("8e7cce0ada"),n("c6244f7705"),n("081c8cafea"),n("85d48ef22b"),n("2a6f332b5e"),n("73b854064b"),n("69084d01d3")),h=n.n(f),v=n("b65fff542a"),m=n("b479a84af5"),g=n("e0e8dd9366");function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return d()(this,n)}}var y=Object(f.lazy)((function(){return Promise.all([n.e("commonAsync~9b1fde68"),n.e("commonAsync~27f19aac"),n.e("commonAsync~205ac551"),n.e("commonAsync~0c3a6025"),n.e("commonAsync~32e631b8"),n.e("commonAsync~08369118"),n.e("commonAsync~50db4bb8"),n.e("commonAsync~86c92fed"),n.e("commonAsync~a95f944a"),n.e("commonAsync~6e568190"),n.e("commonAsync~b174e5ca"),n.e("commonAsync~54a68610"),n.e("commonAsync~61b3c105"),n.e("commonAsync~f7b3ac00"),n.e("commonAsync~cece21d6"),n.e("commonAsync~ecbf7682"),n.e("commonAsync~6c5dfa7c"),n.e("commonAsync~90483627"),n.e("commonAsync~d2c096c2"),n.e("commonAsync~1285a477"),n.e("commonAsync~31ded9a0"),n.e("commonAsync~ecdbff9b"),n.e("commonAsync~c2cc425c"),n.e("commonAsync~4fb44df2"),n.e("commonAsync~d06fe423"),n.e("commonAsync~0519277e"),n.e("commonAsync~6df2b9ea"),n.e("commonAsync~b5c4f9e4"),n.e("commonAsync~ffdf5190"),n.e("commonAsync~127b6cf7"),n.e("commonAsync~b3c4a2ff"),n.e("commonAsync~19bb5a55"),n.e("async~493df0b3"),n.e("async~c5b24172"),n.e("async~0d51b00e"),n.e("async~beecf843"),n.e("async~2e2c6527"),n.e("async~da8db81f"),n.e("async~e10030d6"),n.e("async~098dcb65"),n.e("async~d0c14fe8"),n.e("async~7f8bedbf"),n.e("async~f40490b4"),n.e("async~2158e36e"),n.e("async~76acd586"),n.e("async~37d786cf"),n.e("async~30ccc425"),n.e("async~0c7d7381"),n.e("async~907e9098"),n.e("async~43172549"),n.e("async~f19eb79b"),n.e("async~95108331"),n.e("async~718865d2"),n.e("async~89b7a519"),n.e("vendors~lazyComponents")]).then(n.bind(null,"36ee56da31"))})),S=function(e){l()(n,e);var t=b(n);function n(e){return r()(this,n),t.call(this,e)}return a()(n,[{key:"renderSelectBorder",value:function(){var e,t,n;return this.shouldRenderBorderWithEditable()&&h.a.createElement(m.a,null,h.a.createElement(y,{scale:this.props.scale,frame:this.props.rect,frameOnSlide:null!==(e=null===(t=(n=this.props.component).getFrame)||void 0===t?void 0:t.call(n).frameOnSlide())&&void 0!==e?e:this.props.rect,onDrag:this.props.onDrag,onDragStart:this.props.onDragStart,onDragStop:this.props.onDragStop,borderDraggable:!!this.props.borderDraggable,onBorderMouseDown:!0===this.props.editable?this.props.onBorderMouseDown:void 0,onBorderDoubleClick:!0===this.props.editable?this.props.onBorderDoubleClick:void 0,onBorderMouseUp:!0===this.props.editable?this.props.onBorderMouseUp:void 0,isSelected:!!this.props.isSelected,pointerEvents:"Image"===this.props.component.type||this.props.isCroping?"none":null,relativeRotate:this.props.relativeRotate,relativeFlipH:this.props.relativeFlipH,relativeFlipV:this.props.relativeFlipV,shouldRoundSize:this.props.component.type===g.d.SHAPE||this.props.component.type===g.d.IMAGE,style:this.props.selectBorderStyle}))}},{key:"renderResizable",value:function(){return null}}]),n}(v.default);t.default=S},"102295a459":function(e,t,n){"use strict";var o=n("e792a3169a"),r=n.n(o),i=n("7ffe483a9d"),a=n.n(i),c={insert:"head",singleton:!1};r()(a.a,c);t.a=a.a.locals||{}},"181d3d164b":function(e,t,n){(t=e.exports=n("9dddfe0040")(!1)).push([e.i,".loading-wrapper-loading-wrapper-zmRuv{position:absolute;top:0;left:0;right:0;bottom:0;border-radius:4px;background-color:#f9fafb}.loading-wrapper-loading-wrapper-zmRuv .loading-wrapper-loading-content-1ji9F{position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.loading-wrapper-loading-wrapper-zmRuv .loading-wrapper-loading-content-1ji9F .loading-wrapper-loading-icon-2ub5Q{display:flex;justify-content:center}.loading-wrapper-loading-wrapper-zmRuv .loading-wrapper-loading-content-1ji9F .loading-wrapper-loading-icon-2ub5Q .loading-wrapper-loading-spin-circle-ci7VB{border-radius:50%;-webkit-animation:loading-wrapper-dui-spin-first-loading-rotate-35vjr .8s linear infinite;animation:loading-wrapper-dui-spin-first-loading-rotate-35vjr .8s linear infinite;box-sizing:border-box;border:3px solid rgba(0,0,0,.12);border-top-color:rgba(0,0,0,.32)}.loading-wrapper-loading-wrapper-zmRuv .loading-wrapper-loading-content-1ji9F .loading-wrapper-loading-text-1cqXw{line-height:17px;opacity:.64;color:#000;white-space:nowrap;text-overflow:ellipsis}@-webkit-keyframes loading-wrapper-dui-spin-first-loading-rotate-35vjr{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading-wrapper-dui-spin-first-loading-rotate-35vjr{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""]),t.locals={"loading-wrapper":"loading-wrapper-loading-wrapper-zmRuv","loading-content":"loading-wrapper-loading-content-1ji9F","loading-icon":"loading-wrapper-loading-icon-2ub5Q","loading-spin-circle":"loading-wrapper-loading-spin-circle-ci7VB","dui-spin-first-loading-rotate":"loading-wrapper-dui-spin-first-loading-rotate-35vjr","loading-text":"loading-wrapper-loading-text-1cqXw"}},"297069ddc1":function(e,t,n){t=e.exports=n("9dddfe0040")(!1);var o=n("c92b994f13")(n("4c38c7cc70"));t.push([e.i,".index-mobile-rotateContainer-14atp{position:absolute;top:-24px;right:-24px;z-index:100}.index-mobile-rotate-17X3n{display:flex;flex-direction:row;justify-content:space-between;margin:0;padding:0;position:relative;width:26px;height:26px;z-index:var(--z-index-base-basic)}.index-mobile-rotateButton-1sm8O{background-color:#fff;border-radius:50%;border:none;color:var(--secondary-background-color);display:block;margin:0;padding:0;pointer-events:auto}.index-mobile-rotateIcon-3AMOL{display:block;fill:var(--secondary-background-color);width:24px;height:24px;background-image:url("+o+");background-size:24px 24px;border:1px solid #1e6fff;box-shadow:0 0 4px rgba(0,0,0,.08);border-radius:50%;box-sizing:content-box}.index-mobile-connector-3rZbn{background-color:#1e6fff}",""]),t.locals={rotateContainer:"index-mobile-rotateContainer-14atp",rotate:"index-mobile-rotate-17X3n",rotateButton:"index-mobile-rotateButton-1sm8O",rotateIcon:"index-mobile-rotateIcon-3AMOL",connector:"index-mobile-connector-3rZbn"}},"35e3fc9575":function(e,t,n){(t=e.exports=n("9dddfe0040")(!1)).i(n("6e47fca1a5"),""),t.push([e.i,"",""])},"3f05270d19":function(e,t,n){(t=e.exports=n("9dddfe0040")(!1)).push([e.i,".style-dragButton-Jhgaq:focus,.style-dragButton-Jhgaq:hover{cursor:pointer}.style-dragElemContainer-1ig2q{position:absolute;z-index:100;pointer-events:auto;left:50%;padding:16px}.style-dragBorder-3jn0E{width:24px;height:24px;border:1px solid rgba(0,0,0,.16);box-shadow:0 0 4px rgba(0,0,0,.08);border-radius:50%}.style-dragElem-3IP0q{background-color:#fff;display:flex;justify-content:space-between;align-items:center;z-index:var(--z-index-base-basic)}.style-dragElem-3IP0q,.style-imgSize-ptbJt{border-radius:50%;width:22px;height:22px}",""]),t.locals={dragButton:"style-dragButton-Jhgaq",dragElemContainer:"style-dragElemContainer-1ig2q",dragBorder:"style-dragBorder-3jn0E",dragElem:"style-dragElem-3IP0q",imgSize:"style-imgSize-ptbJt"}},"3f87030d09":function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return f}));n("c6244f7705"),n("bd80bf2d0f"),n("3bf1976a4f"),n("1bab7b5fb7"),n("9d7978d445"),n("8e7cce0ada"),n("85d48ef22b"),n("2a6f332b5e"),n("9d0daf5c3f"),n("0aeae65bf4");var o=n("9f996cd882"),r=n.n(o),i=n("020899bf26"),a=n("798a9cd6f2"),c=Math.random().toString(),l="".concat(a.a.ADDON.IFRAME_URL,"?redirect="),s=function(e){return e.parent.presentationRef.indexOfSlide(e.parent)},d=function(e){return"".concat(l).concat(encodeURIComponent(e.addon.embedUrl)).concat(function(e){var t,n,o,r,a=null===(t=i.a.ClientVarsService())||void 0===t||null===(n=t.getClientVars)||void 0===n?void 0:n.call(t);if(null!=a&&a.globalPadId&&a.creatorId){var l=a.globalPadId,s=a.creatorId,d=null==a?void 0:a.tinyid;return"&docType=".concat("slide","&docID=").concat(l).concat(d?"&uid=".concat(d):"","&creator=").concat(s,"&addonID=").concat(e,"&packageID=").concat("pid_slide_v1.0.0","&nonce=").concat(c.split(".")[1])}return null===(o=window)||void 0===o||null===(r=o.log)||void 0===r||r.error("[addon]: get clientVars value error"),""}(e.addon.iframeId))},u=function(e){return r()(JSON.stringify(e)).toString()},p=function(){return"".concat("ad_iframe_","scale-view")},f=function(e,t){var n=new URL(e);return!!t&&t.some((function(e){return e.pathList.some((function(t){return e.host===n.host&&n.pathname.match(t)}))}))}},"4165c2b4e5":function(e,t,n){"use strict";n("73b854064b"),n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("bcb5d93d36");var o,r,i,a,c,l,s,d,u,p,f,h,v,m,g,b,y,S,E,w,M,O,R,C,P,I,k,j,x,A,D,L,F,T,B,V,U,z,H,N,W,G,_,K,Y,X,q,J=n("9132715560"),Z=n.n(J),Q=n("6a364eb35c"),$=n.n(Q),ee=n("547611bd96"),te=n.n(ee),ne=n("bd29e2df90"),oe=n.n(ne),re=n("ab5eb40518"),ie=n.n(re),ae=n("1b4cdd6a36"),ce=n.n(ae),le=n("85d0a7609b"),se=n.n(le),de=(n("3bf1976a4f"),n("8e7cce0ada"),n("29f8c5f672"),n("c6244f7705"),n("85d48ef22b"),n("2a6f332b5e"),n("8ee19818c4"),n("8f6e67dde4")),ue=n("0a8ecd6412"),pe=n("e554c15969"),fe=n("1f5cd07b34"),he=n("59ab3b0c6a"),ve=n("87095489cf"),me=n("e0e8dd9366"),ge=function(){function e(){Z()(this,e),se()(this,"isConnecting",void 0)}return $()(e,[{key:"initModel",value:function(e){this.isConnecting=!1}}]),e}(),be=n("176815363d"),ye=n.n(be),Se=n("1f925d7f50"),Ee=n.n(Se),we=n("2dc700e1e6"),Me=n.n(we),Oe=(n("f1054791f4"),n("3ef2352f0b")),Re=n.n(Oe),Ce=(n("081c8cafea"),n("19a2c28eef")),Pe=n("4b61a5df9d"),Ie=n("d5c3deb8c7"),ke=n("530271770f"),je=n("d9812f1c6f"),xe=n("9da6335152"),Ae=n("d3d31c86eb"),De=n("718fea3387"),Le=n("b86964b011"),Fe=n("1ba05f3ebd"),Te=n("b74ee0edd6"),Be=n.n(Te),Ve=n("8e31e67bb3"),Ue=n("402eb050f3"),ze=n("5fac0349d3"),He=n("d1f05b304b"),Ne=n("8f58e78419"),We=n.n(Ne),Ge=n("e5a826a0ff"),_e=n("5cdbac46e8"),Ke=n("c9c92622ff"),Ye=n("f9193d718f"),Xe=n("1acc787c14");function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ce()(e);if(t){var r=ce()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ie()(this,n)}}var Je,Ze,Qe,$e=(o=Object(Pe.b)(),r=Object(Pe.b)(),i=Object(Pe.b)(),a=Object(Pe.b)(),c=Object(Pe.b)(),l=Object(Pe.b)(),s=Object(Pe.b)(),d=Object(Pe.b)(),u=Object(Pe.b)(),p=Object(Pe.b)(),f=Object(Pe.b)(),h=Object(Pe.b)(),v=Object(Pe.b)(),m=Reflect.metadata("design:type",Function),g=Reflect.metadata("design:paramtypes",[]),b=Object(Pe.b)(),y=Object(Pe.b)(),S=Object(Pe.b)(),E=Object(Pe.b)(),w=Object(Pe.b)(),M=Object(Pe.b)(),O=Reflect.metadata("design:type",Function),R=Reflect.metadata("design:paramtypes",[]),C=Object(De.a)(),P=Reflect.metadata("design:type",Function),I=Reflect.metadata("design:paramtypes",[]),k=Object(De.a)(),Object(Fe.a)((x=function(e){oe()(n,e);var t=qe(n);function n(){var e;Z()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),se()(te()(e),"top",void 0),se()(te()(e),"left",void 0),se()(te()(e),"height",void 0),se()(te()(e),"width",void 0),se()(te()(e),"mouseMove",void 0),se()(te()(e),"mouseDown",void 0),se()(te()(e),"isSelected",void 0),se()(te()(e),"connectingReaction",void 0),se()(te()(e),"hasWindowMouseUp",void 0),se()(te()(e),"needMouseUp",void 0),se()(te()(e),"preventUpdate",void 0),se()(te()(e),"observer",void 0),se()(te()(e),"mobileRightMenuManager",void 0),Ee()(te()(e),"setPrevent",A,te()(e)),Ee()(te()(e),"getPrevent",D,te()(e)),Ee()(te()(e),"handleElementUpdate",L,te()(e)),Ee()(te()(e),"handleEditorMouseDown",F,te()(e)),Ee()(te()(e),"getWrapperMouseDown",T,te()(e)),Ee()(te()(e),"handleMouseDown",B,te()(e)),Ee()(te()(e),"handleMouseUp",V,te()(e)),Ee()(te()(e),"getWrapperMouseUp",U,te()(e)),Ee()(te()(e),"getWrapperTouchStart",z,te()(e)),Ee()(te()(e),"getWrapperTouchEnd",H,te()(e)),Ee()(te()(e),"handleDragDrop",N,te()(e)),Ee()(te()(e),"handleDoubleClick",W,te()(e)),Ee()(te()(e),"handleClick",G,te()(e)),Ee()(te()(e),"getWrapperMouseMove",_,te()(e)),Ee()(te()(e),"checkIsCroping",K,te()(e)),Ee()(te()(e),"checkIsPreview",Y,te()(e)),Ee()(te()(e),"checkIsResizing",X,te()(e)),Ee()(te()(e),"getCloneDom",q,te()(e)),se()(te()(e),"wrapperForceUpdate",(function(){e.forceUpdate()})),se()(te()(e),"isSpecialKey",(function(e){return e.metaKey||e.shiftKey||e.ctrlKey})),se()(te()(e),"isSubGroup",(function(){return e.props.element.type===me.d.GROUP&&e.props.isGroupChildren})),se()(te()(e),"checkIsDoMouseAction",(function(){return Object(pe.a)(e.props.element)&&(!je.a.isMobile||je.a.isPad)&&!e.isSubGroup()})),se()(te()(e),"checkIsDoTouchAction",(function(){return Object(pe.a)(e.props.element)&&!e.isSubGroup()})),se()(te()(e),"handleTouch",(function(t,n){e.getCurrentTouchable()||(e.props.isGroupChildren&&e.props.handleMouseDown?e.props.handleMouseDown(t,n):(n.stopPropagation(),n.preventDefault(),e.getSelectionService().selectedElements.clear(Ge.a.GROUP),t.selected?t.type===me.d.GROUP&&e.getSelectionService().selectedElements.selectedArrayForType(Ge.a.SLIDE).length>1&&(e.needMouseUp=!0):(e.selectElement(t),e.iframeShowCannotEditTips(t))))})),se()(te()(e),"handleTouchEnd",(function(t,n){var o,r;if(!e.getCurrentTouchable()){var i,a=(null===(o=n.changedTouches)||void 0===o?void 0:o[0])||{};a.pageX,a.pageY;if(null===(r=e.mobileRightMenuManager)||void 0===r||!r.isContextMenuShow())null===(i=e.mobileRightMenuManager)||void 0===i||i.showMenu();e.handleActionEnd(t,n),dispatchEvent(new Event("changeIframeEvent")),e.stopEventPropagation(n)}})),se()(te()(e),"handleMouseMove",(function(){e.mouseDown&&(e.mouseMove=!0)})),se()(te()(e),"checkResize",(function(){var t=e.props.element.props.style;e.width===t.width&&e.height===t.height&&e.left===t.left&&e.top===t.top||(e.width=t.width,e.height=t.height,e.left=t.left,e.top=t.top,window.dispatchEvent(new Event("PPT-resize")))})),se()(te()(e),"handleDocumentUp",(function(t){var n=e.getAppServices().editableServiceLayer||{},o=n.formatBrushManager,r=n.animBrushManager;null==o||o.onElementSelectionMouseUp(),null!=r&&r.animBrushState?r.onElementSelectionMouseUp():null==o||o.onElementSelectionMouseUp(),document.removeEventListener("mouseup",e.handleDocumentUp),e.hasWindowMouseUp=!1})),se()(te()(e),"reportOnSelect",(function(t){if(e.getUserPriviledgeService().pptEditorState===_e.b.EDITABLE){var n="";t.type===me.d.SHAPE&&(n=xe.b.CLK_EDIT),t.type===me.d.IMAGE&&(n=xe.b.CLK_IMG),t.type===me.d.GROUP&&(n=xe.b.CLK_COMBIN),n&&Object(Ae.c)({opername:xe.e.DOC_PPT,module:xe.d.PC_OBJ,action:n})}})),se()(te()(e),"getCurrentTouchable",(function(){return(je.a.isMobile||Object(Ue.c)())&&Object(Ke.o)(e.props.element)&&!1===e.props.mobileEditMode()})),se()(te()(e),"iframeShowCannotEditTips",(function(t){Object(Ke.o)(t)&&e.props.mobileEditMode()&&!je.a.isMiniProgram&&Be.a.show({message:ze.a.t("演示模式支持播放查看。")})})),se()(te()(e),"stopEventPropagation",(function(t){(1!==e.props.fromScale||We()(e.props.element,"props.addon"))&&e.props.element.selectable&&(null==t||t.stopPropagation())})),e}return $()(n,[{key:"init",value:function(e){var t,n,o,r=this,i=e.element.props.style;this.width=i.width,this.height=i.height,this.left=i.left,this.top=i.top,this.mouseDown=!1,this.mouseMove=!1,null===(t=this.getAppServices().viewableServiceLayer)||void 0===t||null===(n=t.mobileRightMenuMananger)||void 0===n||null===(o=n.promise)||void 0===o||o.call(n).then((function(e){r.mobileRightMenuManager=e}))}},{key:"componentDidUpdate",value:function(){this.checkResize(),this.handleElementUpdate()}},{key:"componentWillUpdate",value:function(){var e=this.props.element.selected;this.isSelected!==e&&(this.isSelected=e,this.getAppServices().viewableServiceLayer.editingStateManager.updateElementCropState(!1))}},{key:"componentDidMount",value:function(){var e=this;this.isSelected=this.props.element.selected,this.disposeOnUnmount(Object(Ie.r)((function(){var t=e.props.element,n=t.type===me.d.TABLE&&e.getAppServices().viewableServiceLayer.editingStateManager.isResizing;return{rect:Object(pe.b)({element:t,tableResizing:n,useAdvHas:!0})}}),(function(){Object(Ve.c)(e.props.element)&&(e.preventUpdate=!0),e.forceUpdate()}))),this.observer=He.a.createObserver(this.props.element),this.observer&&(this.observer.addChangesetObserver(this.wrapperForceUpdate),this.observer.addLocalChangeObserver(this.wrapperForceUpdate))}},{key:"componentWillUnmount",value:function(){this.observer&&(this.observer.removeChangesetObserver(this.wrapperForceUpdate),this.observer.removeLocalChangeObserver(this.wrapperForceUpdate))}},{key:"getHistoryManager",value:function(){var e;return null===(e=this.getAppServices().editableServiceLayer)||void 0===e?void 0:e.historyManager}},{key:"getMediaManager",value:function(){return Ye.a.getInstance().getAppServices().viewableServiceLayer.mediaManager}},{key:"isShowPlaceholder",value:function(){var e,t;return(null===(e=this.elementRef)||void 0===e||null===(t=e.isShowPlaceholder)||void 0===t?void 0:t.call(e))||!1}},{key:"elementRef",get:function(){return this.getChildRef("elementRef")}},{key:"domRef",get:function(){return this.getChildRef("domRef")}},{key:"showIpadAppRightMenu",value:function(){var e,t;!Object(Ue.c)()||null!==(e=this.mobileRightMenuManager)&&void 0!==e&&e.isContextMenuShow()||(null===(t=this.mobileRightMenuManager)||void 0===t||t.showMenu())}},{key:"handleActionEnd",value:function(e,t){this.props.isGroupChildren&&this.props.handleMouseUp?this.props.handleMouseUp(e,t):this.needMouseUp&&(e.selected?this.getSelectionService().selectedElements.remove(e):this.getSelectionService().selectedElements.add(e),this.needMouseUp=!1)}},{key:"selectElement",value:function(e){this.getSelectionService().selectedElements.clear(),this.getSelectionService().selectedElements.add(e),this.getEditingStateManager().updateElementCropState(!1),this.reportOnSelect(e)}},{key:"getAppServices",value:function(){return Ye.a.getInstance().getAppServices()}},{key:"getSelectionService",value:function(){return this.getAppServices().viewableServiceLayer.selectionService}},{key:"getUserPriviledgeService",value:function(){return this.getAppServices().viewableServiceLayer.userPriviledgeService}},{key:"getPreviewService",value:function(){var e;return null===(e=this.getAppServices().editableServiceLayer)||void 0===e?void 0:e.previewService}},{key:"getEditingStateManager",value:function(){return this.getAppServices().viewableServiceLayer.editingStateManager}},{key:"getCopyPasteManager",value:function(){var e;return null===(e=this.getAppServices().editableServiceLayer)||void 0===e?void 0:e.copyPasteManager}},{key:"isAnimPreviewing",value:function(){var e,t;return this.getAppServices().getEntryType()===Xe.a.PC_EDIT&&!(null===(e=this.getAppServices().viewableServiceLayer)||void 0===e||null===(t=e.getEditorAnimPreviewManager())||void 0===t||!t.isAnimPreviewing)}}]),n}(Ce.a),A=Me()(x.prototype,"setPrevent",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.preventUpdate=t}}}),D=Me()(x.prototype,"getPrevent",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.preventUpdate}}}),L=Me()(x.prototype,"handleElementUpdate",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n;e.isAnimPreviewing()||(null===(t=(n=e.props).onElementUpdate)||void 0===t||t.call(n))}}}),F=Me()(x.prototype,"handleEditorMouseDown",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){document.addEventListener("mouseup",e.handleDocumentUp),e.hasWindowMouseUp=!0}}}),T=Me()(x.prototype,"getWrapperMouseDown",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(e.checkIsDoMouseAction())return function(t){e.handleMouseDown(e.props.element,t),e.props.isGroupChildren||e.stopEventPropagation(t)}}}}),B=Me()(x.prototype,"handleMouseDown",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){var o,r;e.mouseDown=!0,je.a&&!je.a.isMac&&ke.a.getInstance().clear(),null===(o=e.getAppServices().editableServiceLayer)||void 0===o||null===(r=o.selectedAnims)||void 0===r||r.clear(),Object(Ie.w)((function(){var o;e.props.isGroupChildren&&e.props.handleMouseDown?e.props.handleMouseDown(t,n):(n.stopPropagation(),n.preventDefault(),e.getSelectionService().selectedElements.clear(Ge.a.GROUP),e.isSpecialKey(n)?t.selected?e.needMouseUp=!0:(e.getSelectionService().selectedElements.add(t),e.reportOnSelect(t)):t.selected?t.type===me.d.GROUP&&e.getSelectionService().selectedElements.selectedArrayForType(Ge.a.SLIDE).length>1&&(e.needMouseUp=!0):e.selectElement(t),t.type!==me.d.TABLE&&(null===(o=e.getAppServices().editableServiceLayer)||void 0===o||o.dragElementHandler.handleMouseDownOnElement(n,t,e.props.getPageScale(),e.needMouseUp,(function(){var t;e.needMouseUp=!1,null===(t=e.mobileRightMenuManager)||void 0===t||t.hideMenu()}),(function(){e.showIpadAppRightMenu()}))))}))}}}),V=Me()(x.prototype,"handleMouseUp",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){var o,r;if(null===(o=e.getAppServices().editableServiceLayer)||void 0===o||null===(r=o.selectedAnims)||void 0===r||r.clear(),1===n.nativeEvent.which&&e.handleActionEnd(t,n),!e.hasWindowMouseUp){var i=e.getAppServices().editableServiceLayer||{},a=i.formatBrushManager,c=i.animBrushManager;null==a||a.onElementSelectionMouseUp(),null==c||c.onElementSelectionMouseUp()}e.mouseMove||dispatchEvent(new Event("changeIframeEvent")),e.mouseMove=!1,e.mouseDown=!1}}}),U=Me()(x.prototype,"getWrapperMouseUp",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(e.checkIsDoMouseAction())return function(t){return e.handleMouseUp(e.props.element,t)}}}}),z=Me()(x.prototype,"getWrapperTouchStart",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(e.checkIsDoTouchAction())return function(t){e.handleTouch(e.props.element,t),e.props.isGroupChildren||e.stopEventPropagation(t)}}}}),H=Me()(x.prototype,"getWrapperTouchEnd",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(e.checkIsDoTouchAction())return function(t){return e.handleTouchEnd(e.props.element,t)}}}}),N=Me()(x.prototype,"handleDragDrop",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return ye()(Re.a.mark((function t(){var n,o,r;return Re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=e.props.element)||void 0===n||!n.selectable){t.next=5;break}return t.next=3,null===(o=e.getCopyPasteManager())||void 0===o?void 0:o.promise();case 3:(r=t.sent)&&(r.savedDropModel=e.props.element);case 5:case"end":return t.stop()}}),t)})))}}),W=Me()(x.prototype,"handleDoubleClick",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){!Object(Le.k)()&&e.getUserPriviledgeService().pptEditorState>_e.b.EDITABLE&&Ye.a.getInstance().getAppServices().viewableServiceLayer.tipsManager.showCannotEditTips(),e.stopEventPropagation(t)}}}),Me()(x.prototype,"getHistoryManager",[v,m,g],Object.getOwnPropertyDescriptor(x.prototype,"getHistoryManager"),x.prototype),G=Me()(x.prototype,"handleClick",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.showIpadAppRightMenu()}}}),_=Me()(x.prototype,"getWrapperMouseMove",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(Object(pe.a)(e.props.element)&&(!je.a.isMobile||je.a.isPad))return function(t){return e.handleMouseMove()}}}}),K=Me()(x.prototype,"checkIsCroping",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.props.element.selected&&e.getAppServices().viewableServiceLayer.editingStateManager.isCroping}}}),Y=Me()(x.prototype,"checkIsPreview",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;return e.props.element.selected&&(e.isAnimPreviewing()||(null===(t=e.getPreviewService())||void 0===t?void 0:t.isPreview))}}}),X=Me()(x.prototype,"checkIsResizing",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.getAppServices().viewableServiceLayer.editingStateManager.isResizing}}}),Me()(x.prototype,"getMediaManager",[M,O,R],Object.getOwnPropertyDescriptor(x.prototype,"getMediaManager"),x.prototype),Me()(x.prototype,"isShowPlaceholder",[C,P,I],Object.getOwnPropertyDescriptor(x.prototype,"isShowPlaceholder"),x.prototype),q=Me()(x.prototype,"getCloneDom",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){if(e.domRef){var t=e.domRef.cloneNode(!1),n=e.elementRef.getCloneDom();return null==n||n.forEach((function(e){e&&t.appendChild(e)})),t}return null}}}),j=x))||j),et=n("c13f133f92"),tt=n("69084d01d3"),nt=n.n(tt),ot=n("1748118723"),rt=n.n(ot),it=n("15985515f8"),at=n("bc5b172cb4"),ct=n("ffc220634f"),lt=n("7e66e19183"),st=n("174b64a006");function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){se()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=ce()(e);if(t){var r=ce()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return ie()(this,n)}}var ft=Object(Fe.a)((Qe=Ze=function(e){oe()(n,e);var t=pt(n);function n(){var e;Z()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),se()(te()(e),"getTouchStartHandler",(function(){var t=e.props,n=t.element,o=t.getWrapperTouchStart;return Object(Ke.b)(n)?null:null==o?void 0:o()})),se()(te()(e),"getTouchEndHandler",(function(){var t=e.props,n=t.element,o=t.getWrapperTouchStart,r=t.getWrapperTouchEnd;return Object(Ke.b)(n)?function(e){var t,n;null==o||null===(t=o())||void 0===t||t(e),null==r||null===(n=r())||void 0===n||n(e)}:null==r?void 0:r()})),se()(te()(e),"containerType",(function(){return"div"})),se()(te()(e),"isInMobileSlideList",(function(){var t,n;return je.a.isMobile&&!(null!==(t=(n=e.props).mobileEditMode)&&void 0!==t&&t.call(n))})),se()(te()(e),"isCursorMove",(function(){var t=e.props.element;if(Object(Ke.G)(t)||Object(Ke.b)(t))return!0;var n=!1;return t.type===me.d.SHAPE&&t.isTextOrPlaceholder&&t.props.style.bgShape===et.b.RECT&&(n=!0),n})),se()(te()(e),"getPointEvent",(function(){var t,n=e.props.element;return n.type===me.d.IMAGE?e.getImageModelPointEvent(n):n.type===me.d.SHAPE?e.getShapeModelPointEvent(n):n.selectable&&n.type!==me.d.GROUP&&n.type!==me.d.CONNECTOR&&(!Object(Ke.o)(n)||null!==(t=e.props.getMediaManager())&&void 0!==t&&t.isShowIframe)?"auto":"none"})),se()(te()(e),"isEditable",(function(e){return e.selectable&&e.currentEditState===_e.b.EDITABLE&&!e.isTextMath})),se()(te()(e),"getElementRootId",(function(){return e.props.elementRootId||e.props.element.key})),se()(te()(e),"getShapePathMap",(function(){var t,n,o,r=e.props.element.parent,i=new Map;return null!=r&&r.timing?(null==r||null===(t=r.timing)||void 0===t||null===(n=t.tmRoot)||void 0===n||null===(o=n.childTnLst)||void 0===o||o.forEach((function(t){var n,o;null==t||null===(n=t.cTn)||void 0===n||null===(o=n.childTnLst)||void 0===o||o.forEach((function(t){var n,o;null==t||null===(n=t.cTn)||void 0===n||null===(o=n.childTnLst)||void 0===o||o.forEach((function(t){var n,o;null==t||null===(n=t.cTn)||void 0===n||null===(o=n.childTnLst)||void 0===o||o.forEach((function(t){e.handleAnim(t,i)}))}))}))})),i):i})),se()(te()(e),"handleAnim",(function(e,t){var n,o,r,i;if("path"===(null==e||null===(n=e.cTn)||void 0===n?void 0:n.presetClass)){var a=null==e||null===(o=e.cTn)||void 0===o?void 0:o.id;null==e||null===(r=e.cTn)||void 0===r||null===(i=r.childTnLst)||void 0===i||i.forEach((function(e){if("tn_animMotion"===(null==e?void 0:e.type)){var n=null==e?void 0:e.path,o=We()(e,"cBhvr.tgtEl.spTgt.spid");t.has(o)?t.get(o).push({path:n,id:a}):t.set(o,[{path:n,id:a}])}}))}})),se()(te()(e),"getShapePathList",(function(){var t=e.props.element.id;return e.getShapePathMap().get(t)||[]})),se()(te()(e),"getSvgPathStyle",(function(t){var n,o,r;if(null===(n=e.props.element)||void 0===n||null===(o=n.parent)||void 0===o||null===(r=o.parent)||void 0===r||!r.props)return{};var i=e.props.element.parent.parent.props,a=i.slideWidth,c=i.slideHeight,l=e.props.element,s=(l=void 0===l?{}:l).props,d=l.type,u=Object(ct.j)(t,s),p=u.width,f=u.height,h=u.left,v=u.top,m=p/2,g=f/2,b="Table"===d?v:v+f;return{wrapperStyle:{width:a,height:c,transform:"translate(".concat(-h,"px,").concat(-b,"px)"),position:"absolute",zIndex:-99999},pathStyle:{translateX:h+m,translateY:v+g}}})),se()(te()(e),"getSvgJSX",(function(t){var n,o,r;if(null===(n=e.props.element)||void 0===n||null===(o=n.parent)||void 0===o||null===(r=o.parent)||void 0===r||!r.props)return null;var i=e.getShapePathList(),a=e.getSvgPathStyle(t),c=a.wrapperStyle,l=void 0===c?{}:c,s=a.pathStyle,d=(s=void 0===s?{}:s).translateX,u=s.translateY,p=e.props.element.parent.parent.props,f=p.slideWidth,h=p.slideHeight,v=e.props.setPathRef;return i.length?nt.a.createElement(fe.a,{pathList:i,styleObj:l,scaleX:f,scaleY:h,translateX:d,translateY:u,componentKey:e.props.element.key,setPathRef:v}):null})),e}return $()(n,[{key:"shouldNotRender",value:function(e){return!e||this.props.element.hidden}},{key:"shouldNotRenderIframeInCanvasMode",value:function(e){var t,n,o=this.props.element;return this.shouldNotRender(e)||Object(Ke.p)(o)||Object(Ke.o)(o)&&!((null===(t=this.props.getMediaManager())||void 0===t?void 0:t.elementKey)===o.key&&null!==(n=this.props.getMediaManager())&&void 0!==n&&n.isShowIframe)&&!je.a.isMobile}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.element,r=n.checkIsCroping,i=n.checkIsPreview,a=n.checkIsResizing,c=n.setRef,l=n.getWrapperMouseDown,s=n.getWrapperMouseUp,d=(n.getWrapperTouchStart,n.getWrapperTouchEnd,n.handleDragDrop),u=n.handleDoubleClick,p=n.handleClick,f=n.getWrapperMouseMove,h=n.handleMouseDown,v=n.handleMouseUp;if(!(Object(Ke.i)(o)||Object(Ke.n)(o)&&Object(Ke.m)(o)))return null;var m=Object(at.a)(o.type);if(this.shouldNotRenderIframeInCanvasMode(m))return null;var g=o.selected,b=r(),y=i(),S=Object(pe.a)(o),E=this.isEditable(o),w=this.isCursorMove(),M=rt()((e={},se()(e,st.a.slideItem,!0),se()(e,he.a.auto,!w),se()(e,he.a.move,w),se()(e,o.id,!0),e)),O=o.type===me.d.TABLE&&a(),R=Object(pe.b)({element:o,tableResizing:O,useAdvHas:!1}),C=this.getPointEvent();return nt.a.createElement(lt.a,{type:this.containerType(),ref:function(e){var n,o;c("domRef",e),null===(n=(o=t.props).domRefCallback)||void 0===n||n.call(o,e)},key:o.key,className:M,id:"slide-element-".concat(o.key),onMouseDown:null==l?void 0:l(),onMouseUp:null==s?void 0:s(),onTouchStart:this.getTouchStartHandler(),onTouchEnd:this.getTouchEndHandler(),onDrop:d,onDoubleClick:u,onMouseMove:null==f?void 0:f(),onClick:p,style:ut(ut({},R),{},{transform:this.transformForDIV(R),pointerEvents:C,position:"absolute"}),transform:this.transformForSVG(R)},nt.a.createElement(m,{component:o,ref:function(e){var n,o;c("elementRef",e),null===(n=(o=t.props).refCallback)||void 0===n||n.call(o,e)},elementRootId:this.getElementRootId(),getPageScale:this.props.getPageScale,rect:R,fromScale:this.props.fromScale,region:ue.s.CANVAS,rotate:o.props.style.rotate?o.props.style.rotate:0,isCroping:b&&g,draggable:E&&!b,isPreview:y,editable:E,selectable:S,editorMouseDown:this.props.handleEditorMouseDown,handleMouseDown:o.type===me.d.GROUP?h:null,handleMouseUp:o.type===me.d.GROUP?v:null,showSelectBorder:o.type!==me.d.CONNECTOR&&g,borderDraggable:S&&!b,relativeRotate:this.props.relativeRotate,relativeFlipH:this.props.relativeFlipH,relativeFlipV:this.props.relativeFlipV,onElementUpdate:this.props.handleElementUpdate,taskGroup:this.props.taskGroup,event:this.props.event,sync:this.props.sync,mobileEditMode:this.props.mobileEditMode,toScaleView:this.props.toScaleView,setPrevent:this.props.setPrevent,getPrevent:this.props.getPrevent,setPathRef:this.props.setPathRef,serverRender:this.props.serverRender}),nt.a.createElement(ve.a,{element:o,historyManager:this.props.getHistoryManager()}),this.getSvgJSX(R))}},{key:"transformForDIV",value:function(e){return de.f(e)}},{key:"transformForSVG",value:function(e){return null}},{key:"getShapeModelPointEvent",value:function(e){var t=e.props.attachment;if(t){var n=t.objKey,o=t.id,r=e.getAttachmentManager(),i=null==r?void 0:r.uploadingMap,a=null==i?void 0:i.has(o);if(!n&&!a)return"none"}return"auto"}},{key:"getImageModelPointEvent",value:function(e){return Object(Ke.G)(e)||Object(Ke.f)(e)?"none":"auto"}}]),n}(nt.a.Component),se()(Ze,"displayName","ElementWrapper"),se()(Ze,"defaultProps",{setRef:function(){},checkIsCroping:function(){return!1},checkIsPreview:function(){return!1},checkIsResizing:function(){return!1}}),Je=Qe))||Je;t.a=Object(it.a)($e,ge,ft)},"459381b7ed":function(e,t,n){t=e.exports=n("9dddfe0040")(!1);var o=n("c92b994f13")(n("08b3d5e210"));t.push([e.i,".index-rotateContainer-1ilum{position:absolute;top:-24px;right:-24px;z-index:100}.index-rotate-YrEjF{border-radius:4px;display:flex;flex-direction:row;justify-content:space-between;margin:0;padding:0;position:relative;width:24px;height:24px;z-index:var(--z-index-base-basic)}.index-rotateButton-2n8hw{background-color:transparent;border:none;color:var(--secondary-background-color);display:block;margin:0;padding:0;pointer-events:auto}.index-rotateIcon-2Vlbk{display:block;fill:var(--secondary-background-color);width:24px;height:24px;background-image:url("+o+");background-size:24px 24px}",""]),t.locals={rotateContainer:"index-rotateContainer-1ilum",rotate:"index-rotate-YrEjF",rotateButton:"index-rotateButton-2n8hw",rotateIcon:"index-rotateIcon-2Vlbk"}},"4b415bb3b4":function(e,t,n){"use strict";n.d(t,"a",(function(){return K})),n.d(t,"b",(function(){return Y}));n("73b854064b");var o,r,i,a,c,l,s,d,u,p,f,h,v,m,g,b,y,S=n("1f925d7f50"),E=n.n(S),w=n("9132715560"),M=n.n(w),O=n("6a364eb35c"),R=n.n(O),C=n("547611bd96"),P=n.n(C),I=n("bd29e2df90"),k=n.n(I),j=n("ab5eb40518"),x=n.n(j),A=n("1b4cdd6a36"),D=n.n(A),L=n("85d0a7609b"),F=n.n(L),T=n("2dc700e1e6"),B=n.n(T),V=(n("f1054791f4"),n("3bf1976a4f"),n("8e7cce0ada"),n("c6244f7705"),n("081c8cafea"),n("85d48ef22b"),n("2a6f332b5e"),n("a2a09da1e3"),n("c554310b5c"),n("d5c3deb8c7")),U=n("19a2c28eef"),z=n("4b61a5df9d"),H=n("e0e8dd9366"),N=n("f9193d718f"),W=n("c9c92622ff"),G=n("37091e4240");function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=D()(e);if(t){var r=D()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return x()(this,n)}}var K="audio-bar-container",Y=(o=Object(z.b)(),r=Object(z.b)(),i=Object(z.b)(),a=Object(z.b)(),c=Object(z.b)(),l=Reflect.metadata("design:type",Function),s=Reflect.metadata("design:paramtypes",[void 0]),d=Object(z.b)(),u=Reflect.metadata("design:type",Function),p=Reflect.metadata("design:paramtypes",[void 0]),f=Object(z.b)(),h=function(e){k()(o,e);var t=_(o);function o(){var e;M()(this,o);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),F()(P()(e),"fullScreen",!1),F()(P()(e),"selected",!1),E()(P()(e),"handleFullScreenChange",v,P()(e)),E()(P()(e),"handleMouseEnter",m,P()(e)),E()(P()(e),"handleMouseLeave",g,P()(e)),E()(P()(e),"preventPropagation",b,P()(e)),E()(P()(e),"switchAudioPlayStatus",y,P()(e)),F()(P()(e),"stopVideoWhenSlideDisappear",(function(t){t===e.props.uiModel.slideRef.id&&e.stopPlay()})),e}return R()(o,[{key:"init",value:function(e){}},{key:"componentDidMount",value:function(){var e=this,t=this.props,o=t.video,r=(t.audio,t.isDemonstrating);if(o&&!r){var i=this.getAppService().viewableServiceLayer.editAreaCanvasSizeManager.getCanvasScale();this.updateScale(i),this.disposeOnUnmount(Object(V.r)((function(){return i}),(function(t){e.updateScale(t)}))),G.b.on(G.a.SLIDE_DISAPPEAR_IN_LIST,this.stopVideoWhenSlideDisappear)}this.props.audio&&(Promise.all([n.e("commonAsync~9b1fde68"),n.e("commonAsync~27f19aac"),n.e("commonAsync~205ac551"),n.e("commonAsync~0c3a6025"),n.e("commonAsync~32e631b8"),n.e("commonAsync~08369118"),n.e("commonAsync~50db4bb8"),n.e("commonAsync~86c92fed"),n.e("commonAsync~a95f944a"),n.e("commonAsync~6e568190"),n.e("commonAsync~b174e5ca"),n.e("commonAsync~54a68610"),n.e("commonAsync~61b3c105"),n.e("commonAsync~f7b3ac00"),n.e("commonAsync~cece21d6"),n.e("commonAsync~ecbf7682"),n.e("commonAsync~6c5dfa7c"),n.e("commonAsync~90483627"),n.e("commonAsync~d2c096c2"),n.e("commonAsync~1285a477"),n.e("commonAsync~31ded9a0"),n.e("commonAsync~ecdbff9b"),n.e("commonAsync~c2cc425c"),n.e("commonAsync~4fb44df2"),n.e("commonAsync~d06fe423"),n.e("commonAsync~0519277e"),n.e("commonAsync~6df2b9ea"),n.e("commonAsync~b5c4f9e4"),n.e("commonAsync~ffdf5190"),n.e("commonAsync~127b6cf7"),n.e("commonAsync~b3c4a2ff"),n.e("commonAsync~19bb5a55"),n.e("async~493df0b3"),n.e("async~c5b24172"),n.e("async~0d51b00e"),n.e("async~beecf843"),n.e("async~2e2c6527"),n.e("async~da8db81f"),n.e("async~e10030d6"),n.e("async~098dcb65"),n.e("async~d0c14fe8"),n.e("async~7f8bedbf"),n.e("async~f40490b4"),n.e("async~2158e36e"),n.e("async~76acd586"),n.e("async~37d786cf"),n.e("async~30ccc425"),n.e("async~0c7d7381"),n.e("async~907e9098"),n.e("async~43172549"),n.e("async~f19eb79b"),n.e("async~95108331"),n.e("async~718865d2"),n.e("async~89b7a519"),n.e("vendors~service")]).then(n.bind(null,"7f21889145")).then((function(t){var n=t.default;e.disposeOnUnmount(Object(V.r)((function(){return n.getInstance().isQuickSettingShown}),(function(t){if(t){var n,o,r=e.getAppService().viewableServiceLayer.selectionService.getSelectedModel();(null==r?void 0:r.type)===H.d.IMAGE&&r.audio===e.props.audio&&r.key===(null===(n=e.props)||void 0===n||null===(o=n.uiModel)||void 0===o?void 0:o.key)?e.setModel({quickSettingId:K}):e.setModel({quickSettingId:""})}else e.setModel({quickSettingId:""})})))})),this.disposeOnUnmount(Object(V.r)((function(){return e.getAppService().viewableServiceLayer.slideRenderStateManager.isWorkbenchReady}),(function(){e.setModel({workbenchReady:!0})}))))}},{key:"componentDidUpdate",value:function(e){this.model.isMediaSelected=this.props.selected}},{key:"componentWillUnmount",value:function(){G.b.off(G.a.SLIDE_DISAPPEAR_IN_LIST,this.stopVideoWhenSlideDisappear);var e=this.props,t=e.mediaManager,n=e.uiModel,o=e.region;Object(W.G)(n)&&t.deleteVideoInstanceByRegion(n.key,o),Object(W.f)(n)&&t.deleteAudioInstanceByRegion(n.key,o,!0)}},{key:"getAudioFunc",value:function(e){this.switchAudioPlayStatus=null==e?void 0:e.toggle}},{key:"onAudioClick",value:function(e){var t,n;0===(null==e||null===(t=e.target)||void 0===t||null===(n=t.classList[0])||void 0===n?void 0:n.indexOf("index-media"))&&this.switchAudioPlayStatus(),this.preventPropagation(e)}},{key:"stopPlay",value:function(){var e=this.props,t=e.mediaManager,n=e.uiModel,o=e.region;t.pauseVideoByRegion(n.key,o)}},{key:"updateScale",value:function(e){this.setModel({scale:e})}},{key:"getAppService",value:function(){return N.a.getInstance().getAppServices()}}]),o}(U.a),v=B()(h.prototype,"handleFullScreenChange",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){G.b.emit(G.a.VIDEO_FULLSCREEN_CHANGE,t),t?setTimeout((function(){e.setModel({isFullScreen:!0})}),100):e.setModel({isFullScreen:!1})}}}),m=B()(h.prototype,"handleMouseEnter",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.setModel({isHovered:!0})}}}),g=B()(h.prototype,"handleMouseLeave",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.setModel({isHovered:!1})}}}),b=B()(h.prototype,"preventPropagation",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(e){e.stopPropagation()}}}),B()(h.prototype,"getAudioFunc",[c,l,s],Object.getOwnPropertyDescriptor(h.prototype,"getAudioFunc"),h.prototype),B()(h.prototype,"onAudioClick",[d,u,p],Object.getOwnPropertyDescriptor(h.prototype,"onAudioClick"),h.prototype),y=B()(h.prototype,"switchAudioPlayStatus",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){}}}),h)},"53e5d5a026":function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return P}));n("73b854064b"),n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("547611bd96"),l=n.n(c),s=n("bd29e2df90"),d=n.n(s),u=n("ab5eb40518"),p=n.n(u),f=n("1b4cdd6a36"),h=n.n(f),v=n("85d0a7609b"),m=n.n(v),g=(n("3bf1976a4f"),n("69084d01d3")),b=n.n(g),y=n("e11b552119"),S=n("8f6e67dde4"),E=n("f1f2954cff"),w=n.n(E);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}function C(e){return b.a.createElement("div",{key:e.Key,className:y.a.groupItem,style:{width:"100%",height:"100%"}},e.children)}var P=function(e){d()(n,e);var t=R(n);function n(){var e;r()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),m()(l()(e),"handlerIaClick",(function(t){return e.props.handlerIaClick(t,e.context.store,e.props)})),m()(l()(e),"handlerIaTouch",(function(t){return e.props.handlerIaTouch(t,e.context.store,e.props)})),m()(l()(e),"isInteractiveAnimTrigger",(function(){return e.props.isInteractiveAnimTrigger(e.context.store,e.props)})),e}return a()(n,[{key:"render",value:function(){var e=S.e(this.props.style,this.props.animStyle),t=O(O(O({},this.props.animStyle),{},{position:"absolute"},this.props.style),{},{transform:e,cursor:this.isInteractiveAnimTrigger()?"pointer":"inherit"});return b.a.createElement("div",{id:"group",className:y.a.group,style:t,onClick:this.handlerIaClick,onTouchStart:this.handlerIaTouch,onTouchEnd:this.handlerIaTouch},this.props.children)}}]),n}(g.Component);m()(P,"contextTypes",{store:w.a.object})},"5411a5282b":function(e,t,n){"use strict";n.r(t);n("73b854064b");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("547611bd96"),l=n.n(c),s=n("bd29e2df90"),d=n.n(s),u=n("ab5eb40518"),p=n.n(u),f=n("1b4cdd6a36"),h=n.n(f),v=n("85d0a7609b"),m=n.n(v),g=(n("3bf1976a4f"),n("69084d01d3")),b=n.n(g),y=n("e792a3169a"),S=n.n(y),E=n("459381b7ed"),w=n.n(E),M={insert:"head",singleton:!1},O=(S()(w.a,M),w.a.locals||{}),R=n("c0e6ac1c19"),C=n.n(R),P=n("59ab3b0c6a"),I=n("5fac0349d3");function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var j=function(e){d()(n,e);var t=k(n);function n(e,o){var i;return r()(this,n),i=t.call(this,e,o),m()(l()(i),"currentMousePosition",void 0),m()(l()(i),"getEventCoordinates",(function(e){return{x:"touches"in e?e.touches[0].clientX:e.clientX,y:"touches"in e?e.touches[0].clientY:e.clientY}})),m()(l()(i),"onMouseDown",(function(e){e.stopPropagation(),1===e.nativeEvent.which&&(document.addEventListener("mousemove",i.handleRotating),document.addEventListener("mouseup",i.stopRotate),i.startRotate(e))})),m()(l()(i),"onTouchStart",(function(e){document.addEventListener("touchmove",i.handleRotating),document.addEventListener("touchend",i.stopRotate),i.startRotate(e)})),m()(l()(i),"startRotate",(function(e){var t,n;e.preventDefault(),e.stopPropagation(),document.addEventListener("mousemove",i.handleRotating),document.addEventListener("mouseup",i.stopRotate),document.addEventListener("touchmove",i.handleRotating),document.addEventListener("touchend",i.stopRotate),null===(t=(n=i.props).onRotateStart)||void 0===t||t.call(n,e)})),m()(l()(i),"stopRotate",(function(e){var t,n;e.preventDefault(),e.stopPropagation(),document.removeEventListener("mousemove",i.handleRotating),document.removeEventListener("mouseup",i.stopRotate),document.removeEventListener("touchmove",i.handleRotating),document.removeEventListener("touchend",i.stopRotate),null===(t=(n=i.props).onRotateStop)||void 0===t||t.call(n,e),i.setState({visible:!1})})),m()(l()(i),"handleRotating",(function(e){var t,n;e.preventDefault(),e.stopPropagation(),i.currentMousePosition=i.getEventCoordinates(e),i.setState({visible:!0}),null===(t=(n=i.props).onRotate)||void 0===t||t.call(n,e,i.props.id)})),i.state={visible:!1},i.currentMousePosition={x:-1e3,y:-1e3},i}return a()(n,[{key:"render",value:function(){var e=1/this.props.scale,t="-24px",n="-24px";this.props.scale>=1&&this.props.scale<=2?(t="".concat(6*(this.props.scale-1)-24,"px"),n="".concat(6*(this.props.scale-1)-24,"px")):this.props.scale<1&&this.props.scale>=.5?(t="".concat(-24-24*(1-this.props.scale),"px"),n="".concat(-24-24*(1-this.props.scale),"px")):this.props.scale<.5&&this.props.scale>=.2?(t="".concat(-36-108*(.5-this.props.scale),"px"),n="".concat(-36-108*(.5-this.props.scale),"px")):this.props.scale<.2?(t="".concat(-72-360*(.2-this.props.scale),"px"),n="".concat(-72-360*(.2-this.props.scale),"px")):this.props.scale<=3?(t="".concat(2*(this.props.scale-2)-18,"px"),n="".concat(2*(this.props.scale-2)-18,"px")):this.props.scale<=4&&(t="".concat(1*(this.props.scale-3)-16,"px"),n="".concat(1*(this.props.scale-3)-16,"px"));var o={transform:"scale(".concat(e,")"),top:t,right:n},r={};this.state.visible&&(r={height:"34px",top:"".concat(this.currentMousePosition.y-10,"px"),left:"".concat(this.currentMousePosition.x+30,"px")});return b.a.createElement("div",{className:O.rotateContainer,style:o,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,id:"rotate div"},b.a.createElement("div",{className:O.rotate},this.props.isRotating?null:b.a.createElement("button",{className:"".concat(O.rotateButton," ").concat(P.a.pointer),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},b.a.createElement("i",{className:O.rotateIcon,title:I.a.t("按住shift可15°旋转")}))),b.a.createElement(C.a,{message:"".concat((this.props.rotate+this.props.relativeRotate)%360,"°"),visible:this.state.visible,style:r}))}}]),n}(g.Component);t.default=j},"5ae2d2ab44":function(e,t,n){(t=e.exports=n("9dddfe0040")(!1)).push([e.i,".index-image-YWUuX{display:block}.index-resizerImage-3IPP0{position:absolute;width:100%;height:100%;top:0;opacity:.5;cursor:move}.index-resizerImageModal-1xFzE{background-color:#000;pointer-events:none}.index-cropHighlightImage-1BB72{position:absolute;top:0;left:0}.index-cropHighlightImageShadow-238uS{background:rgba(0,0,0,.04)}.index-cropArea-24omn{cursor:move;pointer-events:none}.index-cropArea-24omn,.index-imageCropArea--3f5M{width:100%;height:100%;overflow:hidden;position:absolute}.index-cropHandlerBorder-1vcOe{position:absolute;background-color:#fff}.index-cropHandlerBorderHorizontal-2V-5I{width:100%;height:1px}.index-cropHandlerBorderVerticle-KhADe{width:1px;height:100%}.index-cropHandler-f1arB{pointer-events:all;width:22px;height:22px;position:absolute;z-index:101}.index-cropInnerHandler-32R2u{position:absolute;background:#000;z-index:1}.index-cropOuterHandler-28aoj{position:absolute;background:#fff}.index-media-container-1O28e{pointer-events:auto;position:absolute;height:100%;width:100%;top:0;left:0;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.index-media-audio-container-3Jm_s{box-sizing:content-box}.index-media-audio-container-3Jm_s>div{position:absolute}.index-media-video-loading-1fIIC{position:absolute;top:0;left:0;width:100%;height:100%;color:#f0f8ff;background-color:#000;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:24px}.index-media-video-loading-1fIIC>img{margin-bottom:12px;-webkit-animation:index-rotation-SZHtA 2s linear infinite;animation:index-rotation-SZHtA 2s linear infinite}@-webkit-keyframes index-rotation-SZHtA{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}25%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}75%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes index-rotation-SZHtA{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}25%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(180deg);transform:rotate(180deg)}75%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}",""]),t.locals={image:"index-image-YWUuX",resizerImage:"index-resizerImage-3IPP0",resizerImageModal:"index-resizerImageModal-1xFzE",cropHighlightImage:"index-cropHighlightImage-1BB72",cropHighlightImageShadow:"index-cropHighlightImageShadow-238uS",cropArea:"index-cropArea-24omn",imageCropArea:"index-imageCropArea--3f5M",cropHandlerBorder:"index-cropHandlerBorder-1vcOe",cropHandlerBorderHorizontal:"index-cropHandlerBorderHorizontal-2V-5I",cropHandlerBorderVerticle:"index-cropHandlerBorderVerticle-KhADe",cropHandler:"index-cropHandler-f1arB",cropInnerHandler:"index-cropInnerHandler-32R2u",cropOuterHandler:"index-cropOuterHandler-28aoj","media-container":"index-media-container-1O28e","media-audio-container":"index-media-audio-container-3Jm_s","media-video-loading":"index-media-video-loading-1fIIC",rotation:"index-rotation-SZHtA"}},"5b56caa438":function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));n("73b854064b"),n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("547611bd96"),l=n.n(c),s=n("bd29e2df90"),d=n.n(s),u=n("ab5eb40518"),p=n.n(u),f=n("1b4cdd6a36"),h=n.n(f),v=n("85d0a7609b"),m=n.n(v),g=(n("3bf1976a4f"),n("6c458f1652"),n("69084d01d3")),b=n.n(g),y=n("f1f2954cff"),S=n.n(y),E=n("d5c3deb8c7"),w=n("5a5c6d313d"),M=n("8f6e67dde4"),O=n("c73625d763"),R=n.n(O),C=n("7ea87243fd"),P=n("d5ebb100c8"),I=n("fb75408061"),k=n("f9193d718f"),j=n("862b984676");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var L=function(e){d()(n,e);var t=D(n);function n(){var e;r()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),m()(l()(e),"handleLinkClick",(function(t,n){t&&t.stopPropagation(),n||(n=e.props.link.href),e.getLinkManager().openLinkInPlay(e.context.store,n)})),m()(l()(e),"handlerClick",(function(t,n){n&&(t.stopPropagation(),e.handleLinkClick(t,n)),e.props.handlerIaClick(t,e.context.store,e.props)})),m()(l()(e),"handlerIaTouch",(function(t){return e.props.handlerIaTouch(t,e.context.store,e.props)})),m()(l()(e),"handlerTouch",(function(t,n){n?t.stopPropagation():e.handlerIaTouch(t)})),m()(l()(e),"renderAttachmentOrNot",(function(){var t=e.props,n=t.attachment,o=t.shapeModel;return!n||null!=o&&o.hidden?null:b.a.createElement(P.a,{attachment:n,uiModel:o,isPlayMode:!0})})),e}return a()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.addon;(null==t?void 0:t.displayMode)===I.b.IFRAME&&Object(w.a)(this,Object(E.r)((function(){return e.getMediaManager().shouldShowMediaElement(e.props.shapeModel.key,j.a.PLAYER)}),(function(){e.forceUpdate()})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.addon,o=t.attachment,r=t.shapeModel,i=(null==n?void 0:n.displayMode)===I.b.IFRAME&&this.getMediaManager().shouldShowMediaElement(r.key,j.a.PLAYER);if(!o&&!i)return null;var a=null==n?void 0:n.displayMode,c=this.props.getLinkInfo(this.props),l=c.href,s=c.tooltip;return b.a.createElement("div",{onClick:function(t){return e.handlerClick(t,l)},onTouchStart:function(t){return e.handlerTouch(t,l)},onTouchEnd:function(t){return e.handlerTouch(t,l)},style:this.getStyle(!!l),id:"player-element-".concat(this.props.modelKey),title:s},b.a.createElement("div",{style:{width:this.props.style.width,height:this.props.style.height,position:"absolute",transform:"".concat(M.c({flipH:this.props.style.flipH,flipV:this.props.style.flipV}))}},this.renderAttachmentOrNot()),a===I.b.IFRAME?b.a.createElement(C.a,{size:{width:this.props.style.width,height:this.props.style.height},addon:n,pointerEvents:"auto",slideIndex:this.props.slideIndex,isPlayState:!0,component:this.props.shapeModel}):null)}},{key:"isInteractiveAnimTrigger",value:function(){return this.props.isInteractiveAnimTrigger(this.context.store,this.props)}},{key:"getStyle",value:function(e){var t=M.f(this.props.style);if(this.props.animStyle){var n="";R()(this.props.animStyle,"scaleX")&&(n="".concat(n,"scaleX(").concat(Math.abs(this.props.animStyle.scaleX),")")),R()(this.props.animStyle,"scaleY")&&(n="".concat(n,"scaleY(").concat(Math.abs(this.props.animStyle.scaleY),")")),t+=n}return A(A({},this.props.animStyle),{},{top:this.props.style.top,left:this.props.style.left,width:this.props.style.width,height:this.props.style.height,position:"absolute",transform:t,cursor:this.isInteractiveAnimTrigger()||e?"pointer":"inherit",WebkitTapHighlightColor:"rgba(0,0,0,0)"})}},{key:"getMediaManager",value:function(){var e;return null===(e=k.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.mediaManager}},{key:"getLinkManager",value:function(){return k.a.getInstance().getAppServices().viewableServiceLayer.linkManager}}]),n}(g.Component);m()(L,"contextTypes",{store:S.a.object})},"647724681b":function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var o=n("176815363d"),r=n.n(o),i=n("9132715560"),a=n.n(i),c=n("6a364eb35c"),l=n.n(c),s=n("85d0a7609b"),d=n.n(s),u=n("3ef2352f0b"),p=n.n(u),f=(n("c6244f7705"),n("081c8cafea"),n("8e7cce0ada"),n("29f8c5f672"),n("85d48ef22b"),n("2a6f332b5e"),n("3b24c833e2")),h=n("0cbec907c5"),v=n("0974c697cc"),m=n("ab17200d42"),g=710,b=710,y=function(){function e(){a()(this,e)}var t;return l()(e,null,[{key:"setVideoImageAndSize",value:(t=r()(p.a.mark((function e(t){var n,o=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m.d){e.next=4;break}return this.VideoImageMap.set(t,h.z),this.VideoSizeMap.set(t,{width:710,height:400}),e.abrupt("return",Promise.resolve());case 4:return e.next=6,Object(v.b)(t);case 6:return n=e.sent,e.abrupt("return",new Promise((function(e,r){Object(f.a)({blob:n}).then((function(n){var r=n.url;o.VideoImageMap.set(t,r);var i=new Image;i.onload=function(){o.setVideoSizeByLimit(t,i.width,i.height),e()},i.src=r})).catch((function(){r("upload file error")}))})));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"setVideoSizeByLimit",value:function(e,t,n){if(t<=g&&n<=b){var o={width:t,height:n};this.VideoSizeMap.set(e,o)}else if(t/n>1){var r={width:g,height:Math.floor(g/t*n)};this.VideoSizeMap.set(e,r)}else{var i={width:Math.floor(b/n*t),height:b};this.VideoSizeMap.set(e,i)}}}]),e}();d()(y,"VideoImageMap",new Map),d()(y,"VideoSizeMap",new Map)},"666e89bf06":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ke}));n("73b854064b");var o,r,i,a=n("9132715560"),c=n.n(a),l=n("6a364eb35c"),s=n.n(l),d=n("bd29e2df90"),u=n.n(d),p=n("ab5eb40518"),f=n.n(p),h=n("1b4cdd6a36"),v=n.n(h),m=n("85d0a7609b"),g=n.n(m),b=n("69084d01d3"),y=n.n(b),S=n("14502724a6"),E=n.n(S),w=n("547611bd96"),M=n.n(w),O=(n("3bf1976a4f"),n("6e20b6a7d8"),n("22569efd03"),n("5a5c6d313d")),R=(n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36"),n("730477bb20")),C=n.n(R),P=n("6715f30ed9"),I=n("fdd99ef675"),k=n("7d52e7e74a"),j=n("e0e8dd9366"),x=n("d1f05b304b"),A=n("5cdbac46e8"),D=n("f9193d718f"),L=n("d45ef7b026");function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var V,U,z,H=Object(O.b)((i=r=function(e){u()(n,e);var t=B(n);function n(){var e;c()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),g()(M()(e),"updateComponent",(function(){e.forceUpdate()})),g()(M()(e),"handleBorderClick",(function(t){var n;if(e.isSpecialKey(t.nativeEvent)&&(null!==(n=e.props.element)&&void 0!==n&&n.selected)){var o=e.getSelectionService();null==o||o.selectedElements.remove(e.props.element)}})),g()(M()(e),"isSpecialKey",(function(e){return e.metaKey||e.shiftKey||e.ctrlKey})),e}return s()(n,[{key:"componentDidMount",value:function(){var e=x.a.createObserver(this.props.element);e&&(e.addLocalChangeObserver(this.updateComponent),e.addChangesetObserver(this.updateComponent))}},{key:"componentWillUnmount",value:function(){var e=x.a.createObserver(this.props.element);e&&(e.removeLocalChangeObserver(this.updateComponent),e.removeChangesetObserver(this.updateComponent))}},{key:"render",value:function(){var e,t,n=this.props.element,o=P.a.frameInfoForOuter(n,!1),r=Object(I.a)(n.type),i=this.getRootGroupFrame(n);o=this.getOuterFrameInfo(n,o),o=this.canvasRectFloor(o),i=this.canvasRectFloor(i);var a=this.getEditable(),c=null!==(e=null===(t=this.getRotateElementHandler())||void 0===t?void 0:t.isMobileRotatingMode)&&void 0!==e&&e,l=this.context.editingStateManager,s=l.isControlValuesChanging,d=l.isDragging,u=l.isResizing,p=l.isRotating,f=l.isConnecting,h=l.isCroping,v=this.isPreview(),m=a&&!u&&!d&&!h,g=this.getSelectable(n);return y.a.createElement("div",{style:T(T(T({},o),i),{},{position:"absolute",pointerEvents:"none",transform:P.a.transformForOuter(n)}),id:"selected-element-outer"},r&&y.a.createElement(r,C()({},this.props,{element:this.props.element,selectedElementInGroupInMobile:!!this.props.selectedElementInGroupInMobile,canRotate:m,isRotating:p,isDragging:d,isResizing:u,isControlValuesChanging:s,isConnecting:f,isMobileRotatingMode:c,resizeHorizontal:a&&!d,resizeVertical:a&&!d,isCroping:h,draggable:a&&!h,isPreview:v,editable:a,isSelected:!0,onBorderClick:this.handleBorderClick,selectable:g,canBeConnected:a&&n.type!==j.d.GROUP&&n.type!==j.d.SMART_ART,showSelectBorder:n.type!==j.d.CONNECTOR,borderDraggable:g&&!h})))}},{key:"getSelectable",value:function(e){var t=e.selectable&&e.currentEditState<=A.b.SELECTABLE;return e.isPlaceholder&&!e.isCustomPlaceholder&&e.currentEditState>A.b.EDITABLE&&(t=!1),t}},{key:"isRootGroup",value:function(e){return e.type===j.d.GROUP&&e.isRootGroup}},{key:"isPreview",value:function(){var e,t;return(null===(e=this.context.editorAnimPreviewManager)||void 0===e?void 0:e.isAnimPreviewing)||(null===(t=this.getPreviewService())||void 0===t?void 0:t.isPreview)}},{key:"getEditable",value:function(){return this.getUserPriviledgeService().pptEditorState===A.b.EDITABLE}},{key:"getOuterFrameInfo",value:function(e,t){var n;e.type===j.d.TABLE&&(this.context.editingStateManager.isResizing&&(t=null===(n=e.getFrame)||void 0===n?void 0:n.call(e).getFrameInfo(!1)));return t}},{key:"getRootGroupFrame",value:function(e){var t={};if(this.isRootGroup(e)){var n,o=null===(n=e.getFrame)||void 0===n?void 0:n.call(e).getFrameInfo(!!e.operationFrame);t={left:o.left-k.a,top:o.top-k.a,width:o.width+2*k.a,height:o.height+2*k.a}}return t}},{key:"canvasRectFloor",value:function(e){return["top","left"].forEach((function(t){null!=e&&e[t]&&(e[t]=Math.floor(e[t]))})),e}},{key:"getUserPriviledgeService",value:function(){return D.a.getInstance().getAppServices().viewableServiceLayer.userPriviledgeService}},{key:"getPreviewService",value:function(){var e;return null===(e=D.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.previewService}},{key:"getRotateElementHandler",value:function(){var e;return null===(e=D.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.rotateElementHandler}},{key:"getSelectionService",value:function(){var e;return null===(e=D.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}}]),n}(b.Component),g()(r,"contextType",L.a),o=i))||o,N=H,W=n("509a56a298"),G=n("d9812f1c6f"),_=n("e5a826a0ff");function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Y=Object(O.b)((z=U=function(e){u()(n,e);var t=K(n);function n(){var e;c()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),g()(M()(e),"selectedElementsInGroup",void 0),g()(M()(e),"sortedElementsOnSlide",void 0),g()(M()(e),"selectedElementsOnSlide",void 0),e}return s()(n,[{key:"render",value:function(){var e,t,n,o,r=this;if(null===(e=this.getSelectionService())||void 0===e||!e.currentSlide)return null;this.getIsOperation()||this.getSortElement();var i=G.a.isMobile&&(null===(t=this.selectedElementsInGroup)||void 0===t?void 0:t.length)>0;return y.a.createElement(y.a.Fragment,null,null===(n=this.sortedElementsOnSlide)||void 0===n?void 0:n.map((function(e){return y.a.createElement(N,{element:e,key:"edit-selected-".concat(e.key),scale:r.props.scale,selectedElementInGroupInMobile:i})})),null===(o=this.selectedElementsInGroup)||void 0===o?void 0:o.map((function(e){return y.a.createElement(N,{element:e,key:"edit-selected-".concat(e.key),scale:r.props.scale})})))}},{key:"getSortElement",value:function(){var e,t,n;this.selectedElementsOnSlide=null===(e=this.getSelectionService())||void 0===e?void 0:e.selectedElements.selectedArrayForType(_.a.SLIDE),this.sortedElementsOnSlide=this.getSelectionService().selectedSlides.sortSelectedArray(null===(t=this.getSelectionService())||void 0===t?void 0:t.currentSlide,this.selectedElementsOnSlide),this.selectedElementsInGroup=null===(n=this.getSelectionService())||void 0===n?void 0:n.selectedElements.selectedArrayForType(_.a.GROUP),this.setRegionRefreshElement()}},{key:"setRegionRefreshElement",value:function(){var e,t=null===(e=this.getSelectionService())||void 0===e?void 0:e.currentSlide,n=this.sortedElementsOnSlide.length;if((null==t?void 0:t.children.length)&&n){var o=t.children,r=E()(this.sortedElementsOnSlide,1)[0],i=this.sortedElementsOnSlide[n-1],a=o.findIndex((function(e){return e===r})),c=o.findIndex((function(e){return e===i}));c=-1===c?a:c,W.a.getInstance().canvasOperationInfo.startIndex=a,W.a.getInstance().canvasOperationInfo.endIndex=c}else W.a.getInstance().canvasOperationInfo.startIndex=0,W.a.getInstance().canvasOperationInfo.endIndex=0}},{key:"getIsOperation",value:function(){return this.context.editingStateManager.isDragging||this.context.editingStateManager.isResizing||this.context.editingStateManager.isRotating}},{key:"getSelectionService",value:function(){var e;return null===(e=D.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}}]),n}(b.Component),g()(U,"contextType",L.a),V=z))||V,X=Y,q=n("1ae50d306c"),J=n("bd86570a95"),Z=n("8f6e67dde4"),Q=n("0a4e8b541b");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var ne,oe,re,ie=function(e){u()(n,e);var t=te(n);function n(){var e;c()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),g()(M()(e),"canBeConnectedElements",(function(){var t,n;if(!e.getAppServices().viewableServiceLayer.selectionService.currentSlide)return null;var o=e.getAppServices().viewableServiceLayer.selectionService.currentSlide,r=null===(t=e.getAppServices().viewableServiceLayer.editingStateManager.connectingInfo)||void 0===t||null===(n=t.model)||void 0===n?void 0:n.id,i=[j.d.TABLE,j.d.IMAGE,j.d.SHAPE,j.d.CONNECTOR];return Q.a.getTypesOfElements(null==o?void 0:o.children,i).filter((function(e){return e.selectable&&e.currentEditState===A.b.EDITABLE&&e.id!==r}))})),g()(M()(e),"renderCanBeAdsorbedElement",(function(t){var n,o=t,r=null===(n=o.getFrame)||void 0===n?void 0:n.call(o).frameOnSlide();return y.a.createElement("div",{key:t.id,style:ee(ee({},r),{},{position:"absolute",pointerEvents:"none",transform:Object(Z.g)(r)})},y.a.createElement(q.a,{styleModel:o.props.style,component:o,scale:e.props.scale,pathParser:o.pathParser,editingStateManager:e.getEditingStateManager()}))})),e}return s()(n,[{key:"render",value:function(){var e;return this.getEditingStateManager().isConnecting&&null!==(e=this.elements)&&void 0!==e&&e.length?y.a.createElement(y.a.Fragment,null,this.elements.map(this.renderCanBeAdsorbedElement)):null}},{key:"getEditingStateManager",value:function(){return this.getAppServices().viewableServiceLayer.editingStateManager}},{key:"getAppServices",value:function(){return D.a.getInstance().getAppServices()}}]),n}(J.a),ae=n("bece1304c7"),ce=n("b855ff8a00"),le=n("6884e1a126"),se=n("9ba9b5b919"),de=n("37091e4240");function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var pe=(ne=Reflect.metadata("design:type",Function),oe=Reflect.metadata("design:paramtypes",["undefined"==typeof AnimTipsContainerProps?Object:AnimTipsContainerProps]),Object(O.b)(re=ne(re=oe(re=function(e){u()(n,e);var t=ue(n);function n(e){var o;return c()(this,n),o=t.call(this,e),g()(M()(o),"animCornerMarkFeature",void 0),de.b.once(de.a.WORKBENCH_IS_MOUNT,(function(){o.animCornerMarkFeature=le.e.get(se.AnimCornerMarkFeature),o.forceUpdate()})),o}return s()(n,[{key:"render",value:function(){var e,t,n=null===(e=this.getSelectionService())||void 0===e?void 0:e.currentSlide,o=this.getEditingStateManager();return this.animCornerMarkFeature?y.a.createElement(y.a.Fragment,null,(null===(t=this.getRightSideBarManager())||void 0===t?void 0:t.isAnimationEditorShown)&&!this.animCornerMarkFeature.shouldHideAllBadges&&y.a.createElement(ae.a,null,y.a.createElement(b.Suspense,{fallback:y.a.createElement("div",null)},y.a.createElement(ce.a,{scale:this.props.scale,slide:n,editingStateManager:o})))):null}},{key:"getEditingStateManager",value:function(){var e;return null===(e=D.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.editingStateManager}},{key:"getSelectionService",value:function(){var e;return null===(e=D.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getRightSideBarManager",value:function(){var e;return null===(e=D.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.rightSideBarManager}}]),n}(y.a.Component))||re)||re)||re),fe=n("176815363d"),he=n.n(fe),ve=n("3ef2352f0b"),me=n.n(ve),ge=(n("c6244f7705"),n("081c8cafea"),n("b8217400dc"),n("e6f68cdf2e"),n("63513d8b56"),n("78da8504ab")),be=n("f1f2954cff"),ye=n.n(be),Se=(n("963f2eaace"),n("dc68b581cd")),Ee=n("78380fc918"),we=n("c73625d763"),Me=n.n(we),Oe=n("8f58e78419"),Re=n.n(Oe);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Pe=function(e){u()(n,e);var t=Ce(n);function n(e){var o;return c()(this,n),o=t.call(this,e),g()(M()(o),"strokeInfo",void 0),g()(M()(o),"lineInfo",void 0),o.strokeInfo=new Ee.a,o}return s()(n,[{key:"render",value:function(){var e,t,n=this.props,o=n.strokeColor,r=n.strokeOpacity,i=this.props.model,a=this.strokeInfo.getStrokeData(this.props.model),c=(null===(e=this.lineInfo)||void 0===e?void 0:e.getControlValues())||[],l=null===(t=this.lineInfo)||void 0===t?void 0:t.svgPathInRect(0,0,i.width,i.height,c,{head:0,tail:0});return y.a.createElement("div",null,y.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{left:0,top:0,position:"absolute",overflow:"visible",pointerEvents:"none"}},y.a.createElement("g",null,y.a.createElement("path",{width:i.width,height:i.height,stroke:o,strokeOpacity:r,strokeWidth:a.strokeWidth+4,strokeLinejoin:"round",fill:"none",d:l,pointerEvents:"none"}))))}},{key:"componentWillMount",value:function(){this.resetInfo(this.props),this.lineInfo&&(Me()(this.props.model,"controlValues")&&this.props.model.controlValues&&this.props.model.controlValues.length>0?this.lineInfo.controlValues=this.props.model.controlValues.slice():this.lineInfo.controlValues=this.lineInfo.defaultValue.controlValues.slice())}},{key:"componentWillUnmount",value:function(){this.lineInfo&&(this.lineInfo=null)}},{key:"componentWillReceiveProps",value:function(e){Re()(this.props.model,"bgLine")!==Re()(e.model,"bgLine")&&this.resetInfo(e),this.lineInfo&&(Me()(e.model,"controlValues")&&e.model.controlValues&&e.model.controlValues.length>0?this.checkControlValuesSame(e.model.controlValues,this.props.model.controlValues)||(this.lineInfo.controlValues=e.model.controlValues.slice()):this.lineInfo.controlValues=this.lineInfo.defaultValue.controlValues.slice())}},{key:"resetInfo",value:function(e){var t=Object(Se.b)(Re()(e.model,"bgLine"));this.lineInfo=t?new t:null}},{key:"checkControlValuesSame",value:function(e,t){if(e&&t&&e.length&&t.length&&e.length===t.length){for(var n=!0,o=0;o<e.length;o++)if(e[o]!==t[o]){n=!1;break}return!!n}return!1}}]),n}(b.Component),Ie=n("0e0be5791f"),ke=n.n(Ie),je=n("730207179f"),xe=n("d5c3deb8c7");function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Fe=function(e){u()(o,e);var t,n=Le(o);function o(e,t){var r;return c()(this,o),r=n.call(this,e,t),g()(M()(r),"instance",void 0),g()(M()(r),"cacheElements",void 0),g()(M()(r),"refreshComponent",(function(){r.setState({})})),g()(M()(r),"handleMouseMove",function(){var e=he()(me.a.mark((function e(t){var n,o,i,a,c,l;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.clientX,a=t.clientY,e.next=3,null===(o=r.instance)||void 0===o?void 0:o.promise();case 3:if(e.t1=n=e.sent,e.t0=null!==e.t1,!e.t0){e.next=7;break}e.t0=void 0!==n;case 7:if(!e.t0){e.next=11;break}e.t2=n,e.next=12;break;case 11:e.t2={};case 12:if(c=e.t2,0!==(null==(l=c.elementsWithCursors)?void 0:l.length)){e.next=16;break}return e.abrupt("return",null);case 16:null==l||l.forEach((function(e){var t=document.getElementsByClassName("cursor-border-".concat(e.id)),n=E()(t,1)[0];if(n){var o=n.getBoundingClientRect(),r=o.top,c=o.left,l=o.width,s=o.height;i>=c&&i<=c+l&&a>=r&&a<=r+s||(n.style.pointerEvents="auto")}}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g()(M()(r),"handleMouseEnter",function(){var e=he()(me.a.mark((function e(t,n){var o,i,a,c,l;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=document.getElementsByClassName("cursor-border-".concat(n)),c=E()(a,1),(l=c[0])&&(l.style.pointerEvents="none"),e.next=4,null===(i=r.context.cursorManager)||void 0===i?void 0:i.promise();case 4:if(e.t1=o=e.sent,e.t0=null===e.t1,e.t0){e.next=8;break}e.t0=void 0===o;case 8:if(!e.t0){e.next=12;break}e.next=13;break;case 12:o.showCursorTagForElement(t);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g()(M()(r),"handleMouseLeave",function(){var e=he()(me.a.mark((function e(t){var n,o;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(o=r.context.cursorManager)||void 0===o?void 0:o.promise();case 2:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===n;case 6:if(!e.t0){e.next=10;break}e.next=11;break;case 10:n.hideCursorTagForElement(t);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g()(M()(r),"getRootGroup",(function(e){for(var t=e.parent;t&&!r.isRootGroup(t);)t=t.parent;return t})),g()(M()(r),"getCoopCursorBorder",(function(e){var t=e.element,n=t.props.style,o=n.width,i=n.height,a={width:o,height:i};return r.isRootGroup(t)&&(a.width=o+2*k.a,a.height=i+2*k.a),y.a.createElement(ge.a,{size:a,color:e.cursor[0].color,shouldRoundSize:t.type===j.d.SHAPE||t.type===j.d.IMAGE})})),g()(M()(r),"getSelectGraphicLine",(function(e,t){return y.a.createElement(Pe,{model:De(De({},ke()(Object(je.c)(e.element.props.style),"width","height")),{},{width:t.width,height:t.height}),strokeColor:e.cursor[0].color,strokeOpacity:.7})})),g()(M()(r),"renderCursorBorder",(function(e){var t,n=e.element;if(null===(t=r.state.cursorManager)||void 0===t||!t.isElementInSlide(n))return null;var o,i,a=P.a.frameInfoForOuter(n,!0),c={};if(r.isRootGroup(n)){var l,s=null===(l=n.getFrame)||void 0===l?void 0:l.call(n).getFrameInfo(!!n.operationFrame);c={left:s.left-k.a,top:s.top-k.a,width:s.width+2*k.a,height:s.height+2*k.a}}n.type===j.d.TABLE&&(null!==(o=r.context.editingStateManager)&&void 0!==o&&o.isResizing&&(a=null===(i=n.getFrame)||void 0===i?void 0:i.call(n).getFrameInfo(!1)));var d=P.a.transformForOuter(n);n.type===j.d.CONNECTOR&&(d=Z.g(a));var u=G.a.isMobile?"none":"auto";return n.selected?null:y.a.createElement("div",{className:"cursor-border-".concat(e.id),key:e.id,style:De(De(De({},a),c),{},{position:"absolute",transform:d,pointerEvents:u}),onMouseEnter:function(){return r.handleMouseEnter(e.element,e.id)},onMouseLeave:function(){return r.handleMouseLeave(e.element)}},e.element.type===j.d.CONNECTOR?r.getSelectGraphicLine(e,a):r.getCoopCursorBorder(e))})),r.instance=r.context.cursorManager,r.state={cursorManager:void 0},r.cacheElements=[],r}return s()(o,[{key:"componentDidMount",value:function(){var e,t=this;document.addEventListener("mousemove",this.handleMouseMove),null===(e=this.instance)||void 0===e||e.promise().then((function(e){t.setState({cursorManager:e}),Object(O.a)(t,Object(xe.r)((function(){return e.elementsWithCursors.length}),(function(){t.updateCursorElementsListener(),t.setState({})})))}))}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("mousemove",this.handleMouseMove),this.cacheElements.forEach((function(t){var n;null==t||null===(n=t.changeSetEngine)||void 0===n||n.removeChangesetObserver(e.refreshComponent)}))}},{key:"updateCursorElementsListener",value:(t=he()(me.a.mark((function e(){var t,n,o,r,i,a,c,l,s=this;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(n=this.instance)||void 0===n?void 0:n.promise();case 2:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=6;break}e.t0=void 0===t;case 6:if(!e.t0){e.next=10;break}e.t2=void 0,e.next=11;break;case 10:e.t2=t.elementsWithCursors.map((function(e){return e.element}));case 11:for(o=e.t2,r=0;r<this.cacheElements.length;r++)null!=o&&o.includes(this.cacheElements[r])||(a=this.cacheElements.splice(r,1),c=E()(a,1),l=c[0],r-=1,null==l||null===(i=l.changeSetEngine)||void 0===i||i.removeChangesetObserver(this.refreshComponent));null==o||o.forEach((function(e){var t;s.cacheElements.includes(e)||(s.cacheElements.push(e),null==e||null===(t=e.changeSetEngine)||void 0===t||t.addChangesetObserver(s.refreshComponent))}));case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"isRootGroup",value:function(e){return e.type===j.d.GROUP&&e.isRootGroup}},{key:"render",value:function(){var e,t=this,n=null===(e=this.state.cursorManager)||void 0===e?void 0:e.elementsWithCursors;return 0===(null==n?void 0:n.length)?null:y.a.createElement(y.a.Fragment,null,null==n?void 0:n.map((function(e){return t.renderCursorBorder(e)})))}}]),o}(b.Component);g()(Fe,"contextType",L.a),g()(Fe,"propTypes",{scale:ye.a.number});var Te=Fe,Be=n("7a5536c9bf"),Ve=n.n(Be),Ue=(n("a2a09da1e3"),n("75563bc376"),n("34a6623f15")),ze=n("9559b6ab8e");function He(){return D.a.getInstance().getAppServices()}var Ne=function(){Object(b.useContext)(Ue.a);var e=Object(b.useState)(null),t=E()(e,2),n=t[0],o=t[1];Object(b.useEffect)((function(){var e=Object(xe.r)((function(){var e;return null===(e=He().viewableServiceLayer.selectionService.currentSlide)||void 0===e?void 0:e.highlightModelId}),(function(e){o(e)}));return function(){null==e||e()}}),[]);var r=function e(t){var n,o=[];return null==t||null===(n=t.children)||void 0===n||n.forEach((function(t){var n;-1===o.indexOf(t)&&o.push(t),(null===(n=t.children)||void 0===n?void 0:n.length)>0&&o.push.apply(o,Ve()(e(t)))})),o},i=function(e){var t,n=He().viewableServiceLayer.selectionService.currentSlide,o=r(n).find((function(t){return t.id===e}));if(!o)return{};var i={position:"absolute",border:"2px solid var(--accent-default)",padding:10,boxSizing:"content-box"},a=null===(t=o.getFrame)||void 0===t?void 0:t.call(o).frameOnSlide();return i.width=Math.floor(a.width),i.height=Math.floor(a.height),i.left=Math.floor(a.left)-10-2,i.top=Math.floor(a.top)-10-2,i.transform="rotate(".concat(a.rotate,"deg)"),i};return Object(b.useMemo)((function(){return n&&n!==ze.j?y.a.createElement("div",{style:i(n)}):null}),[n])},We=n("74b3712a62"),Ge=n("ffcade8893");function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Ke=function(e){u()(n,e);var t=_e(n);function n(){return c()(this,n),t.apply(this,arguments)}return s()(n,[{key:"shouldComponentUpdate",value:function(e){return e.scale!==this.props.scale}},{key:"render",value:function(){return y.a.createElement("div",{id:"edit-panel",style:{width:"100%",height:"100%",position:"absolute",zIndex:1,pointerEvents:"none"}},y.a.createElement(X,{scale:this.props.scale}),y.a.createElement(ie,{scale:this.props.scale}),y.a.createElement(ae.a,null,y.a.createElement(b.Suspense,{fallback:y.a.createElement("div",null)},y.a.createElement(We.a,{scale:{frameScale:1,graphicScale:this.props.scale},snapLineService:this.context.snapLineService,styleSheet:Ge.b}))),y.a.createElement(pe,{scale:this.props.scale}),y.a.createElement(Te,{scale:this.props.scale}),y.a.createElement(Ne,null))}}]),n}(y.a.Component);g()(Ke,"contextType",L.a)},"679a12aae4":function(e,t,n){"use strict";var o=n("e792a3169a"),r=n.n(o),i=n("5ae2d2ab44"),a=n.n(i),c={insert:"head",singleton:!1};r()(a.a,c);t.a=a.a.locals||{}},"7d52e7e74a":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var o=20},"7e880c747c":function(e,t,n){"use strict";n.r(t);n("73b854064b");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("547611bd96"),l=n.n(c),s=n("bd29e2df90"),d=n.n(s),u=n("ab5eb40518"),p=n.n(u),f=n("1b4cdd6a36"),h=n.n(f),v=n("85d0a7609b"),m=n.n(v),g=(n("3bf1976a4f"),n("69084d01d3")),b=n.n(g),y=n("e792a3169a"),S=n.n(y),E=n("297069ddc1"),w=n.n(E),M={insert:"head",singleton:!1},O=(S()(w.a,M),w.a.locals||{}),R=n("59ab3b0c6a"),C=n("5fac0349d3"),P=n("f9193d718f");function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var k=function(e){d()(n,e);var t=I(n);function n(e,o){var i,a;return r()(this,n),a=t.call(this,e,o),m()(l()(a),"floatStatusManager",void 0),m()(l()(a),"onMouseDown",(function(e){e.preventDefault(),e.stopPropagation(),0===e.button&&(document.body.addEventListener("mousemove",a.handleRotating),document.body.addEventListener("mouseup",a.stopRotate),a.startRotate(e))})),m()(l()(a),"onTouchStart",(function(e){e.preventDefault(),e.stopPropagation(),document.body.addEventListener("touchmove",a.handleRotating,{passive:!1}),document.body.addEventListener("touchend",a.stopRotate),a.startRotate(e)})),m()(l()(a),"startRotate",(function(e){var t,n;e.preventDefault(),e.stopPropagation(),null===(t=(n=a.props).onRotateStart)||void 0===t||t.call(n,e)})),m()(l()(a),"stopRotate",(function(e){var t,n,o,r;e.preventDefault(),e.stopPropagation(),null===(t=a.floatStatusManager)||void 0===t||t.hide(),document.body.removeEventListener("mousemove",a.handleRotating),document.body.removeEventListener("mouseup",a.stopRotate),document.body.removeEventListener("touchmove",a.handleRotating),document.body.removeEventListener("touchend",a.stopRotate),null===(n=(o=a.props).onRotateStop)||void 0===n||n.call(o,e),a.setState({visible:!1}),null===(r=a.getRotateElementHandler())||void 0===r||r.setIsMobileRotatingMode(!0)})),m()(l()(a),"handleRotating",(function(e){var t,n,o;e.preventDefault(),e.stopPropagation();var r="touches"in e?e.touches[0].clientX:e.clientX,i="touches"in e?e.touches[0].clientY:e.clientY;null===(t=a.floatStatusManager)||void 0===t||t.show({top:i-60,left:r,message:"".concat((a.props.rotate+a.props.relativeRotate)%360,"°"),fixElementSize:!0}),a.setState({visible:!0}),null===(n=(o=a.props).onRotate)||void 0===n||n.call(o,e,a.props.id)})),m()(l()(a),"updateComponent",(function(){var e;null===(e=a.getRotateElementHandler())||void 0===e||e.setIsMobileRotatingMode(!1),a.forceUpdate()})),a.state={visible:!1},null===(i=a.getAppService().editableServiceLayer)||void 0===i||i.mobileFloatStatusManager.promise().then((function(e){a.floatStatusManager=e})),a}return a()(n,[{key:"componentDidMount",value:function(){window.addEventListener("enterEditing",this.updateComponent),window.addEventListener("exitEditing",this.updateComponent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("enterEditing",this.updateComponent),window.removeEventListener("exitEditing",this.updateComponent)}},{key:"render",value:function(){var e={transform:"translate(-50%, -68px)",left:"50%",padding:"10px",display:this.props.isRotating?"none":"flex",width:46,height:46,pointerEvents:"auto",top:0};return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:O.rotateContainer,style:e,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,id:"rotate div"},b.a.createElement("div",{className:O.rotate},b.a.createElement("button",{className:"".concat(O.rotateButton," ").concat(R.a.pointer),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},b.a.createElement("i",{className:O.rotateIcon,title:C.a.t("按住shift可15°旋转")}))),b.a.createElement("div",{className:O.connector,style:{left:"50%",width:1,height:32,position:"absolute",bottom:10,transform:"rotate(180deg)",transformOrigin:"bottom"}})))}},{key:"getRotateElementHandler",value:function(){var e;return null===(e=this.getAppService().editableServiceLayer)||void 0===e?void 0:e.rotateElementHandler}},{key:"getAppService",value:function(){return P.a.getInstance().getAppServices()}}]),n}(b.a.Component);t.default=k},"7ea87243fd":function(e,t,n){"use strict";n("73b854064b");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("547611bd96"),l=n.n(c),s=n("bd29e2df90"),d=n.n(s),u=n("ab5eb40518"),p=n.n(u),f=n("1b4cdd6a36"),h=n.n(f),v=n("85d0a7609b"),m=n.n(v),g=(n("3bf1976a4f"),n("c6244f7705"),n("bd80bf2d0f"),n("69084d01d3")),b=n.n(g),y=n("15985515f8"),S=n("d9812f1c6f"),E=n("e792a3169a"),w=n.n(E),M=n("181d3d164b"),O=n.n(M),R={insert:"head",singleton:!1},C=(w()(O.a,R),O.a.locals||{}),P=n("f1f2954cff"),I=n.n(P),k=n("5fac0349d3");function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var x=function(e){d()(n,e);var t=j(n);function n(){return r()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){var e=this.props.loadCover;return b.a.createElement("div",{className:C["loading-wrapper"],id:"addon-loading",style:{display:e?"block":"none"}},b.a.createElement("div",{className:C["loading-content"]},b.a.createElement("div",{className:C["loading-icon"]},b.a.createElement("div",{className:C["loading-spin-circle"],style:{width:S.a.isMobile?"80px":"50px",height:S.a.isMobile?"80px":"50px"}})),S.a.isPc&&b.a.createElement("p",{className:C["loading-text"],style:{paddingTop:"10px",fontSize:"12px"}},k.a.t("内容加载中..."))))}}]),n}(g.Component);m()(x,"propTypes",{loadCover:I.a.bool});var A,D,L,F,T=n("1d595f0f7c"),B=n("8eec1e4a03"),V=n.n(B),U=n("2dc700e1e6"),z=n.n(U),H=(n("8ee19818c4"),n("c554310b5c"),n("19a2c28eef")),N=n("d5c3deb8c7"),W=n("4b61a5df9d"),G=n("f9193d718f");function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var K=(A=Object(W.b)(),D=Reflect.metadata("design:type",Function),L=Reflect.metadata("design:paramtypes",[]),F=function(e){d()(n,e);var t=_(n);function n(){var e;r()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),m()(l()(e),"updatePVisi",(function(t){var n,o=(null===(n=e.getChildRef("contentRef"))||void 0===n?void 0:n.querySelectorAll("p"))||[];e.isCurrentSlide(t)?o.forEach((function(e){e.style.display="block"})):e.notCurrentSlide(t)&&o.forEach((function(e){e.style.display="none"}))})),m()(l()(e),"updateBannerVisi",(function(t){var n=e.getChildRef("bannerRef");n&&(e.isCurrentSlide(t)?n.style.display="block":e.notCurrentSlide(t)&&(n.style.display="none"))})),m()(l()(e),"isCurrentSlide",(function(t){return-1===t||t>-1&&t===e.props.index})),m()(l()(e),"notCurrentSlide",(function(t){return t>-1&&t!==e.props.index})),e}return a()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.isPlayState;if(S.a.isMobile&&!t){var n,o=null===(n=this.getSelectionService())||void 0===n?void 0:n.currentSlideIndex;this.updatePVisi(o),this.disposeOnUnmount(Object(N.r)((function(){return o}),(function(t){e.updatePVisi(t)})))}}},{key:"componentWillReceiveProps",value:function(e){var t=this;V()(h()(n.prototype),"componentWillReceiveProps",this).call(this,e),e.snapshotUrl!==this.props.snapshotUrl&&this.disposeOnUnmount(Object(N.r)((function(){var e;return null===(e=t.getSelectionService())||void 0===e?void 0:e.currentSlideIndex}),(function(e){t.updateBannerVisi(e)})))}},{key:"handleMiniProgramCopyLink",value:function(){this.getLinkManager().linkFloatBarService.handleCopyUrl(this.props.src)}},{key:"getSelectionService",value:function(){var e,t=G.a.getInstance().getAppServices();return null==t||null===(e=t.viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getLinkManager",value:function(){var e=G.a.getInstance().getAppServices();return null==e?void 0:e.viewableServiceLayer.linkManager}}]),n}(H.a),z()(F.prototype,"handleMiniProgramCopyLink",[A,D,L],Object.getOwnPropertyDescriptor(F.prototype,"handleMiniProgramCopyLink"),F.prototype),F),Y=n("3f87030d09");function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var q=500,J=100,Z=800,Q=288,$=function(e){d()(n,e);var t=X(n);function n(e){var o;return r()(this,n),o=t.call(this,e),m()(l()(o),"addonClassName",void 0),m()(l()(o),"renderDefaultView",(function(e,t){var n=o.props,r=n.setRef,i=n.isInIframeRenderWhiteList,a=o.getDefaultViewShowStyle(e),c=a.textLessSmallHidden,l=a.inPcIconHide,s=t?k.a.t("点击预览内容"):k.a.t("演示模式可查看"),d=S.a.isMiniProgram&&!i;return l?null:b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:T.a["".concat(o.addonClassName,"-content")],ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return r("contentRef",e)}))},b.a.createElement("i",{className:T.a["".concat(o.addonClassName,"-icon")]}),!c&&b.a.createElement("p",{hidden:!S.a.isMobile||d},s)),d&&o.getSnapShotBannerShowStyle(e.width))})),m()(l()(o),"renderSnapShotView",(function(){var e=o.props,t=e.size,n=e.snapshotUrl,r=e.isInIframeRenderWhiteList,i=t.width,a=void 0===i?0:i,c=t.height,l=void 0===c?0:c;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:T.a["".concat(o.addonClassName,"-snapshot")],style:{backgroundImage:"url(".concat(n,")"),width:a,height:l,backgroundSize:"100% 100%"}}),S.a.isMiniProgram&&!r&&o.getSnapShotBannerShowStyle(a))})),m()(l()(o),"getDefaultViewShowStyle",(function(e){var t=!1,n=!1;return(e.width<q||e.height<q)&&(t=!0),(e.width<J||e.height<J)&&(n=!0),{textLessSmallHidden:t,inPcIconHide:n}})),m()(l()(o),"getSnapShotBannerShowStyle",(function(e){var t=o.props,n=t.setRef,r=t.isVideoType,i=t.addonIcon,a=t.addonName,c=null!=a?a:k.a.t("第三方插件"),l=b.a.createElement(b.a.Fragment,null,k.a.t("小程序不支持"),r?k.a.t("播放"):k.a.t("查看"),"，",o.getCopyLinKDom());return e<Z&&e>Q?l=o.getCopyLinKDom():e<Q&&(l=b.a.createElement(b.a.Fragment,null)),b.a.createElement("div",{key:"".concat(o.props.mobileEditMode),id:"".concat(o.addonClassName,"-banner"),ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return n("bannerRef",e)}))},b.a.createElement("div",{className:T.a["".concat(o.addonClassName,"-banner-bottom")]},b.a.createElement("div",{className:T.a["left-thumbnail"]},i?b.a.createElement("img",{src:i,style:{width:"88px",height:"88px"}}):b.a.createElement("i",{className:T.a["default-image"]})),b.a.createElement("div",{className:T.a["right-panel"]},b.a.createElement("div",{className:T.a["banner-bottom--title"]},c),b.a.createElement("div",{className:T.a["banner-bottom--tips"]},l))))})),m()(l()(o),"getCopyLinKDom",(function(){return b.a.createElement(b.a.Fragment,null,b.a.createElement("span",{onTouchEnd:o.props.handleMiniProgramCopyLink},k.a.t("复制链接")),k.a.t("去浏览器查看。"))})),o.addonClassName=Object(Y.a)(),o}return a()(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.scaleViewHidden,o=e.mobileEditMode,r=e.snapshotUrl,i=e.miniAppRenderWhitelist;return S.a.isMiniProgram&&!i?b.a.createElement(x,{loadCover:null===i}):b.a.createElement("div",{className:T.a["".concat(this.addonClassName,"-wrapper")],style:{width:t.width,height:t.height,display:n?"none":"block"},id:this.addonClassName},r?this.renderSnapShotView():this.renderDefaultView(t,o))}}]),n}(b.a.Component);m()($,"defaultProps",{setRef:function(){}});var ee,te,ne,oe,re,ie=Object(y.a)(K,null,$),ae=n("1f925d7f50"),ce=n.n(ae),le=(n("f1054791f4"),n("081c8cafea"),n("3dc8f33382"),n("8f58e78419")),se=n.n(le),de=n("dc9dac28cb"),ue=n("02ae07c580");function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var fe=(ee=Object(W.b)(),te=Object(W.b)(),ne=function(e){d()(n,e);var t=pe(n);function n(){var e;r()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),m()(l()(e),"playSwapTimer",void 0),ce()(l()(e),"iframeLoadingEnd",oe,l()(e)),ce()(l()(e),"handleTouchStartNotEditMode",re,l()(e)),m()(l()(e),"handleViewChange",(function(){e.setModel({inCurrentSlide:!1,loadCover:!1})})),m()(l()(e),"renderIframePrepare",(function(){e.props.isPlayState?(e.playStateSwapSlide(),e.isMobileOrNotInWhitelist()&&e.handleSnapshotLoad()):(e.registerNormalSwapReleaseMemory(),e.handleSnapshotLoad(),e.registerSDKInfoLoaded())})),m()(l()(e),"registerSDKInfoLoaded",(function(){var t,n;(null===(t=e.addonManager)||void 0===t||t.event.on(ue.a.ADDON_HANDLER_IMPORT_READY,e.addonImportReadyCallback),S.a.isMobile)&&(null===(n=e.addonManager)||void 0===n||n.event.on(ue.a.ADDON_INFO_LOAD_READY,e.judgeIsVideoType))})),m()(l()(e),"addonImportReadyCallback",(function(){var t=e.model,n=t.snapshotUrl,o=t.addonName,r=t.addonIcon;n||e.handleSnapshotLoad(),S.a.isMiniProgram&&(o||e.handleAddonNameLoad(),r||e.handleAddonIconLoad())})),m()(l()(e),"playStateSwapSlide",(function(){var t=e.model.miniAppRenderWhitelist,n=e.props.addon;S.a.isMiniProgram&&!Object(Y.d)(n.embedUrl,t)||(e.playSwapTimer=setTimeout((function(){var t=e.getStore().getState();e.props.slideIndex===t.control.currentPage&&e.iframeWrapperRef&&e.setModel({inCurrentSlide:!0,loadCover:!0})}),1e3))})),m()(l()(e),"onSlideIndexChange",(function(t){var n=Object(Y.c)(e.component);t===n?e.setModel({inCurrentSlide:!0,loadCover:!0}):t!==n&&!0===e.model.inCurrentSlide&&e.setModel({inCurrentSlide:!1})})),m()(l()(e),"handleMouseDown",(function(){if(S.a.isMobile||e.props.pointerEvents)return"";e.iframeWrapperRef&&(e.iframeWrapperRef.style.pointerEvents="none",e.model.needEvent=!1)})),m()(l()(e),"changeIframeEvent",(function(){if(e.props.pointerEvents)return"";e.iframeWrapperRef&&e.props.isSelected&&(e.iframeWrapperRef.style.pointerEvents="auto",e.model.needEvent=!0)})),m()(l()(e),"handleSnapshotLoad",(function(){var t=e.props.addon,n=t.originUrl,o=t.embedUrl,r=t.iframeId,i=t.extraData,a=Object(Y.e)({originUrl:n,embedUrl:o}),c=de.b.getInstance(),l={originUrl:n,embedUrl:o,iframeId:r,extraData:i},s=e.props.component.props.style,d=s.width,u=s.height;c.getScreenshotImage(l,a,d,u).then((function(t){var n;if("string"==typeof t)e.isMobileOrNotInWhitelist()?e.setModel({snapshotUrl:t,loadCover:!1}):e.setModel({snapshotUrl:t});else if((null==t||null===(n=t.data)||void 0===n?void 0:n.msg)!==de.a){var o;e.handleLoadError(null==t||null===(o=t.data)||void 0===o?void 0:o.msg)}})).catch((function(t){e.handleLoadError(t)}))})),m()(l()(e),"handleAddonNameLoad",(function(){var t=e.props.addon,n=t.iframeId,o=t.extraData;de.b.getInstance().getAddonName(n,o).then((function(t){"string"==typeof t&&e.setModel({addonName:t})})).catch((function(t){var n,o;e.setModel({loadCover:!1}),null===(n=window.log)||void 0===n||null===(o=n.error)||void 0===o||o.call(n,"load addon name error, msg: ".concat(t))}))})),m()(l()(e),"handleAddonIconLoad",(function(){var t=e.props.addon,n=t.iframeId,o=t.originUrl;de.b.getInstance().getIconOfAddonLink(n,o).then((function(t){"string"==typeof t&&e.setModel({addonIcon:t})})).catch((function(t){var n,o;e.setModel({loadCover:!1}),null===(n=window.log)||void 0===n||null===(o=n.error)||void 0===o||o.call(n,"load addon icon error, msg: ".concat(t))}))})),m()(l()(e),"judgeIsVideoType",(function(){var t=e.props.addon;de.b.getInstance().isVideoType(t,e.addonManager).then((function(t){e.setModel({isVideoType:t})}))})),m()(l()(e),"handleLoadError",(function(t){var n,o;e.setModel({loadCover:!1}),null===(n=window.log)||void 0===n||null===(o=n.error)||void 0===o||o.call(n,"load addon snapshot error, msg: ".concat(t))})),m()(l()(e),"handleMiniRenderPrepare",(function(){e.handleSnapshotLoad(),e.handleAddonNameLoad(),e.handleAddonIconLoad()})),e}return a()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.pointerEvents,n=this.model.miniAppRenderWhitelist;(t||(document.addEventListener("mousedown",this.handleMouseDown,!0),window.addEventListener("changeIframeEvent",this.changeIframeEvent)),S.a.isMiniProgram&&!n)?(this.handleMiniRenderPrepare(),de.b.getInstance().getMiniAppIframeWhiteList().then((function(t){e.setModel({miniAppRenderWhitelist:t})})).catch((function(e){var t,n;null===(t=window.log)||void 0===t||null===(n=t.error)||void 0===n||n.call(t,"load addon whitelist error, msg: ".concat(e))})).finally((function(){e.renderIframePrepare()}))):this.renderIframePrepare()}},{key:"componentWillUnmount",value:function(){var e,t;(this.props.pointerEvents||(document.removeEventListener("mousedown",this.handleMouseDown,!0),window.removeEventListener("changeIframeEvent",this.changeIframeEvent)),this.playSwapTimer&&clearTimeout(this.playSwapTimer),null===(e=this.addonManager)||void 0===e||e.event.off(ue.a.ADDON_HANDLER_IMPORT_READY,this.addonImportReadyCallback),S.a.isMobile)&&(null===(t=this.addonManager)||void 0===t||t.event.off(ue.a.ADDON_INFO_LOAD_READY,this.judgeIsVideoType))}},{key:"componentWillReceiveProps",value:function(e){var t=this;se()(e,"addon.embedUrl")!==se()(this.props,"addon.embedUrl")&&this.setModel({loadCover:!0,iframeSrc:Object(Y.b)(e)},(function(){t.props.isPlayState||(S.a.isMiniProgram?t.handleMiniRenderPrepare():t.handleSnapshotLoad())})),e.toScaleView!==this.props.toScaleView&&this.setModel({inCurrentSlide:!1,loadCover:!1})}},{key:"component",get:function(){return this.props.component}},{key:"iframeWrapperRef",get:function(){return this.getChildRef("iframeWrapperRef")}},{key:"addonManager",get:function(){return this.getAppServices().viewableServiceLayer.addonManager}},{key:"isMobileOrNotInWhitelist",value:function(){var e=this.model.miniAppRenderWhitelist,t=this.props.addon;return!!(S.a.isMobile||S.a.isMiniProgram&&!Object(Y.d)(t.embedUrl,e))}},{key:"registerNormalSwapReleaseMemory",value:function(){var e=this;this.isMobileOrNotInWhitelist()||(this.disposeOnUnmount(Object(N.r)((function(){var t;return null===(t=e.getSelectionService())||void 0===t?void 0:t.currentSlideIndex}),(function(t){e.onSlideIndexChange(t)}),{fireImmediately:!0})),this.disposeOnUnmount(Object(N.r)((function(){var t;return null===(t=e.getSelectionService())||void 0===t?void 0:t.slides}),(function(){if(e.getAppServices().viewableServiceLayer.slideRenderStateManager.isAllSlideConvertComplete){var t,n=null===(t=e.getSelectionService())||void 0===t?void 0:t.currentSlideIndex;e.onSlideIndexChange(n)}}))))}},{key:"getAppServices",value:function(){return G.a.getInstance().getAppServices()}},{key:"getSelectionService",value:function(){var e,t=G.a.getInstance().getAppServices();return null==t||null===(e=t.viewableServiceLayer)||void 0===e?void 0:e.selectionService}}]),n}(H.a),oe=z()(ne.prototype,"iframeLoadingEnd",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.setModel({loadCover:!1})}}}),re=z()(ne.prototype,"handleTouchStartNotEditMode",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n,o,r,i,a=e.model.miniAppRenderWhitelist,c=e.props.addon;null!==(n=(o=e.props).mobileEditMode)&&void 0!==n&&n.call(o)||e.model.inCurrentSlide||S.a.isMiniProgram&&!Object(Y.d)(c.embedUrl,a)||(null===(r=e.addonManager)||void 0===r||r.updateShapeModel(),e.setModel({inCurrentSlide:!0,loadCover:!0}),null===(i=e.addonManager)||void 0===i||i.savePrevShapeModel(e.props.component,e.handleViewChange),t.preventDefault())}}}),ne),he=function(){function e(){r()(this,e),m()(this,"loadCover",void 0),m()(this,"inCurrentSlide",void 0),m()(this,"needEvent",void 0),m()(this,"iframeSrc",void 0),m()(this,"snapshotUrl",void 0),m()(this,"isVideoType",void 0),m()(this,"addonName",void 0),m()(this,"addonIcon",void 0),m()(this,"miniAppRenderWhitelist",void 0),m()(this,"getInitLoadCover",(function(e){var t;return!(e.isPlayState&&S.a.isMiniProgram||null!==(t=e.mobileEditMode)&&void 0!==t&&t.call(e))}))}return a()(e,[{key:"initModel",value:function(e){this.loadCover=this.getInitLoadCover(e),this.inCurrentSlide=!1,this.needEvent=!1,this.iframeSrc=Object(Y.b)(e),this.snapshotUrl=null,this.isVideoType=!1,this.addonName=null,this.addonIcon=null,this.miniAppRenderWhitelist=null}}]),e}(),ve=n("0d31fb9b89");function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var ge=function(e){d()(n,e);var t=me(n);function n(){var e;r()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),m()(l()(e),"getMobileEditMode",(function(){return!!e.props.mobileEditMode&&!1===e.props.mobileEditMode()})),m()(l()(e),"getPointerEvents",(function(t,n,o){var r=t&&n||o?"auto":"none";return S.a.isMobile?"auto":e.props.pointerEvents?e.props.pointerEvents:r})),m()(l()(e),"showIframe",(function(e,t,n,o){var r=!S.a.isMobile||t||S.a.isMobile&&n;return S.a.isMiniProgram?e&&r&&o:e&&r})),e}return a()(n,[{key:"componentDidMount",value:function(){var e;this.props.isSelected&&ve.a.reportAddonIframeClick(null===(e=this.props.addon)||void 0===e?void 0:e.iframeId)}},{key:"render",value:function(){var e=this.props,t=e.size,n=e.addon,o=e.isSelected,r=e.isPlayState,i=e.loadCover,a=e.inCurrentSlide,c=e.needEvent,l=e.setRef,s=e.handleTouchStartNotEditMode,d=e.iframeLoadingEnd,u=e.component,p=e.iframeSrc,f=e.snapshotUrl,h=e.addonName,v=e.addonIcon,m=e.miniAppRenderWhitelist,g=e.isVideoType,y=Object(Y.d)(n.embedUrl,m),E=t.width,w=t.height,M=this.getMobileEditMode(),O=this.getPointerEvents(c,o,M),R=this.showIframe(a,r,M,y);return b.a.createElement("div",{style:{width:E,height:w,position:"absolute",top:0,left:0,pointerEvents:O},className:"iframe-wrapper",ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return l("iframeWrapperRef",e)})),onTouchStart:S.a.isMobile?s:void 0},R?b.a.createElement("iframe",{id:n.iframeId,src:p,onLoad:d,allowFullScreen:!0,style:{width:E,height:w,backgroundColor:"white",border:"1px solid rgba(0, 0, 0, 0.08)"},sandbox:"allow-scripts allow-same-origin allow-popups allow-orientation-lock"}):null,b.a.createElement(ie,{ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return l("scaleView",e)})),size:t,src:n.originUrl,snapshotUrl:f,addonName:h,addonIcon:v,isInIframeRenderWhiteList:y,miniAppRenderWhitelist:m,scaleViewHidden:R,mobileEditMode:M,index:r?void 0:Object(Y.c)(u),isPlayState:r,isVideoType:g,addon:n}),b.a.createElement(x,{loadCover:i}))}}]),n}(b.a.Component);m()(ge,"defaultProps",{setRef:function(){}});t.a=Object(y.a)(fe,he,ge)},"7ffe483a9d":function(e,t,n){(t=e.exports=n("9dddfe0040")(!1)).push([e.i,".index-connectedPoint-2ha_g,.index-lineEndPoint-2mWWd{background-color:#0188fb;height:10px;width:10px;border-radius:100%;border:1px solid #fff;box-shadow:0 7px 21px 0 rgba(0,0,0,.12)}",""]),t.locals={connectedPoint:"index-connectedPoint-2ha_g",lineEndPoint:"index-lineEndPoint-2mWWd"}},"8272fa7524":function(e,t,n){"use strict";n.d(t,"a",(function(){return qe}));n("73b854064b");var o,r,i,a,c,l,s,d,u,p,f,h,v,m,g,b,y,S,E,w,M,O,R,C,P,I,k,j,x,A,D,L,F,T,B,V,U,z,H,N,W,G,_,K,Y,X,q,J,Z,Q,$,ee,te,ne,oe=n("1f925d7f50"),re=n.n(oe),ie=n("9132715560"),ae=n.n(ie),ce=n("6a364eb35c"),le=n.n(ce),se=n("547611bd96"),de=n.n(se),ue=n("bd29e2df90"),pe=n.n(ue),fe=n("ab5eb40518"),he=n.n(fe),ve=n("1b4cdd6a36"),me=n.n(ve),ge=n("85d0a7609b"),be=n.n(ge),ye=n("2dc700e1e6"),Se=n.n(ye),Ee=(n("f1054791f4"),n("3bf1976a4f"),n("6c458f1652"),n("a2a09da1e3"),n("c6244f7705"),n("081c8cafea"),n("c554310b5c"),n("19a2c28eef")),we=n("9657b29818"),Me=n("d5c3deb8c7"),Oe=n("d9812f1c6f"),Re=n("0a8ecd6412"),Ce=n("d3d31c86eb"),Pe=n("9da6335152"),Ie=n("4b61a5df9d"),ke=n("718fea3387"),je=n("8f58e78419"),xe=n.n(je),Ae=n("db50d57b55"),De=n("f24deb6c72"),Le=n("c6c7cf6a47"),Fe=n("51b2ea9953"),Te=n("a63e675687"),Be=n("153bd00100"),Ve=n("54bdd803dc"),Ue=n.n(Ve),ze=n("b684da8955"),He=n("e5a826a0ff"),Ne=n("5cdbac46e8"),We=n("c9c92622ff"),Ge=n("f9193d718f"),_e=n("b34fb607c4"),Ke=n("59087c860a"),Ye=n("b55230b666");function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=me()(e);if(t){var r=me()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return he()(this,n)}}var qe=(o=Object(Ie.b)(),r=Object(Ie.b)(),i=Object(Ie.b)(),a=Object(Ie.b)(),c=Object(Ie.b)(),l=Object(Ie.b)(),s=Object(Ie.b)(),d=Object(Ie.b)(),u=Object(Ie.b)(),p=Object(Ie.b)(),f=Object(Ie.b)(),h=Object(Ie.b)(),v=Object(Ie.b)(),m=Object(Ie.b)(),g=Object(Ie.b)(),b=Object(Ie.b)(),y=Reflect.metadata("design:type",Function),S=Reflect.metadata("design:paramtypes",[]),E=Object(Ie.b)(),w=Object(Ie.b)(),M=Object(Ie.b)(),O=Object(Ie.b)(),R=Object(Ie.b)(),C=Object(Ie.b)(),P=Object(Ie.b)(),I=Reflect.metadata("design:type",Function),k=Reflect.metadata("design:paramtypes",[]),j=Object(Ie.b)(),x=Reflect.metadata("design:type",Function),A=Reflect.metadata("design:paramtypes",[]),D=Object(ke.a)(),L=function(e){pe()(n,e);var t=Xe(n);function n(){var e;ae()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),be()(de()(e),"mounted",void 0),be()(de()(e),"autoFocus",void 0),be()(de()(e),"isEditing",void 0),be()(de()(e),"selectElementChangeReaction",void 0),be()(de()(e),"savedStr",void 0),be()(de()(e),"size",void 0),be()(de()(e),"isSelecedWhenTouchStart",void 0),be()(de()(e),"borderMouseDown",void 0),be()(de()(e),"editorHeight",void 0),re()(de()(e),"handleClick",F,de()(e)),re()(de()(e),"handleDblClick",T,de()(e)),re()(de()(e),"handleElementTouchStart",B,de()(e)),re()(de()(e),"handleEditorMouseDown",V,de()(e)),re()(de()(e),"handleChange",U,de()(e)),re()(de()(e),"handleEditorStyleChange",z,de()(e)),re()(de()(e),"handlePlaceHolderClick",H,de()(e)),re()(de()(e),"handleEditorContentChange",N,de()(e)),re()(de()(e),"handleEditorOperation",W,de()(e)),re()(de()(e),"openMobileEditMode",G,de()(e)),re()(de()(e),"getLevelChangeLock",_,de()(e)),re()(de()(e),"handleExitEditing",K,de()(e)),re()(de()(e),"handleEnterEditing",Y,de()(e)),re()(de()(e),"handleMouseEnter",X,de()(e)),re()(de()(e),"handleMouseLeave",q,de()(e)),re()(de()(e),"setResizeValue",J,de()(e)),re()(de()(e),"isSelected",Z,de()(e)),re()(de()(e),"undoHandler",Q,de()(e)),re()(de()(e),"redoHandler",$,de()(e)),re()(de()(e),"handleTextChange",ee,de()(e)),re()(de()(e),"onAttachmentFirstShow",te,de()(e)),re()(de()(e),"getCloneDom",ne,de()(e)),be()(de()(e),"handleShapeLinkFlagClick",(function(){var t;if((null===(t=e.component)||void 0===t?void 0:t.currentEditState)!==Ne.b.EDITABLE){var n,o=null===(n=e.component)||void 0===n?void 0:n.props.link;if(xe()(e.props,"component.props.addon"))return;var r,i,a=o?o.href:null;if(a?e.getLinkManager().getLinkUrlWithData(a):void 0)null===(r=e.getMenuManager())||void 0===r||r.event.emit(Ke.a.LINK_CLICK,null===(i=e.component)||void 0===i?void 0:i.key)}})),be()(de()(e),"initFocus",(function(){var t,n;null!==(t=e.component)&&void 0!==t&&t.initFocus&&!e.props.fromScale&&(e.triggerFocus(),null!==(n=e.component)&&void 0!==n&&n.initFocus&&(e.component.initFocus=!1))})),be()(de()(e),"triggerFocus",(function(){e.props.editable&&e.enterEditor(),e.showNotEditTips()})),be()(de()(e),"enterEditor",(function(t,n){e.isEditing||(e.reportAfterEnterTextEditor(),e.isEditing=!0,e.makeElementSelected(t,"placeholder"===n),e.setModel({editorFocus:!0},(function(){var t;Oe.a.isMobile?null===(t=e.getChildRef("editor"))||void 0===t||t.setFocus():setTimeout((function(){var t;return null===(t=e.getChildRef("editor"))||void 0===t?void 0:t.setFocus()}),0)})))})),be()(de()(e),"reportAfterEnterTextEditor",(function(){var t=!1;Object(ze.a)(e.component,(function(){return t=!0,!0})),t?Object(Ce.c)({opername:Pe.e.DOC_PPT,module:Pe.d.PC_OBJ,action:Pe.b.EDIT_SHAP_TEXT}):Object(Ce.c)({opername:Pe.e.DOC_PPT,module:Oe.a.isMobile?Pe.d.M_SHAPE_EDIT:Pe.d.PC_OBJ,action:Oe.a.isMobile?Pe.b.M_EDIT_EDIT:Pe.b.EDIT_TEXT})})),be()(de()(e),"makeElementSelected",(function(t,n){var o,r,i;null===(o=Ge.a.getInstance().getAppServices().editableServiceLayer)||void 0===o||null===(r=o.selectedAnims)||void 0===r||r.clear();var a=null;Object(ze.a)(e.component,(function(e){a=e}));var c=null===(i=e.getSelectionService())||void 0===i?void 0:i.selectedElements.selectedArrayForType(He.a.SLIDE);Me.w((function(){Object(_e.a)(t)?null===a?e.addSelectElement():a.selected?e.addWithElementSelected(c,a):e.clearAndAddGroupSelected(a):e.setElementSelected(a,n)}))})),be()(de()(e),"addSelectElement",(function(){var t,n;(null===(t=e.getSelectionService())||void 0===t||t.selectedElements.clear(He.a.GROUP),e.component.selectable&&!e.component.selected)&&(null===(n=e.getSelectionService())||void 0===n||n.selectedElements.add(e.component));e.triggerEditorBlur()})),be()(de()(e),"addWithElementSelected",(function(t,n){if(1===t.length){var o,r,i;if(null!==(o=e.component)&&void 0!==o&&o.selectable&&(null===(r=e.component)||void 0===r||!r.selected))null===(i=e.getSelectionService())||void 0===i||i.selectedElements.add(e.component);e.triggerEditorBlur()}else{var a;null===(a=e.getSelectionService())||void 0===a||a.selectedElements.remove(n),e.triggerEditorBlur()}})),be()(de()(e),"clearAndAddGroupSelected",(function(t){var n,o;null===(n=e.getSelectionService())||void 0===n||n.selectedElements.clear(He.a.GROUP);var r,i=null===(o=e.getSelectionService())||void 0===o?void 0:o.selectedElements.selectedArrayForType(He.a.SLIDE);t&&-1===(null==i?void 0:i.indexOf(t))&&(null===(r=e.getSelectionService())||void 0===r||r.selectedElements.add(t));e.triggerEditorBlur()})),be()(de()(e),"triggerEditorBlur",(function(){setTimeout((function(){var t;null===(t=e.getChildRef("editor"))||void 0===t||t.triggerBlur()}))})),be()(de()(e),"showNotEditTips",(function(t){e.getUserPriviledgeService().pptEditorState>Ne.b.EDITABLE&&(Ge.a.getInstance().getAppServices().viewableServiceLayer.tipsManager.showCannotEditTips(),null==t||t())})),be()(de()(e),"handleElementFocus",(function(){e.component&&e.getChildRef("editor")&&!e.getChildRef("editor").isEditing&&(e.component.selectionStyles=e.getChildRef("editor").getAllStyles())})),be()(de()(e),"handleElementBlur",(function(){e.component&&(e.component.selectionStyles=null),e.handleEditorBlur({needUpd8:!0})})),be()(de()(e),"handleEditorBlur",(function(){var t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).needUpd8,o=void 0!==n&&n;null===(t=e.getChildRef("editor"))||void 0===t||t.triggerBlur({needUpd8:e.props.editable&&o}),e.setModel({editorFocus:!1,mobileEditingTriggerFlag:!1}),e.isEditing=!1})),be()(de()(e),"setElementSelected",(function(t,n){var o,r,i,a,c,l=null===(o=e.component)||void 0===o?void 0:o.selected;null===(r=e.getSelectionService())||void 0===r||r.selectedElements.clear(),null===(i=e.getSelectionService())||void 0===i||i.selectedElements.add(e.component);var s,d=(null===(a=e.getSelectionService())||void 0===a?void 0:a.selectedElements.selectedArrayForType(He.a.SLIDE))||[];t&&-1===d.indexOf(t)&&(null===(s=e.getSelectionService())||void 0===s||s.selectedElements.add(t));if(null!==(c=e.component)&&void 0!==c&&c.selectable&&!l&&!n){var u=!1;Object(ze.a)(e.component,(function(){return u=!0,!0})),u||Object(Ce.c)({opername:Pe.e.DOC_PPT,module:Pe.d.PC_OBJ,action:Pe.b.CLK_EDIT})}})),be()(de()(e),"updateElementFocus",(function(){var t,n;e.component&&(e.component.editorComponent=e.getChildRef("editor"),null===(t=e.component.getMenuManager())||void 0===t||t.event.emit(Ye.a.REFRESH_MENU_ITEM_VALUES),null===(n=e.component.getMenuManager())||void 0===n||n.event.emit(Ye.a.REFRESH_GROUP_ITEM_VALUES));e.autoFocus&&requestAnimationFrame((function(){return requestAnimationFrame(e.initFocus)})),e.selectElementChangeReaction=Me.r((function(){var t;return{selectedArray:null===(t=e.getSelectionService())||void 0===t?void 0:t.selectedElements.selectedArray}}),(function(t){var n,o,r;e.mounted&&(null===(n=t.selectedArray)||void 0===n?void 0:n.length)>1&&null!==(o=e.component)&&void 0!==o&&o.selected&&null!==(r=e.getChildRef("editor"))&&void 0!==r&&r.isEditing&&e.getChildRef("editor").triggerBlur({needUpd8:!0})}))})),be()(de()(e),"handleEnterEmptyPlaceholder",(function(t){var n;t.detail.key===(null===(n=e.component)||void 0===n?void 0:n.key)&&e.handlePlaceHolderClick(Ae.a.BLANK,t)})),e}return le()(n,[{key:"init",value:function(e){var t,n;this.mounted=!1,this.autoFocus=!Oe.a.isMobile,this.size={width:null===(t=e.component)||void 0===t?void 0:t.props.style.width,height:null===(n=e.component)||void 0===n?void 0:n.props.style.height}}},{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,this.props.fromScale||this.updateElementFocus(),this.disposeOnUnmount(Me.r((function(){var t;return{selected:null===(t=e.component)||void 0===t?void 0:t.selected}}),(function(t){t.selected?e.handleElementFocus():e.handleElementBlur()}))),this.disposeOnUnmount(Me.r((function(){return e.getEditingStateManager().isResizing}),(function(t){t||(e.model.setResize=!0)})))}},{key:"componentWillReceiveProps",value:function(e){var t=e.component.props.style,n=t.width,o=t.height,r=t.controlValues;this.size.width===n&&this.size.height===o||(this.size.width=n,this.size.height=o,this.model.setResize=!0);var i=(null==r?void 0:r.length)>0?r:this.component.pathParser.getDefaultControlValues();Ue()(i,this.component.pathParser.controlValues)||(this.component.pathParser.updateControlValues(i),this.model.setResize=!0),e.component.undoRedo&&(this.model.setResize=!0)}},{key:"componentWillUpdate",value:function(e,t){}},{key:"componentDidUpdate",value:function(){var e=this;if(!this.props.fromScale){var t,n,o,r;if(this.component)this.component.editorComponent=this.getChildRef("editor"),this.component.editorEnterFocus&&this.autoFocus&&(this.component.editorEnterFocus=!1,this.model.editorFocus=!0,setTimeout((function(){var t;return null===(t=e.getChildRef("editor"))||void 0===t?void 0:t.setFocus()}),0)),null===(o=this.component.getMenuManager())||void 0===o||o.event.emit(Ye.a.REFRESH_MENU_ITEM_VALUES),null===(r=this.component.getMenuManager())||void 0===r||r.event.emit(Ye.a.REFRESH_GROUP_ITEM_VALUES);null===(t=(n=this.props).onElementUpdate)||void 0===t||t.call(n)}var i=this.component.props.style,a=i.width,c=i.height,l=i.controlValues,s=i.bgShape;this.component.pathParser.update({type:s,controlValues:l,width:a,height:c})}},{key:"componentWillUnmount",value:function(){var e;if(this.mounted=!1,this.isEditing){var t,n=this.component;null!=n&&null!==(t=n.soruceRefForUI)&&void 0!==t&&t.childUiModelFromId(n.id)&&this.handleElementBlur()}null===(e=this.selectElementChangeReaction)||void 0===e||e.call(this)}},{key:"getLinkData",value:function(){var e,t=null===(e=this.component)||void 0===e?void 0:e.props;return Object(We.o)(this.component)?{href:{url:t.addon.originUrl},addon:t.addon}:t.link}},{key:"getMediaManager",value:function(){return Ge.a.getInstance().getAppServices().viewableServiceLayer.mediaManager}},{key:"getMenuManager",value:function(){var e;return null===(e=Ge.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.menuManager}},{key:"getDisplayStyle",value:function(e,t,n){var o,r,i=Object(Be.b)(n),a=Object(Be.a)(n);i?(o=e,r=t):(o=t,r=e);var c=Object(De.b)(this.component,this.component.pathParser,this.component.props.style),l=r;return{displayInlineSize:o?Le.a.getInstance().getDisplayInlineSize(this.component,o,c,null,n):this.component.props.style[a.inlineSize],displayBlockSize:l}}},{key:"component",get:function(){return this.props.component}},{key:"shouldChangeEditorFocus",value:function(){var e;return this.model.editorFocus&&this.component.isPlaceholder&&!(null!==(e=this.getChildRef("editor"))&&void 0!==e&&e.isNotChangeToLite())}},{key:"getSelectionService",value:function(){var e,t=Ge.a.getInstance().getAppServices();return null==t||null===(e=t.viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getTextEditorStateService",value:function(){return Ge.a.getInstance().getAppServices().viewableServiceLayer.textEditorStateService}},{key:"getUserPriviledgeService",value:function(){return Ge.a.getInstance().getAppServices().viewableServiceLayer.userPriviledgeService}},{key:"getEditingStateManager",value:function(){return Ge.a.getInstance().getAppServices().viewableServiceLayer.editingStateManager}},{key:"getSearchReplaceManager",value:function(){var e,t;return null===(e=Ge.a.getInstance().getAppServices().editableServiceLayer)||void 0===e||null===(t=e.searchReplaceManager)||void 0===t?void 0:t.dangerousInstance}},{key:"getUndoRedoService",value:function(){var e;return null===(e=Ge.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.undoRedoService}},{key:"getLinkManager",value:function(){return Ge.a.getInstance().getAppServices().viewableServiceLayer.linkManager}}]),n}(Ee.a),F=Se()(L.prototype,"handleClick",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;if(Oe.a.isMobile&&e.isSelecedWhenTouchStart&&!e.isEditing&&!e.borderMouseDown)return e.handleDblClick(t),e.borderMouseDown=!1,void(e.isSelecedWhenTouchStart=!1);e.borderMouseDown=!1,e.isSelecedWhenTouchStart=!1,null===(n=e.getChildRef("editor"))||void 0===n||n.triggerBlur({needUpd8:e.props.editable}),e.model.isPlaceHolder&&!Oe.a.isMobile||(e.setModel({editorFocus:!1,mobileEditingTriggerFlag:!1}),e.isEditing=!1,e.handleShapeLinkFlagClick())}}}),T=Se()(L.prototype,"handleDblClick",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.props.editable&&(null==t||t.stopPropagation(),e.enterEditor(t)),e.showNotEditTips((function(){null==t||t.stopPropagation()}))}}}),B=Se()(L.prototype,"handleElementTouchStart",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;e.isSelecedWhenTouchStart=null===(t=e.component)||void 0===t?void 0:t.selected}}}),V=Se()(L.prototype,"handleEditorMouseDown",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;e.props.editorMouseDown&&e.props.editorMouseDown(),e.isEditing||(!1===e.isEditing&&e.reportAfterEnterTextEditor(),Oe.a.isMobile||(e.isEditing=!0),e.makeElementSelected(t),Oe.a.isMobile&&null!==(n=e.component)&&void 0!==n&&n.selected&&e.showNotEditTips())}}}),U=Se()(L.prototype,"handleChange",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){Object(we.b)((function(){var n,o=t.paragraphList,r=t.textBodyStyle,i=t.height,a=t.width;if(Object(Te.b)(e.component,{textBodyStyle:r,paragraphList:o}),null===(n=e.component)||void 0===n||n.updateParagraphList(o,r),(null==r?void 0:r.autoFitType)===Fe.a.SHAPE_AUTO_FIT){var c,l=null==r||null===(c=r.wrapperStyle)||void 0===c?void 0:c.textDirection,s=e.getDisplayStyle(i,a,l),d=s.displayInlineSize,u=s.displayBlockSize;Le.a.getInstance().updateShapeStyle(e.component,u,d)}}))}}}),z=Se()(L.prototype,"handleEditorStyleChange",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{style:void 0}).style;!e.props.fromScale&&e.component&&(e.component.selectionStyles=t)}}}),H=Se()(L.prototype,"handlePlaceHolderClick",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){var o;switch(t){case Ae.a.PIC:case Ae.a.TBL:null===(o=e.getSelectionService())||void 0===o||o.selectedElements.clear(),e.makeElementSelected(n);break;case Ae.a.TXT:case Ae.a.BLANK:e.enterEditor(n,"placeholder")}}}}),N=Se()(L.prototype,"handleEditorContentChange",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.getTextEditorStateService().editorContentChangeFlag+=1}}}),W=Se()(L.prototype,"handleEditorOperation",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){requestAnimationFrame((function(){var t,n=null===(t=e.getChildRef("editor"))||void 0===t?void 0:t.getTextAreaHeightSync();(n||e.editorHeight)&&n!==e.editorHeight&&(e.editorHeight=n,window.dispatchEvent(new Event("PPT-resize")))}))}}}),G=Se()(L.prototype,"openMobileEditMode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.setModel({mobileEditingTriggerFlag:!0},(function(){null==t||t()}))}}}),_=Se()(L.prototype,"getLevelChangeLock",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n;if(!e.model.isPlaceHolder)return!1;var o=null===(t=e.component)||void 0===t||null===(n=t.placeHolder)||void 0===n?void 0:n.type;return o===Ae.a.TITLE||o===Ae.a.CTRTITLE}}}),K=Se()(L.prototype,"handleExitEditing",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n;Oe.a.isMobile&&(e.getTextEditorStateService().isSlateEditing=!1,null===(t=window)||void 0===t||null===(n=t.log)||void 0===n||n.info("handleExitEditing scroll screen"));e.isEditing=!1,e.shouldChangeEditorFocus()&&Promise.resolve().then((function(){return e.setModel({editorFocus:!1})})),window.dispatchEvent(new Event("exitEditing")),e.savedStr="",e.component.state.dataChanged=!0}}}),Y=Se()(L.prototype,"handleEnterEditing",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n,o,r;(null===(t=window)||void 0===t||null===(n=t.log)||void 0===n||n.info("enter editing"),null===(o=e.getSearchReplaceManager())||void 0===o||o.exitSearching(),Oe.a.isMobile&&(e.getTextEditorStateService().isSlateEditing=!0),e.isEditing=!0,window.dispatchEvent(new Event("enterEditing")),e.savedStr)&&(null===(r=e.getChildRef("editor"))||void 0===r||r.insertTextEnd(e.savedStr),e.savedStr="")}}}),X=Se()(L.prototype,"handleMouseEnter",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n;null!==(t=e.component)&&void 0!==t&&t.selected&&(null===(n=e.getMenuManager())||void 0===n||n.event.emit(Ke.a.ENTER_ELEMENT,e.component.key))}}}),q=Se()(L.prototype,"handleMouseLeave",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n;null!==(t=e.component)&&void 0!==t&&t.selected&&(null===(n=e.getMenuManager())||void 0===n||n.event.emit(Ke.a.LEAVE_ELEMENT,e.component.key))}}}),Se()(L.prototype,"getLinkData",[b,y,S],Object.getOwnPropertyDescriptor(L.prototype,"getLinkData"),L.prototype),J=Se()(L.prototype,"setResizeValue",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.model.setResize=t}}}),Z=Se()(L.prototype,"isSelected",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;return t.selected&&1===(null===(n=e.getSelectionService())||void 0===n?void 0:n.selectedElements.length)}}}),Q=Se()(L.prototype,"undoHandler",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;null===(t=e.getUndoRedoService())||void 0===t||t.undo()}}}),$=Se()(L.prototype,"redoHandler",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;null===(t=e.getUndoRedoService())||void 0===t||t.redo()}}}),ee=Se()(L.prototype,"handleTextChange",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n,o,r,i,a,c=t.height,l=t.width,s=t.text;if((null===(n=e.component)||void 0===n||null===(o=n.textBodyStyle)||void 0===o?void 0:o.autoFitType)===Fe.a.SHAPE_AUTO_FIT){var d=null===(r=e.component)||void 0===r||null===(i=r.textBodyStyle)||void 0===i||null===(a=i.wrapperStyle)||void 0===a?void 0:a.textDirection,u=e.getDisplayStyle(c,l,d),p=u.displayInlineSize,f=u.displayBlockSize;Le.a.getInstance().updateShapeStyleForUI(e.component,f,p),window.dispatchEvent(new CustomEvent(Re.u,{detail:{text:s}}))}}}}),te=Se()(L.prototype,"onAttachmentFirstShow",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.component&&(e.component.isAttachmentShown=!0,e.component.state.dataChanged=!0)}}}),Se()(L.prototype,"getMediaManager",[P,I,k],Object.getOwnPropertyDescriptor(L.prototype,"getMediaManager"),L.prototype),Se()(L.prototype,"getMenuManager",[j,x,A],Object.getOwnPropertyDescriptor(L.prototype,"getMenuManager"),L.prototype),ne=Se()(L.prototype,"getCloneDom",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=null;return e.getChildRef("backgroundContainerRef")&&(t=e.getChildRef("backgroundContainerRef").cloneNode(!1)).appendChild(e.getChildRef("backgroundContainerRef").getCloneDom()),[t,e.getChildRef("editorWrapper").cloneNode(!0)]}}}),L)},"87095489cf":function(e,t,n){"use strict";n("73b854064b");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("bd29e2df90"),l=n.n(c),s=n("ab5eb40518"),d=n.n(s),u=n("1b4cdd6a36"),p=n.n(u),f=n("85d0a7609b"),h=n.n(f),v=n("69084d01d3"),m=n.n(v),g=n("7a8d465f10"),b=n("f1f2954cff"),y=n.n(b);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=p()(e);if(t){var r=p()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return d()(this,n)}}var E=function(e){l()(n,e);var t=S(n);function n(){return r()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){return m.a.createElement(g.a,{element:this.props.element,historyManager:this.props.historyManager})}}]),n}(v.Component);h()(E,"propTypes",{element:y.a.object.isRequired,historyManager:y.a.object.isRequired}),t.a=E},"928f7ed9ea":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("85d0a7609b"),l=n.n(c),s=n("8f58e78419"),d=n.n(s),u=n("bd5de260ae"),p=n("e0e8dd9366"),f=n("d3d31c86eb"),h=n("9da6335152");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(){function e(){r()(this,e),l()(this,"isPlaceHolder",void 0),l()(this,"editorFocus",void 0),l()(this,"setResize",void 0),l()(this,"datetime",void 0)}return a()(e,[{key:"initModel",value:function(e){var t,n,o,r,i=e.component;this.isPlaceHolder=null==i?void 0:i.isPlaceholder,this.datetime=d()(i,"initDatetime"),this.editorFocus=!1,this.setResize=!1;var a=null==i||null===(t=i.props)||void 0===t?void 0:t.attachment,c=(null==i||null===(n=i.parent)||void 0===n?void 0:n.type)===p.d.GROUP,l=null===(o=window)||void 0===o||null===(r=o.clientVars)||void 0===r?void 0:r.padId;if(a){var s={opername:h.e.DOC_PPT,module:h.d.PC_EDIT,ver6:l};c&&!window.attachmentGroupReported&&(window.attachmentGroupReported=!0,Object(f.c)(m(m({},s),{},{action:h.b.FILE_GROUP_SHOW})),Object(u.a)("slide-attachment-group",0)),window.attachmentNormalReported||(window.attachmentNormalReported=!0,Object(f.c)(m(m({},s),{},{action:h.b.FILE_SHOW})),Object(u.a)("slide-attachment-all",0))}}}]),e}()},a7c89792ad:function(e,t,n){"use strict";n("73b854064b");var o,r,i,a=n("9132715560"),c=n.n(a),l=n("6a364eb35c"),s=n.n(l),d=n("547611bd96"),u=n.n(d),p=n("bd29e2df90"),f=n.n(p),h=n("ab5eb40518"),v=n.n(h),m=n("1b4cdd6a36"),g=n.n(m),b=n("85d0a7609b"),y=n.n(b),S=(n("3bf1976a4f"),n("c6244f7705"),n("bd80bf2d0f"),n("69084d01d3")),E=n.n(S),w=n("15985515f8"),M=(n("963f2eaace"),n("78380fc918")),O=n("dc68b581cd"),R=n("8f58e78419"),C=n.n(R),P=n("c73625d763"),I=n.n(P),k=function(){function e(){c()(this,e),y()(this,"headDefsId",void 0),y()(this,"tailDefsId",void 0),y()(this,"strokeInfo",void 0),y()(this,"lineInfo",void 0)}return s()(e,[{key:"initModel",value:function(e){this.headDefsId="".concat(e.lineKey,"_head"),this.tailDefsId="".concat(e.lineKey,"_tail"),this.strokeInfo=new M.a(e.minStrokeWidth),this.getLineInfo(e)}},{key:"getLineInfo",value:function(e){var t=Object(O.b)(C()(e.model,"bgLine"));this.lineInfo=t&&new t,I()(e.model,"controlValues")&&e.model.controlValues&&e.model.controlValues.length>0?this.lineInfo.controlValues=e.model.controlValues.slice():this.lineInfo.controlValues=this.lineInfo.defaultValue.controlValues.slice()}}]),e}(),j=n("1f925d7f50"),x=n.n(j),A=n("2dc700e1e6"),D=n.n(A),L=(n("f1054791f4"),n("19a2c28eef")),F=n("718fea3387"),T=n("7f4ec20337");function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return v()(this,n)}}var V=(o=Object(F.a)(),r=function(e){f()(n,e);var t=B(n);function n(){var e;c()(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),x()(u()(e),"getCloneDom",i,u()(e)),e}return s()(n,[{key:"componentWillReceiveProps",value:function(e){C()(this.props.model,"bgLine")!==C()(e.model,"bgLine")&&this.resetInfo(e),I()(e.model,"controlValues")&&e.model.controlValues&&e.model.controlValues.length>0?this.checkControlValuesSame(e.model.controlValues,this.props.model.controlValues)||(this.model.lineInfo.controlValues=e.model.controlValues.slice()):this.model.lineInfo.controlValues=this.model.lineInfo.defaultValue.controlValues.slice()}},{key:"componentWillUnmount",value:function(){this.model.lineInfo&&(this.model.lineInfo=null),this.model.strokeInfo&&(this.model.strokeInfo=null)}},{key:"checkControlValuesSame",value:function(e,t){if(e&&t&&e.length&&t.length&&e.length===t.length){for(var n=!0,o=0;o<e.length;o++)if(e[o]!==t[o]){n=!1;break}return n}return!1}},{key:"resetInfo",value:function(e){var t=Object(O.b)(C()(e.model,"bgLine"));this.model.lineInfo=t&&new t}}]),n}(L.a),i=D()(r.prototype,"getCloneDom",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.getChildRef("domRef").cloneNode(!0);return Object(T.a)(t,e.props.model.patternIdMaps),t}}}),r),U=n("7cebb8ae41"),z=n("3344f1a2e7"),H=n("59ab3b0c6a"),N=(n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36"),n("7e66e19183"));function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return v()(this,n)}}var K=function(e){f()(n,e);var t=_(n);function n(){var e;c()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),y()(u()(e),"svgRef",void 0),e}return s()(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.style,r=void 0===o?{}:o,i=t.containerCls,a=t.svgStyle,c=void 0===a?{}:a;return E.a.createElement(N.a,{type:"div",id:n,style:r,className:i},E.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",pointerEvents:"none",style:G(G({},c),{},{left:0,top:0,overflow:"visible"}),ref:function(t){e.svgRef=t}},this.props.children))}}]),n}(E.a.Component);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=g()(e);if(t){var r=g()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return v()(this,n)}}var X=function(e){f()(n,e);var t=Y(n);function n(){var e;c()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),y()(u()(e),"renderTail",(function(t,n){return U.c.renderEnd(t,n,e.props.tailDefsId,C()(e.props.model,"border.tailEnd"))})),y()(u()(e),"renderHead",(function(t,n){return U.c.renderEnd(t,n,e.props.headDefsId,C()(e.props.model,"border.headEnd"))})),y()(u()(e),"renderDefs",(function(t){var n=e.compatableWidth();return E.a.createElement("defs",null,e.renderHead(n,t),e.renderTail(n,t))})),y()(u()(e),"getEndInfo",(function(){var t=e.compatableWidth(),n=null,o=null;if(C()(e.props.model,"border.headEnd.lineEndType")){var r=e.props.model.border.headEnd,i=r.lineEndType,a=r.lengthType;n=U.c.endWidthOfLineWidth(i,a,t)}if(C()(e.props.model,"border.tailEnd.lineEndType")){var c=e.props.model.border.tailEnd,l=c.lineEndType,s=c.lengthType;o=U.c.endWidthOfLineWidth(l,s,t)}return{head:n,tail:o}})),y()(u()(e),"compatableWidth",(function(){var t=Object(z.C)(e.getScaleNum()),n=e.props.strokeInfo.getStrokeData(e.props.model).strokeWidth;return t>1&&(t=1),n<2*Object(z.C)(t)?2*Object(z.C)(t):n})),e}return s()(n,[{key:"render",value:function(){var e=this.props,t=e.setRef,n=e.strokeInfo,o=e.headDefsId,r=e.tailDefsId,i=e.lineInfo,a=this.props.model,c=n.getStrokeData(this.props.model),l=i.getControlValues(),s=i.svgPathInRect(0,0,a.width,a.height,l,this.getEndInfo()),d=this.props.cursor?this.props.cursor:this.props.editable?"move":"auto",u=this.props.pointerEvents?this.props.pointerEvents:"auto";return E.a.createElement(K,{svgStyle:{position:"absolute"},ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return t("domRef",e)}))},E.a.createElement("g",null,this.renderDefs(c),E.a.createElement("path",{width:a.width,height:a.height,stroke:c.strokeColor,strokeOpacity:c.opacity,strokeWidth:c.strokeWidth,strokeDasharray:c.dashArray,strokeLinejoin:c.lineJoin,strokeLinecap:c.lineCap,fill:"none",d:s,markerStart:I()(this.props.model,"border.headEnd.lineEndType")?"url(#".concat(o,")"):void 0,markerEnd:I()(this.props.model,"border.tailEnd.lineEndType")?"url(#".concat(r,")"):void 0,pointerEvents:u,className:H.a[d]}),E.a.createElement("path",{width:a.width,height:a.height,stroke:"transparent",strokeWidth:c.strokeWidth+10/this.getScaleNum(),fill:"none",d:s,markerStart:I()(this.props.model,"border.headEndType")?"url(#".concat(o,")"):void 0,markerEnd:I()(this.props.model,"border.tailEndType")?"url(#".concat(r,")"):void 0,onMouseDown:this.props.onLineMouseDown,onTouchStart:this.props.onLineTouchStart,onDoubleClick:this.props.onLineDoubleClick,pointerEvents:u,className:H.a[d]})))}},{key:"getScaleNum",value:function(){return I()(this,"props.scale")?this.props.scale:1}}]),n}(E.a.Component);y()(X,"defaultProps",{setRef:function(){}});t.a=Object(w.a)(V,k,X)},a8cf9ed49b:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Pe}));n("73b854064b");var o,r,i,a=n("9132715560"),c=n.n(a),l=n("6a364eb35c"),s=n.n(l),d=n("bd29e2df90"),u=n.n(d),p=n("ab5eb40518"),f=n.n(p),h=n("1b4cdd6a36"),v=n.n(h),m=n("85d0a7609b"),g=n.n(m),b=n("69084d01d3"),y=n.n(b),S=n("14502724a6"),E=n.n(S),w=n("547611bd96"),M=n.n(w),O=(n("3bf1976a4f"),n("6e20b6a7d8"),n("22569efd03"),n("5a5c6d313d")),R=n("e5a826a0ff"),C=(n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("bcb5d93d36"),n("730477bb20")),P=n.n(C),I=(n("af802ec74b"),n("8ee19818c4"),n("342844cefa"),n("6715f30ed9")),k=n("fdd99ef675"),j=n("7d52e7e74a"),x=n("e0e8dd9366"),A=n("5cdbac46e8"),D=n("d1f05b304b"),L=n("f9193d718f"),F=n("d45ef7b026");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var U,z,H,N=Object(O.b)((i=r=function(e){u()(n,e);var t=V(n);function n(){var e;c()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),g()(M()(e),"updateComponent",(function(){e.forceUpdate()})),e}return s()(n,[{key:"componentDidMount",value:function(){var e=D.a.createObserver(this.props.element);e&&(e.addLocalChangeObserver(this.updateComponent),e.addChangesetObserver(this.updateComponent))}},{key:"componentWillUnmount",value:function(){var e=D.a.createObserver(this.props.element);e&&(e.removeLocalChangeObserver(this.updateComponent),e.removeChangesetObserver(this.updateComponent))}},{key:"render",value:function(){var e,t,n=this.props.element,o=I.a.frameInfoForOuter(n,!1),r=Object(k.a)(n.type),i=this.getRootGroupFrame(n);o=this.getOuterFrameInfo(n,o),o=this.canvasRectFloor(o),o=this.resizeFHSizeWithScale(o),i=this.canvasRectFloor(i),i=this.resizeFHSizeWithScale(i);var a=this.getEditable(),c=null!==(e=null===(t=this.getRotateElementHandler())||void 0===t?void 0:t.isMobileRotatingMode)&&void 0!==e&&e,l=this.context.editingStateManager,s=l.isResizing,d=l.isDragging,u=l.isRotating,p=l.isCroping,f=l.isConnecting,h=l.isControlValuesChanging,v=this.isPreview(),m=a&&!s&&!d&&!p,g=this.getSelectable(n);return y.a.createElement("div",{style:B(B(B({},o),i),{},{position:"absolute",pointerEvents:"none",transform:I.a.transformForOuter(n),zIndex:10}),id:"selected-element-outer"},r&&y.a.createElement(r,P()({},this.props,{element:this.props.element,selectedElementInGroupInMobile:!!this.props.selectedElementInGroupInMobile,isRotating:u,isDragging:d,isResizing:s,isConnecting:f,isMobileRotatingMode:c,isCroping:p,isPreview:!!v,editable:a,isSelected:!0,selectable:g,canBeConnected:a&&n.type!==x.d.GROUP,showSelectBorder:n.type!==x.d.CONNECTOR,borderDraggable:g&&!p,canRotate:m,isControlValuesChanging:h,resizeVertical:a&&!d,resizeHorizontal:a&&!d,draggable:a&&!p})))}},{key:"getSelectable",value:function(e){var t=e.selectable&&e.currentEditState<=A.b.SELECTABLE;return e.isPlaceholder&&!e.isCustomPlaceholder&&e.currentEditState>A.b.EDITABLE&&(t=!1),t}},{key:"isRootGroup",value:function(e){return e.type===x.d.GROUP&&e.isRootGroup}},{key:"isPreview",value:function(){var e;return null===(e=this.getPreviewService())||void 0===e?void 0:e.isPreview}},{key:"getEditable",value:function(){return this.getUserPriviledgeService().pptEditorState===A.b.EDITABLE}},{key:"getOuterFrameInfo",value:function(e,t){var n;e.type===x.d.TABLE&&(this.context.editingStateManager.isResizing&&(t=null===(n=e.getFrame)||void 0===n?void 0:n.call(e).getFrameInfo(!1)));return t}},{key:"getRootGroupFrame",value:function(e){var t={};if(this.isRootGroup(e)){var n,o=null===(n=e.getFrame)||void 0===n?void 0:n.call(e).getFrameInfo(!!e.operationFrame);t={left:o.left-j.a,top:o.top-j.a,width:o.width+2*j.a,height:o.height+2*j.a}}return t}},{key:"canvasRectFloor",value:function(e){return["top","left"].forEach((function(t){null!=e&&e[t]&&(e[t]=Math.floor(e[t]))})),e}},{key:"resizeFHSizeWithScale",value:function(e){var t=this,n=Object.assign({},e);return Object.keys(e).forEach((function(o){n[o]=e[o]*t.props.scale})),n}},{key:"getUserPriviledgeService",value:function(){return L.a.getInstance().getAppServices().viewableServiceLayer.userPriviledgeService}},{key:"getPreviewService",value:function(){var e;return null===(e=L.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.previewService}},{key:"getRotateElementHandler",value:function(){var e;return null===(e=L.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.rotateElementHandler}}]),n}(b.Component),g()(r,"contextType",F.a),o=i))||o,W=N,G=n("509a56a298");function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var K=Object(O.b)((H=z=function(e){u()(n,e);var t=_(n);function n(){var e;c()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),g()(M()(e),"selectedElementsInGroup",void 0),g()(M()(e),"sortedElementsOnSlide",void 0),g()(M()(e),"selectedElementsOnSlide",void 0),e}return s()(n,[{key:"render",value:function(){var e,t,n,o,r=this;if(null===(e=this.getSelectionService())||void 0===e||!e.currentSlide)return null;this.getIsOperation()||this.getSortElement();var i=(null===(t=this.selectedElementsInGroup)||void 0===t?void 0:t.length)>0;return y.a.createElement(y.a.Fragment,null,null===(n=this.sortedElementsOnSlide)||void 0===n?void 0:n.map((function(e){return y.a.createElement(W,{element:e,key:"edit-selected-".concat(e.key),scale:r.props.scale,selectedElementInGroupInMobile:i})})),null===(o=this.selectedElementsInGroup)||void 0===o?void 0:o.map((function(e){return y.a.createElement(W,{element:e,key:"edit-selected-".concat(e.key),scale:r.props.scale})})))}},{key:"getSortElement",value:function(){var e,t,n;this.selectedElementsOnSlide=null===(e=this.getSelectionService())||void 0===e?void 0:e.selectedElements.selectedArrayForType(R.a.SLIDE),this.sortedElementsOnSlide=this.getSelectionService().selectedSlides.sortSelectedArray(null===(t=this.getSelectionService())||void 0===t?void 0:t.currentSlide,this.selectedElementsOnSlide),this.selectedElementsInGroup=null===(n=this.getSelectionService())||void 0===n?void 0:n.selectedElements.selectedArrayForType(R.a.GROUP),this.setRegionRefreshElement()}},{key:"setRegionRefreshElement",value:function(){var e,t=null===(e=this.getSelectionService())||void 0===e?void 0:e.currentSlide,n=this.sortedElementsOnSlide.length;if((null==t?void 0:t.children.length)&&n){var o=t.children,r=E()(this.sortedElementsOnSlide,1)[0],i=this.sortedElementsOnSlide[n-1],a=o.findIndex((function(e){return e===r})),c=o.findIndex((function(e){return e===i}));c=-1===c?a:c,G.a.getInstance().canvasOperationInfo.startIndex=a,G.a.getInstance().canvasOperationInfo.endIndex=c}else G.a.getInstance().canvasOperationInfo.startIndex=0,G.a.getInstance().canvasOperationInfo.endIndex=0}},{key:"getIsOperation",value:function(){return this.context.editingStateManager.isDragging||this.context.editingStateManager.isResizing||this.context.editingStateManager.isRotating}},{key:"getSelectionService",value:function(){var e;return null===(e=L.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}}]),n}(b.Component),g()(z,"contextType",F.a),U=H))||U,Y=K,X=n("176815363d"),q=n.n(X),J=n("3ef2352f0b"),Z=n.n(J),Q=(n("c6244f7705"),n("081c8cafea"),n("c3f32a62eb")),$=(n("963f2eaace"),n("dc68b581cd")),ee=n("78380fc918"),te=n("c73625d763"),ne=n.n(te),oe=n("8f58e78419"),re=n.n(oe);function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var ae=function(e){u()(n,e);var t=ie(n);function n(e){var o;return c()(this,n),o=t.call(this,e),g()(M()(o),"strokeInfo",void 0),g()(M()(o),"lineInfo",void 0),o.strokeInfo=new ee.a,o}return s()(n,[{key:"componentWillMount",value:function(){this.resetInfo(this.props),ne()(this.props.model,"controlValues")&&this.props.model.controlValues&&this.props.model.controlValues.length>0?this.lineInfo.controlValues=this.props.model.controlValues.slice():this.lineInfo.controlValues=this.lineInfo.defaultValue.controlValues.slice()}},{key:"componentWillUnmount",value:function(){this.lineInfo&&(this.lineInfo=null)}},{key:"componentWillReceiveProps",value:function(e){re()(this.props.model,"bgLine")!==re()(e.model,"bgLine")&&this.resetInfo(e),ne()(e.model,"controlValues")&&e.model.controlValues&&e.model.controlValues.length>0?this.checkControlValuesSame(e.model.controlValues,this.props.model.controlValues)||(this.lineInfo.controlValues=e.model.controlValues.slice()):this.lineInfo.controlValues=this.lineInfo.defaultValue.controlValues.slice()}},{key:"resetInfo",value:function(e){var t=Object($.b)(re()(e.model,"bgLine"));t&&(this.lineInfo=new t)}},{key:"checkControlValuesSame",value:function(e,t){if(e&&t&&e.length&&t.length&&e.length===t.length){for(var n=!0,o=0;o<e.length;o++)if(e[o]!==t[o]){n=!1;break}return!!n}return!1}},{key:"render",value:function(){var e=this.props,t=e.strokeColor,n=e.strokeOpacity,o=this.props.model,r=this.strokeInfo.getStrokeData(this.props.model),i=this.lineInfo.getControlValues(),a=this.lineInfo.svgPathInRect(0,0,o.width,o.height,i,{head:0,tail:0});return y.a.createElement("div",null,y.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{left:0,top:0,position:"absolute",overflow:"visible",pointerEvents:"none"}},y.a.createElement("g",null,y.a.createElement("path",{width:o.width,height:o.height,stroke:t,strokeOpacity:n,strokeWidth:(r.strokeWidth+4)*this.props.scale,strokeLinejoin:"round",fill:"none",d:a,pointerEvents:"none"}))))}}]),n}(b.Component),ce=n("0e0be5791f"),le=n.n(ce),se=n("730207179f"),de=n("8f6e67dde4"),ue=n("d9812f1c6f"),pe=n("d5c3deb8c7");function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var me=function(e){u()(n,e);var t=ve(n);function n(e,o){var r;return c()(this,n),r=t.call(this,e,o),g()(M()(r),"instance",void 0),g()(M()(r),"handleMouseMove",function(){var e=q()(Z.a.mark((function e(t){var n,o,i,a,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.clientX,a=t.clientY,e.next=3,null===(o=r.instance)||void 0===o?void 0:o.promise();case 3:if(e.t1=n=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===n;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=n.elementsWithCursors;case 12:if(0!==(null==(c=e.t2)?void 0:c.length)){e.next=15;break}return e.abrupt("return",null);case 15:null==c||c.forEach((function(e){var t=document.querySelector(".cursor-border-".concat(e.id));if(t){var n=t.getBoundingClientRect(),o=n.top,r=n.left,c=n.width,l=n.height;i>=r&&i<=r+c&&a>=o&&a<=o+l||(t.style.pointerEvents="auto")}}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g()(M()(r),"handleMouseEnter",function(){var e=q()(Z.a.mark((function e(t,n){var o,i;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=document.querySelector(".cursor-border-".concat(n)))&&(i.style.pointerEvents="none"),null===(o=r.context.cursorManager)||void 0===o||o.promise().then((function(e){return e.showCursorTagForElement(t)}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g()(M()(r),"handleMouseLeave",function(){var e=q()(Z.a.mark((function e(t){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(n=r.context.cursorManager)||void 0===n||n.promise().then((function(e){return e.hideCursorTagForElement(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g()(M()(r),"getRootGroup",(function(e){for(var t=e.parent;t&&!r.isRootGroup(t);)t=t.parent;return t})),g()(M()(r),"getCoopCursorBorder",(function(e){var t=e.element,n=t.props.style,o=n.width,i=n.height,a={width:o,height:i};return r.isRootGroup(t)&&(a.width=o+2*j.a,a.height=i+2*j.a),y.a.createElement(Q.a,{size:a,scale:r.props.scale,color:e.cursor[0].color,shouldRoundSize:t.type===x.d.SHAPE||t.type===x.d.IMAGE})})),g()(M()(r),"getSelectGraphicLine",(function(e,t){return y.a.createElement(ae,{model:he(he({},le()(Object(se.c)(e.element.props.style),"width","height")),{},{width:t.width,height:t.height,points:e.element.props.points}),strokeColor:e.cursor[0].color,strokeOpacity:.7,scale:r.props.scale})})),g()(M()(r),"renderCursorBorder",(function(e){var t,n=e.element;if(null===(t=r.state.cursorManager)||void 0===t||!t.isElementInSlide(n))return null;var o,i,a=I.a.frameInfoForOuter(n,!0),c=r.isRootGroup(n),l={};n.type===x.d.TABLE&&(null!==(o=r.context.editingStateManager)&&void 0!==o&&o.isResizing&&(a=null===(i=n.getFrame)||void 0===i?void 0:i.call(n).getFrameInfo(!1)));var s=I.a.transformForOuter(n,!1);if(n.type===x.d.CONNECTOR&&(s=de.g(a)),c){var d,u=null===(d=n.getFrame)||void 0===d?void 0:d.call(n).getFrameInfo(!!n.operationFrame);l={left:u.left-j.a,top:u.top-j.a,width:u.width+2*j.a,height:u.height+2*j.a},Object.assign(a,l)}var p=ue.a.isMobile?"none":"auto",f={width:a.width*r.props.scale,height:a.height*r.props.scale,left:a.left*r.props.scale,top:a.top*r.props.scale};return n.selected?null:y.a.createElement("div",{className:"cursor-border-".concat(e.id),key:e.id,style:he(he({},f),{},{position:"absolute",transform:s,pointerEvents:p}),onMouseEnter:function(){return r.handleMouseEnter(e.element,e.id)},onMouseLeave:function(){return r.handleMouseLeave(e.element)}},e.element.type===x.d.CONNECTOR?r.getSelectGraphicLine(e,f):r.getCoopCursorBorder(e))})),r.state={cursorManager:void 0},r.instance=r.context.cursorManager,r}return s()(n,[{key:"componentDidMount",value:function(){var e,t=this;document.addEventListener("mousemove",this.handleMouseMove),null===(e=this.instance)||void 0===e||e.promise().then((function(e){t.setState({cursorManager:e}),Object(O.a)(t,Object(pe.r)((function(){return e.elementsWithCursors.length}),(function(){t.setState({})})))}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove)}},{key:"isRootGroup",value:function(e){return e.type===x.d.GROUP&&e.isRootGroup}},{key:"render",value:function(){var e,t=this,n=null===(e=this.state.cursorManager)||void 0===e?void 0:e.elementsWithCursors;return 0===(null==n?void 0:n.length)?null:y.a.createElement(y.a.Fragment,null,null==n?void 0:n.map((function(e){return t.renderCursorBorder(e)})))}}]),n}(b.Component);g()(me,"contextType",F.a);var ge=n("bd86570a95"),be=n("4da3d8149c");function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var we=function(e){u()(n,e);var t=Ee(n);function n(){var e;c()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),g()(M()(e),"renderCanBeConnectedElement",(function(t){var n,o=t,r=null===(n=o.getFrame)||void 0===n?void 0:n.call(o).frameOnSlide();return y.a.createElement("div",{key:t.id,style:Se(Se({},r),{},{left:r.left*e.props.scale,top:r.top*e.props.scale,height:r.height*e.props.scale,width:r.width*e.props.scale,position:"absolute",pointerEvents:"none",transform:Object(de.g)(r),zIndex:1})},y.a.createElement(be.a,{styleModel:o.props.style,component:o,scale:e.props.scale,pathParser:o.pathParser,needAdsorbTip:!0,editingStateManager:e.getEditingStateManager()}))})),e}return s()(n,[{key:"componentDidMount",value:function(){var e=this;Object(O.a)(this,Object(pe.r)((function(){var t;return[e.getEditingStateManager().isConnecting,null===(t=e.getSelectionService())||void 0===t?void 0:t.currentSlide,e.getEditingStateManager().readyToConnect,e.getEditingStateManager().isResizing,e.getEditingStateManager().isDraggingElement,e.getEditingStateManager().isRotating]}),(function(){e.elements=e.canBeConnectedElements()||[],e.setState({})})))}},{key:"render",value:function(){var e;return this.getEditingStateManager().readyToConnect&&null!==(e=this.elements)&&void 0!==e&&e.length?y.a.createElement(y.a.Fragment,null,this.elements.map(this.renderCanBeConnectedElement)):null}}]),n}(ge.a),Me=n("bece1304c7"),Oe=n("74b3712a62"),Re=n("ffcade8893");function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Pe=function(e){u()(n,e);var t=Ce(n);function n(){return c()(this,n),t.apply(this,arguments)}return s()(n,[{key:"shouldComponentUpdate",value:function(e){return e.scale!==this.props.scale}},{key:"render",value:function(){return y.a.createElement("div",{id:"edit-panel",style:{width:"100%",height:"100%",position:"absolute",zIndex:1,pointerEvents:"none"}},y.a.createElement(Y,{scale:this.props.scale}),y.a.createElement(we,{scale:this.props.scale}),y.a.createElement(me,{scale:this.props.scale}),y.a.createElement(Me.a,null,y.a.createElement(b.Suspense,{fallback:y.a.createElement("div",null)},y.a.createElement(Oe.a,{scale:{frameScale:this.props.scale,graphicScale:1},snapLineService:this.context.snapLineService,styleSheet:Re.a}))))}}]),n}(y.a.Component);g()(Pe,"contextType",F.a)},b9ceb520f5:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("547611bd96"),l=n.n(c),s=n("bd29e2df90"),d=n.n(s),u=n("ab5eb40518"),p=n.n(u),f=n("1b4cdd6a36"),h=n.n(f),v=n("85d0a7609b"),m=n.n(v),g=(n("8e7cce0ada"),n("c6244f7705"),n("081c8cafea"),n("85d48ef22b"),n("2a6f332b5e"),n("73b854064b"),n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36"),n("69084d01d3")),b=n.n(g),y=n("f1f2954cff"),S=n.n(y),E=n("d5c3deb8c7"),w=n("5a5c6d313d"),M=n("0e0be5791f"),O=n.n(M),R=n("8f6e67dde4"),C=n("6ef6f43e2c"),P=n("730207179f"),I=n("d9812f1c6f"),k=n("0cbec907c5"),j=n("fed003a03b"),x=n("5289f5df90"),A=(n("679a12aae4"),n("bece1304c7")),D=n("2ccd0799eb"),L=n("862b984676"),F=n("f8fc8e0087"),T=n("0a8ecd6412"),B=n("d5ebb100c8"),V=n("c9c92622ff"),U=n("f9193d718f"),z=n("b684da8955");function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var G=Object(g.lazy)((function(){return Promise.all([n.e("async~493df0b3"),n.e("async~c5b24172"),n.e("async~0d51b00e"),n.e("async~beecf843"),n.e("async~2e2c6527"),n.e("async~da8db81f"),n.e("async~e10030d6"),n.e("async~098dcb65"),n.e("async~d0c14fe8"),n.e("async~7f8bedbf"),n.e("async~f40490b4"),n.e("async~2158e36e"),n.e("async~76acd586"),n.e("async~37d786cf"),n.e("async~30ccc425"),n.e("async~0c7d7381"),n.e("async~907e9098"),n.e("async~43172549"),n.e("async~f19eb79b"),n.e("async~95108331"),n.e("async~718865d2"),n.e("async~89b7a519")]).then(n.bind(null,"e9c8bffd6c"))})),_=function(e){d()(n,e);var t=W(n);function n(e){var o;return r()(this,n),o=t.call(this,e),m()(l()(o),"handlerClick",(function(e,t){var n=l()(o),r=n.props,i=n.context.store;Object(V.b)(null==r?void 0:r.uiModel)&&(e.stopPropagation(),e.preventDefault()),t&&(e.stopPropagation(),o.getLinkManager().openLinkInPlay(i,t)),r.handlerIaClick(e,i,r)})),m()(l()(o),"handlerIaTouch",(function(e){return o.props.handlerIaTouch(e,o.context.store,o.props)})),m()(l()(o),"handlerTouch",(function(e,t){t?e.stopPropagation():o.handlerIaTouch(e)})),m()(l()(o),"renderForeground",(function(e,t,n,r,i,a){var c=N(N({},O()(Object(P.c)(o.props.style),"width","height","border")),e),l={src:o.props.audio?k.a:t,width:n,height:r,pl:i,pt:a,alpha:o.props.style.alpha};return c.fillBackground={image:l},o.props.syncLoad&&(l.syncLoad=!0),b.a.createElement("div",null,b.a.createElement(C.a,{model:c,cursor:"inherit",playGif:!0,imageBorderOutside:!0,style:{position:"absolute"},original:!0,mkey:"".concat(Object(x.a)(o.props.modelKey),"foreground")}))})),m()(l()(o),"renderAttachmentImage",(function(e){var t=e.props.attachment;return b.a.createElement(B.a,{attachment:t,uiModel:e,isPlayMode:!0})})),m()(l()(o),"isCursor",(function(e){return e||o.isInteractiveAnimTrigger()||o.props.audio&&!I.a.isMobile})),o.state={widthScale:1,heightScale:1},o}return a()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.getMediaManager();t&&(Object(w.a)(this,Object(E.r)((function(){var n;return t.playerAnimationFinishedGif.has(null===(n=e.props.uiModel)||void 0===n?void 0:n.key)}),(function(){e.forceUpdate()}))),Object(w.a)(this,Object(E.r)((function(){return t.notifyGifScaleUpdate}),(function(t){var n=t.key,o=t.widthScale,r=t.heightScale;n===e.props.uiModel.key&&e.setState({widthScale:o,heightScale:r})}))),Object(w.a)(this,Object(E.r)((function(){return t.shouldShowMediaElement(e.props.uiModel.key,L.a.PLAYER)}),(function(){e.forceUpdate()}))))}},{key:"render",value:function(){var e,t,n=this,o=this.props,r=o.src,i=o.uiModel,a=this.props.style,c=a.width,l=a.height;c*=this.state.widthScale,l*=this.state.heightScale;var s,d,u=0,p=0,f=0,h=0,v=this.props.style.srcRect,m=void 0===v?{l:0,r:0,b:0,t:0}:v;s=c+(u=c*m.l/(1-m.l-m.r))+(p=c*m.r/(1-m.l-m.r)),d=l+(f=l*m.t/(1-m.t-m.b))+(h=l*m.b/(1-m.t-m.b)),u="".concat(-u,"px"),p="".concat(-p,"px"),f="".concat(-f,"px"),h="".concat(-h,"px");var y={width:c,height:l},S=this.props.video||this.props.audio?N(N({},this.props.style),{},{flipH:void 0,flipV:void 0}):this.props.style,E=R.e(S,this.props.animStyle),w=this.props.getLinkInfo(this.props),M=w.href,I=w.tooltip,j=this.shouldDomRender(i),D={top:this.props.style.top-(this.props.style.height*this.state.heightScale-this.props.style.height)/2,left:this.props.style.left-(this.props.style.width*this.state.widthScale-this.props.style.width)/2},B=N(N(N({},this.props.animStyle),{},{position:"absolute"},D),{},{width:c,height:l,transform:E,display:j?"flex":"none",cursor:this.isCursor(M)?"pointer":"inherit"}),U={width:c,height:l,bgShape:this.props.style.bgShape},z=Object(V.w)(i),H=(null===(e=i.props)||void 0===e||null===(t=e.attachment)||void 0===t?void 0:t.classify)===k.b.IMAGE,W=!z&&!H;return b.a.createElement("div",{onClick:function(e){return n.handlerClick(e,M)},onTouchStart:function(e){return n.handlerTouch(e,M)},onTouchEnd:function(e){return n.handlerTouch(e,M)},style:B,className:this.props.className?this.props.className:"",title:I},W&&b.a.createElement(b.a.Fragment,null,b.a.createElement(C.a,{model:N(N({},O()(Object(P.c)(this.props.style),"width","height")),y),cursor:"inherit",playGif:!0,imageBorderOutside:!0,original:!0,mkey:Object(x.a)(this.props.modelKey)}),this.renderForeground(y,r,s,d,u,f)),z&&b.a.createElement(A.a,null,b.a.createElement(g.Suspense,{fallback:b.a.createElement("div",null)},b.a.createElement(G,{video:this.props.video,audio:this.props.audio,playerScale:this.context.store.getState().control.scale,isDemonstrating:!0,imgSrc:r,elementSize:y,uiModel:i,mediaManager:this.getMediaManager(),region:L.a.PLAYER,isContainerDisplay:j,srcRect:this.props.style.srcRect,bgShapeOptions:U,isMemoWindow:Object(F.getQuery)("isSubsidiary")===T.h}))),H&&this.renderAttachmentImage(i))}},{key:"isInteractiveAnimTrigger",value:function(){return this.props.isInteractiveAnimTrigger(this.context.store,this.props)}},{key:"shouldDomRender",value:function(e){var t=this.getMediaManager();if(Object(V.G)(e)||Object(V.f)(e))return t.shouldShowMediaElement(e.key,L.a.PLAYER);var n=this.props.imageType===D.a.GIF,o=this.checkHasAnimation(e),r=t.shouldPlayerRenderDomGif(e.key),i=n&&(!o||o&&r)&&1!==e.hidden,a=this.props.attachment,c=Object(V.b)(e);return i||a||c}},{key:"checkHasAnimation",value:function(e){var t=e.slideRef,n=Object(j.b)(e.id,t);return Object(z.a)(e,(function(e){return n=n||Object(j.b)(e.id,t)})),n}},{key:"getMediaManager",value:function(){var e;return null===(e=U.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.mediaManager}},{key:"getLinkManager",value:function(){return U.a.getInstance().getAppServices().viewableServiceLayer.linkManager}}]),n}(g.Component);m()(_,"contextTypes",{store:S.a.object})},bc5b172cb4:function(e,t,n){"use strict";n.d(t,"a",(function(){return $e}));n("73b854064b"),n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36");var o,r,i,a,c,l,s,d,u,p,f,h,v,m,g,b,y=n("9132715560"),S=n.n(y),E=n("6a364eb35c"),w=n.n(E),M=n("547611bd96"),O=n.n(M),R=n("bd29e2df90"),C=n.n(R),P=n("ab5eb40518"),I=n.n(P),k=n("1b4cdd6a36"),j=n.n(k),x=n("85d0a7609b"),A=n.n(x),D=(n("8e7cce0ada"),n("c6244f7705"),n("081c8cafea"),n("85d48ef22b"),n("2a6f332b5e"),n("3bf1976a4f"),n("bd80bf2d0f"),n("6c458f1652"),n("69084d01d3")),L=n.n(D),F=n("d5c3deb8c7"),T=n("5a5c6d313d"),B=n("15985515f8"),V=n("1f925d7f50"),U=n.n(V),z=n("2dc700e1e6"),H=n.n(z),N=(n("f1054791f4"),n("a2a09da1e3"),n("19a2c28eef")),W=n("718fea3387"),G=n("4b61a5df9d"),_=n("5cdbac46e8"),K=n("f9193d718f"),Y=n("1acc787c14"),X=n("59087c860a");function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I()(this,n)}}var J=(o=Object(G.b)(),r=Object(G.b)(),i=Object(G.b)(),a=Object(G.b)(),c=Object(G.b)(),l=Object(W.a)(),s=Object(G.b)(),d=Reflect.metadata("design:type",Function),u=Reflect.metadata("design:paramtypes",[]),p=function(e){C()(n,e);var t=q(n);function n(){var e;S()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),U()(O()(e),"handleMouseEnter",f,O()(e)),U()(O()(e),"handleMouseLeave",h,O()(e)),U()(O()(e),"handleDblClick",v,O()(e)),U()(O()(e),"handleClick",m,O()(e)),U()(O()(e),"handleTouchStart",g,O()(e)),U()(O()(e),"getCloneDom",b,O()(e)),A()(O()(e),"hideMediaElement",(function(){e.setModel({shouldRenderMedia:!1})})),e}return w()(n,[{key:"componentDidUpdate",value:function(){var e,t;this.props.fromScale||(null===(e=(t=this.props).onElementUpdate)||void 0===e||e.call(t))}},{key:"componentWillUpdate",value:function(e,t){t.isEditMode=this.getAppServices().viewableServiceLayer.mediaManager.isEditMode}},{key:"getMediaManager",value:function(){return K.a.getInstance().getAppServices().viewableServiceLayer.mediaManager}},{key:"getAppServices",value:function(){return K.a.getInstance().getAppServices()}},{key:"getUserPriviledgeService",value:function(){return this.getAppServices().viewableServiceLayer.userPriviledgeService}}]),n}(N.a),f=H()(p.prototype,"handleMouseEnter",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;e.props.component.selected&&(null===(t=e.getAppServices().editableServiceLayer)||void 0===t||t.menuManager.event.emit(X.a.ENTER_ELEMENT,e.props.component.key))}}}),h=H()(p.prototype,"handleMouseLeave",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t;e.props.component.selected&&(null===(t=e.getAppServices().editableServiceLayer)||void 0===t||t.menuManager.event.emit(X.a.LEAVE_ELEMENT,e.props.component.key))}}}),v=H()(p.prototype,"handleDblClick",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){if(e.getUserPriviledgeService().pptEditorState===_.b.EDITABLE){var n,o;null==t||t.stopPropagation();var r=e.props.component.props.addon||{},i=r.type,a=r.aid,c=e.getAppServices().viewableServiceLayer.addonManager,l=(null==c||null===(n=c.addonHandler)||void 0===n||null===(o=n.addonQuickItemsMap)||void 0===o?void 0:o.get(a))||["editAddon"];if("latex"===i&&l&&-1!==l.indexOf("editAddon")){var s,d;if(e.getAppServices().getEntryType()===Y.a.PC_EDIT)null===(d=e.getAppServices().editableServiceLayer)||void 0===d||d.rightSideBarManager.setIsPropertyEditorShown(!1);null===(s=e.getAppServices().editableServiceLayer)||void 0===s||s.menuManager.actionReplaceLatex()}else{var u;if(e.getAppServices().getEntryType()===Y.a.PC_EDIT)null===(u=e.getAppServices().editableServiceLayer)||void 0===u||u.rightSideBarManager.setIsPropertyEditorShown(!0)}e.getAppServices().viewableServiceLayer.rightSideBarService.hide()}else e.getAppServices().viewableServiceLayer.tipsManager.showCannotEditTips()}}}),m=H()(p.prototype,"handleClick",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.props.component;if(t.currentEditState!==_.b.EDITABLE){var n,o=t.props.link,r=o?o.href:null;if(r?e.getAppServices().viewableServiceLayer.linkManager.getLinkUrlWithData(r):void 0)null===(n=e.getAppServices().editableServiceLayer)||void 0===n||n.menuManager.event.emit(X.a.LINK_CLICK,t.key)}}}}),g=H()(p.prototype,"handleTouchStart",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){}}}),b=H()(p.prototype,"getCloneDom",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=e.getChildRef("elementContainerRef").cloneNode(!1);return t.appendChild(e.getChildRef("backgroundRef").getCloneDom()),t.appendChild(e.getChildRef("foregroundRef").getCloneDom()),[t]}}}),H()(p.prototype,"getMediaManager",[s,d,u],Object.getOwnPropertyDescriptor(p.prototype,"getMediaManager"),p.prototype),p),Z=n("0e0be5791f"),Q=n.n(Z),$=n("6ef6f43e2c"),ee=n("8f6e67dde4"),te=n("730207179f"),ne=n("cfc0866db4"),oe=n("ea568781b0"),re=n("d9812f1c6f"),ie=n("c9c92622ff"),ae=function(){function e(){S()(this,e),A()(this,"isEditMode",void 0),A()(this,"shouldRenderMedia",void 0)}return w()(e,[{key:"initModel",value:function(e){this.isEditMode=this.getMediaManager().isEditMode,this.shouldRenderMedia=!(re.a.isMobile&&!this.getMediaManager().isEditMode&&!Object(ie.f)(e.component))}},{key:"getMediaManager",value:function(){return K.a.getInstance().getAppServices().viewableServiceLayer.mediaManager}}]),e}(),ce=n("7e66e19183"),le=n("0cbec907c5"),se=(n("679a12aae4"),n("bece1304c7")),de=n("d5ebb100c8"),ue=n("862b984676"),pe=n("0a8ecd6412");function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I()(this,n)}}var me=Object(D.lazy)((function(){return Promise.all([n.e("async~493df0b3"),n.e("async~c5b24172"),n.e("async~0d51b00e"),n.e("async~beecf843"),n.e("async~2e2c6527"),n.e("async~da8db81f"),n.e("async~e10030d6"),n.e("async~098dcb65"),n.e("async~d0c14fe8"),n.e("async~7f8bedbf"),n.e("async~f40490b4"),n.e("async~2158e36e"),n.e("async~76acd586"),n.e("async~37d786cf"),n.e("async~30ccc425"),n.e("async~0c7d7381"),n.e("async~907e9098"),n.e("async~43172549"),n.e("async~f19eb79b"),n.e("async~95108331"),n.e("async~718865d2"),n.e("async~89b7a519")]).then(n.bind(null,"e9c8bffd6c"))})),ge=function(e){C()(n,e);var t=ve(n);function n(){var e;S()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),A()(O()(e),"getMediaRegion",(function(){return e.isInMobileSlideList()?ue.a.MOBILE_PREVIEW:ue.a.EDITOR})),A()(O()(e),"containerType",(function(){return"div"})),A()(O()(e),"renderAttachmentImage",(function(){var t=e.props.component.props.attachment;return L.a.createElement(de.a,{attachment:t,uiModel:e.props.component})})),A()(O()(e),"renderMediaEle",(function(t,n,o,r){var i=e.props,a=i.component,c=i.getPageScale;return L.a.createElement(se.a,null,L.a.createElement(D.Suspense,{fallback:L.a.createElement("div",null)},L.a.createElement(me,{video:a.video,videoPoster:a.videoPoster,audio:a.audio,selected:a.selected,imgSrc:a.props.src,isInMobileSlideList:e.isInMobileSlideList(),uiModel:a,pageScale:c(),elementSize:t,mediaManager:e.props.getMediaManager(),region:e.getMediaRegion(),isContainerDisplay:n,srcRect:o,bgShapeOptions:r})))})),A()(O()(e),"isNeedShowMediaEle",(function(){var t=e.props,n=t.component;return!(t.serverRender||!n.video&&!n.audio)})),A()(O()(e),"isInMobileSlideList",(function(){return e.props.region===pe.s.MOBILEBROWSE})),A()(O()(e),"generateImageSource",(function(){var t=e.props.component;return Object(ie.G)(t)?t.videoPoster:t.props.src})),A()(O()(e),"renderForeground",(function(t,n,o,r,i,a,c,l){var s=e.props,d=s.component,u=s.rotate,p=s.setRef,f=s.onElementUpdate,h=s.isCroping,v=s.relativeRotate,m=s.relativeFlipH,g=s.relativeFlipV,b=s.isPreview,y=he(he(he({},Q()(Object(te.c)(d.props.style),"width","height","border")),t),{},{rotate:u}),S={src:d.audio?le.a:n,backupSrc:c,imageType:l,width:o,height:r,pl:i,pt:a,alpha:d.props.style.alpha,isForeground:!0},E={image:S};y.fillBackground=E,d.props.syncLoad&&(S.syncLoad=!0);var w=d.props,M=d.operatingGraphicInfo?d.operatingGraphicInfo.controlValues:w.style.controlValues;return y.controlValues=M,L.a.createElement($.a,{ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return p("foregroundRef",e)})),className:h?"areaUnDisplay":"",model:y,editable:e.getEditable(),relativeRotate:v,relativeFlipH:m,relativeFlipV:g,pointerEvents:h||!d.selectable?"none":null,onImgLoaded:f,isPreview:b,style:{position:"absolute"},mkey:"".concat(d.key,"foreground")})})),e}return w()(n,[{key:"componentDidMount",value:function(){var e,t,n=this,o=null===(e=this.props.component)||void 0===e?void 0:e.getMediaManager(),r=null===(t=this.props.component)||void 0===t?void 0:t.key;o&&r&&(Object(T.a)(this,Object(F.r)((function(){return o.shouldRenderDomGif(r)}),(function(){n.forceUpdate()}))),Object(T.a)(this,Object(F.r)((function(){return o.shouldShowMediaElement(r,n.getMediaRegion())}),(function(){n.forceUpdate()}))))}},{key:"render",value:function(){var e,t,n=this.props,o=n.component,r=n.rect,i=n.isCroping,a=n.handleDblClick,c=n.handleMouseEnter,l=n.handleMouseLeave,s=n.handleClick,d=n.getPageScale,u=n.rotate,p=n.fromScale,f=n.relativeRotate,h=n.relativeFlipH,v=n.relativeFlipV,m=n.editable,g=n.onElementUpdate,b=n.handleTouchStart,y=n.setRef,S=o.props,E=r?r.width:S.style.width,w=r?r.height:S.style.height,M=null!=r&&r.srcRect?r.srcRect:S.style.srcRect,O=o.props,R=(O.src,O.backupSrc),C=O.imageType,P=this.props.getMediaManager(),I=0,k=0,j=0,x=0,A=0,D=0;A=E+(I=E*M.l/(1-M.l-M.r))+(k=E*M.r/(1-M.l-M.r)),D=w+(j=w*M.t/(1-M.t-M.b))+(x=w*M.b/(1-M.t-M.b)),isNaN(A)&&(A=0),isNaN(D)&&(D=0),I="".concat(-I,"px"),k="".concat(-k,"px"),j="".concat(-j,"px"),x="".concat(-x,"px");var F=Object(oe.a)(r,S),T=F.size,B=F.flip,V={width:E,height:w,bgShape:S.style.bgShape},U=o.operatingGraphicInfo?o.operatingGraphicInfo.controlValues:S.style.controlValues,z=((Object(ie.G)(o)||Object(ie.f)(o))&&(null==P?void 0:P.shouldShowMediaElement(o.key,this.getMediaRegion()))||Object(ie.l)(o)&&(null==P?void 0:P.shouldRenderDomGif(o.key))||this.isInMobileSlideList()||Object(ie.b)(o))&&1!==o.hidden,H=this.isNeedShowMediaEle(),N=(null===(e=o.props)||void 0===e||null===(t=e.attachment)||void 0===t?void 0:t.classify)===le.b.IMAGE,W=!H&&!N;return L.a.createElement(ce.a,{type:this.containerType(),style:{display:z?"block":"none",pointerEvents:Object(ie.b)(o)&&o.selected&&!this.getEditingStateManager().isDragging||this.isInMobileSlideList()?"auto":"none"}},L.a.createElement(ce.a,{type:this.containerType(),style:{transformOrigin:null,transform:ee.d(B),width:T.width,height:T.height,display:"flex",WebkitTapHighlightColor:"rgba(0,0,0,0)"},onDoubleClick:i?null:a,ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y("elementContainerRef",e)})),onMouseEnter:c,onMouseLeave:l,onTouchStart:b,onClick:s},W&&L.a.createElement(L.a.Fragment,null,L.a.createElement($.a,{ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return y("backgroundRef",e)})),model:he(he(he({},Q()(Object(te.c)(o.props.style),"width","height")),T),{},{rotate:u,controlValues:U}),scale:d(),editable:this.getEditable(),relativeRotate:f,relativeFlipH:h,relativeFlipV:v,selected:o.selected,imageBorderOutside:!0,onImgLoaded:g,mkey:o.key}),this.renderForeground(T,this.generateImageSource(),A,D,I,j,R,C))),0===p?L.a.createElement(ne.a,{editable:m,data:o.props.link,mkey:o.key,selected:o.selected}):null,H&&this.renderMediaEle(T,z,M,V),N&&this.renderAttachmentImage())}},{key:"getEditable",value:function(){var e=this.props,t=e.isCroping,n=e.editable;return!re.a.isMobile&&!t&&n}},{key:"getEditingStateManager",value:function(){return K.a.getInstance().getAppServices().viewableServiceLayer.editingStateManager}}]),n}(L.a.Component);A()(ge,"displayName","ImageElement"),A()(ge,"defaultProps",{setRef:function(){},handleClick:function(){},handleDblClick:function(){},handleMouseEnter:function(){},handleMouseLeave:function(){},handleTouchStart:function(){}});var be=Object(B.a)(J,ae,ge),ye=n("ffc220634f"),Se=n("7ea87243fd"),Ee=n("928f7ed9ea"),we=n("8272fa7524");function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I()(this,n)}}var Oe=function(e){C()(n,e);var t=Me(n);function n(){var e;S()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),A()(O()(e),"isInMobileSlideList",(function(){var t,n;return re.a.isMobile&&!(null!==(t=(n=e.props).mobileEditMode)&&void 0!==t&&t.call(n))})),A()(O()(e),"renderIframe",(function(t){var n,o,r=((null===(n=e.props.component)||void 0===n?void 0:n.props)||{}).addon,i=null===(o=e.props.component)||void 0===o?void 0:o.selected;return Object(ie.o)(e.props.component)?L.a.createElement(Se.a,{size:t,addon:r,isSelected:i,component:e.props.component,toScaleView:e.props.toScaleView,mobileEditMode:e.props.mobileEditMode}):null})),A()(O()(e),"renderAttachmentOrNot",(function(){var t,n=((null===(t=e.props.component)||void 0===t?void 0:t.props)||{}).attachment;return n?L.a.createElement(de.a,{attachment:n,onAttachmentFirstShow:e.props.onAttachmentFirstShow,uiModel:e.props.component}):null})),e}return w()(n,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.rect,o=this.props.getMediaManager(),r=t.key===(null==o?void 0:o.elementKey)&&(null==o?void 0:o.isShowIframe)||Object(ie.d)(t)||this.isInMobileSlideList(),i=t.props,a=Object(ye.j)(n,i);return Object(ye.i)(t)?null:(Object(ye.p)(i,n),t.updateState.editorShouldUpdate=!1,L.a.createElement(L.a.Fragment,null,r&&t.props.addon&&this.renderIframe(a),this.renderAttachmentOrNot()))}}]),n}(L.a.Component);A()(Oe,"displayName","ShapeElement"),A()(Oe,"defaultProps",{setRef:function(){},getLevelChangeLock:function(){},getLinkData:function(){},handleDblClick:function(){},isSelected:function(){return!1}});var Re,Ce,Pe,Ie,ke,je,xe,Ae=Object(B.a)(we.a,Ee.a,Oe),De=(n("6e20b6a7d8"),n("c73625d763")),Le=n.n(De),Fe=n("e11b552119"),Te=function(){function e(){S()(this,e)}return w()(e,[{key:"initModel",value:function(){}}]),e}(),Be=n("579fc13537"),Ve=n("e0e8dd9366"),Ue=n("9da6335152"),ze=n("d3d31c86eb"),He=n("e5a826a0ff"),Ne=n("e388ef2636");function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I()(this,n)}}var Ge,_e,Ke,Ye=(Re=Object(G.b)(),Ce=Object(G.b)(),Pe=Object(W.a)(),Ie=function(e){C()(n,e);var t=We(n);function n(){var e;S()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),A()(O()(e),"componentProps",null),A()(O()(e),"needMouseUp",null),U()(O()(e),"handleMouseDown",ke,O()(e)),U()(O()(e),"handleMouseUp",je,O()(e)),U()(O()(e),"getCloneDom",xe,O()(e)),A()(O()(e),"reportOnSelect",(function(t){if(e.getUserPriviledgeService().pptEditorState===_.b.EDITABLE){var n=null;t.type===Ve.d.SHAPE?n=Ue.b.CLK_EDIT:t.type===Ve.d.IMAGE&&(n=Ue.b.CLK_IMG),n&&Object(ze.c)({opername:Ue.e.DOC_PPT,module:Ue.d.PC_OBJ,action:n})}})),A()(O()(e),"tdwHandleMouseDown",(function(e){var t=null;switch(e.type){case Ve.d.SHAPE:t=1===e.subType?Ue.b.EDIT_TEXT:Ue.b.EDIT_SHAPE;break;case Ve.d.IMAGE:t=Ue.b.EDIT_IMG;break;case Ve.d.TABLE:t=Ue.b.EDIT_FORM}t&&Object(ze.c)({opername:Ue.e.DOC_PPT,module:Ue.d.PC_OBJ,action:t})})),A()(O()(e),"updateSelectedElement",(function(t,n){var o;(0===e.getAppServices().viewableServiceLayer.selectionService.selectedElements.selectedArrayForType(He.a.GROUP).length?(e.needMouseUp=!0,t.preventDefault(),t.stopPropagation()):(t.preventDefault(),t.stopPropagation(),t.metaKey||t.shiftKey||t.ctrlKey?n.selected?e.needMouseUp=!0:(e.getAppServices().viewableServiceLayer.selectionService.selectedElements.add(n),e.reportOnSelect(n)):n.selected||(e.getAppServices().viewableServiceLayer.selectionService.selectedElements.clear(He.a.GROUP),e.getAppServices().viewableServiceLayer.selectionService.selectedElements.add(n),e.reportOnSelect(n),e.getAppServices().viewableServiceLayer.editingStateManager.updateElementCropState(!1))),n.type!==Ve.d.TABLE)&&(null===(o=e.getAppServices().editableServiceLayer)||void 0===o||o.dragElementHandler.handleMouseDownOnElement(t,n,e.props.getPageScale(),e.needMouseUp,(function(){e.needMouseUp=!1})))})),A()(O()(e),"handleMouseDownPresenter",(function(t,n){var o,r;null===(o=e.getAppServices().editableServiceLayer)||void 0===o||null===(r=o.selectedAnims)||void 0===r||r.clear(),!e.props.handleMouseDown||e.props.component.isRootGroup||e.props.isGroupChildren?e.props.component.selected&&1===e.getAppServices().viewableServiceLayer.selectionService.selectedElements.selectedArrayForType(He.a.SLIDE).length&&(e.tdwHandleMouseDown(t),e.updateSelectedElement(n,t)):e.props.handleMouseDown(t,n)})),A()(O()(e),"handleMouseUpPresenter",(function(t,n){!e.props.handleMouseUp||e.props.component.isRootGroup||e.props.isGroupChildren?!0===e.needMouseUp&&(t.selected?e.getAppServices().viewableServiceLayer.selectionService.selectedElements.remove(t):e.getAppServices().viewableServiceLayer.selectionService.selectedElements.add(t),e.reportOnSelect(t),e.needMouseUp=!1):e.props.handleMouseUp(t,n)})),e}return w()(n,[{key:"init",value:function(e){this.componentProps=e.component.props}},{key:"componentDidMount",value:function(){Ne.a.caculateItemValues(this.props.component)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.fromScale||(null===(e=(t=this.props).onElementUpdate)||void 0===e||e.call(t))}},{key:"getAppServices",value:function(){return K.a.getInstance().getAppServices()}},{key:"getUserPriviledgeService",value:function(){return this.getAppServices().viewableServiceLayer.userPriviledgeService}}]),n}(N.a),ke=H()(Ie.prototype,"handleMouseDown",[Re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.props.component.isRootGroup?e.handleMouseDownPresenter(t,n):e.props.handleMouseDown(t,n)}}}),je=H()(Ie.prototype,"handleMouseUp",[Ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){e.props.component.isRootGroup?e.handleMouseUpPresenter(t,n):e.props.handleMouseUp(t,n)}}}),xe=H()(Ie.prototype,"getCloneDom",[Pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t,n=e.getChildRef("contentRef").cloneNode(!1);return null===(t=e.props.component)||void 0===t||t.children.forEach((function(t){var o,r,i=null===(o=(r=e.getChildRef(t.key).elementWrapperRef).getCloneDom)||void 0===o?void 0:o.call(r);i&&n.appendChild(i)})),[n]}}}),Ie);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){A()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j()(e);if(t){var r=j()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return I()(this,n)}}var Ze=Object(T.b)((Ke=_e=function(e){C()(n,e);var t=Je(n);function n(){var e;S()(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),A()(O()(e),"renderChild",(function(t,n){if(t.rendered||(t.rendered=!0),!(Object(ie.i)(t)||Object(ie.n)(t)&&Object(ie.m)(t)))return null;if(Object(ie.G)(t)||Object(ie.f)(t)){var o,r,i=e.props.region,a=i===pe.s.MOBILEBROWSE&&(null===(o=(r=e.props).mobileEditMode)||void 0===o?void 0:o.call(r)),c=i===pe.s.MOBILE_PLAYER_THUMBNAIL;if(a||c)return}var l=!t.rendered,s=e.props.relativeFlipH,d=e.props.relativeFlipV;return 1===e.props.component.props.style.flipH&&(s=0===s?1:0),1===e.props.component.props.style.flipV&&(d=0===d?1:0),e.getGroupElementWrapper(t,n,l,s,d)})),A()(O()(e),"getGroupElementWrapper",(function(t,n,o,r,i){return L.a.createElement(Be.a,{ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(n){return e.props.setRef(t.key,n)})),shouldUpdate:o,key:t.key,elementRootId:e.props.elementRootId,scale:e.props.getPageScale(),getPageScale:e.props.getPageScale,component:t,elementIndex:n,fromScale:e.props.fromScale,region:e.props.region,handleMouseDown:e.props.handleMouseDown,handleMouseUp:e.props.handleMouseUp,relativeRotate:((e.props.rotate?e.props.rotate:0)+e.props.relativeRotate)%360,relativeFlipH:r,relativeFlipV:i,onElementUpdate:e.props.onElementUpdate,taskGroup:e.props.taskGroup,event:e.props.event,sync:e.props.sync})})),e}return w()(n,[{key:"render",value:function(){var e=this.props,t=e.setRef,n=e.rect,o=e.component,r=n?n.width:o.props.style.width,i=n?n.height:o.props.style.height,a={flipH:this.props.rect?this.props.rect.flipH:Le()(o.props,"style.flipH")?o.props.style.flipH:0,flipV:this.props.rect?this.props.rect.flipV:Le()(o.props,"style.flipV")?o.props.style.flipV:0},c={width:r,height:i};return L.a.createElement(ce.a,{type:"div",id:"group",ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return t("contentRef",e)})),className:Fe.a.group,style:qe(qe({},c),{},{transformOrigin:null,transform:ee.d(a)})},null==o?void 0:o.children.map(this.renderChild))}}]),n}(D.Component),A()(_e,"defaultProps",{setRef:function(){},handleMouseDown:function(){},handleMouseUp:function(){}}),Ge=Ke))||Ge,Qe=Object(B.a)(Ye,Te,Ze);function $e(e){switch(e){case Ve.d.SHAPE:return Ae;case Ve.d.IMAGE:return be;case Ve.d.GROUP:return Qe;default:return null}}},bd86570a95:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n("73b854064b"),n("342844cefa"),n("a84962d637"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("547611bd96"),l=n.n(c),s=n("bd29e2df90"),d=n.n(s),u=n("ab5eb40518"),p=n.n(u),f=n("1b4cdd6a36"),h=n.n(f),v=n("85d0a7609b"),m=n.n(v),g=(n("8a35b54c1d"),n("6e20b6a7d8"),n("69084d01d3")),b=n.n(g),y=n("4da3d8149c"),S=n("e0e8dd9366"),E=n("5a5c6d313d"),w=n("d5c3deb8c7"),M=n("8f6e67dde4"),O=n("5cdbac46e8"),R=n("f9193d718f"),C=n("0a4e8b541b");function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var j=function(e){d()(n,e);var t=k(n);function n(e){var o;return r()(this,n),o=t.call(this,e),m()(l()(o),"elements",void 0),m()(l()(o),"canBeConnectedElements",(function(){var e,t;if(null===(e=o.getSelectionService())||void 0===e||!e.currentSlide)return null;var n=null===(t=o.getSelectionService())||void 0===t?void 0:t.currentSlide,r=[S.d.TABLE,S.d.IMAGE,S.d.SHAPE];return C.a.getTypesOfElements(null==n?void 0:n.children,r).filter((function(e){return e.selectable&&e.currentEditState===O.b.EDITABLE}))})),m()(l()(o),"renderCanBeConnectedElement",(function(e){var t,n=e,r=null===(t=n.getFrame)||void 0===t?void 0:t.call(n).frameOnSlide();return b.a.createElement("div",{key:e.id,style:I(I({},r),{},{position:"absolute",pointerEvents:"none",transform:Object(M.g)(r)})},b.a.createElement(y.a,{styleModel:n.props.style,component:n,scale:o.props.scale,pathParser:n.pathParser,editingStateManager:o.getEditingStateManager()}))})),o.elements=o.canBeConnectedElements(),o}return a()(n,[{key:"componentDidMount",value:function(){var e=this;Object(E.a)(this,Object(w.r)((function(){var t;return[e.getEditingStateManager().isConnecting,null===(t=e.getSelectionService())||void 0===t?void 0:t.currentSlide]}),(function(){e.elements=e.canBeConnectedElements(),e.setState({})})))}},{key:"render",value:function(){var e;return this.getEditingStateManager().isConnecting&&null!==(e=this.elements)&&void 0!==e&&e.length?b.a.createElement(b.a.Fragment,null,this.elements.map(this.renderCanBeConnectedElement)):null}},{key:"getSelectionService",value:function(){var e;return null===(e=R.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getEditingStateManager",value:function(){return R.a.getInstance().getAppServices().viewableServiceLayer.editingStateManager}}]),n}(b.a.Component)},dc9dac28cb:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return v}));var o=n("176815363d"),r=n.n(o),i=n("9132715560"),a=n.n(i),c=n("6a364eb35c"),l=n.n(c),s=n("85d0a7609b"),d=n.n(s),u=n("3ef2352f0b"),p=n.n(u),f=(n("c6244f7705"),n("081c8cafea"),n("826dc923b3"),n("8e7cce0ada"),n("29f8c5f672"),n("85d48ef22b"),n("2a6f332b5e"),n("f4e4ed5c17")),h="abort",v=function(){function e(){var t=this;a()(this,e),d()(this,"picUrlCacheMap",void 0),d()(this,"docsAddonSdk",void 0),d()(this,"setCache",(function(e,n){var o={url:n,timeStamp:new Date};t.picUrlCacheMap.set(e,o)})),d()(this,"existInCache",(function(e){var n=t.picUrlCacheMap.get(e);return!!n&&Date.now()-n.timeStamp.getTime()<36e5})),d()(this,"getScreenshotImage",function(){var e=r()(p.a.mark((function e(n,o,r,i){var a,c,l,s,d,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.originUrl,l=n.embedUrl,s=n.extraData,!t.existInCache(o)){e.next=3;break}return e.abrupt("return",Promise.resolve(t.picUrlCacheMap.get(o).url));case 3:return e.next=5,t.getOriginTypeFromUrl(s);case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0=0;case 8:return d=e.t0,u=null===(a=window.clientVars)||void 0===a?void 0:a.globalPadId,e.abrupt("return",Object(f.a)("/v2/file/screenshot",{headers:{"Content-Type":"application/json; charset=UTF-8"},method:"POST",data:{origin_url:c,embed_url:l,global_pad_id:u,origin_type:d,pic_width:Math.floor(r),pic_height:Math.floor(i)}}).then((function(e){var n=e.data;if("success"===(null==n?void 0:n.msg)){var r=null==n?void 0:n.result.picUrl;return t.setCache(o,r),r}return e})));case 11:case"end":return e.stop()}}),e)})));return function(t,n,o,r){return e.apply(this,arguments)}}()),d()(this,"getOriginTypeFromUrl",function(){var e=r()(p.a.mark((function e(t){var n,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return n=JSON.parse(t),o=n.type,e.abrupt("return",Number(o));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),d()(this,"isVideoType",function(){var t=r()(p.a.mark((function t(n,o){var r,i,a,c,l,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.iframeId,c=n.extraData,t.next=3,e.getInstance().getOriginTypeFromUrl(c);case 3:return l=t.sent,s=(null===(r=o.addonHandler.addonMetaMap.get(a))||void 0===r||null===(i=r.config)||void 0===i?void 0:i.menus)||[],t.abrupt("return",s.some((function(e){return Number(null==e?void 0:e.report_id)===l&&"视频"===e.category})));case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),d()(this,"getIconOfAddonLink",function(){var e=r()(p.a.mark((function e(n,o){var r,i,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.docsAddonSdk;case 2:return r=e.sent,i=r.DocAddonBridge,e.prev=4,e.next=7,i.getIconOfAddonLink(o,n);case 7:a=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),null===(c=window.log)||void 0===c||c.error(e.t0);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t,n){return e.apply(this,arguments)}}()),d()(this,"getAddonName",function(){var e=r()(p.a.mark((function e(n,o){var r,i,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.docsAddonSdk;case 2:return r=e.sent,i=r.DocAddonBridge,a=i.getLinkType(n,o),e.abrupt("return",i.getLinkTypeInfo(a).title);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),d()(this,"getMiniAppIframeWhiteList",r()(p.a.mark((function e(){var n,o,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.docsAddonSdk;case 2:return n=e.sent,o=n.DocAddonBridge,e.next=6,o.getMiniAppIframeWhiteList();case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))),this.picUrlCacheMap=new Map,this.docsAddonSdk=Promise.all([n.e("commonAsync~9b1fde68"),n.e("commonAsync~27f19aac"),n.e("commonAsync~205ac551"),n.e("commonAsync~0c3a6025"),n.e("commonAsync~32e631b8"),n.e("commonAsync~08369118"),n.e("commonAsync~50db4bb8"),n.e("commonAsync~86c92fed"),n.e("commonAsync~a95f944a"),n.e("commonAsync~6e568190"),n.e("commonAsync~b174e5ca"),n.e("commonAsync~54a68610"),n.e("commonAsync~61b3c105"),n.e("commonAsync~f7b3ac00"),n.e("commonAsync~cece21d6"),n.e("commonAsync~ecbf7682"),n.e("commonAsync~6c5dfa7c"),n.e("commonAsync~90483627"),n.e("commonAsync~d2c096c2"),n.e("commonAsync~1285a477"),n.e("commonAsync~31ded9a0"),n.e("commonAsync~ecdbff9b"),n.e("commonAsync~c2cc425c"),n.e("commonAsync~4fb44df2"),n.e("commonAsync~d06fe423"),n.e("commonAsync~0519277e"),n.e("commonAsync~6df2b9ea"),n.e("commonAsync~b5c4f9e4"),n.e("commonAsync~ffdf5190"),n.e("commonAsync~127b6cf7"),n.e("commonAsync~b3c4a2ff"),n.e("commonAsync~19bb5a55"),n.e("async~493df0b3"),n.e("async~c5b24172"),n.e("async~0d51b00e"),n.e("async~beecf843"),n.e("async~2e2c6527"),n.e("async~da8db81f"),n.e("async~e10030d6"),n.e("async~098dcb65"),n.e("async~d0c14fe8"),n.e("async~7f8bedbf"),n.e("async~f40490b4"),n.e("async~2158e36e"),n.e("async~76acd586"),n.e("async~37d786cf"),n.e("async~30ccc425"),n.e("async~0c7d7381"),n.e("async~907e9098"),n.e("async~43172549"),n.e("async~f19eb79b"),n.e("async~95108331"),n.e("async~718865d2"),n.e("async~89b7a519")]).then(n.bind(null,"39cb6f3a5e"))}return l()(e,null,[{key:"getInstance",value:function(){return e.ins||(e.ins=new e),e.ins}}]),e}();d()(v,"ins",null)},e11b552119:function(e,t,n){"use strict";var o=n("e792a3169a"),r=n.n(o),i=n("35e3fc9575"),a=n.n(i),c={insert:"head",singleton:!1};r()(a.a,c);t.a=a.a.locals||{}},e69d298d48:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var o=n("730477bb20"),r=n.n(o),i=n("14502724a6"),a=n.n(i),c=n("9132715560"),l=n.n(c),s=n("85d0a7609b"),d=n.n(s),u=(n("3bf1976a4f"),n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36"),n("69084d01d3")),p=n.n(u),f=n("3344f1a2e7"),h=n("d9812f1c6f"),v=n("147aa73f92");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function e(t){var n=this;l()(this,e),d()(this,"effectMarkId",void 0),d()(this,"getEffectsMarkId",(function(){return n.effectMarkId})),d()(this,"defineOuterShadowFilter",(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=e.dist,c=void 0===i?0:i,l=e.dir,s=void 0===l?0:l,d=e.blurRad,u=void 0===d?0:d,h=e.size,m=void 0===h?0:h,g=e.color,b=void 0===g?"#000000":g,y=e.opacity,S=void 0===y?0:y,E=s&&s*Math.PI/180,w=c&&Object(f.C)(c*Math.cos(E)),M=c&&Object(f.C)(c*Math.sin(E)),O=m/100,R=Object(v.e)(b),C=a()(R,3),P=C[0],I=C[1],k=C[2],j=Object(f.y)(S),x=n.calculateShadowFilterBoundary(o,r,w,M,u,O),A=a()(x,6),D=A[2],L=A[3],F=A[4],T=A[5],B=n.getEffectsMarkId(),V="outer-shadow-filter-".concat(B,"-").concat(t);return{shadowScale:O,shadowOffsetX:w,shadowOffsetY:M,shadowFilter:p.a.createElement("filter",{id:V,filterUnits:"userSpaceOnUse",x:D,y:L,width:F,height:T},p.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:u,result:"blur"}),p.a.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB"},p.a.createElement("feFuncR",{type:"linear",slope:"0",intercept:P/256}),p.a.createElement("feFuncG",{type:"linear",slope:"0",intercept:I/256}),p.a.createElement("feFuncB",{type:"linear",slope:"0",intercept:k/256}),p.a.createElement("feFuncA",{type:"linear",slope:j,intercept:"0"})))}})),d()(this,"defineInnerShadowFilter",(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=e.dist,c=void 0===i?0:i,l=e.dir,s=void 0===l?0:l,d=e.blurRad,u=void 0===d?0:d,h=e.color,m=void 0===h?"#000000":h,g=e.opacity,b=void 0===g?0:g,y=(s-180)*Math.PI/180,S=c&&Object(f.C)(c*Math.cos(y)),E=c&&Object(f.C)(c*Math.sin(y)),w=Object(v.e)(m),M=a()(w,3),O=M[0],R=M[1],C=M[2],P=Object(f.y)(b),I=n.calculateShadowFilterBoundary(o,r,S,E,u),k=a()(I,6),j=k[2],x=k[3],A=k[4],D=k[5],L=n.getEffectsMarkId(),F="inner-shadow-filter-".concat(L,"-").concat(t);return{shadowScale:1,shadowOffsetX:S,shadowOffsetY:E,shadowFilter:p.a.createElement("filter",{id:F,filterUnits:"userSpaceOnUse",x:j,y:x,width:A,height:D},p.a.createElement("feComponentTransfer",{in:"SourceAlpha",result:"inner-shadow-reversed"},p.a.createElement("feFuncA",{type:"table",tableValues:"1 0"})),p.a.createElement("feGaussianBlur",{in:"inner-shadow-reversed",stdDeviation:u,result:"inner-shadow-blurred"}),p.a.createElement("feOffset",{dx:S,dy:E,result:"inner-shadow-offset"}),p.a.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB",result:"inner-shadow-colorred"},p.a.createElement("feFuncR",{type:"linear",slope:"0",intercept:O/256}),p.a.createElement("feFuncG",{type:"linear",slope:"0",intercept:R/256}),p.a.createElement("feFuncB",{type:"linear",slope:"0",intercept:C/256}),p.a.createElement("feFuncA",{type:"linear",slope:P,intercept:"0"})),p.a.createElement("feComposite",{in:"inner-shadow-colorred",in2:"inner-shadow-offset",operator:"in"}),p.a.createElement("feComposite",{in2:"SourceAlpha",operator:"in"}),p.a.createElement("feMerge",null,p.a.createElement("feMergeNode",{in:"SourceGraphic"}),p.a.createElement("feMergeNode",null)))}})),d()(this,"setOuterShadow",(function(e,t,n,o,r){return p.a.createElement("g",{filter:"url(#outer-shadow-filter-".concat(e,"-").concat(t,")")},p.a.createElement("use",{href:"#use-shadow-".concat(e,"-").concat(t),style:{transform:"matrix(".concat(n,",0,0,").concat(n,",").concat(o,",").concat(r,")")},transformOrigin:"50% 50%"}))})),d()(this,"defineReflectionFilter",(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=e.blurRad,d=void 0===s?0:s,u=e.dist,v=void 0===u?0:u,m=e.endOpacity,g=void 0===m?99.7:m,b=e.size,y=void 0===b?0:b,S=e.startOpacity,E=void 0===S?0:S,w=n.getEffectsMarkId(),M="reflection-filter-".concat(w,"-").concat(t),O="reflection-mask-".concat(w,"-").concat(t),R=n.calculateReflectionFilterBoundary(o,i,v,d,a,c,l),C=R.filterStartX,P=R.filterStartY,I=R.filterWidth,k=R.filterHeight,j=R.maskStartX,x=R.maskStartY,A=R.maskWidth,D=R.maskHeight,L=R.maskRectX,F=R.maskRectY,T=R.maskRectWidth,B=R.maskRectHeight,V=R.boundingCoordinates,U=R.maskRotationStyle;return{reflectionRotationStyle:R.reflectionRotationStyle,reflectionFilter:p.a.createElement(p.a.Fragment,null,!h.a.isSafari&&p.a.createElement("filter",{id:M,filterUnits:"userSpaceOnUse",x:"".concat(C,"%"),y:"".concat(P,"%"),width:"".concat(I,"%"),height:"".concat(k,"%")},p.a.createElement("feGaussianBlur",{in:"SourceGraph",stdDeviation:d,result:"blur"})),p.a.createElement("mask",{id:O,x:j,y:x,width:A,height:D,maskUnits:"userSpaceOnUse"},p.a.createElement("linearGradient",r()({id:"".concat(O,"-linear-gradient"),gradientUnits:"objectBoundingBox"},V),p.a.createElement("stop",{offset:"50%",stopColor:"#ffffff",stopOpacity:Object(f.y)(E)}),p.a.createElement("stop",{offset:"".concat(50+y/2,"%"),stopColor:"#ffffff",stopOpacity:Object(f.y)(g)})),y&&p.a.createElement("rect",r()({x:L,y:F,width:T,height:B,fill:"url(#".concat(O,"-linear-gradient)"),transform:"rotate(".concat(-2*l,")")},U))))}})),d()(this,"setReflection",(function(e,t,n){var o=h.a.isSafari||h.a.isWxMiniProgram?{mask:"url(#reflection-mask-".concat(e,"-").concat(t,")")}:{filter:"url(#reflection-filter-".concat(e,"-").concat(t,")"),mask:"url(#reflection-mask-".concat(e,"-").concat(t,")")};return p.a.createElement("g",o,p.a.createElement("use",r()({href:"#use-reflection-".concat(e,"-").concat(t)},n,{pointerEvents:"none"})))})),d()(this,"defineSoftEdgeFilter",(function(e,t,o,i,a){var c=e.size,l=void 0===c?0:c,s=l?.1*l+9.9:0,d=(i||1)*(1-l/100),u=(a||1)*(1-l/100),f=!!i||!!a?null:{"transform-origin":"50% 50%"},h=n.getEffectsMarkId(),v="soft-edge-filter-".concat(h,"-").concat(o),m="soft-edge-mask-".concat(h,"-").concat(o);return{softEdgeFilter:p.a.createElement(p.a.Fragment,null,p.a.createElement("filter",{id:v,filterUnits:"userSpaceOnUse"},p.a.createElement("feGaussianBlur",{stdDeviation:s,in:"SourceGraphic"})),p.a.createElement("mask",{id:m},p.a.createElement("path",r()({d:t,fill:"white",opacity:"1",filter:"url(#".concat(v,")"),style:{transform:"scale(".concat(d,", ").concat(u,")")}},f))))}})),d()(this,"defineGlowFilter",(function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=e.size,c=void 0===i?0:i,l=e.color,s=void 0===l?"#000000":l,d=e.opacity,u=void 0===d?0:d,h=Object(v.e)(s),m=a()(h,3),g=m[0],b=m[1],y=m[2],S=Object(f.y)(u),E=n.calculateGlowFilterBoundary(o,r,c),w=a()(E,6),M=w[0],O=w[1],R=w[2],C=w[3],P=w[4],I=w[5],k=n.getEffectsMarkId(),j="glow-filter-".concat(k,"-").concat(t);return{glowFilter:p.a.createElement("filter",{id:j,filterUnits:"userSpaceOnUse",x:R,y:C,width:P,height:I},p.a.createElement("feMorphology",{operator:"dilate",radius:M/3,in:"SourceAlpha",result:"glow-thickened"})," ",p.a.createElement("feGaussianBlur",{stdDeviation:O,result:"glow-blurred"}),p.a.createElement("feComponentTransfer",{colorInterpolationFilters:"sRGB",result:"glow-colorred"},p.a.createElement("feFuncR",{type:"linear",slope:"0",intercept:g/256}),p.a.createElement("feFuncG",{type:"linear",slope:"0",intercept:b/256}),p.a.createElement("feFuncB",{type:"linear",slope:"0",intercept:y/256}),p.a.createElement("feFuncA",{type:"linear",slope:S,intercept:"0"})))}})),d()(this,"setGlow",(function(e,t){return p.a.createElement("g",{filter:"url(#glow-filter-".concat(e,"-").concat(t,")")},p.a.createElement("use",{href:"#use-glow-".concat(e,"-").concat(t)}))})),d()(this,"calculateShadowFilterBoundary",(function(e,t,n,o,r){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=-50,c=-50,l=200,s=200,d=Math.round(e)||1,u=Math.round(t)||1,p=i,f=i,h=Math.abs(n)/d*100,v=Math.abs(o)/u*100;return a=a-h-2*r,c=c-v-2*r,l=l+2*h+2*r+100*p,s=s+2*v+2*r+100*f,["".concat(p),"".concat(f),"".concat(a,"%"),"".concat(c,"%"),"".concat(l,"%"),"".concat(s,"%")]})),d()(this,"calculateGlowFilterBoundary",(function(e,t,n){var o=-50,r=-50,i=200,a=200,c=n,l=Math.round(e)||1,s=Math.round(t)||1,d=0===c?0:(Math.PI-1)*Math.log(c),u=c/l,p=c/s;return o=o-100*u-2*n,r=r-100*p-2*n,i=i+100*u+4*c+100*(1+2*u),a=a+100*p+4*c+100*(1+2*p),[c,"".concat(d),"".concat(o,"%"),"".concat(r,"%"),"".concat(i,"%"),"".concat(a,"%")]})),d()(this,"calculateReflectionFilterBoundary",(function(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=Math.round(e)||1,l=Math.round(t)||1,s=Object(f.C)(n),d=Math.abs(r),u=Math.abs(i),p=-100-2*o/c*100-2*d/c*100+100*Math.abs(Math.sin(a*Math.PI/180)),h=-100-2*o/l*100-2*u/l*100+100*Math.abs(Math.cos(a*Math.PI/180)),v=300+4*o/c*100+4*d/c*100+100*Math.abs(Math.cos(a*Math.PI/180)),m=300+4*s/l*100+4*o/l*100+4*u/l*100+100*Math.abs(Math.sin(a*Math.PI/180)),b=-s*Math.sin(a*Math.PI/180),y=-s*Math.cos(a*Math.PI/180),S=i>0,E=null,w=null,M=null,O=-4*d-100-2*o,R=O,C=S?-50-2*i:0,P=C,I=2*(2*c+4*d+150+4*o),k=I,j=2*l+s+(S?2*u+50:0),x=j;return 0===a?(E={x1:"0",y1:"0",x2:"0",y2:"1"},w={"transform-origin":"100% 100%"},M={transform:"matrix(1,0,0,-1,0,".concat(2*l+s,")")}):a<45?(E={x1:"0",y1:"0",x2:"0",y2:"1"},j+=C+=.5*Math.sin(a*Math.PI/180)*j,w={"transform-origin":"100% 100%"},M=g({transform:"scale(1 -1) rotate(".concat(2*a,") translate(").concat(b," ").concat(y,")")},w)):a<90?(E={x1:"0",y1:"0",x2:"0",y2:"1"},j+=C+=.5*Math.cos(a*Math.PI/180)*j,w={"transform-origin":"100% 100%"},M=g({transform:"scale(1 -1) rotate(".concat(2*a,") translate(").concat(b," ").concat(y,")")},w)):90===a?(E={x1:"1",y1:"0",x2:"0",y2:"0"},O-=.5*j,R-=.5*j,w={"transform-origin":"100% 100%"},M=g({transform:"scale(1 -1) rotate(".concat(2*a,") translate(").concat(b," ").concat(y,")")},w)):a<=180?(E={x1:"0",y1:"1",x2:"0",y2:"0"},h-=200,C-=.5*j*(1-Math.cos(a*Math.PI/180)),P-=.5*j,w={"transform-origin":"100% 0%"},M=g({transform:"scale(1 -1) rotate(".concat(2*a,") translate(").concat(b," ").concat(y,")")},w)):a<270?(p-=200,h-=200,O-=2*j*Math.sin((a-180)*Math.PI/180),C-=.5*j*(1-Math.cos(a*Math.PI/180)),P-=.5*j+2*o+s,w={"transform-origin":"0% 0%"},M=g({transform:"scale(1 -1) rotate(".concat(2*a,") translate(").concat(b," ").concat(y,")")},w),E={x1:"0",y1:"1",x2:"0",y2:"0"}):270===a?(p-=200,h-=200,O-=2*j*Math.sin((a-180)*Math.PI/180),C-=.5*j*(1-Math.cos(a*Math.PI/180)),R-=.5*I+2*o+s,P-=.5*j+2*o,w={"transform-origin":"0% 0%"},M=g({transform:"scale(1 -1) rotate(".concat(2*a,") translate(").concat(b," ").concat(y,")")},w),E={x1:"0",y1:"0",x2:"1",y2:"0"}):a<360&&(p-=200,R=O-=2*j*Math.sin((360-a)*Math.PI/180),C+=Math.min(.5*j,j*(1+Math.sin(a*Math.PI/180))),w={"transform-origin":"0% 100%"},M=g({transform:"scale(1 -1) rotate(".concat(2*a,") translate(").concat(b," ").concat(y,")")},w),E={x1:"0",y1:"0",x2:"0",y2:"1"}),{filterStartX:p,filterStartY:h,filterWidth:v,filterHeight:m,maskStartX:O,maskStartY:C,maskWidth:I,maskHeight:j,maskRectX:R,maskRectY:P,maskRectWidth:k,maskRectHeight:x,boundingCoordinates:E,maskRotationStyle:w,reflectionRotationStyle:M}})),this.effectMarkId=t}},e927fb8cf0:function(e,t,n){"use strict";n.r(t);n("73b854064b"),n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("547611bd96"),l=n.n(c),s=n("bd29e2df90"),d=n.n(s),u=n("ab5eb40518"),p=n.n(u),f=n("1b4cdd6a36"),h=n.n(f),v=n("85d0a7609b"),m=n.n(v),g=n("69084d01d3"),b=n.n(g),y=n("e792a3169a"),S=n.n(y),E=n("3f05270d19"),w=n.n(E),M={insert:"head",singleton:!1},O=(S()(w.a,M),w.a.locals||{}),R=n("e0e8dd9366"),C=n("d9812f1c6f"),P=n("d2c463f567"),I=n.n(P),k=n("c9c92622ff"),j=n("e5a826a0ff"),x=n("79fc58c7b0"),A=n("f9193d718f");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var F=function(e){d()(n,e);var t=L(n);function n(e,o){var i;return r()(this,n),i=t.call(this,e,o),m()(l()(i),"dragStartTime",void 0),m()(l()(i),"startMousePosition",void 0),m()(l()(i),"sizeAtStart",void 0),m()(l()(i),"getEventCoordinates",(function(e){return{x:"touches"in e?e.touches[0].clientX:e.clientX,y:"touches"in e?e.touches[0].clientY:e.clientY}})),m()(l()(i),"startDrag",(function(e){i.dragStartTime=Date.now(),i.startMousePosition=i.getEventCoordinates(e),i.sizeAtStart=i.props.getSize()})),m()(l()(i),"stopDrag",(function(e){var t,n;(e.preventDefault(),e.stopPropagation(),i.getEditingStateManager().isDragging=!1,document.body.removeEventListener("mousemove",i.handleMouseMove),document.body.removeEventListener("mouseup",i.stopDrag),document.body.removeEventListener("touchmove",i.handleMouseMove),document.body.removeEventListener("touchend",i.stopDrag),i.dragStartTime)||(null===(t=(n=i.props).onDragStop)||void 0===t||t.call(n,x.b.MOVE,e))})),m()(l()(i),"handleMouseDown",(function(e){e.stopPropagation(),1===e.nativeEvent.buttons&&(document.body.addEventListener("mousemove",i.handleMouseMove),document.body.addEventListener("mouseup",i.stopDrag),i.startDrag(e))})),m()(l()(i),"handleTouchStart",(function(e){e.stopPropagation(),e.preventDefault(),i.getEditingStateManager().isDragging=!0,document.body.addEventListener("touchmove",i.handleMouseMove,{passive:!1}),document.body.addEventListener("touchend",i.stopDrag),i.startDrag(e)})),m()(l()(i),"handleMouseMove",(function(e){e.preventDefault();var t,n,o=i.getEventCoordinates(e),r=C.a.isMobile?-1:100;if(i.dragStartTime&&Date.now()-i.dragStartTime>r&&(o.x!==i.startMousePosition.x||o.y!==i.startMousePosition.y))i.dragStartTime=null,null===(t=(n=i.props).onDragStart)||void 0===t||t.call(n);else if(!i.dragStartTime){var a;e.stopPropagation();var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i.sizeAtStart),l=(o.x-i.startMousePosition.x)/i.props.scale/1,s=(o.y-i.startMousePosition.y)/i.props.scale/1,d=null===(a=i.getSelectionService())||void 0===a?void 0:a.selectedElements,u=null==d?void 0:d.selectedArrayForType(j.a.GROUP);if((null==u?void 0:u.length)>0&&(1===i.props.relativeFlipH&&(l=-l),1===i.props.relativeFlipV&&(s=-s),i.props.relativeRotate)){var p=i.props.relativeRotate%360*Math.PI/180,f=Math.cos(p),h=Math.sin(p),v=s*f-l*h;l=l*f+s*h,s=v}c.left+=l,c.top+=s,i.moveTo(e,c)}})),m()(l()(i),"updateComponent",(function(){i.forceUpdate()})),i.state={visible:!1},i}return a()(n,[{key:"componentDidMount",value:function(){window.addEventListener("enterEditing",this.updateComponent),window.addEventListener("exitEditing",this.updateComponent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("enterEditing",this.updateComponent),window.removeEventListener("exitEditing",this.updateComponent)}},{key:"render",value:function(){var e;if(this.getEditorInstanceService().checkEditorIsEditing())return null;var t=1/this.props.scale,n=this.props.getSize(),o=n.width,r=n.height,i=null===(e=this.getSelectionService())||void 0===e?void 0:e.selectedElements.getCurrentModel();if(Math.min(o,r)/t>58&&i.type!==R.d.GROUP&&!Object(k.i)(i)||this.props.isResizing)return null;var a={transform:"translate(-50%, 80px)",bottom:"0",left:"50%",display:this.props.isDragging?"none":"block"};return b.a.createElement("div",{className:O.dragElemContainer,style:a,onMouseDown:C.a.isPad?this.handleMouseDown:void 0,onTouchStart:this.handleTouchStart,id:"mobileDrag div"},b.a.createElement("div",{className:O.dragBorder},b.a.createElement("div",{className:O.dragElem},b.a.createElement("img",{src:I.a,className:O.imgSize,draggable:!1}))))}},{key:"moveTo",value:function(e,t){var n,o;null===(n=(o=this.props).onDrag)||void 0===n||n.call(o,e,this.sizeAtStart,t,x.b.MOVE)}},{key:"getSelectionService",value:function(){var e;return null===(e=A.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getEditingStateManager",value:function(){return A.a.getInstance().getAppServices().viewableServiceLayer.editingStateManager}},{key:"getEditorInstanceService",value:function(){return A.a.getInstance().getAppServices().viewableServiceLayer.editorInstanceService}}]),n}(g.Component);m()(F,"defaultProps",{onDragStart:function(){},onDragStop:function(){}});t.default=F},e9c8bffd6c:function(e,t,n){"use strict";n.r(t),n.d(t,"MediaContainer",(function(){return se}));n("73b854064b");var o=n("9132715560"),r=n.n(o),i=n("6a364eb35c"),a=n.n(i),c=n("547611bd96"),l=n.n(c),s=n("bd29e2df90"),d=n.n(s),u=n("ab5eb40518"),p=n.n(u),f=n("1b4cdd6a36"),h=n.n(f),v=n("85d0a7609b"),m=n.n(v),g=(n("3bf1976a4f"),n("6c458f1652"),n("b1e2246d82"),n("69084d01d3")),b=n.n(g),y=n("1748118723"),S=n.n(y),E=n("15985515f8"),w=n("d9812f1c6f"),M=n("3344f1a2e7"),O=n("679a12aae4"),R=n("4b415bb3b4"),C=n("f8fc8e0087"),P=n("fed003a03b"),I=n("f9193d718f"),k=function(){function e(){r()(this,e),m()(this,"isHovered",void 0),m()(this,"scale",void 0),m()(this,"isFullScreen",void 0),m()(this,"roomId",void 0),m()(this,"isMediaSelected",void 0),m()(this,"workbenchReady",void 0),m()(this,"getRoomId",(function(){var e=Object(C.getQuery)("roomId");return"MeetingRoom"===Object(C.getQuery)("sceneSource")?e:""}))}return a()(e,[{key:"initModel",value:function(){this.isHovered=!1,this.scale=M.a,this.isFullScreen=!1,this.roomId=this.getRoomId()||"",this.workbenchReady=!w.a.isMobile||this.getSlideRenderStateManager().isWorkbenchReady||P.q}},{key:"getSlideRenderStateManager",value:function(){return I.a.getInstance().getAppServices().viewableServiceLayer.slideRenderStateManager}}]),e}(),j=n("bece1304c7"),x=n("176815363d"),A=n.n(x),D=n("14502724a6"),L=n.n(D),F=n("3ef2352f0b"),T=n.n(F),B=(n("c6244f7705"),n("081c8cafea"),n("6cef2a9a7f")),V=n("5fac0349d3"),U=n("059d46034a"),z=n.n(U),H=n("0974c697cc"),N=n("aa679bcf87"),W=n("2df8131d1b"),G=n("2a81537ef9"),_=n("7af4d80efc"),K="[PPTWcjsPlayerInstance]",Y="PlayerContainerState",X=function e(t){var n=this;r()(this,e),m()(this,"playerType",_.b.DESKTOP),m()(this,"isPlaying",void 0),m()(this,"isShow",void 0),m()(this,"events",void 0),m()(this,"play",(function(e){"number"==typeof e&&n.events.emit(G.o.SetTime,e),n.events.emit(G.o.Play),window.log.info("".concat(K," mediaManager PlayerInstance play"))})),m()(this,"pause",(function(){n.events.emit(G.o.Pause),window.log.info("".concat(K," mediaManager PlayerInstance pause"))})),m()(this,"setMute",(function(){n.events.emit(G.o.SetVolume,0)})),m()(this,"emitContainerState",(function(e){n.isShow!==e&&(n.isShow=e,n.events.emit(Y,e))})),m()(this,"onContainerState",(function(e){n.events.on(Y,(function(t){e(t),n.isShow=t}))})),m()(this,"registerEventOn",(function(){n.events.on(G.o.Playing,(function(){return n.changePlayingState(!0)})),n.events.on(G.o.Paused,(function(){return n.changePlayingState(!1)})),n.events.on(G.o.Stopped,(function(){return n.changePlayingState(!1)}))})),m()(this,"changePlayingState",(function(e){return n.isPlaying=e})),this.events=t,this.isShow=!1,this.registerEventOn()},q=n("33c34da0d5"),J="[PPTWcjsPlayer]";var Z=function(e){var t=Object(g.useState)(!1),n=L()(t,2),o=n[0],r=n[1],i=Object(g.useState)(!1),a=L()(i,2),c=a[0],l=a[1],s=Object(g.useState)(""),d=L()(s,2),u=d[0],p=d[1],f=Object(g.useRef)(null),h=Object(g.useRef)(),v=Object(g.useRef)({firstMountTime:0,firstShowLoadingTime:0});if(Object(g.useEffect)((function(){if(null!=f&&f.current){var t=function(){var t=A()(T.a.mark((function t(){var n,o,i,a,c,s,d,u,p,m,g,b,y;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(v.current.firstMountTime=Date.now(),t.prev=1,n=e.playerEventsId,o=e.playerInstanceId,i=e.isMemoWindow,a=e.link,c=e.getScale,s=e.getSrcRect,!i){t.next=9;break}return t.next=6,N.a.getEvents(n);case 6:d=t.sent,t.next=12;break;case 9:return t.next=11,N.a.createEvents(n);case 11:d=t.sent;case 12:return t.next=14,B.a.Player.getPlayableSrcFromURI(a);case 14:if(u=t.sent,d){t.next=17;break}throw new Error("".concat(J," playerEvents is not exist"));case 17:return t.next=19,Object(H.d)({id:o,container:f.current,src:u,events:d,getScale:c,getSrcRect:s});case 19:p=new X(d),h.current=p,e.setPlayerInstance(p),r(!0),m=v.current,g=m.firstMountTime,b=m.firstShowLoadingTime,y=Date.now()-g,W.a.getInstance().aegis.reportTime("wcjs-player-mount",y),W.a.getInstance().aegis.reportTime("wcjs-player-loading",b?Date.now()-b:0),window.log.info("".concat(J," createPlayer use time: ").concat(y)),t.next=34;break;case 30:t.prev=30,t.t0=t.catch(1),window.log.error("".concat(J," createPlayer use time: ").concat(Date.now()-v.current.firstMountTime," catch error: ").concat(t.t0)),l(!0);case 34:case"end":return t.stop()}}),t,null,[[1,30]])})));return function(){return t.apply(this,arguments)}}();t()}}),[]),Object(g.useEffect)((function(){var t=function(){var t=e.playerEventsId,n=e.playerInstanceId;Object(H.c)({id:n}),N.a.destroyEvents(t)};return window.addEventListener("beforeunload",t),t}),[]),Object(g.useEffect)((function(){var t=h.current;t&&o&&(t.emitContainerState(e.isContainerDisplay),e.isMemoWindow||(e.isContainerDisplay?(v.current.firstShowLoadingTime||(v.current.firstShowLoadingTime=Date.now()),t.play(),window.log.info("".concat(J," isContainerDisplay play"))):(t.pause(),window.log.info("".concat(J," isContainerDisplay pause")))))}),[e.isContainerDisplay,o]),Object(g.useEffect)((function(){var t,n;if(null!==(t=e.bgShapeOptions)&&void 0!==t&&t.bgShape){var o=e.bgShapeOptions,r=o.width,i=o.height,a=o.bgShape,c=Object(q.g)({type:null!=a?a:q.e.RECT,width:r,height:i}).svgPathInRect();p(null===(n=c[0])||void 0===n?void 0:n.svgPath)}else p("")}),[e.bgShapeOptions]),c)throw new Error("".concat(J," initial error"));var m=e.playerInstanceId,y=e.defaulPreventFun,S="wcjs-clip-path-".concat(m),E=u?{clipPath:"url(#".concat(S,")")}:{};return b.a.createElement(g.Fragment,null,u&&b.a.createElement("svg",{width:"0",height:"0"},b.a.createElement("defs",null,b.a.createElement("clipPath",{id:S},b.a.createElement("path",{d:u})))),b.a.createElement("div",{onClick:y,onTouchStart:y,onTouchEnd:y,ref:f,className:O.a["media-container"],style:E}),!o&&b.a.createElement("div",{className:O.a["media-video-loading"],style:E},b.a.createElement("img",{src:z.a}),V.a.t("本地视频播放器初始化中")))},Q=n("d5ebb100c8"),$=n("14c02e2331"),ee=n("862b984676"),te=n("5a5c6d313d"),ne=n("d5c3deb8c7"),oe=n("0cbec907c5"),re=n("05d181ac40"),ie=n("ab17200d42"),ae=n("c77811d8de"),ce=n("2c7ea59c19");function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return p()(this,n)}}var se=function(e){d()(n,e);var t=le(n);function n(){var e;r()(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),m()(l()(e),"setSyncElementKeyDelegate",(function(){var t=e.props,n=t.mediaManager,o=t.uiModel;n&&ce.a.setMediaManagerDelegate(n),(null==o?void 0:o.presentationRef)&&ce.a.setPresentationRefDelegate(null==o?void 0:o.presentationRef)})),m()(l()(e),"setPlayerInstanceRef",(function(t){var n,o,r,i=e.props,a=i.uiModel,c=i.mediaManager,l=i.region,s=i.isDemonstrating;if(a&&c&&(t.playerType||(t.playerType=_.b.WEB),e.muteVideo(t),c.setVideoInstancesByRegion(a.key,t,l),s)){e.setSyncElementKeyDelegate();var d=null!==(n=a.id)&&void 0!==n?n:"";null===(o=e.getMediaSyncManager())||void 0===o||o.promise().then((function(e){e.attachMediaEvent(t,d,t.playerType)})),null===(r=e.getRemoteMediaSyncManager())||void 0===r||r.promise().then((function(e){e.attachMediaEventInPlayer(t,d,t.playerType)}))}})),m()(l()(e),"renderWcjsVideo",(function(t,n){var o=e.props,r=o.isContainerDisplay,i=o.isDemonstrating,a=o.preventPropagation,c=o.bgShapeOptions,l=o.region,s=o.isMemoWindow,d=i?a:function(){},u=e.props.uiModel||{},p=u.id,f=u.uniqueID,h=u.key,v="".concat(l,"-").concat(p,"-").concat(f),m="".concat(l,"-").concat(h);return b.a.createElement(j.a,{fallback:n},b.a.createElement(Z,{playerEventsId:v,playerInstanceId:m,isMemoWindow:!!s,setPlayerInstance:e.setPlayerInstanceRef,link:t.link,getScale:e.getVideoControlerScale,isContainerDisplay:!!r,defaulPreventFun:d,getSrcRect:e.getSrcRect,bgShapeOptions:c}))})),m()(l()(e),"renderDefaultVideo",(function(t,n){var o,r,i,a,c,l,s=e.props,d=s.handleFullScreenChange,u=s.preventPropagation,p=s.isDemonstrating,f=s.isFullScreen,h=s.isInMobileSlideList,v=s.uiModel,g=s.region;if(null==v||null===(o=v.getMediaManager())||void 0===o||!o.shouldVideoRender(v.key,g))return null;var y=S()((r={},m()(r,O.a["media-container"],!0),m()(r,O.a["media-container-move"],!f&&!p),m()(r,O.a["media-container-edit"],!p),r)),E=p?u:function(){};return b.a.createElement("div",{onClick:E,onTouchStart:E,onTouchEnd:E,onMouseDown:function(e){e.nativeEvent.stopImmediatePropagation()},className:y},b.a.createElement(j.a,null,b.a.createElement(Q.a,{uiModel:v,attachment:{id:"",classify:oe.b.VIDEO,name:null==v||null===(i=v.video)||void 0===i?void 0:i.name,objKey:null==v||null===(a=v.video)||void 0===a?void 0:a.link,instanceKey:null==v?void 0:v.key,size:null==v||null===(c=v.video)||void 0===c?void 0:c.size,type:null==v||null===(l=v.video)||void 0===l?void 0:l.format,showType:oe.n.PREVIEW},audioAndVideoParams:{playerInstanceRef:function(t){e.setPlayerInstanceRef(t)},disableContentClick:{play:!(p||h),pause:!(p&&!w.a.isMobile)},onFullScreenChange:d,directPlayLocalVideo:re.a.IS_LOCAL_EDIT},isDisableDownload:re.a.IS_LOCAL_EDIT,isDisableVideoResolution:re.a.IS_LOCAL_EDIT,directShowVideoPlayer:!h,isPlayMode:g===ee.a.PLAYER})))})),m()(l()(e),"renderVideo",(function(t,n){if(ie.d){return e.renderWcjsVideo(t,(function(){return e.renderDefaultVideo(t,n)}))}return e.renderDefaultVideo(t,n)})),m()(l()(e),"isInMobileSlideList",(function(){var t,n=e.props.isDemonstrating;return w.a.isMobile&&!n&&!(null!==(t=e.getSelectionService())&&void 0!==t&&t.currentSlide)})),m()(l()(e),"getVideoControlerScale",(function(){var t=e.props,n=t.playerScale,o=t.scale;return e.isInMobileSlideList()?2.5*M.a:1/(n||o)})),m()(l()(e),"getMediaSyncManager",(function(){return I.a.getInstance().getAppServices().viewableServiceLayer.noteViewMediaSyncManager})),m()(l()(e),"getRemoteMediaSyncManager",(function(){return I.a.getInstance().getAppServices().viewableServiceLayer.remoteMediaSyncManager})),m()(l()(e),"getSrcRect",(function(){return e.props.srcRect||{b:0,t:0,l:0,r:0}})),m()(l()(e),"needPreserveAudio",(function(e,t){return!!e&&e.animList.some((function(e){var n=e.props.presetClass,o=e.audioNumberedSlide,r=void 0===o?0:o;return n===ae.e.MEDIA&&t===ee.a.PLAYER&&r>1}))})),m()(l()(e),"renderAudio",(function(t,n){var o,r,i,a,c,l=e.props,s=l.handleMouseEnter,d=l.handleMouseLeave,u=l.preventPropagation,p=l.onAudioClick,f=l.isDemonstrating,h=l.elementSize,v=l.isInMobileSlideList,g=l.quickSettingId,y=l.isMediaSelected,E=l.mediaManager,M=l.uiModel,R=l.workbenchReady,C=l.region;l.isMemoWindow;if(!f&&!R)return null;var I=f&&!w.a.isMobile,k=S()((o={},m()(o,O.a["media-container"],!0),m()(o,O.a["media-audio-container"],!w.a.isMobile),o)),x=f?u:function(){};return b.a.createElement("div",{onMouseEnter:s,onMouseLeave:d,onClick:p,onTouchStart:x,onTouchEnd:x,onMouseDown:function(e){e.nativeEvent.stopImmediatePropagation()},className:k},b.a.createElement(j.a,null,b.a.createElement(Q.a,{attachment:{id:"",classify:oe.b.AUDIO,name:(null==M||null===(r=M.audio)||void 0===r?void 0:r.name)||"",objKey:null==M||null===(i=M.audio)||void 0===i?void 0:i.link,instanceKey:null==M?void 0:M.key,size:null==M||null===(a=M.audio)||void 0===a?void 0:a.size,type:null==M||null===(c=M.audio)||void 0===c?void 0:c.format,showType:oe.n.PREVIEW},audioAndVideoParams:{barContainer:!g||v||f?void 0:document.getElementById(g),disableIconClick:!f&&!y&&!v,hoverMode:I&&!P.r,iconSize:{width:h.width/$.p,height:h.height/$.p},audioBarStyle:{height:"40px"},getAudioInstance:function(e){M&&E&&E.setAudioInstanceByRegion(M.key,e,C)},onPlay:function(){!P.r&&M&&E&&E.updateElementKeyByRegion(M.key,C)},directPlayLocalAudio:re.a.IS_LOCAL_EDIT,needPreserveAtUnmount:e.needPreserveAudio(M,C)},uiModel:M,isPlayMode:C===ee.a.PLAYER})))})),e}return a()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.mediaManager,o=t.uiModel,r=t.region;o&&Object(te.a)(this,Object(ne.r)((function(){return null==n?void 0:n.shouldVideoRender(null==o?void 0:o.key,r)}),(function(){e.forceUpdate()}))),this.setSyncElementKeyDelegate()}},{key:"render",value:function(){var e=this.props,t=e.video,n=void 0===t?{}:t,o=e.audio,r=e.roomId,i={};return r&&(i.presentationRoomId=r),n?this.renderVideo(n,i):o?this.renderAudio(o,i):null}},{key:"muteVideo",value:function(e){this.props.isMemoWindow&&e.playerType===_.b.WEB&&e.on(oe.o.PLAY_SESSION_START,(function(){e.muted=!0}))}},{key:"getSelectionService",value:function(){var e,t=I.a.getInstance().getAppServices();return null==t||null===(e=t.viewableServiceLayer)||void 0===e?void 0:e.selectionService}}]),n}(b.a.Component);m()(se,"defaultProps",{video:null,audio:null});t.default=Object(E.a)(R.b,k,se)},fdd99ef675:function(e,t,n){"use strict";n.d(t,"a",(function(){return It}));var o=n("e0e8dd9366"),r=(n("73b854064b"),n("342844cefa"),n("a84962d637"),n("8a35b54c1d"),n("c554310b5c"),n("8ee19818c4"),n("bcb5d93d36"),n("9132715560")),i=n.n(r),a=n("6a364eb35c"),c=n.n(a),l=n("547611bd96"),s=n.n(l),d=n("bd29e2df90"),u=n.n(d),p=n("ab5eb40518"),f=n.n(p),h=n("1b4cdd6a36"),v=n.n(h),m=n("85d0a7609b"),g=n.n(m),b=(n("3bf1976a4f"),n("69084d01d3")),y=n.n(b),S=(n("6e20b6a7d8"),n("59ab3b0c6a")),E=n("730207179f"),w=n("7b0ebf3e1a"),M=n("2e684a2cea"),O=n("8f58e78419"),R=n.n(O),C=n("8f6e67dde4"),P=n("d9812f1c6f"),I=n("f9193d718f"),k=n("d45ef7b026");function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var D=function(e){u()(n,e);var t=A(n);function n(){var e;i()(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),g()(s()(e),"startPos",void 0),g()(s()(e),"changeStartEndIndex",void 0),g()(s()(e),"handleStartEndPointMouseDown",(function(t,n){n.stopPropagation(),n.preventDefault(),e.startPos=e.getEventCoordinates(n),e.changeStartEndIndex=t,document.addEventListener("mousemove",e.handleStartEndPointMouseMove),document.addEventListener("mouseup",e.handleStartEndPointChangeEnd),document.addEventListener("touchmove",e.handleStartEndPointMouseMove,{passive:!1}),document.addEventListener("touchend",e.handleStartEndPointChangeEnd,{passive:!1})})),g()(s()(e),"getEventCoordinates",(function(e){return{x:e.touches?e.touches[0].clientX:e.clientX,y:e.touches?e.touches[0].clientY:e.clientY}})),g()(s()(e),"handleStartEndPointMouseMove",(function(t){var n;if(t.stopPropagation(),t.preventDefault(),!e.context.editingStateManager.isConnecting)if(e.context.editingStateManager.connectingInfo={model:e.props.element,endIndex:e.changeStartEndIndex},e.context.editingStateManager.isConnecting=!0,0===e.changeStartEndIndex){var o=e.props.element.startUIModel;o&&(e.props.element.props.style.connectorInfo.start=null,o.removeRelatedUIModelRefs(e.props.element))}else if(1===e.changeStartEndIndex){var r=e.props.element.endUIModel;r&&(e.props.element.props.style.connectorInfo.end=null,r.removeRelatedUIModelRefs(e.props.element))}var i,a=e.getEventCoordinates(t),c={x:(a.x-e.startPos.x)/e.props.scale,y:(a.y-e.startPos.y)/e.props.scale};i=e.getAdsorpOffset(M.b,M.a,{endIndex:e.changeStartEndIndex,offset:c}),t.shiftKey&&(i=e.sameRatioOffset({endIndex:e.changeStartEndIndex,offset:i}));var l=null===(n=e.props.element.connectorCaculater)||void 0===n?void 0:n.getUpdateStyle(null,{endIndex:e.changeStartEndIndex,offset:i});e.props.element.updateModelStyle(l)})),g()(s()(e),"handleStartEndPointChangeEnd",(function(t){t.stopPropagation(),t.preventDefault(),document.removeEventListener("mousemove",e.handleStartEndPointMouseMove),document.removeEventListener("mouseup",e.handleStartEndPointChangeEnd),document.removeEventListener("touchmove",e.handleStartEndPointMouseMove),document.removeEventListener("touchend",e.handleStartEndPointChangeEnd);var n=e.props.element.props.style,o=e.props.element.toRemoveConnectorInfoProps(),r={style:x(x({},e.props.element.operationFrame),{},{bgLine:n.bgLine,controlValues:n.controlValues,connectorInfo:e.props.element.props.style.connectorInfo})};o?e.props.element.updateAndRemoveProps(r,o):e.props.element.updateProps(r),Object(E.b)(e.props.element,"operationFrame",null),e.context.editingStateManager.isConnecting&&(e.context.editingStateManager.isConnecting=!1,e.context.editingStateManager.connectingInfo=null),e.props.element.getConnectorInfo()&&e.props.element.buildRelation()})),g()(s()(e),"renderStartAndEndPoint",(function(t,n){var o=e.props.scale;return y.a.createElement("div",{key:n,style:{left:t.x-5,top:t.y-5,position:"absolute",pointerEvents:"auto",backgroundColor:"#0188fb",height:10,width:10,borderRadius:"100%",border:"1px solid #fff",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.32)",transform:"scale(".concat(1/o,")")},className:S.a["nwse-resize"],onMouseDown:e.handleStartEndPointMouseDown.bind(s()(e),n),onTouchStart:e.handleStartEndPointMouseDown.bind(s()(e),n)},P.a.isMobile?y.a.createElement("div",{style:{height:20,width:20,left:-5,top:-5,position:"absolute"}}):null)})),e}return c()(n,[{key:"render",value:function(){var e,t,n=null===(e=(t=this.props.element).getFrame)||void 0===e?void 0:e.call(t).getFrameInfo(!0),o=[{x:0,y:0},{x:n.width,y:n.height}];return y.a.createElement("div",{style:{width:n.width,height:n.height,position:"absolute",transform:C.d(n),pointerEvents:"none"}},o.map(this.renderStartAndEndPoint))}},{key:"getAdsorpOffset",value:function(e,t,n){var o,r,i,a,c,l=n.offset,s=null===(o=(r=this.props.element).getFrame)||void 0===o?void 0:o.call(r).getFrameInfo(!1),d=this.props.element.getStartEndPoints(s),u=d.startP,p=d.endP,f=this.props.element.getStartEndPoints(s,n);0===n.endIndex?(i=f.startP,a=p,c=u):(i=f.endP,a=u,c=p);var h=Object(M.f)(i,a),v=Object(M.g)(h,t,e);if(Math.abs(v)<=e){var m=Object(M.h)(i,a,t,e),g=m.x,b=m.y;l=Object(M.e)(a,c,g,b)}return l}},{key:"sameRatioOffset",value:function(e){var t,n,o,r=null===(t=(n=this.props.element).getFrame)||void 0===t?void 0:t.call(n).getFrameInfo(!1),i=this.props.element.getStartEndPoints(r),a=i.startP,c=i.endP,l={x:0,y:0},s=this.props.element.getStartEndPoints(r,e),d=this.getUiDataService().presentation.props.slideWidth,u=this.getUiDataService().presentation.props.slideHeight;l=0===e.endIndex?s.startP:s.endP;var p=!0;return(1===R()(r,"flipH")&&1!==R()(r,"flipV")||1!==R()(r,"flipH")&&1===R()(r,"flipV"))&&(p=!p),Object(w.s)(l,a,c)===w.a.LEFT&&(p=!p),o=this.offsetWithFrame(r,e,p),(Math.abs(o.x)>d||Math.abs(o.y)>u)&&(o=this.offsetWithFrame(r,e,!p)),o}},{key:"applyInfoOnOffset",value:function(e,t,n){var o=t;if(e.flipH&&1===e.flipH&&(o.x=-o.x),e.flipV&&1===e.flipV&&(o.y=-o.y),e.rotate&&0!==e.rotate){var r=e.rotate%360*Math.PI/180;n||(r=-r),o.x=o.x*Math.cos(r),o.y=o.y*Math.sin(r)}}},{key:"offsetWithFrame",value:function(e,t,n){var o={x:t.offset.x,y:t.offset.y};return this.applyInfoOnOffset(e,o),0===e.height?o.y=0:0===e.width?o.x=0:o=n?{x:o.y*e.width/e.height,y:o.y}:{x:o.x,y:o.x*e.height/e.width},this.applyInfoOnOffset(e,o,!0),o}},{key:"getUiDataService",value:function(){return I.a.getInstance().getAppServices().getUiDataService()}}]),n}(b.Component);g()(D,"contextType",k.a);n("963f2eaace");var L=n("dc68b581cd");function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var T=function(e){u()(n,e);var t=F(n);function n(e,o){var r;return i()(this,n),r=t.call(this,e,o),g()(s()(r),"startPos",void 0),g()(s()(r),"changeControlPointIndex",void 0),g()(s()(r),"controlPoints",void 0),g()(s()(r),"leftInClient",void 0),g()(s()(r),"topInClient",void 0),g()(s()(r),"lineInfo",void 0),g()(s()(r),"componentWillUnmount",(function(){r.lineInfo&&(r.lineInfo=null)})),g()(s()(r),"renderControlPoints",(function(e,t){return r.controlPoints=r.lineInfo.getControlPoints(e,t),r.controlPoints.map(r.renderControlPoint)})),g()(s()(r),"getRelativePosByEvent",(function(e){var t=r.getEventCoordinates(e);return t.x=t.x/r.props.scale,t.y=t.y/r.props.scale,t})),g()(s()(r),"handleControlPointMouseDown",(function(e,t){var n,o,i,a,c,l;t.stopPropagation(),t.preventDefault(),r.startPos=r.getRelativePosByEvent(t),r.changeControlPointIndex=e;var s=r.controlPoints[e];if(1===(null===(n=r.props)||void 0===n||null===(o=n.model)||void 0===o?void 0:o.flipH)&&(s=w.b(s,r.props.model.width/2)),1===(null===(i=r.props)||void 0===i||null===(a=i.model)||void 0===a?void 0:a.flipV)&&(s=w.c(s,r.props.model.height/2)),null!==(c=r.props)&&void 0!==c&&null!==(l=c.model)&&void 0!==l&&l.rotate){var d=r.props.model.width/2,u=r.props.model.height/2;s=w.d(s,r.props.model.rotate,d,u)}r.leftInClient=r.startPos.x-s.x,r.topInClient=r.startPos.y-s.y,document.addEventListener("mousemove",r.handleControlPointMouseMove),document.addEventListener("mouseup",r.handleControlPointChangeEnd),document.addEventListener("touchmove",r.handleControlPointMouseMove,{passive:!1}),document.addEventListener("touchend",r.handleControlPointChangeEnd,{passive:!1})})),g()(s()(r),"handleControlPointMouseMove",(function(e){var t,n,o,i,a,c;e.stopPropagation(),e.preventDefault();var l=r.getRelativePosByEvent(e),s=r.leftInClient+r.props.model.width/2,d=r.topInClient+r.props.model.height/2;null!==(t=r.props)&&void 0!==t&&null!==(n=t.model)&&void 0!==n&&n.rotate&&(l=w.d(l,360-r.props.model.rotate,s,d)),1===(null===(o=r.props)||void 0===o||null===(i=o.model)||void 0===i?void 0:i.flipH)&&(l=w.b(l,s)),1===(null===(a=r.props)||void 0===a||null===(c=a.model)||void 0===c?void 0:c.flipV)&&(l=w.c(l,d));var u={x:l.x-r.leftInClient,y:l.y-r.topInClient};r.lineInfo.controlValues=r.lineInfo.controlValuesWithControlPointChange(r.changeControlPointIndex,r.lineInfo.controlValues,u,r.props.model.width,r.props.model.height),r.props.onControlPointMoving&&r.props.onControlPointMoving(r.lineInfo.controlValues)})),g()(s()(r),"handleControlPointChangeEnd",(function(e){e.stopPropagation(),e.preventDefault(),document.removeEventListener("mousemove",r.handleControlPointMouseMove),document.removeEventListener("mouseup",r.handleControlPointChangeEnd),document.removeEventListener("touchmove",r.handleControlPointMouseMove),document.removeEventListener("touchend",r.handleControlPointChangeEnd),r.props.onControlValueChange&&r.props.onControlValueChange(r.lineInfo.controlValues)})),g()(s()(r),"renderControlPoint",(function(e,t){var n=10/r.props.scale,o=r.props.scale,i="M".concat(n/2," ",0," L").concat(n," ").concat(n/2," L").concat(n/2," ").concat(n," L",0," ").concat(n/2," Z");return y.a.createElement("svg",{key:t,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{width:n,height:n,left:e.x-n/2,top:e.y-n/2,position:"absolute",zIndex:1e3},filter:"drop-shadow(0 ".concat(1/o," ").concat(3/o," rgba(0,0,0,0.32))")},y.a.createElement("path",{stroke:"#FFFFFF",strokeWidth:1/o,fill:"#F5A623",d:i,onMouseDown:r.handleControlPointMouseDown.bind(s()(r),t),pointerEvents:"auto",className:S.a["nwse-resize"]}))})),g()(s()(r),"getEventCoordinates",(function(e){return{x:e.touches?e.touches[0].clientX:e.clientX,y:e.touches?e.touches[0].clientY:e.clientY}})),r.initLineInfo(e),r}return c()(n,[{key:"render",value:function(){return y.a.createElement(y.a.Fragment,null,this.renderControlPoints(this.props.model.width,this.props.model.height))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.initLineInfo(e)}},{key:"initLineInfo",value:function(e){var t=Object(L.b)(R()(e.model,"bgLine"));t&&(this.lineInfo=new t),this.setControlValues(e.model.controlValues)}},{key:"setControlValues",value:function(e){e&&e.length>0?this.lineInfo.controlValues=e.slice():e||(this.lineInfo.controlValues=this.lineInfo.defaultValue.controlValues.slice())}}]),n}(b.Component);g()(T,"contextType",k.a);var B=n("0e0be5791f"),V=n.n(B),U=n("6715f30ed9"),z=n("5a5c6d313d"),H=n("d1f05b304b"),N=n("14502724a6"),W=n.n(N);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Y=function(e){u()(n,e);var t=K(n);function n(){var e;i()(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),g()(s()(e),"toBeConnectingElements",void 0),g()(s()(e),"isMovingConnector",void 0),g()(s()(e),"renderStartAndEndPoint",(function(t,n){var o=e.props.scale;return y.a.createElement("div",{key:n,style:{left:t.x*o-25,top:t.y*o-25,position:"absolute",pointerEvents:"auto",height:48,width:48,display:e.props.isConnecting?"none":"flex",justifyContent:"center",alignItems:"center"},className:S.a["nwse-resize"],onMouseDown:e.handleStartEndPointMouseDown.bind(s()(e),n),onTouchStart:e.handleStartEndPointMouseDown.bind(s()(e),n)},y.a.createElement("div",{style:{width:16,height:16,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"}},y.a.createElement("div",{style:{width:14,height:14,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"white",borderRadius:"50%"}},y.a.createElement("div",{style:{width:10,height:10,borderRadius:"50%",backgroundColor:"#1E6FFF"}}))))})),g()(s()(e),"handleStartEndPointMouseDown",(function(t,n){n.stopPropagation(),n.preventDefault(),e.startPos=e.getEventCoordinates(n),e.changeStartEndIndex=t,e.context.editingStateManager.isConnecting=!0,e.toBeConnectingElements=document.getElementsByClassName("connecting-element-cover"),document.body.addEventListener("mousemove",e.handleStartEndPointMouseMove),document.body.addEventListener("mouseup",e.handleStartEndPointChangeEnd),document.body.addEventListener("touchmove",e.handleStartEndPointMouseMove,{passive:!1}),document.body.addEventListener("touchend",e.handleStartEndPointChangeEnd)})),g()(s()(e),"handleStartEndPointMouseMove",(function(t){var n;if(t.isTrusted){if(t.preventDefault(),!e.isMovingConnector)if(e.context.editingStateManager.connectingInfo={model:e.props.element,endIndex:e.changeStartEndIndex},e.isMovingConnector=!0,0===e.changeStartEndIndex){var o=e.props.element.startUIModel;o&&(e.props.element.props.style.connectorInfo.start=null,o.removeRelatedUIModelRefs(e.props.element))}else if(1===e.changeStartEndIndex){var r=e.props.element.endUIModel;r&&(e.props.element.props.style.connectorInfo.end=null,r.removeRelatedUIModelRefs(e.props.element))}var i,a=e.getEventCoordinates(t),c={x:(a.x-e.startPos.x)/e.props.scale,y:(a.y-e.startPos.y)/e.props.scale};i=e.getAdsorpOffset(M.b,M.a,{endIndex:e.changeStartEndIndex,offset:c}),t.shiftKey&&(i=e.sameRatioOffset({endIndex:e.changeStartEndIndex,offset:i}));var l=null===(n=e.props.element.connectorCaculater)||void 0===n?void 0:n.getUpdateStyle(null,{endIndex:e.changeStartEndIndex,offset:i});e.props.element.updateModelStyle(l),e.dispatchMoveEvent(t)}})),g()(s()(e),"handleStartEndPointChangeEnd",(function(t){t.stopPropagation(),t.preventDefault(),document.body.removeEventListener("mousemove",e.handleStartEndPointMouseMove),document.body.removeEventListener("mouseup",e.handleStartEndPointChangeEnd),document.body.removeEventListener("touchmove",e.handleStartEndPointMouseMove),document.body.removeEventListener("touchend",e.handleStartEndPointChangeEnd);var n=e.props.element.props.style,o=e.props.element.toRemoveConnectorInfoProps(),r={style:_(_({},e.props.element.operationFrame),{},{bgLine:n.bgLine,controlValues:n.controlValues,connectorInfo:e.props.element.props.style.connectorInfo})};o?e.props.element.updateAndRemoveProps(r,o):e.props.element.updateProps(r),Object(E.b)(e.props.element,"operationFrame",null),e.context.editingStateManager.isConnecting&&(e.context.editingStateManager.isConnecting=!1,e.context.editingStateManager.connectingInfo=null),e.dispatchMoveEndEvent(t),e.toBeConnectingElements=[],e.props.element.getConnectorInfo()&&e.props.element.buildRelation(),e.isMovingConnector=!1})),e}return c()(n,[{key:"render",value:function(){var e,t,n=null===(e=(t=this.props.element).getFrame)||void 0===e?void 0:e.call(t).getFrameInfo(!0);this.context.editingStateManager.readyToConnect=!0;var o=[{x:0,y:0},{x:n.width,y:n.height}];return y.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",transform:C.d(n),pointerEvents:"none"}},o.map(this.renderStartAndEndPoint))}},{key:"componentWillUnmount",value:function(){this.context.editingStateManager.readyToConnect=!1}},{key:"dispatchMoveEndEvent",value:function(e){for(var t=0;t<this.toBeConnectingElements.length;t++){var n=this.toBeConnectingElements[t];if(!n)break;var o=new MouseEvent("mouseout",e);n.dispatchEvent(o)}}},{key:"dispatchMoveEvent",value:function(e){for(var t=0;t<this.toBeConnectingElements.length;t++){var n=this.toBeConnectingElements[t];if(!n)break;var o=n.getBoundingClientRect(),r=o.top,i=o.left,a=o.width,c=o.height,l=W()(e.changedTouches,1)[0],s=l.clientX,d=l.clientY;if(Object(w.t)({x:s,y:d},{top:r,left:i,width:a,height:c})){var u=new TouchEvent("touchmove",e);n.dispatchEvent(u)}else{var p=new MouseEvent("mouseout",e);n.dispatchEvent(p)}}}}]),n}(D);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var q,J,Z,Q=function(e){u()(n,e);var t=X(n);function n(e,o){var r;return i()(this,n),r=t.call(this,e,o),g()(s()(r),"renderControlPoint",(function(e,t){var n=r.props.scale;return y.a.createElement("div",{key:t,onMouseDown:r.handleControlPointMouseDown.bind(s()(r),t),onTouchStart:r.handleControlPointMouseDown.bind(s()(r),t),style:{width:48,height:48,left:e.x*n-24,top:e.y*n-24,position:"absolute",zIndex:1e3,display:r.props.isConnecting?"none":"flex",justifyContent:"center",alignItems:"center",pointerEvents:"auto"}},y.a.createElement("div",{style:{width:16,height:16,border:"".concat(1,"px solid rgba(0, 0, 0, 0.12)"),borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"}},y.a.createElement("div",{style:{width:14,height:14,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"white",borderRadius:"50%"}},y.a.createElement("div",{style:{width:10,height:10,borderRadius:"50%",backgroundColor:"#FFAB00"}}))))})),g()(s()(r),"handleControlPointMouseDown",(function(e,t){var n,o,i,a,c,l;t.stopPropagation(),t.preventDefault(),r.context.editingStateManager.isControlValuesChanging=!0,r.startPos=r.getRelativePosByEvent(t),r.changeControlPointIndex=e;var s=r.controlPoints[e];if(1===(null===(n=r.props)||void 0===n||null===(o=n.model)||void 0===o?void 0:o.flipH)&&(s=w.b(s,r.props.model.width/2)),1===(null===(i=r.props)||void 0===i||null===(a=i.model)||void 0===a?void 0:a.flipV)&&(s=w.c(s,r.props.model.height/2)),null!==(c=r.props)&&void 0!==c&&null!==(l=c.model)&&void 0!==l&&l.rotate){var d=r.props.model.width/2,u=r.props.model.height/2;s=w.d(s,r.props.model.rotate,d,u)}r.leftInClient=r.startPos.x-s.x,r.topInClient=r.startPos.y-s.y,document.body.addEventListener("mousemove",r.handleControlPointMouseMove),document.body.addEventListener("mouseup",r.handleControlPointChangeEnd),document.body.addEventListener("touchmove",r.handleControlPointMouseMove,{passive:!1}),document.body.addEventListener("touchend",r.handleControlPointChangeEnd)})),g()(s()(r),"handleControlPointChangeEnd",(function(e){e.stopPropagation(),e.preventDefault(),document.body.removeEventListener("mousemove",r.handleControlPointMouseMove),document.body.removeEventListener("mouseup",r.handleControlPointChangeEnd),document.body.removeEventListener("touchmove",r.handleControlPointMouseMove),document.body.removeEventListener("touchend",r.handleControlPointChangeEnd),r.props.onControlValueChange&&r.props.onControlValueChange(r.lineInfo.controlValues),r.context.editingStateManager.isControlValuesChanging=!1})),r}return c()(n,[{key:"render",value:function(){return y.a.createElement(y.a.Fragment,null,this.renderControlPoints(this.props.model.width,this.props.model.height))}}]),n}(T);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var ne,oe,re,ie=Object(z.b)((Z=J=function(e){u()(n,e);var t=te(n);function n(){var e;i()(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),g()(s()(e),"updateComponent",(function(){e.forceUpdate()})),g()(s()(e),"handleControlPointMoving",(function(t){U.a.checkControlValuesSame(e.props.element.props.style.controlValues,t)||Object(E.b)(e.props.element,"operatingGraphicInfo",{controlValues:t})})),g()(s()(e),"handleControlValuesChange",(function(t){var n,o={controlValues:t};e.props.element&&(null===(n=e.props.element.getGraphic())||void 0===n||n.updateGraphicLineInfo(o));e.props.element.operatingGraphicInfo=null})),e}return c()(n,[{key:"componentDidMount",value:function(){var e=H.a.createObserver(this.props.element);e&&e.addChangesetObserver(this.updateComponent)}},{key:"componentWillUnmount",value:function(){var e=H.a.createObserver(this.props.element);e&&e.removeChangesetObserver(this.updateComponent)}},{key:"render",value:function(){var e;if(this.context.editingStateManager.isConnecting&&!P.a.isMobile)return null;var t=this.props.element,n=null===(e=t.getFrame)||void 0===e?void 0:e.call(t).getFrameInfo(!0),o=t.operatingGraphicInfo?t.operatingGraphicInfo.controlValues:t.props.style.controlValues;return y.a.createElement(y.a.Fragment,null,this.props.editable&&!this.props.isPreview&&(P.a.isMobile?y.a.createElement(Y,{element:t,isConnecting:this.props.isConnecting,scale:this.props.scale}):y.a.createElement(D,{element:t,scale:this.props.scale})),this.props.editable&&!this.props.isPreview&&y.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",transform:C.d(n),pointerEvents:"none"}},P.a.isMobile?y.a.createElement(Q,{model:ee(ee({},V()(Object(E.c)(this.props.element.props.style),"width","height")),{},{width:n.width,height:n.height,controlValues:o}),scale:this.props.scale,isConnecting:this.props.isConnecting,onControlValueChange:this.handleControlValuesChange,onControlPointMoving:this.handleControlPointMoving}):y.a.createElement(T,{model:ee(ee({},V()(Object(E.c)(this.props.element.props.style),"width","height")),{},{width:n.width,height:n.height,controlValues:o}),scale:this.props.scale,onControlValueChange:this.handleControlValuesChange,onControlPointMoving:this.handleControlPointMoving})))}}]),n}(b.Component),g()(J,"contextType",k.a),q=Z))||q,ae=ie,ce=n("730477bb20"),le=n.n(ce),se=n("8d60a34310"),de=n("7485b1517d"),ue=n.n(de),pe=n("7d52e7e74a"),fe=n("e5a826a0ff"),he=n("7d1df7d0fb"),ve=n("e388ef2636");function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var ge,be,ye,Se,Ee,we=(ne=Reflect.metadata("design:type",Function),oe=Reflect.metadata("design:paramtypes",[void 0]),Object(z.b)(re=ne(re=oe(re=function(e){u()(n,e);var t=me(n);function n(e){var o;return i()(this,n),o=t.call(this,e),g()(s()(o),"updateComponent",(function(){o.forceUpdate()})),g()(s()(o),"handleBorderMouseDown",(function(){var e;null===(e=o.getSelectionService())||void 0===e||e.selectedElements.clear(fe.a.GROUP)})),o}return c()(n,[{key:"componentDidMount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.addLocalChangeObserver(this.updateComponent),e.addChangesetObserver(this.updateComponent));var t=this.props.element;t.isRootGroup&&ve.a.caculateItemValues(t)}},{key:"componentWillUnmount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.removeLocalChangeObserver(this.updateComponent),e.removeChangesetObserver(this.updateComponent))}},{key:"render",value:function(){var e,t,n,r=this.props.element,i=U.a.frameInfoForInner(r),a=null===(e=r.getFrame)||void 0===e?void 0:e.call(r).getFrameInfo(!0),c=U.a.relativeInfoForInner(r),l=r.isRootGroup,s=(Object(he.a)(r,!0)||[]).some((function(e){return e.type===o.d.CHART})),d={};if(l){var u,p=null===(u=r.getFrame)||void 0===u?void 0:u.call(r).getFrameInfo(!!r.operationFrame);d={left:p.left-pe.a,top:p.top-pe.a,width:p.width+2*pe.a,height:p.height+2*pe.a}}return y.a.createElement(se.b,le()({},ue()(this.props,Object.keys(se.a)),{showSelectBorder:!0,scale:this.props.scale,rect:{left:d.left||0,top:d.top||0,width:d.width||0,height:d.height||0},editable:!0,resizeHorizontal:!0,resizeVertical:!0,canRotate:!s,relativeRotate:c.relativeRotate,relativeFlipH:c.relativeFlipH,relativeFlipV:c.relativeFlipV,rotate:i.rotate,onBorderClick:this.props.onBorderClick},U.a.commonPropsForCanvasElement(r,this.props.scale),{style:{transform:Object(C.d)(a),width:l?d.width:a.width,height:l?d.height:a.height,position:"absolute"},onBorderMouseDown:this.handleBorderMouseDown,selectedElementInGroupInMobile:this.props.selectedElementInGroupInMobile,isMobileRotatingMode:null!==(t=null===(n=this.getRotateElementHandler())||void 0===n?void 0:n.isMobileRotatingMode)&&void 0!==t&&t}))}},{key:"getSelectionService",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getRotateElementHandler",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.rotateElementHandler}}]),n}(b.Component))||re)||re)||re),Me=n("e5cbb41a81");function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Re=(ge=Reflect.metadata("design:type",Function),be=Reflect.metadata("design:paramtypes",[void 0]),Object(z.b)(ye=ge(ye=be((Ee=Se=function(e){u()(n,e);var t=Oe(n);function n(e){var o;return i()(this,n),o=t.call(this,e),g()(s()(o),"needMouseUp",void 0),g()(s()(o),"updateComponent",(function(){o.forceUpdate()})),g()(s()(o),"handleResizeStart",(function(e,t){var n,r=o.props.element;r.uploadEditingCellData(!0),r.showSelection=!1,r.afterSelection(0,0,r.props.rowHeights.length-1,r.props.colWidths.length-1),null===(n=o.getResizeElementHandler())||void 0===n||n.handleResizeStart(r,e,o.props.scale,t)})),g()(s()(o),"handleTableBorderMouseDown",(function(e){o.props.element.uploadEditingCellData(!0),e&&(e.metaKey||e.shiftKey||e.ctrlKey)?o.needMouseUp=!0:(o.props.element.showSelection=!1,o.props.element.afterSelection(0,0,o.props.element.props.rowHeights.length-1,o.props.element.props.colWidths.length-1))})),g()(s()(o),"handleTableBorderMouseUp",(function(){var e,t;if(null===(e=I.a.getInstance().getAppServices().editableServiceLayer)||void 0===e||null===(t=e.selectedAnims)||void 0===t||t.clear(),!0===o.needMouseUp){var n;if(o.props.element.selected)null===(n=o.getSelectionService())||void 0===n||n.selectedElements.remove(o.props.element);o.needMouseUp=!1}})),g()(s()(o),"handleBorderDoubleClick",(function(e){null==e||e.stopPropagation()})),o}return c()(n,[{key:"render",value:function(){var e=this.props.element,t=U.a.frameInfoForInner(e),n=U.a.relativeInfoForInner(e);return y.a.createElement(se.b,le()({},ue()(this.props,Object.keys(se.a)),{scale:this.props.scale,rect:t,canRotate:!1,relativeRotate:n.relativeRotate,relativeFlipH:n.relativeFlipH,relativeFlipV:n.relativeFlipV,rotate:0},U.a.commonPropsForCanvasElement(e,this.props.scale),{onResizeStart:this.handleResizeStart,onBorderMouseDown:this.handleTableBorderMouseDown,onBorderMouseUp:this.handleTableBorderMouseUp,onBorderClick:this.props.onBorderClick,onBorderDoubleClick:this.handleBorderDoubleClick}))}},{key:"componentDidMount",value:function(){window.event&&Object(Me.b)(window.event)&&!Object(Me.a)(window.event)?(this.props.element.uploadEditingCellData(!0),this.props.element.showSelection=!1,this.props.element.afterSelection(0,0,this.props.element.props.rowHeights.length-1,this.props.element.props.colWidths.length-1)):null===this.props.element.selectedRange&&this.props.element.afterSelection(0,0,this.props.element.props.rowHeights.length-1,this.props.element.props.colWidths.length-1);var e=H.a.createObserver(this.props.element);e&&e.addChangesetObserver(this.updateComponent)}},{key:"componentWillUnmount",value:function(){var e=H.a.createObserver(this.props.element);e&&e.removeChangesetObserver(this.updateComponent),this.props.element.uploadEditingCellData(!0),this.props.element.showSelection=!1,this.props.element.selectedCellRanges=[],this.props.element.selectedRange=null}},{key:"getSelectionService",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getResizeElementHandler",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.resizeElementHandler}}]),n}(b.Component),g()(Se,"contextType",k.a),ye=Ee))||ye)||ye)||ye),Ce=n("c73625d763"),Pe=n.n(Ce),Ie=n("33c34da0d5"),ke=n("145eddafd2");function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var xe,Ae=function(e){u()(n,e);var t=je(n);function n(e,o){var r;return i()(this,n),r=t.call(this,e,o),g()(s()(r),"pathParser",void 0),g()(s()(r),"startPos",void 0),g()(s()(r),"changeControlPointIndex",void 0),g()(s()(r),"leftInClient",void 0),g()(s()(r),"topInClient",void 0),g()(s()(r),"controlPoints",void 0),g()(s()(r),"renderControlPoints",(function(){return r.controlPoints=r.pathParser.getControlPoints(),r.controlPoints.map(r.renderControlPoint)})),g()(s()(r),"renderControlPoint",(function(e,t){var n=10/r.props.scale,o="M".concat(n/2," ",0," L").concat(n," ").concat(n/2," L").concat(n/2," ").concat(n," L",0," ").concat(n/2," Z");return y.a.createElement("svg",{key:t,xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{width:n,height:n,left:e.x-n/2,top:e.y-n/2,position:"absolute",zIndex:1e3},filter:"drop-shadow(0 ".concat(1/r.props.scale," ").concat(3/r.props.scale," rgba(0,0,0,0.32))")},y.a.createElement("path",{stroke:"#FFFFFF",strokeWidth:1/r.props.scale,fill:"#F5A623",d:o,onMouseDown:r.handleControlPointMouseDown.bind(s()(r),t),pointerEvents:"auto",className:S.a["nwse-resize"]}))})),g()(s()(r),"handleControlPointMouseMove",(function(e){var t,n;e.stopPropagation(),e.preventDefault();var o=r.getRelativePosByEvent(e);if(Pe()(r.props.model,"rotate")&&r.props.model.rotate){var i=r.leftInClient+r.props.model.width/2,a=r.topInClient+r.props.model.height/2;o=w.d(o,360-r.props.model.rotate,i,a)}var c={x:o.x-r.leftInClient,y:o.y-r.topInClient},l=null===(t=r.pathParser.getControlValuesWhenControlPointChange(r.changeControlPointIndex,c))||void 0===t||null===(n=t.slice)||void 0===n?void 0:n.call(t);if(r.pathParser.updateControlValues(l),r.props.onControlPointMoving){var s,d,u=null===(s=(d=r.pathParser).getTextRect)||void 0===s?void 0:s.call(d);r.props.onControlPointMoving(l,u)}})),g()(s()(r),"handleControlPointMouseDown",(function(e,t){t.stopPropagation(),t.preventDefault(),r.startPos=r.getRelativePosByEvent(t),r.changeControlPointIndex=e;var n={x:r.controlPoints[e].x,y:r.controlPoints[e].y};if(Pe()(r.props.model,"rotate")&&r.props.model.rotate){var o=r.props.model,i=o.rotate,a=o.width,c=o.height;n=w.d(n,i,a/2,c/2)}r.leftInClient=r.startPos.x-n.x,r.topInClient=r.startPos.y-n.y,document.addEventListener("mousemove",r.handleControlPointMouseMove),document.addEventListener("mouseup",r.handleControlPointChangeEnd),document.addEventListener("touchmove",r.handleControlPointMouseMove,{passive:!1}),document.addEventListener("touchend",r.handleControlPointChangeEnd,{passive:!1}),r.props.onControlPointMouseDown&&r.props.onControlPointMouseDown()})),g()(s()(r),"handleControlPointChangeEnd",(function(e){e.stopPropagation(),e.preventDefault(),document.removeEventListener("mousemove",r.handleControlPointMouseMove),document.removeEventListener("mouseup",r.handleControlPointChangeEnd),document.removeEventListener("touchmove",r.handleControlPointMouseMove),document.removeEventListener("touchend",r.handleControlPointChangeEnd),r.props.onControlValueChange&&r.props.onControlValueChange(r.pathParser.controlValues)})),g()(s()(r),"getRelativePosByEvent",(function(e){var t,n,o,i,a=r.getEventCoordinates(e);return 1===(null===(t=r.props)||void 0===t||null===(n=t.model)||void 0===n?void 0:n.flipH)&&(a=w.b(a,0)),1===(null===(o=r.props)||void 0===o||null===(i=o.model)||void 0===i?void 0:i.flipV)&&(a=w.c(a,0)),Pe()(r.props,"scale")&&0!==r.props.scale&&(a.x=a.x/r.props.scale,a.y=a.y/r.props.scale),a})),g()(s()(r),"getEventCoordinates",(function(e){return{x:"touches"in e?e.touches[0].clientX:e.clientX,y:"touches"in e?e.touches[0].clientY:e.clientY}})),r.initPathParser(e),r}return c()(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.initPathParser(e)}},{key:"componentWillUnmount",value:function(){this.pathParser&&(this.pathParser=null)}},{key:"render",value:function(){return y.a.createElement(y.a.Fragment,null,this.renderControlPoints())}},{key:"initPathParser",value:function(e){var t,n,o,r,i,a,c={type:null!==(t=null!==(n=null===(o=e.model.border)||void 0===o||null===(r=o.sketchStyle)||void 0===r?void 0:r.bgShape)&&void 0!==n?n:e.model.bgShape)&&void 0!==t?t:ke.b.rect,controlValues:null===(i=e.model)||void 0===i||null===(a=i.controlValues)||void 0===a?void 0:a.slice(),width:e.model.width,height:e.model.height,pathList:e.model.pathList};this.pathParser?this.pathParser.update(c):this.pathParser=Object(Ie.g)(c)}}]),n}(b.Component),De=n("3a2def422a"),Le=n("df966acc77"),Fe=n("6ef6f43e2c");function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Ue=Object(z.b)(xe=function(e){u()(n,e);var t=Ve(n);function n(){var e;i()(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),g()(s()(e),"renderForeground",(function(t,n,o,r,i,a){var c=Be(Be(Be({},V()(Object(E.c)(e.props.element.props.style),"width","height","border")),t),{},{rotate:e.props.rotate}),l={};l.src=n,l.width=o,l.height=r,l.pl=i,l.pt=a,l.alpha=e.props.element.props.style.alpha,l.isForeground=!0;var s={};return s.image=l,c.fillBackground=s,e.props.element.props.syncLoad&&(l.syncLoad=!0),y.a.createElement(Fe.a,{model:c,relativeRotate:e.props.relativeRotate,relativeFlipH:e.props.relativeFlipH,relativeFlipV:e.props.relativeFlipV,pointerEvents:"none",style:{width:c.width,height:c.height,position:"absolute"},mkey:c.key})})),e}return c()(n,[{key:"render",value:function(){var e=this.props.element,t=e.props,n=Be({},this.props.rect);n.srcRect=Pe()(e,"srcRect.t")?e.srcRect:e.props.style.srcRect;var o=n.width,r=n.height,i=null!=n&&n.srcRect?n.srcRect:t.style.srcRect,a=t.src,c=this.getCropComponentParams(o,r,i),l=c.pl,s=c.pr,d=c.pt,u=c.pb,p=c.rw,f=c.rh,h={width:n.width,height:n.height},v={flipH:n.flipH,flipV:n.flipV};return y.a.createElement(Le.a,{component:e,rw:p,rh:f,pl:l,pt:d,pr:s,pb:u,src:a,flip:v,width:o,height:r,scale:this.props.scale,rotate:this.props.rotate||0,type:e.type,relativeRotate:this.props.relativeRotate||0,relativeFlipH:this.props.relativeFlipH||0,relativeFlipV:this.props.relativeFlipV||0,getCropSize:this.getCropSize.bind(this,n),getSize:function(){return De.a.sizeInfo(e)},getFlip:function(){return De.a.flipInfo(e)},getOldSrcRect:this.getOldSrcRect.bind(this,n),isCroping:!0},this.renderForeground(h,a,p,f,l,d))}},{key:"getCropSize",value:function(e){var t=this.props.element.props,n=e.width,o=e.height,r=e.left,i=e.top,a=null!=e&&e.srcRect?e.srcRect:t.style.srcRect,c=this.props.element.getImageSize().getForegroundImageSize({width:n,height:o,srcRect:a}),l=c.pl,s=c.pr,d=c.pt,u=c.pb;return{width:c.rw,height:c.rh,left:r-l,top:i-d,aLeft:l,aTop:d,aRight:s,aBottom:u,centerX:n/2+r,centerY:o/2+i}}},{key:"getOldSrcRect",value:function(e){var t=this.props.element.props;return null!=e&&e.srcRect?e.srcRect:t.style.srcRect}},{key:"getCropComponentParams",value:function(e,t,n){var o=this.props.element.getImageSize().getForegroundImageSize({width:e,height:t,srcRect:n}),r=o.pl,i=o.pr,a=o.pt,c=o.pb,l=o.rw,s=o.rh;return{pl:"".concat(-r,"px"),pr:"".concat(-i,"px"),pt:"".concat(-a,"px"),pb:"".concat(-c,"px"),rw:isNaN(l)?0:l,rh:isNaN(s)?0:s}}}]),n}(b.Component))||xe,ze=Ue;function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Ne,We,Ge,_e,Ke,Ye=function(e){u()(n,e);var t=He(n);function n(){var e;i()(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),g()(s()(e),"renderControlPoint",(function(t,n){return y.a.createElement("div",{key:n,onMouseDown:e.handleControlPointMouseDown.bind(s()(e),n),onTouchStart:e.handleControlPointMouseDown.bind(s()(e),n),style:{width:48,height:48,left:t.x*e.props.scale-24,top:t.y*e.props.scale-24,position:"absolute",zIndex:1e3,display:"flex",justifyContent:"center",alignItems:"center",pointerEvents:"auto"}},y.a.createElement("div",{style:{width:16,height:16,border:"".concat(1,"px solid rgba(0, 0, 0, 0.12)"),borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center"}},y.a.createElement("div",{style:{width:14,height:14,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"white",borderRadius:"50%"}},y.a.createElement("div",{style:{width:10,height:10,borderRadius:"50%",backgroundColor:"#FFAB00"}}))))})),g()(s()(e),"handleControlPointMouseDown",(function(t,n){n.stopPropagation(),n.preventDefault(),e.startPos=e.getRelativePosByEvent(n),e.changeControlPointIndex=t;var o={x:e.controlPoints[t].x,y:e.controlPoints[t].y};if(Pe()(e.props.model,"rotate")&&e.props.model.rotate){var r=e.props.model,i=r.rotate,a=r.width,c=r.height;o=w.d(o,i,a/2,c/2)}e.leftInClient=e.startPos.x-o.x,e.topInClient=e.startPos.y-o.y,document.body.addEventListener("mousemove",e.handleControlPointMouseMove),document.body.addEventListener("mouseup",e.handleControlPointChangeEnd),document.body.addEventListener("touchmove",e.handleControlPointMouseMove,{passive:!1}),document.body.addEventListener("touchend",e.handleControlPointChangeEnd),e.props.onControlPointMouseDown&&e.props.onControlPointMouseDown()})),g()(s()(e),"handleControlPointChangeEnd",(function(t){t.stopPropagation(),t.preventDefault(),document.body.removeEventListener("mousemove",e.handleControlPointMouseMove),document.body.removeEventListener("mouseup",e.handleControlPointChangeEnd),document.body.removeEventListener("touchmove",e.handleControlPointMouseMove),document.body.removeEventListener("touchend",e.handleControlPointChangeEnd),e.props.onControlValueChange&&e.props.onControlValueChange(e.pathParser.controlValues)})),g()(s()(e),"updateComponent",(function(){e.forceUpdate()})),e}return c()(n,[{key:"componentDidMount",value:function(){window.addEventListener("enterEditing",this.updateComponent),window.addEventListener("exitEditing",this.updateComponent)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("enterEditing",this.updateComponent),window.removeEventListener("exitEditing",this.updateComponent)}},{key:"render",value:function(){return this.props.isDragging||this.props.isResizing||this.props.isRotating||this.props.editorIsEditing||this.props.isMobileRotatingMode?null:y.a.createElement(y.a.Fragment,null,this.renderControlPoints())}}]),n}(Ae);function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Ze,Qe=(Ne=Reflect.metadata("design:type",Function),We=Reflect.metadata("design:paramtypes",[void 0]),Object(z.b)(Ge=Ne(Ge=We((Ke=_e=function(e){u()(n,e);var t=Je(n);function n(e){var o;return i()(this,n),o=t.call(this,e),g()(s()(o),"updateComponent",(function(){o.forceUpdate()})),g()(s()(o),"handleControlValuesChange",(function(e){var t,n={controlValues:e};o.props.element&&(null===(t=o.props.element.getGraphic())||void 0===t||t.updateGraphicInfo(n));o.context.editingStateManager.isControlValuesChanging=!1,o.props.element.operatingGraphicInfo=null})),g()(s()(o),"handleControlPointMoving",(function(e){if(!U.a.checkControlValuesSame(o.props.element.props.style.controlValues,e)){var t,n=null===(t=o.getBorderSketchManager())||void 0===t?void 0:t.getSketchPathList(o.props.element,{controlValues:e});Object(E.b)(o.props.element,"operatingGraphicInfo",{controlValues:e,pathList:n})}})),o}return c()(n,[{key:"componentDidMount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.addLocalChangeObserver(this.updateComponent),e.addChangesetObserver(this.updateComponent))}},{key:"componentWillUnmount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.removeLocalChangeObserver(this.updateComponent),e.removeChangesetObserver(this.updateComponent))}},{key:"render",value:function(){var e,t,n=this.props.element,o=U.a.frameInfoForInner(n),r=null===(e=n.getFrame)||void 0===e?void 0:e.call(n).getFrameInfo(!0),i=U.a.relativeInfoForInner(n),a=U.a.commonPropsForCanvasElement(n,this.props.scale),c=n.operatingGraphicInfo?n.operatingGraphicInfo.controlValues:n.props.style.controlValues,l=1===(null===(t=this.getSelectionService())||void 0===t?void 0:t.selectedElements.length);return y.a.createElement(y.a.Fragment,null,y.a.createElement(se.b,le()({},ue()(this.props,Object.keys(se.a)),{showSelectBorder:!0,scale:this.props.scale,rect:qe({},r),resizeHorizontal:!0,resizeVertical:!0,editable:!0,canRotate:!0,relativeRotate:i.relativeRotate,relativeFlipH:i.relativeFlipH,relativeFlipV:i.relativeFlipV,rotate:o.rotate,onBorderClick:this.props.onBorderClick},a,{isMobileRotatingMode:this.props.isMobileRotatingMode}),this.props.isCroping&&y.a.createElement("div",{style:{width:r.width,height:r.height,transform:C.d(o),position:"absolute"}},y.a.createElement(ze,{element:n,scale:this.props.scale,rect:r,rotate:o.rotate,relativeRotate:i.relativeRotate,relativeFlipH:i.relativeFlipH,relativeFlipV:i.relativeFlipV}))),l&&this.props.editable&&!this.props.isPreview&&y.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",zIndex:"1000",transform:C.d(r)}},P.a.isMobile?y.a.createElement(Ye,{model:qe(qe(qe({},V()(Object(E.c)(this.props.element.props.style),"width","height","left","top")),r),{},{rotate:o.rotate,controlValues:c}),scale:this.props.scale,onControlValueChange:this.handleControlValuesChange,onControlPointMoving:this.handleControlPointMoving,isResizing:this.props.isResizing,isRotating:this.props.isRotating,editorIsEditing:this.getEditorInstanceService().checkEditorIsEditing(),isMobileRotatingMode:this.props.isMobileRotatingMode}):y.a.createElement(Ae,{model:qe(qe(qe({},V()(Object(E.c)(this.props.element.props.style),"width","height","left","top")),r),{},{rotate:o.rotate,controlValues:c}),scale:this.props.scale,onControlValueChange:this.handleControlValuesChange,onControlPointMoving:this.handleControlPointMoving})))}},{key:"getSelectionService",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getEditorInstanceService",value:function(){return I.a.getInstance().getAppServices().viewableServiceLayer.editorInstanceService}},{key:"getBorderSketchManager",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.borderSketchManager}}]),n}(b.Component),g()(_e,"contextType",k.a),Ge=Ke))||Ge)||Ge)||Ge);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var nt,ot,rt,it,at,ct={l:0,r:0,b:0,t:0},lt=Object(z.b)(Ze=function(e){u()(n,e);var t=tt(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"getCropSize",value:function(e){var t,n,o=e.width,r=e.height,i=e.left,a=e.top,c=this.props.element.props,l=null!=e&&e.srcRect?e.srcRect:null!==(t=c.style.fillBackground)&&void 0!==t&&null!==(n=t.image)&&void 0!==n&&n.stretch?c.style.fillBackground.image.stretch.fillRect:null,s=o*(l=this.resetSrcRect(l)).l,d=o*l.r,u=r*l.t,p=r*l.b;return{width:o+s+d,height:r+u+p,left:i-s,top:a-u,aLeft:s,aTop:u,aRight:d,aBottom:p,centerX:o/2+i,centerY:r/2+a}}},{key:"getOldSrcRect",value:function(e){var t,n,o,r,i=this.props.element.props,a=null!==(t=null==e?void 0:e.srcRect)&&void 0!==t?t:null===(n=i.style.fillBackground)||void 0===n||null===(o=n.image)||void 0===o||null===(r=o.stretch)||void 0===r?void 0:r.fillRect;return a=this.resetSrcRect(a)}},{key:"getRectInfo",value:function(e,t){var n=et({},this.props.rect);if(Pe()(e,"srcRect.t"))n.srcRect=e.srcRect;else if(Object(E.a)(t.style.fillBackground,"image.stretch")){var o=t.style.fillBackground.image.stretch.fillRect;n.srcRect=o?this.resetSrcRect(o):o}return n}},{key:"resetSrcRect",value:function(e){return et(et({},ct),e)}},{key:"getSizeFromProps",value:function(e){return{width:this.props.rect?this.props.rect.width:e.style.width,height:this.props.rect?this.props.rect.height:e.style.height,left:this.props.rect?this.props.rect.left:e.style.left,top:this.props.rect?this.props.rect.top:e.style.top}}},{key:"getRenderParams",value:function(e,t,n){var o="",r=0,i=0,a=0,c=0,l=0,s=0,d=this.getRectInfo(e,t);if(Object(E.a)(t.style.fillBackground,"image")){var u,p,f=t.style.fillBackground.image.stretch,h=null!==(u=null==f?void 0:f.fillRect)&&void 0!==u?u:null,v=null!==(p=null==d?void 0:d.srcRect)&&void 0!==p?p:h;v=this.resetSrcRect(v),o=t.style.fillBackground.image.src,r=n.width*v.l,i=n.width*v.r,a=n.height*v.t,c=n.height*v.b,l=n.width+r+i,s=n.height+a+c,isNaN(l)&&(l=0),isNaN(s)&&(s=0),r="".concat(-r,"px"),i="".concat(-i,"px"),a="".concat(-a,"px"),c="".concat(-c,"px")}else r="".concat(r,"px"),i="".concat(i,"px"),a="".concat(a,"px"),c="".concat(c,"px");return{src:o,pl:r,pr:i,pt:a,pb:c,rw:l,rh:s,rectInfo:d}}},{key:"render",value:function(){var e=this.props.element,t=this.props.element.props,n=this.getSizeFromProps(t),o=this.props.rect,r={flipH:o?o.flipH:0,flipV:o?o.flipV:0},i=this.getRenderParams(e,t,n),a=i.src,c=i.pl,l=i.pr,s=i.pt,d=i.pb,u=i.rw,p=i.rh,f=i.rectInfo;return y.a.createElement(Le.a,{component:this.props.element,rw:u,rh:p,pl:c,pt:s,pr:l,pb:d,src:a,flip:r,width:n.width,height:n.height,scale:this.props.scale,rotate:this.props.rotate||0,type:this.props.element.type,relativeRotate:this.props.relativeRotate||0,relativeFlipH:this.props.relativeFlipH||0,relativeFlipV:this.props.relativeFlipV||0,getCropSize:this.getCropSize.bind(this,f),getSize:function(){return De.a.sizeInfo(e)},getFlip:function(){return De.a.flipInfo(e)},getOldSrcRect:this.getOldSrcRect.bind(this,f),isCroping:!0},y.a.createElement(Fe.a,{model:et(et(et({},V()(Object(E.c)(t.style),"width","height","left","top")),n),{},{rect:f,rotate:this.props.rotate,isFillRect:!0}),scale:this.props.scale,relativeRotate:this.props.relativeRotate,relativeFlipH:this.props.relativeFlipH,relativeFlipV:this.props.relativeFlipV,pointerEvents:"none",mkey:e.key,style:{position:"absolute"}}))}}]),n}(b.Component))||Ze,st=lt;function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var ft,ht,vt,mt=(nt=Reflect.metadata("design:type",Function),ot=Reflect.metadata("design:paramtypes",[void 0]),Object(z.b)(rt=nt(rt=ot((at=it=function(e){u()(n,e);var t=pt(n);function n(e){var o;return i()(this,n),o=t.call(this,e),g()(s()(o),"updateComponent",(function(){o.forceUpdate()})),g()(s()(o),"handleDragStart",(function(e,t){var n;o.handleEditorBlur(),null===(n=o.getDragElementHandler())||void 0===n||n.handleDragStart(o.props.element,e,t)})),g()(s()(o),"handleResizeStart",(function(e,t){var n;o.handleEditorBlur(),null===(n=o.getResizeElementHandler())||void 0===n||n.handleResizeStart(o.props.element,e,o.props.scale,t)})),g()(s()(o),"handleRotateStart",(function(e){var t;o.handleEditorBlur(),null===(t=o.getRotateElementHandler())||void 0===t||t.handleRotateStart(o.props.element,o.props.scale,e)})),g()(s()(o),"handleBorderMouseDown",(function(){o.setEditorReadyEditingIfNeed()})),g()(s()(o),"handleControlValuesChange",(function(e){var t,n={controlValues:e};o.props.element&&(null===(t=o.props.element.getGraphic())||void 0===t||t.updateGraphicInfo(n));o.context.editingStateManager.isControlValuesChanging=!1,o.props.element.operatingGraphicInfo=null})),g()(s()(o),"handleControlPointMoving",(function(e,t){if(!U.a.checkControlValuesSame(o.props.element.props.style.controlValues,e)){var n,r=null===(n=o.getBorderSketchManager())||void 0===n?void 0:n.getSketchPathList(o.props.element,{controlValues:e});Object(E.b)(o.props.element,"operatingGraphicInfo",{controlValues:e,textRect:t,pathList:r})}})),g()(s()(o),"handleControlPointMouseDown",(function(){o.context.editingStateManager.isControlValuesChanging=!0})),o}return c()(n,[{key:"componentDidMount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.addLocalChangeObserver(this.updateComponent),e.addChangesetObserver(this.updateComponent))}},{key:"componentWillUnmount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.removeLocalChangeObserver(this.updateComponent),e.removeChangesetObserver(this.updateComponent))}},{key:"render",value:function(){var e,t,n=this.props.element,o=U.a.frameInfoForInner(n),r=null===(e=n.getFrame)||void 0===e?void 0:e.call(n).getFrameInfo(!0),i=U.a.relativeInfoForInner(n),a=n.operatingGraphicInfo?n.operatingGraphicInfo.controlValues:n.props.style.controlValues,c=1===(null===(t=this.getSelectionService())||void 0===t?void 0:t.selectedElements.length),l=!n.isAttachment(),s=l,d=l;return y.a.createElement(y.a.Fragment,null,y.a.createElement(se.b,le()({},ue()(this.props,Object.keys(se.a)),{showSelectBorder:!0,scale:this.props.scale,rect:r,resizeHorizontal:s,resizeVertical:d,relativeRotate:i.relativeRotate,relativeFlipH:i.relativeFlipH,relativeFlipV:i.relativeFlipV,rotate:o.rotate,borderDraggable:!0},U.a.commonPropsForCanvasElement(n,this.props.scale),{onDragStart:this.handleDragStart,onResizeStart:this.handleResizeStart,onRotateStart:this.handleRotateStart,onBorderMouseDown:this.handleBorderMouseDown,onBorderClick:this.props.onBorderClick,isMobileRotatingMode:this.props.isMobileRotatingMode}),this.props.isCroping&&y.a.createElement(st,{element:n,scale:this.props.scale,rect:r,rotate:o.rotate,relativeRotate:i.relativeRotate,relativeFlipH:i.relativeFlipH,relativeFlipV:i.relativeFlipV})),c&&this.props.editable&&!this.props.isPreview&&y.a.createElement("div",{style:{width:"100%",height:"100%",position:"absolute",zIndex:"1000",transform:C.d(r)}},P.a.isMobile?y.a.createElement(Ye,{model:ut(ut(ut({},V()(Object(E.c)(this.props.element.props.style),"width","height","left","top")),r),{},{rotate:o.rotate,controlValues:a}),scale:this.props.scale,onControlValueChange:this.handleControlValuesChange,onControlPointMouseDown:this.handleControlPointMouseDown,onControlPointMoving:this.handleControlPointMoving,isDragging:this.props.isDragging,isResizing:this.props.isResizing,isRotating:this.props.isRotating,editorIsEditing:this.getEditorInstanceService().checkEditorIsEditing(),isMobileRotatingMode:this.props.isMobileRotatingMode}):y.a.createElement(Ae,{model:ut(ut(ut({},V()(Object(E.c)(this.props.element.props.style),"width","height","left","top")),r),{},{rotate:o.rotate,controlValues:a}),scale:this.props.scale,onControlValueChange:this.handleControlValuesChange,onControlPointMouseDown:this.handleControlPointMouseDown,onControlPointMoving:this.handleControlPointMoving})))}},{key:"getSelectionService",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getRotateElementHandler",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.rotateElementHandler}},{key:"getDragElementHandler",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.dragElementHandler}},{key:"getResizeElementHandler",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.resizeElementHandler}},{key:"getEditorInstanceService",value:function(){return I.a.getInstance().getAppServices().viewableServiceLayer.editorInstanceService}},{key:"getBorderSketchManager",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.borderSketchManager}},{key:"handleEditorBlur",value:function(){var e,t;null===(e=this.props.element.editorInstance)||void 0===e||null===(t=e.triggerBlur)||void 0===t||t.call(e)}},{key:"setEditorReadyEditingIfNeed",value:function(){var e,t,n=this.props.element,o=null===(e=this.getSelectionService())||void 0===e?void 0:e.selectedElements.selectedArray;1===(null==o?void 0:o.length)&&n.selected&&(null===(t=n.editorInstance)||void 0===t||t.setReadyEditing())}}]),n}(b.Component),g()(it,"contextType",k.a),rt=at))||rt)||rt)||rt),gt=(n("8e7cce0ada"),n("c6244f7705"),n("081c8cafea"),n("85d48ef22b"),n("2a6f332b5e"),n("4b0c0f4cca"));function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var yt,St,Et,wt=Object(b.lazy)((function(){return Promise.all([n.e("commonAsync~9b1fde68"),n.e("commonAsync~27f19aac"),n.e("commonAsync~205ac551"),n.e("commonAsync~0c3a6025"),n.e("commonAsync~32e631b8"),n.e("commonAsync~08369118"),n.e("commonAsync~50db4bb8"),n.e("commonAsync~86c92fed"),n.e("commonAsync~a95f944a"),n.e("commonAsync~6e568190"),n.e("commonAsync~b174e5ca"),n.e("commonAsync~54a68610"),n.e("commonAsync~61b3c105"),n.e("commonAsync~f7b3ac00"),n.e("commonAsync~cece21d6"),n.e("commonAsync~ecbf7682"),n.e("commonAsync~6c5dfa7c"),n.e("commonAsync~90483627"),n.e("commonAsync~d2c096c2"),n.e("commonAsync~1285a477"),n.e("commonAsync~31ded9a0"),n.e("commonAsync~ecdbff9b"),n.e("commonAsync~c2cc425c"),n.e("commonAsync~4fb44df2"),n.e("commonAsync~d06fe423"),n.e("commonAsync~0519277e"),n.e("commonAsync~6df2b9ea"),n.e("commonAsync~b5c4f9e4"),n.e("commonAsync~ffdf5190"),n.e("commonAsync~127b6cf7"),n.e("commonAsync~b3c4a2ff"),n.e("commonAsync~19bb5a55"),n.e("async~493df0b3"),n.e("async~c5b24172"),n.e("async~0d51b00e"),n.e("async~beecf843"),n.e("async~2e2c6527"),n.e("async~da8db81f"),n.e("async~e10030d6"),n.e("async~098dcb65"),n.e("async~d0c14fe8"),n.e("async~7f8bedbf"),n.e("async~f40490b4"),n.e("async~2158e36e"),n.e("async~76acd586"),n.e("async~37d786cf"),n.e("async~30ccc425"),n.e("async~0c7d7381"),n.e("async~907e9098"),n.e("async~43172549"),n.e("async~f19eb79b"),n.e("async~95108331"),n.e("async~718865d2"),n.e("async~89b7a519"),n.e("vendors~lazyComponents")]).then(n.bind(null,"01313920d5"))})),Mt=(ft=Reflect.metadata("design:type",Function),ht=Reflect.metadata("design:paramtypes",[void 0]),Object(z.b)(vt=ft(vt=ht(vt=function(e){u()(n,e);var t=bt(n);function n(e){var o;return i()(this,n),o=t.call(this,e),g()(s()(o),"updateComponent",(function(){o.forceUpdate()})),g()(s()(o),"handleInnerElementBorderMouseDown",(function(){var e,t,n=o.props.element;n.selected&&(null===(e=n.selectedElement)||void 0===e?void 0:e.type)===gt.a.TITLE&&(null===(t=n.editorInstance)||void 0===t||t.triggerBlur())})),o}return c()(n,[{key:"componentDidMount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.addLocalChangeObserver(this.updateComponent),e.addChangesetObserver(this.updateComponent))}},{key:"componentWillUnmount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.removeLocalChangeObserver(this.updateComponent),e.removeChangesetObserver(this.updateComponent))}},{key:"render",value:function(){var e,t=this.props.element,n=U.a.frameInfoForInner(t),o=null===(e=t.getFrame)||void 0===e?void 0:e.call(t).getFrameInfo(!0),r=U.a.relativeInfoForInner(t),i=t.selectedElement;return y.a.createElement(se.b,le()({},ue()(this.props,Object.keys(se.a)),{showSelectBorder:!0,scale:this.props.scale,rect:{left:o.left,top:o.top,width:o.width,height:o.height},editable:!0,resizeHorizontal:!0,resizeVertical:!0,canRotate:!1,onBorderClick:this.props.onBorderClick,isPreview:!1,relativeRotate:r.relativeRotate,relativeFlipH:r.relativeFlipH,relativeFlipV:r.relativeFlipV,rotate:n.rotate||0},U.a.commonPropsForCanvasElement(t,this.props.scale),{style:{transform:Object(C.d)(o),width:o.width,height:o.height,position:"absolute"}}),i&&this.renderSelectElementBorder(i))}},{key:"renderInnerElement",value:function(e){var t=this.props.element;return y.a.createElement(wt,le()({},ue()(this.props,Object.keys(se.a)),{showSelectBorder:!0,scale:this.props.scale,rect:{left:e.rect.left,top:e.rect.top,width:e.rect.width,height:e.rect.height}},U.a.commonPropsForCanvasElement(t,this.props.scale),{canRotate:!1,isPreview:!1,style:{width:e.rect.width,height:e.rect.height,position:"absolute"},selectBorderStyle:{left:e.rect.left,top:e.rect.top},onBorderMouseDown:this.handleInnerElementBorderMouseDown}))}},{key:"renderPathNodes",value:function(e){var t=e.path;if(e.selectStyle===gt.b.ENDS_ANCHOR&&(t=[t[0],t[t.length-1]]),t){var n=15;"circle"!==e.shapeType&&e.type===gt.a.GEOMETRY||(n=10);var o=t.filter((function(e){return"Z"!==e})).length;if(o>16){var r=Math.ceil(o/16),i=0;t=t.filter((function(e,t){return t===i&&(i+=r,!0)}))}return t.filter((function(e){return e&&e.length>=3})).map((function(e){var t=W()(e,1)[0];return"A"===t||"C"===t?{x:e[e.length-2],y:e[e.length-1]}:{x:e[1],y:e[2]}})).map((function(e,t){var o=e.x,r=e.y;return y.a.createElement("div",{className:"chart-geometry-path-node",key:t,style:{position:"absolute",top:"".concat(r,"px"),left:"".concat(o,"px"),height:"".concat(n,"px"),width:"".concat(n,"px"),borderRadius:"50%",background:"rgb(208, 231, 247)",border:"1px solid rgb(12, 129, 211)",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.16)",transform:"translate(-50%, -50%)"}})}))}}},{key:"renderSelectElementBorder",value:function(e){var t=this;return e.group?y.a.createElement("div",{className:"chart-group-container",style:{position:"absolute"}},e.group.map((function(e){return e.selectStyle===gt.b.ANCHOR||e.selectStyle===gt.b.ENDS_ANCHOR?t.renderPathNodes(e):t.renderInnerElement(e)}))):e.type===gt.a.GEOMETRY?this.renderPathNodes(e):this.renderInnerElement(e)}}]),n}(b.Component))||vt)||vt)||vt),Ot=n("f1f2954cff"),Rt=n.n(Ot);function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f()(this,n)}}var Pt=Object(z.b)((Et=St=function(e){u()(n,e);var t=Ct(n);function n(){var e;i()(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),g()(s()(e),"handleBorderMouseDown",(function(){var t;null===(t=e.getSelectionService())||void 0===t||t.selectedElements.clear(fe.a.SMART_ART)})),g()(s()(e),"updateComponent",(function(){e.forceUpdate()})),e}return c()(n,[{key:"getSelectionService",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().viewableServiceLayer)||void 0===e?void 0:e.selectionService}},{key:"getRotateElementHandler",value:function(){var e;return null===(e=I.a.getInstance().getAppServices().editableServiceLayer)||void 0===e?void 0:e.rotateElementHandler}},{key:"componentDidMount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.addLocalChangeObserver(this.updateComponent),e.addChangesetObserver(this.updateComponent));var t=this.props.element;t.isRootSmartArt&&ve.a.caculateItemValues(t)}},{key:"componentWillUnmount",value:function(){var e=H.a.createObserver(this.props.element);e&&(e.removeLocalChangeObserver(this.updateComponent),e.removeChangesetObserver(this.updateComponent))}},{key:"render",value:function(){var e,t,n,o=this,r=this.props.element,i=U.a.frameInfoForInner(r),a=null===(e=r.getFrame)||void 0===e?void 0:e.call(r).getFrameInfo(!0),c=U.a.relativeInfoForInner(r),l=r.isRootSmartArt,s={};if(l){var d,u=null===(d=r.getFrame)||void 0===d?void 0:d.call(r).getFrameInfo(!!r.operationFrame);s={left:u.left,top:u.top,width:u.width,height:u.height}}return y.a.createElement(se.b,le()({},ue()(this.props,Object.keys(se.a)),{showSelectBorder:!0,scale:this.props.scale,rect:{left:s.left,top:s.top,width:s.width,height:s.height},editable:!0,resizeHorizontal:!0,resizeVertical:!0,canRotate:!1,relativeRotate:c.relativeRotate,relativeFlipH:c.relativeFlipH,relativeFlipV:c.relativeFlipV,rotate:i.rotate},U.a.commonPropsForCanvasElement(r,this.props.scale),{style:{transform:Object(C.d)(a),width:l?s.width:a.width,height:l?s.height:a.height,position:"absolute"},onBorderMouseDown:this.handleBorderMouseDown,onBorderClick:function(e){var t,n;null===(t=(n=o.props).onBorderClick)||void 0===t||t.call(n,e)},selectedElementInGroupInMobile:this.props.selectedElementInGroupInMobile,isMobileRotatingMode:null!==(t=null===(n=this.getRotateElementHandler())||void 0===n?void 0:n.isMobileRotatingMode)&&void 0!==t&&t}))}}]),n}(b.Component),g()(St,"propTypes",{element:Rt.a.object.isRequired,scale:Rt.a.number.isRequired,selectedElementInGroupInMobile:Rt.a.bool,onBorderClick:Rt.a.func}),yt=Et))||yt;function It(e){switch(e){case o.d.GROUP:return we;case o.d.TABLE:return Re;case o.d.SHAPE:return mt;case o.d.IMAGE:return Qe;case o.d.CONNECTOR:return ae;case o.d.CHART:return Mt;case o.d.SMART_ART:return Pt;default:return null}}}}]);
//# sourceMappingURL=slide-async~0d51b00e-329a65.js.map