(this.webpackJsonp=this.webpackJsonp||[]).push([["async~718865d2"],{"026816c976":function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return h})),i.d(t,"c",(function(){return p}));i("342844cefa"),i("a84962d637"),i("8a35b54c1d"),i("c554310b5c"),i("8ee19818c4"),i("bcb5d93d36");var n=i("85d0a7609b"),a=i.n(n),r=i("54a7b7d7a1"),o=i("14c02e2331"),l=i("5fac0349d3"),c=i("2a5f3314a4");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){a()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var u=15,h=function(e){return[{paragraphCharacter:{buNone:1},paragraphProps:{PPTLineHeight:1,lineHeight:1.2,lineHeightIs:"percent",marginLeft:0,paddingTop:0,textAlign:"left"},textRuns:[{text:e,styles:{lang:"ea",color:"rgba(0, 0, 0, 0.4)",fontFamily:l.a.t("微软雅黑"),fontSize:7,fonts:{latin:l.a.t("微软雅黑"),ea:l.a.t("微软雅黑")}}}]}]},v={textRun:function(e,t){var i;return d(d({},e),{},(i={color:"rgba(0, 0, 0, 0.8)",background:"transparent",fontFamily:"'PingFang SC', 'Microsoft YaHei', '微软雅黑'",fontSize:14,displayFontSize:14,paraMaxFontSize:14},a()(i,o.y,null),a()(i,o.A,null),i),null==t?void 0:t.textRunStyle)},paragraph:function(e,t){var i=d(d({},e),{},{lineSpacing:1.2,lineSpacingRule:c.i.Multiple,marginLeft:0,textIndent:e.textIndent?-55:0},null==t?void 0:t.paragraphStyle);return function(e){e.marginLeft&&(e.marginLeft/=r.g),e.textIndent&&(e.textIndent/=r.g)}(i),i},body:function(e,t){return d(d({},e),null==t?void 0:t.bodyStyle)},character:function(e,t){return d(d({},e),{},{fontSize:15,color:"rgba(0, 0, 0, 0.8)"},null==t?void 0:t.characterStyle)},default:function(e){return e}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,i){return v[i]?v[i](t,e):v.default(t)}}},"088df901a7":function(e,t,i){"use strict";i.d(t,"a",(function(){return B}));i("a84962d637"),i("c554310b5c"),i("bcb5d93d36");var n=i("14502724a6"),a=i.n(n),r=i("7a5536c9bf"),o=i.n(r),l=i("9132715560"),c=i.n(l),s=i("6a364eb35c"),d=i.n(s),u=i("85d0a7609b"),h=i.n(u),v=(i("3bf1976a4f"),i("b8217400dc"),i("e6f68cdf2e"),i("fce3077cdf"),i("8e7cce0ada"),i("29f8c5f672"),i("c6244f7705"),i("85d48ef22b"),i("2a6f332b5e"),i("8ee19818c4"),i("826dc923b3"),i("cd88b12bb6"),i("342844cefa"),i("0acdc5834b"),i("3dc760a4d9"),i("75563bc376"),i("8a35b54c1d"),i("081c8cafea"),i("a36a02b860")),p=i("bd2cdd75ae"),f=i("fed003a03b"),g=i("c245805ecf"),y=i("4caeff9a46"),m=i("c77811d8de"),b=i("75bd1be246"),S=i("6d180b6e60"),A=i("a9e0ee82c1"),C=i.n(A),E=i("e1618a5648"),M=i("c9c92622ff"),k=i("ec5cae33cb"),T=i("f690a9be16"),R=i("e0e8dd9366"),O=i("0a4e8b541b"),w=i("9559b6ab8e"),P=i("147aa73f92"),L=i("75f19a1449");i("5fac0349d3");function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function I(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){h()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var B=function(){function e(t){var i=t.animList,n=t.slideComponent,a=t.mediaManager,r=t.playManager,l=t.options;c()(this,e),h()(this,"animList",void 0),h()(this,"slideComponent",void 0),h()(this,"mediaManager",void 0),h()(this,"masterTimeline",void 0),h()(this,"originalStyleMap",void 0),h()(this,"lastStyleMap",void 0),h()(this,"animFiltersManager",void 0),h()(this,"animMediaControl",void 0),h()(this,"tempStyleMap",void 0),h()(this,"differentPropertyMap",void 0),h()(this,"animTargetKeyOrderMap",void 0),h()(this,"options",void 0),h()(this,"playManager",void 0),h()(this,"createAnimLabel",(function(e){var t=e.order,i=e.prefix,n=e.suffix,a=e.index,r="".concat(i).concat(t,"-label").concat(a,"-").concat(n);return C()(a)&&(r="".concat(i).concat(t,"-").concat(n)),r})),h()(this,"isPathAnim",(function(e){return Object.values(m.b).includes(e)})),h()(this,"includeMotion",(function(e){return[].concat(o()(Object.values(m.b)),[w.b.CurveDown,w.b.CurveUp]).includes(e)})),this.animList=this.reorganizeAnimList(i,null==n?void 0:n.options.slideModel),this.slideComponent=n,this.mediaManager=a,this.playManager=r,this.options=l||{paused:!1},this.originalStyleMap=new Map,this.lastStyleMap=new Map,this.tempStyleMap=new Map,this.differentPropertyMap=new Map,this.animFiltersManager=T.a.getInstance()}return d()(e,[{key:"getMasterTimeline",value:function(e,t,i){var n,a=this,r=this.getAnimsByOrder(e),l={id:"total",paused:null===(n=this.options)||void 0===n?void 0:n.masterPaused,onStart:this.handleMasterStart,onComplete:this.handleMasterComplete,onCompleteParams:[r],callbackScope:this},c=new v.a(l);return r.forEach((function(e,n){var r,l,s=new v.a({id:"order".concat(n),paused:null===(r=a.options)||void 0===r?void 0:r.childPaused,onStart:a.handleChildTlStart.bind(a),onUpdate:a.handleChildTlUpdate.bind(a),onComplete:a.handleChildTlComplete.bind(a),onStartParams:[e],onUpdateParams:[e],onCompleteParams:[n,e,null===(l=a.options)||void 0===l?void 0:l.autoPlay],callbackScope:a}),d=a.createAnimLabel({order:n,prefix:y.h,suffix:y.d.START});c.addLabel(d),e.forEach((function(e,r){var l=a.createAnimLabel({order:n,prefix:y.h,suffix:y.d.START,index:r});s.addLabel(l),e.forEach((function(e){var c,d,u,h,v,m,S=null==e||null===(c=e.elementModel)||void 0===c?void 0:c.key,A=e.key,C=e.audioNumberedSlide;if(S){var E=Object(g.a)(S,t,i);if(E&&!E.factoryOptions.model.hidden){var M=a.getFormatStyle(e,E),k=M.fromStyle,T=M.toStyle;if(!a.originalStyleMap.get(S)){var R=a.getOriginalStyleFromTarget(E,k);a.originalStyleMap.set(S,R)}var O=null==e||null===(d=e.props)||void 0===d?void 0:d.presetClass,w=null==e||null===(u=e.props)||void 0===u?void 0:u.animType,P=null==e?void 0:e.props.subType,L=a.includeMotion(e.props.animType),x=k,B=null==e||null===(h=e.props)||void 0===h?void 0:h.duration;null!==(v=a.options)&&void 0!==v&&v.preview&&B<b.q.OFFICE_MIN_TIME&&(B=b.q.ONE_FRAME_MIN_TIME);var D={},H={type:"fromTo",target:x,fromStyle:k,toStyle:{duration:B/=1e3,delay:(null==e||null===(m=e.props)||void 0===m?void 0:m.delay)/1e3,id:null==e?void 0:e.key,onStart:a.handleAnimStart.bind(a),onUpdate:a.handleAnimUpdate.bind(a),onComplete:a.handleAnimComplete.bind(a),onStartParams:[{animTarget:E,order:n,presetClass:O,animType:w,animModel:e,subType:P,fromStyle:k,toStyle:T,animTargetKey:S,animModelKey:A,animStopAtLength:C}],onUpdateParams:[{tempStyle:x,animModel:e,animTarget:E,fromStyle:k,isPathType:L,order:n,animIns:D,duration:B}],onCompleteParams:[{animModel:e,animTarget:E,order:n,fromStyle:k}],callbackScope:a,ease:"easeOutBack"===T.easing?"back.out(1)":"none",immediateRender:!1}};if(Array.isArray(T)?H.toStyle.keyframes=T:H.toStyle=I(I({},H.toStyle),T),L){var F=e.getAnimPath(e.id||"");F&&(H.toStyle.pathAnime={path:F});var N=[];a.isPathAnim(w)||(N=Object(f.f)(k,T)),a.differentPropertyMap.set(e.key,[].concat(o()(N),[b.c.X,b.c.Y]))}else{var j=Object(f.f)(k,T);a.differentPropertyMap.set(e.key,j)}var U=new p.a(H);D.instance=U.instance,s.add(U,l);var W=a.createAnimLabel({order:n,prefix:y.h,suffix:y.d.COMPLETE,index:r});s.addLabel(W)}}}))})),c.add(s);var u=a.createAnimLabel({order:n,prefix:y.h,suffix:y.d.COMPLETE});c.addLabel(u)})),c.addLabel(y.d.COMPLETE),c}},{key:"clearMasterTimeline",value:function(){this.masterTimeline.clear()}},{key:"clearGlobalTimeline",value:function(){v.a.globalTimeline.clear()}},{key:"getTargetAnimMap",value:function(e){var t=new Map;return e.forEach((function(e){var i,n=null==e||null===(i=e.elementModel)||void 0===i?void 0:i.key,a=t.get(n);a?a.push(e):t.set(n,[e])})),t}},{key:"getFromStyle",value:function(e,t){var i=Object(S.b)(e,y.l.edit,t);return C()(i.rotate)||(i.rotate-=this.getElementRotate(e)),this.formatStyle(i)}},{key:"getFromFilterOptions",value:function(e,t,i){return i?{rate:0,direction:e,action:t}:{}}},{key:"handleChildTlUpdate",value:function(e){this.isMediaControlAnim(e)||this.syncRender()}},{key:"handleChildTlStart",value:function(e){var t=this;e.forEach((function(e){e.forEach((function(e){var i=e.elementModel;i&&t.mediaManager.handleAnimationStart(i)}))}))}},{key:"handleChildTlComplete",value:function(e,t){var i=this;t.forEach((function(e){e.forEach((function(e){var t=e.elementModel;t&&i.mediaManager.handleAnimationEnd(t)}))}))}},{key:"handleMasterStart",value:function(){var e,t,i;null!==(e=this.slideComponent)&&void 0!==e&&null!==(t=(i=e.options).getApplication)&&void 0!==t&&t.call(i)&&(this.slideComponent.options.getApplication().autoRender=!1,this.options.preview&&this.options.editorAnimPreviewManager&&(this.options.editorAnimPreviewManager.isAnimPreviewing=!0))}},{key:"handleMasterComplete",value:function(e){}},{key:"resumeAutoRender",value:function(){var e,t,i,n=null===(e=this.slideComponent)||void 0===e||null===(t=(i=e.options).getApplication)||void 0===t?void 0:t.call(i);n&&(n.render(),n.autoRender=!0)}},{key:"handleAnimStart",value:function(e){this.checkAnimInDevMode(e),this.handleMediaEleAnimStart(e),this.handleIframeAnimStart(e),this.handleFilterAnimStart(e),this.handleColorAnimStart(e),this.makeEntrAnimVisibleOnStart(e)}},{key:"handleAnimComplete",value:function(e){var t,i=e.animTarget,n=e.animModel,a=null==n?void 0:n.key,r=null==n||null===(t=n.elementModel)||void 0===t?void 0:t.key,o=null==n?void 0:n.props.animType,l=null==n?void 0:n.props.presetClass,c=this.animFiltersManager.getAnimFilterType(o),s=this.isNextAnimEntry(e),d=l===m.e.EXIT;if(c)this.animFiltersManager.handleAnimFiltersComplete(c,i,(null==n?void 0:n.props.presetClass)||b.e.ENTR,d&&s);else{var u=this.getCurrentStyle(i),h=I({},this.lastStyleMap.get(r)||this.originalStyleMap.get(r));this.differentPropertyMap.get(a).forEach((function(e){h[e]=u[e]})),s&&(this.handleLastStyle(i,r,h),this.handleFilterAnimBeforeCurrent(e)),this.lastStyleMap.set(r,h)}}},{key:"completeAnimMediaControl",value:function(e){var t,i,n=e.animTarget,a=e.animModel.props.presetClass;if(a===m.e.MEDIA){var r=null==n||null===(t=n.factoryOptions)||void 0===t?void 0:t.model;r&&Object(f.p)(r)&&(null===(i=this.animMediaControl)||void 0===i||i.completeMediaControl({elementModel:r,presetClass:a}))}}},{key:"handleAnimUpdate",value:function(e){var t,i=e.tempStyle,n=e.animModel,a=e.animTarget,r=e.fromStyle,o=e.isPathType,l=e.animIns,c=e.duration,s=null==n?void 0:n.key,d=null==n||null===(t=n.elementModel)||void 0===t?void 0:t.key,u=null==n?void 0:n.props.animType,h=null==n?void 0:n.props.presetClass;if(this.clampRGBA(i),h!==m.e.MEDIA){var v=this.animFiltersManager.getAnimFilterType(u);v&&this.animFiltersManager.handleAnimFiltersUpdate({animTarget:a,animFilterType:v,animIns:l,duration:c});var p=this.originalStyleMap.get(d),f=this.lastStyleMap.get(d),g=this.getMergedStyle(i,o?p:f||p),y=this.differentPropertyMap.get(s);y.forEach((function(e){[b.c.X,b.c.Y].includes(e)?a[e]=Math.floor(g[e]):a[e]=g[e]})),this.updateColorAnim(a,u);var S=f||p;a.pivotX=S.pivotX,a.pivotY=S.pivotY;var A=this.tempStyleMap.get(d)||p;y.includes(b.c.X)||(a.x=A.x),y.includes(b.c.Y)||(a.y=A.y),r.transformOrigin&&this.adjustTransformOrigin(r,a);var C=this.getCurrentStyle(a);this.tempStyleMap.set(d,C)}}},{key:"getAnimsByOrder",value:function(e){var t=new Map;return null==e||e.forEach((function(e){var i,n=null==e?void 0:e.playOrder,a=null==e||null===(i=e.props)||void 0===i?void 0:i.nodeType,r=t.get(n);r?a===m.d.WITH_EFFECT?r[r.length-1].push(e):r.push([e]):t.set(n,[[e]])})),t}},{key:"getOriginalStyleFromTarget",value:function(e,t){var i=e.x,n=e.y,a=e.pivotX,r=e.pivotY,o=e.factoryOptions.frame,l=o.left,c=o.top,s=o.width,d=o.height;return i=l+s/2,a=l+s/2,n=c+d/2,r=c+d/2,I(I({},{alpha:1,scaleX:1,scaleY:1,skewX:0,skewY:0,angle:0,rotation:0,visible:!0}),{},{x:i,y:n,pivotX:a,pivotY:r,visible:e.visible},this.getColorOriginalStyle(e.factoryOptions.model,t))}},{key:"hasValidProperty",value:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&!C()(e[t])&&!isNaN(e[t])}},{key:"getMergedStyle",value:function(e,t){if(!t)return e;var i={},n=b.c.ALPHA,a=b.c.X,r=b.c.Y,o=b.c.SCALE_X,l=b.c.SCALE_Y,c=b.c.ANGLE;return this.hasValidProperty(e,n)&&(i.alpha=Number(e.alpha)*Number(t.alpha)),this.hasValidProperty(e,c)&&(i.angle=Number(e.angle)),this.hasValidProperty(e,o)&&(i.scaleX=Number(e.scaleX)*Number(t.scaleX)),this.hasValidProperty(e,l)&&(i.scaleY=Number(e.scaleY)*Number(t.scaleY)),this.hasValidProperty(e,a)&&(i.x=Math.round(Number(e.x)+Number(t.x))),this.hasValidProperty(e,r)&&(i.y=Math.round(Number(e.y)+Number(t.y))),e[b.g.FILL_COLOR]&&(i.fillColor=e[b.g.FILL_COLOR]),e[b.g.FONT_COLOR]&&(i.fontColor=e[b.g.FONT_COLOR]),e[b.g.LINE_COLOR]&&(i.lineColor=e[b.g.LINE_COLOR]),e[b.g.FONT_SIZE]&&(i.fontSize=e[b.g.FONT_SIZE]),i}},{key:"formatStyle",value:function(e){var t=I({},e),i=y.b.TRANSLATE_X,n=y.b.TRANSLATE_Y,a=y.b.OPACITY,r=y.b.ROTATE;[{initial:i,formatted:b.c.X},{initial:n,formatted:b.c.Y},{initial:a,formatted:b.c.ALPHA},{initial:r,formatted:b.c.ANGLE}].forEach((function(i){var n=null==e?void 0:e[i.initial];void 0!==n&&(t[i.formatted]=n,Reflect.deleteProperty(t,i.initial))}));var o=0;if(Object.keys(t).forEach((function(e){Array.isArray(t[e])&&o<t[e].length&&(o=t[e].length)})),!o)return t;for(var l=[],c=function(e){var i={};Object.keys(t).forEach((function(n){if(t[n].length){i[n]=t[n][e].value;var a=t[n][e].duration;i.duration=a/1e3}else i[n]=t[n]})),l.push(i)},s=0;s<o;s++)c(s);return l}},{key:"getCurrentStyle",value:function(e){var t={alpha:e.alpha,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,angle:e.angle,rotation:e.rotation,x:e.x,y:e.y,pivotX:e.pivotX,pivotY:e.pivotY,visible:e.visible},i=this.getColorHandlerMap(e.factoryOptions.model),n=b.d.reduce((function(t,n){return e[n]||(e[n]=i[n]()),I(I({},t),{},h()({},n,e[n]))}),{});return I(I({},t),n)}},{key:"getColorHandlerMap",value:function(e){var t;return t={},h()(t,b.g.FILL_COLOR,(function(){var t;return null===(t=Object(f.g)(e))||void 0===t?void 0:t.rgba})),h()(t,b.g.FONT_COLOR,(function(){var t;return null===(t=Object(f.h)(e))||void 0===t?void 0:t.rgba})),h()(t,b.g.LINE_COLOR,(function(){var t;return null===(t=Object(f.j)(e))||void 0===t?void 0:t.rgba})),h()(t,b.g.FONT_SIZE,(function(){return Object(f.i)(e)})),t}},{key:"getElementRotate",value:function(e){var t,i,n;return(null==e||null===(t=e.elementModel)||void 0===t||null===(i=t.props)||void 0===i||null===(n=i.style)||void 0===n?void 0:n.rotate)||0}},{key:"setStopUpdateHitRegion",value:function(e){var t,i,n,a=null===(t=this.slideComponent)||void 0===t||null===(i=(n=t.options).getApplication)||void 0===i?void 0:i.call(n);a&&(a.stopUpdateHitRegion=e)}},{key:"syncRender",value:function(){var e,t,i,n;null===(e=this.slideComponent)||void 0===e||null===(t=(i=e.options).getApplication)||void 0===t||null===(n=t.call(i))||void 0===n||n.render()}},{key:"convertAnimToKeyframeAnim",value:function(e,t,i){var n,a=t,r=i,o=(null==e||null===(n=e.props)||void 0===n?void 0:n.duration)/1e3;if((null==e?void 0:e.props.animType)===w.b.EnterRotate){var l=r.alpha;a.scaleX=0,r=[I(I({},r),{},{scaleX:1,duration:.2*o,alpha:.2*l}),I(I({},r),{},{scaleX:-1,duration:.4*o,alpha:.6*l}),I(I({},r),{},{scaleX:1,duration:.4*o,alpha:l})]}else if((null==e?void 0:e.props.animType)===w.b.ExitRotate){var c=a.alpha;a.scaleX=1,r=[I(I({},r),{},{scaleX:-1,duration:.4*o,alpha:.6*c}),I(I({},r),{},{scaleX:1,duration:.4*o,alpha:.2*c}),I(I({},r),{},{scaleX:0,duration:.2*o,alpha:0})]}else(null==e?void 0:e.props.animType)===w.b.EntrBasicSwivel?a.rotateX===r.rotateX?(a.scaleX=0,a.alpha=1,r=[I(I({},r),{},{scaleX:1,duration:.2*o}),I(I({},r),{},{scaleX:-1,duration:.4*o}),I(I({},r),{},{scaleX:1,duration:.4*o})]):(a.scaleY=0,a.alpha=1,r=[I(I({},r),{},{scaleY:1,duration:.2*o}),I(I({},r),{},{scaleY:-1,duration:.4*o}),I(I({},r),{},{scaleY:1,duration:.4*o})]):(null==e?void 0:e.props.animType)===w.b.ExitBasicSwivel&&(a.rotateX===r.rotateX?(a.scaleX=1,r.alpha=1,r=[I(I({},r),{},{scaleX:-1,duration:.4*o}),I(I({},r),{},{scaleX:1,duration:.4*o}),I(I({},r),{},{scaleX:0,duration:.2*o})]):(a.scaleY=1,r.alpha=1,r=[I(I({},r),{},{scaleY:-1,duration:.4*o}),I(I({},r),{},{scaleY:1,duration:.4*o}),I(I({},r),{},{scaleY:0,duration:.2*o})]));return{fromStyle:a,toStyle:r}}},{key:"getFormatStyle",value:function(e,t){var i=this.getToStyle(e),n=this.getFromStyle(e,t),a=this.convertAnimToKeyframeAnim(e,n,i),r=a.fromStyle,o=a.toStyle;return this.handleColorFromStyle(r,o),{fromStyle:r,toStyle:o}}},{key:"handleColorFromStyle",value:function(e,t){var i,n=this,r=(i={},h()(i,b.g.FILL_COLOR,b.i.white),h()(i,b.g.LINE_COLOR,b.i.black),i);Object.entries(r).forEach((function(i){var r=a()(i,2),o=r[0],l=r[1];!e[o]&&n.keyInToStyle(o,t)&&(e[o]=l)}))}},{key:"keyInToStyle",value:function(e,t){return Array.isArray(t)?t.some((function(t){return t[e]})):!!t[e]}},{key:"getToStyle",value:function(e){var t=Object(S.c)(e,y.l.edit),i=this.getElementRotate(e);return Array.isArray(t.rotate)?t.rotate.forEach((function(e){e.value-=i})):C()(t.rotate)||(t.rotate-=i),e.setAnimModelToStyle(t),this.formatStyle(t)}},{key:"adjustTransformOrigin",value:function(e,t){var i=t,n=i.factoryOptions.frame,a=n.left,r=n.top,o=n.width,l=n.height;"center top"===e.transformOrigin?(i.pivotY=r,i.y=r):"center bottom"===e.transformOrigin?(i.pivotY=r+l,i.y=r+l):"left center"===e.transformOrigin?(i.pivotX=a,i.x=a):"right center"===e.transformOrigin&&(i.pivotX=a+o,i.x=a+o)}},{key:"isPathTypeFinishBug",value:function(e,t){return e&&!t.x&&!t.y}},{key:"getRegion",value:function(){return this.playManager.isPlaying?k.a.PLAYER:k.a.EDITOR}},{key:"handleIframeAnimStart",value:function(e){var t,i,n=null==e||null===(t=e.animTarget)||void 0===t||null===(i=t.factoryOptions)||void 0===i?void 0:i.model;Object(M.o)(n)&&this.mediaManager.changeIframeDisplayState(!1)}},{key:"handleMediaEleAnimStart",value:function(e){var t,i,n=this,a=e.animTarget,r=e.presetClass,o=e.animType,l=e.animStopAtLength,c=null==a||null===(t=a.factoryOptions)||void 0===t?void 0:t.model;Object(M.n)(c)&&O.a.getTypesOfElements(c.children,[R.d.IMAGE]).forEach((function(e){var t;Object(f.p)(e)&&(null===(t=E.a.getInstance(n.getRegion(),Object(f.l)(e)))||void 0===t||t.startMediaControl({elementModel:e,presetClass:r,animType:o,animStopAtLength:l}))})),Object(f.p)(c)&&(this.animMediaControl=E.a.getInstance(this.getRegion(),Object(f.l)(c)),null===(i=this.animMediaControl)||void 0===i||i.startMediaControl({elementModel:c,presetClass:r,animType:o,animStopAtLength:l}))}},{key:"handleFilterAnimStart",value:function(e){var t=e.animTarget,i=e.presetClass,n=e.animType,a=e.subType,r=this.animFiltersManager.getAnimFilterType(n);r&&this.animFiltersManager.handleAnimFiltersStart(r,t,{action:i,direction:a||w.A.Across})}},{key:"handleColorAnimStart",value:function(e){var t=this,i=e.fromStyle,n=e.animTarget,a=e.animModel,r=e.toStyle,o=a.elementModel.key;if(y.o.includes(a.props.animType)){n.factoryOptions.anim={};var l=this.lastStyleMap.get(o);b.b.forEach((function(e){i[e]&&n[e]&&null!=l&&l[e]&&t.reorganizeStyle({animModel:a,toStyle:r,fromStyle:i,attrName:e,attrValue:l[e]})}))}}},{key:"reorganizeStyle",value:function(e){var t,i,n,a,r,o,l,c,s=e.animModel,d=e.toStyle,u=e.attrName,h=e.fromStyle,v=e.attrValue;if(h[u]=v,[w.b.ComplementaryColor,w.b.ComplementaryColor2,w.b.ContrastingColor,w.b.Darken,w.b.Desaturate,w.b.Lighten].includes(s.props.animType)){var p=null===(t=s.sdkData)||void 0===t||null===(i=t.par)||void 0===i||null===(n=i.cTn)||void 0===n||null===(a=n.childTnLst)||void 0===a||null===(r=a.egTimeNodeChoice)||void 0===r||null===(o=r[0])||void 0===o||null===(l=o.animClr)||void 0===l||null===(c=l.by)||void 0===c?void 0:c.hsl,g=new L.a({rgbaStr:h[u]}),y=Object(f.a)(p,g);y&&(Array.isArray(d)?d.forEach((function(e){e[u]&&(e[u]=y)})):d[u]=y)}}},{key:"isMediaControlAnim",value:function(e){var t=function(e){return(null==e?void 0:e.props.presetClass)===m.e.MEDIA};return e.every((function(e){return e.every(t)}))}},{key:"reorganizeAnimList",value:function(e,t){var i=[];return e.forEach((function(e){var n,a,r=e.spid,o=e.props.nodeType;if(Object(f.n)(r,t)){var l=i.length,c=null!==(n=null===(a=i[l-1])||void 0===a?void 0:a.playOrder)&&void 0!==n?n:0;o===m.d.WITH_EFFECT||o===m.d.AFTEREFFECT?e.playOrder=c:e.playOrder=c+1,i.push(e)}})),i}},{key:"updateColorAnim",value:function(e,t){if(y.o.includes(t)){var i=e.factoryOptions,n=[b.g.FONT_COLOR,b.g.FONT_SIZE];(t===w.b.GrowWithColor?b.d:b.b).forEach((function(t){e[t]&&(i.anim=I(I({},i.anim),{},h()({},t,e[t]),n.includes(t)?{needUpdateFont:!0}:{}))})),e.factoryUpdateComponent()}}},{key:"clampRGBA",value:function(e){b.b.forEach((function(t){if(e[t]){var i=Object(P.k)(e[t]);i&&(e[t]=i)}}))}},{key:"getColorOriginalStyle",value:function(e,t){var i,n={},r=(i={},h()(i,b.g.FILL_COLOR,(function(){var t;return null===(t=Object(f.g)(e))||void 0===t?void 0:t.rgba})),h()(i,b.g.FONT_COLOR,(function(){var t;return null===(t=Object(f.h)(e))||void 0===t?void 0:t.rgba})),h()(i,b.g.LINE_COLOR,(function(){var t;return null===(t=Object(f.j)(e))||void 0===t?void 0:t.rgba})),h()(i,b.g.FONT_SIZE,(function(){return Object(f.i)(e)})),i);return Object.entries(r).forEach((function(e){var i=a()(e,2),r=i[0],o=i[1];t[r]&&null!=o&&o()&&(n=I(I({},n),{},h()({},r,o())))})),n}},{key:"isNextAnimEntry",value:function(e){var t,i,n,a=e.animModel,r=e.order;this.animTargetKeyOrderMap||(this.animTargetKeyOrderMap=Object(f.e)(null===(n=this.slideComponent)||void 0===n?void 0:n.options.slideModel));var o=null===(t=this.animTargetKeyOrderMap)||void 0===t?void 0:t.get(a.elementModel.key),l=null==o?void 0:o.find((function(e){return e>r}));if(void 0===l)return!1;var c=a.elementModel.animList.find((function(e){return e.playOrder===l}));return(null==c||null===(i=c.props)||void 0===i?void 0:i.presetClass)===m.e.ENTR}},{key:"handleLastStyle",value:function(e,t,i){0===i.alpha&&(i.alpha=1),0===i.scaleX&&(i.scaleX=1,e.scaleX=1),0===i.scaleY&&(i.scaleY=1,e.scaleY=1);var n=this.originalStyleMap.get(t),a=this.tempStyleMap.get(t);a&&(a.x=n.x,a.y=n.y),i.x=n.x,i.y=n.y,e.angle!==n.angle&&(i.angle=n.angle,e.angle=n.angle)}},{key:"handleFilterAnimBeforeCurrent",value:function(e){var t,i=e.animTarget,n=e.animModel,a=null===(t=n.elementModel)||void 0===t?void 0:t.animList;if(null!=a&&a.length){var r=a.filter((function(e){var t=e.playOrder,i=e.props.presetClass;return t<n.playOrder&&i===m.e.EXIT}));if(r.length){var o=r[r.length-1].props.animType,l=this.animFiltersManager.getAnimFilterType(o);l&&this.animFiltersManager.handleAnimFiltersComplete(l,i,(null==n?void 0:n.props.presetClass)||b.e.ENTR,!0)}}}},{key:"makeEntrAnimVisibleOnStart",value:function(e){var t=e.animTarget;e.animModel.props.presetClass===m.e.ENTR&&(0===t.alpha&&(t.alpha=1),t.visible||(t.visible=!0))}},{key:"checkAnimInDevMode",value:function(e){}}]),e}()},"129238ffc7":function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));i("73b854064b");var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("547611bd96"),c=i.n(l),s=i("8eec1e4a03"),d=i.n(s),u=i("bd29e2df90"),h=i.n(u),v=i("ab5eb40518"),p=i.n(v),f=i("1b4cdd6a36"),g=i.n(f),y=i("85d0a7609b"),m=i.n(y);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g()(e);if(t){var a=g()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var S=function(e){h()(i,e);var t=b(i);function i(e){var n,r=e.animList,o=e.slideComponent,l=e.mediaManager,s=e.options,d=e.clickSpid,u=e.playManager;return a()(this,i),n=t.call(this,{animList:r,slideComponent:o,mediaManager:l,options:s,clickSpid:d,playManager:u}),m()(c()(n),"clickSpid",void 0),n.clickSpid=d,n}return o()(i,[{key:"handleNextClick",value:function(e){this.killActiveAnimation(),d()(g()(i.prototype),"handleNextClick",this).call(this,e)}}]),i}(i("5fee0c5911").a)},"195fc5e20d":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=(i("8ee19818c4"),i("75bd1be246")),d=i("fed003a03b"),u=function(){function e(){a()(this,e),c()(this,"elementModel",void 0),c()(this,"animTarget",void 0)}return o()(e,[{key:"convertAnimFromStyle",value:function(e,t){var i=this;this.elementModel=t.factoryOptions.model;var n={};return e.forEach((function(e){var t=i.getElementProperty(e);t&&(n[e]=t)})),n}},{key:"getElementProperty",value:function(e){var t,i,n=this,a=(t={},c()(t,s.g.FILL_COLOR,(function(){var e;return null===(e=Object(d.g)(n.elementModel))||void 0===e?void 0:e.rgba})),c()(t,s.g.LINE_COLOR,(function(){var e;return null===(e=Object(d.j)(n.elementModel))||void 0===e?void 0:e.rgba})),c()(t,s.g.FONT_COLOR,(function(){var e;return null===(e=Object(d.h)(n.elementModel))||void 0===e?void 0:e.rgba})),c()(t,s.g.FONT_SIZE,(function(){return Object(d.i)(n.elementModel)})),c()(t,s.g.X,(function(){var e;return null===(e=n.animTarget)||void 0===e?void 0:e.x})),c()(t,s.g.Y,(function(){var e;return null===(e=n.animTarget)||void 0===e?void 0:e.y})),c()(t,s.g.ANGLE,(function(){var e;return null===(e=n.animTarget)||void 0===e?void 0:e.angle})),c()(t,s.g.ALPHA,(function(){var e;return null===(e=n.animTarget)||void 0===e?void 0:e.alpha})),c()(t,s.g.SCALE_X,(function(){var e;return null===(e=n.animTarget)||void 0===e?void 0:e.scaleX})),c()(t,s.g.SCALE_Y,(function(){var e;return null===(e=n.animTarget)||void 0===e?void 0:e.scaleY})),t);return null===(i=a[e])||void 0===i?void 0:i.call(a)}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}();function h(){return u.getInstance()}c()(u,"instance",void 0)},"36c290b5b6":function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return s}));var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=(i("8e7cce0ada"),i("29f8c5f672"),i("c6244f7705"),i("85d48ef22b"),i("2a6f332b5e"),function(){function e(){a()(this,e),c()(this,"startAttrMap",new Map)}return o()(e,[{key:"setElementStartAttrMap",value:function(e,t){this.startAttrMap.set(e,t)}},{key:"getElementStartAttrObj",value:function(e){return this.startAttrMap.get(e)}},{key:"dispose",value:function(){this.startAttrMap.clear()}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}());c()(s,"instance",void 0)},"3c18de0668":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=i("516fa97df2"),d=i("1068873c4f"),u=i("c195ed2318"),h=i("9e0ede001e"),v=i("98c2de1441"),p=function(){function e(t,i){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,h=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],p=arguments.length>7?arguments[7]:void 0,f=arguments.length>8?arguments[8]:void 0,g=arguments.length>9?arguments[9]:void 0,y=arguments.length>10?arguments[10]:void 0,m=arguments.length>11?arguments[11]:void 0,b=arguments.length>12?arguments[12]:void 0,S=arguments.length>13?arguments[13]:void 0,A=arguments.length>14?arguments[14]:void 0;if(a()(this,e),c()(this,"application",void 0),c()(this,"slideModel",void 0),c()(this,"slideComponent",void 0),c()(this,"getPageScale",void 0),c()(this,"region",void 0),c()(this,"onDidRenderCallback",void 0),c()(this,"uiDataService",void 0),c()(this,"selectionService",void 0),c()(this,"mediaManager",void 0),c()(this,"viewableServiceLayer",void 0),c()(this,"editableServiceLayer",void 0),c()(this,"attachmentManager",void 0),c()(this,"scale",void 0),c()(this,"buildRenderTreeAsync",void 0),c()(this,"infrastructureService",void 0),c()(this,"getApplication",(function(){return n.application})),this.slideModel=t,this.getPageScale=o,this.region=l,this.buildRenderTreeAsync=h,this.onDidRenderCallback=y,this.infrastructureService=p,this.uiDataService=f,this.selectionService=m,this.mediaManager=g,this.viewableServiceLayer=b,this.editableServiceLayer=S,this.attachmentManager=null==b?void 0:b.attachmentManager,A)this.application=A();else{var C=new d.c;this.application=new s.a(C,{interactive:u,native:i,delayDrawHit:!1,notRenderOutsideView:!0})}v.a.getInstance().addThumbApplication(t,this.application),this.application.resolution=Math.ceil(window.devicePixelRatio),this.application.stage.forceRenderOutsideView=!0,this.setScale(r),this.init()}return o()(e,[{key:"destroyLayer",value:function(){var e;null===(e=this.application)||void 0===e||e.dispose(),v.a.getInstance().removeThumbApplication(this.slideModel),this.slideComponent=void 0,this.viewableServiceLayer&&(this.viewableServiceLayer.animManager.playSlideComponent=void 0)}},{key:"setScale",value:function(e){var t;if(this.scale!==e){this.scale=e;var i=this.uiDataService.presentation.props.slideWidth*e,n=this.uiDataService.presentation.props.slideHeight*e;this.application.width=i,this.application.height=n,this.application.stage.transform.scaleX=e,this.application.stage.transform.scaleY=e,null===(t=this.slideComponent)||void 0===t||t.renderBackground(),this.application.requestRender()}}},{key:"init",value:function(){var e,t,i,n,a,r,o,l=new h.a,c=new u.a({slideModel:this.slideModel,getPageScale:this.getPageScale,getApplication:this.getApplication,region:this.region,fromScale:1,logicService:l,asyncBuild:this.buildRenderTreeAsync,onDidRenderCallback:this.onDidRenderCallback,infrastructureService:this.infrastructureService,uiDataService:this.uiDataService,selectionService:this.selectionService,mediaManager:this.mediaManager,attachmentManager:this.attachmentManager,editingStateManager:null===(e=this.viewableServiceLayer)||void 0===e?void 0:e.editingStateManager,addonManager:null===(t=this.viewableServiceLayer)||void 0===t?void 0:t.addonManager,fontManager:null===(i=this.viewableServiceLayer)||void 0===i?void 0:i.fontManager,linkManager:null===(n=this.viewableServiceLayer)||void 0===n?void 0:n.linkManager,accessibilityManager:null===(a=this.viewableServiceLayer)||void 0===a?void 0:a.accessibilityManager,undoRedoService:null===(r=this.editableServiceLayer)||void 0===r?void 0:r.undoRedoService,masterLayoutEditService:null===(o=this.editableServiceLayer)||void 0===o?void 0:o.masterLayoutEditService});this.slideComponent=c,this.application.stage.addChild(c),this.application.requestRender()}}]),e}()},"44ebecc78c":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=(i("8a35b54c1d"),i("8ee19818c4"),i("f9193d718f")),d=function(){function e(t){var i=this;a()(this,e),c()(this,"maxScrollX",void 0),c()(this,"maxScrollY",void 0),c()(this,"minScrollX",void 0),c()(this,"minScrollY",void 0),c()(this,"canvasDomRect",void 0),c()(this,"canvasWrapperRef",void 0),c()(this,"cachedLastTouches",void 0),c()(this,"touchmoveCallbackList",void 0),c()(this,"touchendCallbackList",void 0),c()(this,"cLeft",void 0),c()(this,"cTop",void 0),c()(this,"cachedCLeft",void 0),c()(this,"cachedCTop",void 0),c()(this,"canvasWrapperRect",void 0),c()(this,"getCurrentScroll",void 0),c()(this,"updateCurrentScroll",void 0),c()(this,"playerMobileZoom",void 0),c()(this,"setCanvasSize",(function(e){if(i.canvasWrapperRef){i.canvasWrapperRect=i.canvasWrapperRef.getBoundingClientRect(),i.canvasDomRect=e;var t=i.getCurrentScroll(),n=t.currentScrollX,a=t.currentScrollY;i.cLeft=n,i.cTop=a,i.setMaxScrollSize()}})),c()(this,"bindCanvasWrapperRef",(function(e){i.canvasWrapperRef=document.querySelector(e),i.bindEvents()})),c()(this,"dispose",(function(){i.canvasWrapperRef&&i.canvasWrapperRef.removeEventListener("touchstart",i.handleTouchStart),i.touchmoveCallbackList=[],i.touchendCallbackList=[]})),c()(this,"addTouchmoveCallback",(function(e){i.touchmoveCallbackList.push(e)})),c()(this,"addTouchendCallback",(function(e){i.touchendCallbackList.push(e)})),c()(this,"removeTouchmoveCallback",(function(e){i.touchmoveCallbackList=i.touchmoveCallbackList.filter((function(t){return t!==e}))})),c()(this,"bindEvents",(function(){i.canvasWrapperRef&&i.canvasWrapperRef.addEventListener("touchstart",i.handleTouchStart)})),c()(this,"getTouchDiffWithLastTouch",(function(e){var t=e.changedTouches[0],n=t.pageX,a=t.pageY;return{offsetX:n-i.cachedLastTouches[0].pageX,offsetY:a-i.cachedLastTouches[0].pageY}})),c()(this,"setMaxScrollSize",(function(){var e=i.canvasWrapperRect,t=e.width,n=e.height,a=i.canvasDomRect,r=a.width,o=a.height;i.maxScrollX=0,i.maxScrollY=0,i.minScrollX=r>t?t-r:0,i.minScrollY=o>n?n-o:0})),c()(this,"handleTouchStart",(function(e){var t=e.touches;1!==t.length||i.playerMobileZoom.isZooming||i.getMobileTouchService().isTouchOnMediaElement||(i.cachedLastTouches=t,i.cachedCLeft=i.cLeft,i.cachedCTop=i.cTop,document.body.addEventListener("touchmove",i.handleTouchMove,{passive:!1}),document.body.addEventListener("touchend",i.handleTouchEnd),document.body.addEventListener("touchcancel",i.handleTouchEnd))})),c()(this,"handleTouchMove",(function(e){if(1!==e.touches.length||i.playerMobileZoom.isZooming||i.getMobileTouchService().isTouchOnMediaElement)return document.body.removeEventListener("touchmove",i.handleTouchMove),document.body.removeEventListener("touchend",i.handleTouchEnd),document.body.removeEventListener("touchcancel",i.handleTouchEnd),void i.touchendCallbackList.forEach((function(e){null==e||e()}));e.preventDefault();var t=i.getTouchDiffWithLastTouch(e);i.computeScrollOffset(t);var n=i.getCurrentScroll(),a=n.currentScrollX,r=n.currentScrollY;a+=i.cLeft-i.cachedCLeft,r+=i.cTop-i.cachedCTop,i.updateCurrentScroll(a,r),i.touchmoveCallbackList.forEach((function(e){null==e||e()})),i.cachedLastTouches=e.touches})),c()(this,"handleTouchEnd",(function(e){i.getMobileTouchService().isTouchOnMediaElement||i.playerMobileZoom.isZooming||(document.body.removeEventListener("touchmove",i.handleTouchMove),document.body.removeEventListener("touchend",i.handleTouchEnd),document.body.removeEventListener("touchcancel",i.handleTouchEnd),i.touchendCallbackList.forEach((function(e){null==e||e()})))})),this.playerMobileZoom=t.playerMobileZoom,this.getCurrentScroll=t.getCurrentScroll,this.updateCurrentScroll=t.updateCurrentScroll,this.touchmoveCallbackList=[],this.touchendCallbackList=[]}return o()(e,[{key:"computeScrollOffset",value:function(e){this.cachedCLeft=this.cLeft,this.cachedCTop=this.cTop,this.cLeft=this.cLeft+e.offsetX,this.cTop=this.cTop+e.offsetY,this.cLeft>=this.maxScrollX?this.cLeft=this.maxScrollX:this.cLeft<=this.minScrollX&&(this.cLeft=this.minScrollX),this.cTop>=this.maxScrollY?this.cTop=this.maxScrollY:this.cTop<=this.minScrollY&&(this.cTop=this.minScrollY)}},{key:"getMobileTouchService",value:function(){return s.a.getInstance().getAppServices().viewableServiceLayer.mobileTouchService}}]),e}()},"59e0553604":function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return z}));i("342844cefa"),i("a84962d637"),i("c554310b5c"),i("bcb5d93d36");var n=i("7a5536c9bf"),a=i.n(n),r=i("1f925d7f50"),o=i.n(r),l=i("9132715560"),c=i.n(l),s=i("6a364eb35c"),d=i.n(s),u=i("85d0a7609b"),h=i.n(u),v=i("2dc700e1e6"),p=i.n(v),f=(i("f1054791f4"),i("8ee19818c4"),i("cd88b12bb6"),i("b8217400dc"),i("e6f68cdf2e"),i("75563bc376"),i("8a35b54c1d"),i("6e20b6a7d8"),i("bd2cdd75ae")),g=i("a36a02b860"),y=(i("73b854064b"),i("8eec1e4a03")),m=i.n(y),b=i("bd29e2df90"),S=i.n(b),A=i("ab5eb40518"),C=i.n(A),E=i("1b4cdd6a36"),M=i.n(E),k=(i("8e7cce0ada"),i("29f8c5f672"),i("c6244f7705"),i("85d48ef22b"),i("2a6f332b5e"),i("088df901a7")),T=i("c9c92622ff"),R=i("fed003a03b"),O=i("75bd1be246"),w=i("c77811d8de"),P=i("c245805ecf");function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=M()(e);if(t){var a=M()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return C()(this,i)}}var x,I,B,D,H=function(e){S()(i,e);var t=L(i);function i(e){var n,a=e.animList,r=e.slideComponent,o=e.mediaManager,l=e.options,s=e.playManager;return c()(this,i),(n=t.call(this,{animList:a,slideComponent:r,mediaManager:o,options:l,playManager:s})).masterTimeline=n.getMasterTimeline(a,r),n}return d()(i,[{key:"handleAnimStart",value:function(e){Object(R.s)(e.animTarget,O.o.NONE),m()(M()(i.prototype),"handleAnimStart",this).call(this,e)}},{key:"handleAnimComplete",value:function(e){var t,n,a=e.animTarget,r=e.animModel;Object(R.s)(a,O.o.AUTO),m()(M()(i.prototype),"handleAnimComplete",this).call(this,e);var o=a.factoryOptions,l=[O.g.FONT_COLOR,O.g.FONT_SIZE];o.anim={needUpdateFont:l.some((function(t){return e.fromStyle[t]}))};var c=null==a||null===(t=a.factoryOptions)||void 0===t?void 0:t.model;Object(T.o)(c)&&this.mediaManager.changeIframeDisplayState(!0),(null==r||null===(n=r.props)||void 0===n?void 0:n.presetClass)===w.e.EXIT&&(a.visible=!1)}},{key:"handleMasterComplete",value:function(e){var t=this;this.options.editorAnimPreviewManager.isAnimPreviewing=!1,e.forEach((function(e){e.forEach((function(e){e.forEach((function(e){var i,n,a=null==e||null===(i=e.elementModel)||void 0===i?void 0:i.key;if(a){var r=Object(P.a)(a,t.slideComponent);if(r){var o=null===(n=t.animFiltersManager)||void 0===n?void 0:n.getAnimFilterType(e.props.animType);o&&e.props.presetClass===w.e.EXIT&&t.animFiltersManager.handleAnimFiltersComplete(o,r,e.props.presetClass,!0);var l=t.originalStyleMap.get(a);f.a.set(r,l),r.factoryOptions.anim={needUpdateFont:[O.g.FONT_COLOR,O.g.FONT_SIZE].some((function(e){return r[e]}))},O.d.some((function(e){return r[e]}))&&r.factoryUpdateComponent(),O.d.forEach((function(e){Reflect.deleteProperty(r,e)}))}}}))}))})),this.resumeAutoRender(),this.lastStyleMap=new Map,this.differentPropertyMap=new Map,this.tempStyleMap=new Map}}]),i}(k.a),F=i("9559b6ab8e"),N=i("d5c3deb8c7"),j=i("e1618a5648"),U=i("f690a9be16"),W=i("516fa97df2"),_=i("ec5cae33cb"),V=i("4caeff9a46");function Y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function X(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(i),!0).forEach((function(t){h()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var z=(D=B=function(){function e(){var t=this;c()(this,e),o()(this,"isAnimPreviewing",I,this),h()(this,"asyncPreviewAnims",void 0),h()(this,"originalStyle",void 0),h()(this,"selectionService",void 0),h()(this,"mediaManager",void 0),h()(this,"playManager",void 0),h()(this,"animManager",void 0),h()(this,"rightSideBarManager",void 0),h()(this,"allowAutoPreview",!0),h()(this,"editorAnimTimeline",void 0),h()(this,"reactAnimEditorShown",(function(){Object(N.r)((function(){var e;return{isAnimationEditorShown:null===(e=t.rightSideBarManager)||void 0===e?void 0:e.isAnimationEditorShown,isPlaying:t.playManager.isPlaying}}),(function(e){var i=e.isAnimationEditorShown,n=e.isPlaying;i&&!n?document.addEventListener("mousedown",t.handleMouseDown):document.removeEventListener("mousedown",t.handleMouseDown)}))})),h()(this,"handleMouseDown",(function(){t.cancelPreviewingAnims()})),this.asyncPreviewAnims=null,this.originalStyle={alpha:1,rotation:0,scaleX:1,scaleY:1,skewX:0,skewY:0,x:0,y:0}}return d()(e,[{key:"getAutoPreview",value:function(){return this.allowAutoPreview}},{key:"setAutoPreview",value:function(e){this.allowAutoPreview=e}},{key:"initWithStore",value:function(e){var t=e.mediaManager,i=e.playManager,n=e.animManager,a=e.rightSideBarManager,r=e.selectionService;this.selectionService=r,this.mediaManager=t,this.playManager=i,this.animManager=n,this.rightSideBarManager=a,j.a.setMediaManagerDelegate(t),this.reactAnimEditorShown()}},{key:"previewOneToOneAnims",value:function(e,t){var i=this,n=this.animManager.editSlideComponent;n&&(this.editorAnimTimeline=new H({animList:e,slideComponent:n,mediaManager:this.mediaManager,options:{preview:!0,editorAnimPreviewManager:this},playManager:this.playManager}),e.forEach((function(e){var n,a,r=null==e?void 0:e.key;if(r){var o,l=null===(n=i.editorAnimTimeline)||void 0===n||null===(a=n.masterTimeline)||void 0===a?void 0:a.getById(r);if(l)if(t)null==l||null===(o=l.instance)||void 0===o||o.restart();else null==l||l.restart()}})))}},{key:"previewFromBeginning",value:function(){var e=this.getMainSeqAnimList();e.length&&this.previewWithAnims(e)}},{key:"cancelPreviewingAnims",value:function(){var e,t,i,n=this;this.isAnimPreviewing=!1;var a=this.getAnimModelList();if(a.length){var r=null===(e=this.animManager.editSlideComponent)||void 0===e||null===(t=(i=e.options).getApplication)||void 0===t?void 0:t.call(i);r&&(r.autoRender=!0);var o=g.a.globalTimeline;o.isActive()&&(o.clear(),a.forEach((function(e){e.props.presetClass===w.e.MEDIA?n.stopMedia(e):n.setOriginalStyleForPreview(e)})))}}},{key:"updateCurrentSlideElementRefs",value:function(){this.asyncPreviewAnims&&this.previewOneToOneAnims(this.asyncPreviewAnims)}},{key:"asyncPreviewWithAnims",value:function(e){this.asyncPreviewAnims=e}},{key:"setOriginalStyleForPreview",value:function(e){var t=this.getAnimTarget(e);if(t){var i=U.a.getInstance().getAnimFilterType(e.props.animType);i&&U.a.getInstance().handleAnimFiltersComplete(i,t,null==e?void 0:e.props.presetClass,e.props.presetClass===w.e.EXIT),f.a.set(t,X(X({},this.originalStyle),{},{pivotX:0,pivotY:0})),O.d.forEach((function(e){Reflect.deleteProperty(t,e)})),Object(R.s)(t,O.o.AUTO),this.updateCacheStrategy(t),this.handleColorAnim(e,t)}}},{key:"getAnimTarget",value:function(e){var t,i=this.animManager.editSlideComponent;if(null!=e&&e.elementModel&&i)return Object(P.a)(null==e||null===(t=e.elementModel)||void 0===t?void 0:t.key,i)}},{key:"handleColorAnim",value:function(e,t){V.o.includes(e.props.animType)&&(t.factoryOptions.anim={needUpdateFont:!0},t.factoryUpdateComponent())}},{key:"updateCacheStrategy",value:function(e){e.cache.rendering===W.e.Always&&(e.cache.rendering=W.e.Auto)}},{key:"stopMedia",value:function(e){var t,i=null==e?void 0:e.elementModel;if(i){var n=Object(R.l)(i);null===(t=j.a.getInstance(_.a.EDITOR,n))||void 0===t||t.completeMediaControl({elementModel:i})}}},{key:"previewWithAnims",value:function(e){var t,i,n=this.animManager.editSlideComponent;n&&(this.editorAnimTimeline=new H({animList:e,slideComponent:n,mediaManager:this.mediaManager,options:{preview:!0,editorAnimPreviewManager:this},playManager:this.playManager}),null===(t=this.editorAnimTimeline)||void 0===t||null===(i=t.masterTimeline)||void 0===i||i.restart())}},{key:"getAnimModelList",value:function(){var e,t,i=[];return null===(e=this.selectionService.currentSlide)||void 0===e||null===(t=e.animList)||void 0===t||t.forEach((function(e){Array.isArray(e.data)&&i.push.apply(i,a()(e.data))})),i}},{key:"getMainSeqAnimList",value:function(){var e,t=[],i=((null===(e=this.selectionService.currentSlide)||void 0===e?void 0:e.animList)||[]).find((function(e){return e.sequenceTypes===F.E.MAIN_SEQ}));if(i){var n,a,r,o,l=null===(n=this.selectionService.currentSlide)||void 0===n||null===(a=n.children)||void 0===a||null===(r=a.filter((function(e){return!e.hidden})))||void 0===r?void 0:r.map((function(e){return e.id}));t=null==i||null===(o=i.data)||void 0===o?void 0:o.filter((function(e){return null==l?void 0:l.includes(e.spid)}))}return t}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),h()(B,"instance",void 0),x=D,I=p()(x.prototype,"isAnimPreviewing",[N.q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x)},"5fee0c5911":function(e,t,i){"use strict";i.d(t,"a",(function(){return K}));i("73b854064b"),i("a84962d637"),i("c554310b5c"),i("bcb5d93d36");var n=i("14502724a6"),a=i.n(n),r=i("9132715560"),o=i.n(r),l=i("6a364eb35c"),c=i.n(l),s=i("547611bd96"),d=i.n(s),u=i("8eec1e4a03"),h=i.n(u),v=i("bd29e2df90"),p=i.n(v),f=i("ab5eb40518"),g=i.n(f),y=i("1b4cdd6a36"),m=i.n(y),b=i("85d0a7609b"),S=i.n(b),A=(i("8e7cce0ada"),i("29f8c5f672"),i("c6244f7705"),i("85d48ef22b"),i("2a6f332b5e"),i("3bf1976a4f"),i("8ee19818c4"),i("63513d8b56"),i("081c8cafea"),i("a2a09da1e3"),i("8a35b54c1d"),i("6e20b6a7d8"),i("8aebbf296a"),i("c9a7ecac4d"),i("22569efd03"),i("342844cefa"),i("0acdc5834b"),i("b8217400dc"),i("e6f68cdf2e"),i("bd2cdd75ae")),C=i("088df901a7"),E=i("fed003a03b"),M=i("c245805ecf"),k=i("4caeff9a46"),T=i("c77811d8de"),R=i("7e82f0072b"),O=i("ed75b4f022"),w=i("f690a9be16"),P=i("516fa97df2"),L=i("6d180b6e60"),x=i("75bd1be246"),I=i("e4106dce3e"),B=i("d3d31c86eb"),D=i("9da6335152"),H=i("c9c92622ff"),F=i("d09b3891fa"),N=i("d00a79b9b7"),j=i("3b7d7c66b9"),U=i("a9e0ee82c1"),W=i.n(U),_=i("9559b6ab8e"),V=i("77c89fc0e0");function Y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function X(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(i),!0).forEach((function(t){S()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m()(e);if(t){var a=m()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return g()(this,i)}}var K=function(e){p()(n,e);var t=z(n);function n(e){var i,a=e.animList,r=e.slideComponent,l=e.mediaManager,c=e.options,s=e.playManager;return o()(this,n),i=t.call(this,{animList:a,slideComponent:r,mediaManager:l,options:c,playManager:s}),S()(d()(i),"realExecuteAnimationList",void 0),S()(d()(i),"layerService",void 0),S()(d()(i),"currentOrder",void 0),S()(d()(i),"targetAnimMap",void 0),S()(d()(i),"animTargetStyleMap",void 0),S()(d()(i),"cacheMap",new Map),S()(d()(i),"killedAnimation",void 0),S()(d()(i),"animFPSMap",{}),S()(d()(i),"animMemoryMap",{}),S()(d()(i),"animPrevTimeMap",{}),S()(d()(i),"animFrameCountMap",{}),S()(d()(i),"fpsArr",[]),S()(d()(i),"memoryArr",[]),S()(d()(i),"animCompletedMap",new Map),S()(d()(i),"hasActiveAnim",(function(){return i.realExecuteAnimationList.some((function(e){return null==e?void 0:e.isActive()}))})),i.layerService=O.a.getInstance(),i.masterTimeline=i.getMasterTimeline(i.animList,r,i.layerService),i.realExecuteAnimationList=[],i.targetAnimMap=null,i.initAnimTargetStyleMap(),i}return c()(n,[{key:"handleNextClick",value:function(e){if(this.killActiveAnimation(),this.killedAnimation=!1,this.slideComponent){I.a.start("".concat(this.slideComponent.options.slideModel.key,"-").concat(e));var t=this.createAnimLabel({order:e,prefix:k.h,suffix:k.d.START}),i=this.createAnimLabel({order:e,prefix:k.h,suffix:k.d.COMPLETE});this.currentOrder=e;var n=this.masterTimeline.tweenFromTo(t,i);this.realExecuteAnimationList.push(n)}}},{key:"handlePrevClick",value:function(e){var t,i,n,a,r=this;this.killActiveAnimation();var o=this.getSameOrderTargetKeyList(e);this.currentOrder=e,o.forEach((function(t){var i,n,a,o,l,c,s,d=Object(M.a)(t,r.slideComponent);if(d){var u=null===(i=d.factoryOptions)||void 0===i?void 0:i.model,h=null==u||null===(n=u.animList)||void 0===n||null===(a=n[0])||void 0===a||null===(o=a.props)||void 0===o?void 0:o.presetClass,v=null==u||null===(l=u.animList)||void 0===l||null===(c=l[0])||void 0===c||null===(s=c.props)||void 0===s?void 0:s.animType;Object(H.l)(u)?r.mediaManager.onInitAnimStyles(u,h===T.e.ENTR):Object(H.n)(u)&&u.getGifsInGroup().forEach((function(e){return r.mediaManager.onInitAnimStyles(e,h===T.e.ENTR)}));var p=r.getKeyBackStyle(e,t);p&&(r.lastStyleMap.set(t,p),A.a.set(d,p),w.a.getInstance().resetAnimFilters(v,h,d),r.handleColorAnimStyle(p,d,v))}})),null===(t=this.slideComponent)||void 0===t||null===(i=(n=t.options).getApplication)||void 0===i||null===(a=i.call(n))||void 0===a||a.render()}},{key:"setFinishStyle",value:function(){var e=this,t=this.getTargetAnimMap(this.animList);t.size&&t.forEach((function(t,i){var n=Object(M.a)(i,e.slideComponent);if(n){e.mediaManager.setPlayerGifAnimationFinishedState(n.factoryOptions.model);var a=Object(L.a)(t,t.length-1),r=t[t.length-1];W()(a.rotate)||(a.rotate-=e.getElementRotate(r));var o=e.formatStyle(a),l=e.originalStyleMap.get(i);if(l){n.pivotX||n.pivotY||(n.pivotX=l.x,n.x=l.x,n.pivotY=l.y,n.y=l.y),r.props.presetClass===T.e.EXIT&&(n.visible=!1);var c=e.getMergedStyle(o,l);A.a.set(n,c),e.handleColorAnimStyle(c,n,r.props.animType)}}}))}},{key:"clearMasterTimeline",value:function(){this.masterTimeline.clear(),this.realExecuteAnimationList=[],this.cacheMap=new Map,this.animFPSMap={},this.animMemoryMap={},this.animPrevTimeMap={},this.animFrameCountMap={},this.fpsArr=[],this.memoryArr=[],this.slideComponent=void 0,this.animCompletedMap=new Map}},{key:"killActiveAnimation",value:function(e){if(this.realExecuteAnimationList.length){this.killedAnimation=!0;for(var t=0;t<this.realExecuteAnimationList.length;t++){var i=this.realExecuteAnimationList[t];i.isActive()&&(e&&(e.preventDefault(),e.stopPropagation()),i.progress(.95).progress(1).kill(),this.realExecuteAnimationList.splice(t,1))}this.currentOrder=-1}}},{key:"getCurrentOrder",value:function(){return this.currentOrder}},{key:"pause",value:function(e){this.realExecuteAnimationList.forEach((function(t){t.pause(e)}))}},{key:"restart",value:function(){this.realExecuteAnimationList.forEach((function(e){e.restart()}))}},{key:"handleMasterComplete",value:function(){this.resumeAutoRender(),this.lastStyleMap=new Map,this.tdwAnimData()}},{key:"handleAnimStart",value:function(e){var t,a,r=e.animTarget,o=e.fromStyle,l=e.toStyle,c=e.animModel,s=null==c?void 0:c.key,d=null==c||null===(t=c.elementModel)||void 0===t?void 0:t.key,u=null==c?void 0:c.props.animType,v=null==c?void 0:c.playOrder,p=this.animCompletedMap.get(d);if(p||(p=new Map,this.animCompletedMap.set(d,p)),p.set(s,!1),this.setStopUpdateHitRegion(!!v&&!Object(R.a)(r.factoryOptions)),this.initTdwData(s,u),h()(m()(n.prototype),"handleAnimStart",this).call(this,e),this.setSlideClickMap(),this.canBeSliced(d,null===(a=this.slideComponent)||void 0===a?void 0:a.options.slideModel)?(this.layerService.processSlice(e.animTarget.factoryOptions.model),this.layerService.addActiveAnimsKey(d,x.l.OPERATION)):this.layerService.addActiveAnimsKey(d,x.l.BASE),this.updateCacheMap(o,l,v,r),this.useAnimCache(r,u),this.tdwAnimReactTime(e.order),V.e.IS_TEST){var f=this.getCurrentStyle(r),g=this.animFiltersManager.getAnimFilter(r,u);g&&(f.filterAction=g.action,f.filterType=g.type,f.filterRate=g.rate),Promise.all([i.e("async~493df0b3"),i.e("async~c5b24172"),i.e("async~0d51b00e"),i.e("async~beecf843"),i.e("async~2e2c6527"),i.e("async~da8db81f"),i.e("async~e10030d6"),i.e("async~098dcb65"),i.e("async~d0c14fe8"),i.e("async~7f8bedbf"),i.e("async~f40490b4"),i.e("async~2158e36e"),i.e("async~76acd586"),i.e("async~37d786cf"),i.e("async~30ccc425"),i.e("async~0c7d7381"),i.e("async~907e9098"),i.e("async~43172549"),i.e("async~f19eb79b"),i.e("async~95108331"),i.e("async~718865d2"),i.e("async~89b7a519")]).then(i.bind(null,"36c290b5b6")).then((function(e){e.default.getInstance().setElementStartAttrMap(v,S()({},d,f))}))}}},{key:"handleAnimComplete",value:function(e){var t,i,a,r,o=e.animModel,l=e.animTarget,c=null==o?void 0:o.key,s=null==o||null===(t=o.elementModel)||void 0===t?void 0:t.key,d=null==o?void 0:o.props.animType,u=null==o||null===(i=o.props)||void 0===i?void 0:i.presetClass,v=this.animCompletedMap.get(s);(null==v?void 0:v.get(c))||(null==v||v.set(c,!0),h()(m()(n.prototype),"handleAnimComplete",this).call(this,e),null==l||null===(a=l.cache)||void 0===a||a.clear(),u===T.e.EXIT&&(l.visible=!1),this.resetAnimPrevTime(c,d),this.layerService.removeActiveAnimsKey(s),this.layerService.removeOperationToBaseLayer(e.animTarget.factoryOptions.model),null!==(r=this.animMediaControl)&&void 0!==r&&r.isPlaying()&&e.order!==this.currentOrder&&this.completeAnimMediaControl(e))}},{key:"handleChildTlStart",value:function(e){var t=this;h()(m()(n.prototype),"handleChildTlStart",this).call(this,e),e.forEach((function(e){e.forEach((function(e){var i=e.elementModel;i&&t.mediaManager.handlePlayerAnimationStart(i)}))}))}},{key:"syncRender",value:function(){this.renderApplication()}},{key:"renderApplication",value:function(){var e,t,i,n,a,r;this.layerService.hasActiveAnimInBaseLayer&&(null===(e=this.slideComponent)||void 0===e||null===(t=(i=e.options).getApplication)||void 0===t||null===(n=t.call(i))||void 0===n||n.render());this.layerService.hasActiveAnimInOptLayer&&(null===(a=this.layerService.operationLayer)||void 0===a||null===(r=a.getApplication())||void 0===r||r.render())}},{key:"getCurrentAnimApp",value:function(){var e,t,i,n;return this.layerService.hasActiveAnimInBaseLayer?null===(t=this.slideComponent)||void 0===t||null===(i=(n=t.options).getApplication)||void 0===i?void 0:i.call(n):null===(e=this.layerService.operationLayer)||void 0===e?void 0:e.getApplication()}},{key:"handleChildTlComplete",value:function(e,t,i){var a=this;this.layerService.restoreToBaseLayer(),this.cacheBackStyle(e),h()(m()(n.prototype),"handleChildTlComplete",this).call(this,e,t),this.updateCache(e),t.forEach((function(e){e.forEach((function(e){var t=e.elementModel;t&&a.mediaManager.handlePlayerAnimationEnd(t,e)}))})),i&&!this.killedAnimation&&N.default.dispatch(F.nextPage())}},{key:"handleMasterStart",value:function(){var e;h()(m()(n.prototype),"handleMasterStart",this).call(this),this.layerService.baseLayer=null===(e=this.slideComponent)||void 0===e?void 0:e.elementsLayer}},{key:"updateCache",value:function(e){var t=this,i=this.cacheMap.get(e);i&&i.forEach((function(e){e.cache.rendering=P.e.Never,t.renderApplication(),e.cache.rendering=P.e.Always}))}},{key:"handleAnimUpdate",value:function(e){var t=e.animModel,i=e.order,a=e.duration,r=null==t?void 0:t.key,o=null==t?void 0:t.props.animType;i===this.currentOrder&&(h()(m()(n.prototype),"handleAnimUpdate",this).call(this,e),this.calPerformanceData(r,o,a))}},{key:"cacheBackStyle",value:function(e){var t,i=this;this.animTargetKeyOrderMap||(this.animTargetKeyOrderMap=Object(E.e)(null===(t=this.slideComponent)||void 0===t?void 0:t.options.slideModel));this.getSameOrderTargetKeyList(e).forEach((function(t){var n=Object(M.a)(t,i.slideComponent);if(n){var r=i.getCurrentStyle(n),o=i.animTargetKeyOrderMap.get(t);if(null!=o&&o.length){var l=a()(o,1)[0];e===l&&i.handleMinOrder(e,t);var c=o.indexOf(e)+1,s=c<o.length?o[c]:-1;i.handleNextOrder(s,t,r)}}}))}},{key:"handleMinOrder",value:function(e,t){var i,n,a,r=null===(i=this.animTargetStyleMap)||void 0===i?void 0:i.get(e),o=this.originalStyleMap.get(t),l=this.checkIsEntry(t,e)?X(X({},o),{},{visible:!1}):o;r?null===(n=this.animTargetStyleMap)||void 0===n||n.set(e,X(X({},r),{},S()({},t,l))):null===(a=this.animTargetStyleMap)||void 0===a||a.set(e,S()({},t,l))}},{key:"handleNextOrder",value:function(e,t,i){var n,a,r,o=null===(n=this.animTargetStyleMap)||void 0===n?void 0:n.get(e);o?null===(a=this.animTargetStyleMap)||void 0===a||a.set(e,X(X({},o),{},S()({},t,i))):null===(r=this.animTargetStyleMap)||void 0===r||r.set(e,S()({},t,i))}},{key:"getSameOrderTargetKeyList",value:function(e){var t=this.animList.filter((function(t){return(null==t?void 0:t.playOrder)===e})).map((function(e){var t;return null==e||null===(t=e.elementModel)||void 0===t?void 0:t.key}));return Array.from(new Set(t))}},{key:"getKeyBackStyle",value:function(e,t){var i,n,a=(null===(i=this.animTargetStyleMap)||void 0===i?void 0:i.get(e))||{},r=a[t];r||(r=this.getOrderBackStyleSync(e,t),null===(n=this.animTargetStyleMap)||void 0===n||n.set(e,X(X({},a),{},S()({},t,r))));return r}},{key:"getOrderBackStyleSync",value:function(e,t){var i;this.targetAnimMap||(this.targetAnimMap=this.getTargetAnimMap(this.animList));var n=null===(i=this.targetAnimMap)||void 0===i?void 0:i.get(t);if(null==n||!n.length)return{};var a,r=this.getOrderLastIndex(e-1,n),o=this.originalStyleMap.get(t);if(this.isFirstAnimOfTarget(e,t)){a=this.checkIsEntry(t,e)?X(X({},o),{},{visible:!1}):o}else{var l=this.getFinishStyleBeforeCurrentOrder(n,r);a=X(X({},l),{},{x:(null==l?void 0:l.x)+(null==o?void 0:o.x),y:(null==l?void 0:l.y)+(null==o?void 0:o.y)})}return a}},{key:"getFinishStyleBeforeCurrentOrder",value:function(e,t){var i=Object(L.a)(e,t),n=this.formatStyle(i);return Array.isArray(n)&&(n=n[n.length-1]),this.validateStyle(n)}},{key:"getOrderLastIndex",value:function(e,t){var i=t.findIndex((function(t){return(null==t?void 0:t.order)>e}));return-1===i?t.length-1:i-1}},{key:"isFirstAnimOfTarget",value:function(e,t){var i,n;this.animTargetKeyOrderMap||(this.animTargetKeyOrderMap=Object(E.e)(null===(n=this.slideComponent)||void 0===n?void 0:n.options.slideModel));var a=null===(i=this.animTargetKeyOrderMap)||void 0===i?void 0:i.get(t);return e===(null==a?void 0:a[0])}},{key:"initAnimTargetStyleMap",value:function(){var e,t;this.slideComponent&&(this.animTargetStyleMap=(null===(e=this.slideComponent.options.slideModel)||void 0===e?void 0:e.animTargetStyleMap)||new Map,null!==(t=this.animTargetStyleMap)&&void 0!==t&&t.size||(this.slideComponent.options.slideModel.animTargetStyleMap=this.animTargetStyleMap))}},{key:"validateStyle",value:function(e){var t=this,i=e;return Object.keys(x.j).forEach((function(e){t.hasValidProperty(i,e)||(i[e]=x.j[e])})),i}},{key:"checkIsEntry",value:function(e,t){var i,n=this.animList.filter((function(t){var i;return(null==t||null===(i=t.elementModel)||void 0===i?void 0:i.key)===e})),r=a()(n,1)[0];return(null==r||null===(i=r.props)||void 0===i?void 0:i.presetClass)===T.e.ENTR&&(null==r?void 0:r.playOrder)===t}},{key:"tdwAnimReactTime",value:function(e){var t,i="".concat(null===(t=this.slideComponent)||void 0===t?void 0:t.options.slideModel.key,"-").concat(e),n=I.a.end(i);n&&Object(B.c)({opername:D.e.PPT_QUALITY,module:D.d.PC_PLAY,action:D.b.ANIM_REACT,ver6:JSON.stringify({duration:Math.round(n.duration),order:i})})}},{key:"useAnimCache",value:function(e,t){Object(E.t)(e)||(e.cache.rendering!==P.e.Always&&(e.cache.rendering=P.e.Always),e.cache.renderBuffer||(e.scaleX||(e.scaleX=1),e.scaleY||(e.scaleY=1),t===_.b.EntrBoomerang&&(e.angle=0),this.renderApplication(),e.makeCache(!1,!1)))}},{key:"updateCacheMap",value:function(e,t,i,n){if(t.scaleX!==e.scaleX||t.scaleY!==e.scaleY){var a=this.cacheMap.get(i);a||(a=new Set,this.cacheMap.set(i,a)),a.add(n)}}},{key:"isClickOverAnim",value:function(e,t){var i=t.children,n=i.findIndex((function(t){return t.key===e}));if(-1===n||n===i.length-1)return!1;for(var a=n;a<i.length;a++){var r,o,l,c=null===(r=this.slideComponent)||void 0===r||null===(o=(l=r.options).getPlayerReduxStore)||void 0===o?void 0:o.call(l).getState().control;if(Object(E.c)(i[a],c))return!0}return!1}},{key:"setSlideClickMap",value:function(){var e,t,i,n,a,r;if(x.f){var o=null===(e=this.slideComponent)||void 0===e?void 0:e.options.slideModel;if(o&&!this.layerService.slideHasClickEleMap.has(o.key)){var l=null===(t=this.slideComponent)||void 0===t||null===(i=(n=t.options).getPlayerReduxStore)||void 0===i||null===(a=i.call(n))||void 0===a||null===(r=a.getState())||void 0===r?void 0:r.control;l&&this.layerService.slideHasClickEleMap.set(o.key,Object(E.c)(o,l))}}}},{key:"canBeSliced",value:function(e,t){return!!x.f&&(!this.layerService.slideHasClickEleMap.get(t.key)||!this.isClickOverAnim(e,t)&&!this.layerService.hasActiveAnimInBaseLayer)}},{key:"tdwAnimData",value:function(){var e,t,i=this.concatStr(this.fpsArr),n=this.concatStr(this.memoryArr);Object(B.c)({opername:D.e.PPT_QUALITY,module:D.d.PC_PLAY,action:D.b.ANIM_PERFORMANCE,ver6:i,ver7:n,ver9:null===(e=this.slideComponent)||void 0===e||null===(t=e.options.slideModel)||void 0===t?void 0:t.elementNumInfo.totel,ver10:JSON.stringify(this.fpsArr),ver11:JSON.stringify(this.memoryArr)})}},{key:"initTdwData",value:function(e,t){var i="".concat(e,"//").concat(t);this.animPrevTimeMap[i]=0,this.animFrameCountMap[i]=0,this.animFPSMap[i]=[],this.animMemoryMap[i]=[]}},{key:"calPerformanceData",value:function(e,t,i){var n,a;if(null!==(n=window)&&void 0!==n&&null!==(a=n.performance)&&void 0!==a&&a.now){var r="".concat(e,"//").concat(t),o=this.animPrevTimeMap[r];if(void 0!==o){this.animFrameCountMap[r]+=1;var l=performance.now();if(0!==o){var c=l-o;c<this.getSampleInterval(i)||(this.calFPS(e,t,c,l),this.calMemory(e,t))}else this.animPrevTimeMap[r]=l}}}},{key:"getSampleInterval",value:function(e){return e<1?x.p.FREQUENT:1===e?x.p.MEDIUM:x.p.COMMON}},{key:"calFPS",value:function(e,t,i,n){var a="".concat(e,"//").concat(t),r=Math.round(this.animFrameCountMap[a]/i*1e3);this.animFPSMap[a].push(r),this.animFrameCountMap[a]=0,this.animPrevTimeMap[a]=n,this.fpsArr.push({value:r,type:t})}},{key:"calMemory",value:function(e,t){var i,n="".concat(e,"//").concat(t),a=Object(j.a)();a&&(null===(i=this.animMemoryMap[n])||void 0===i||i.push(a),this.memoryArr.push({value:a,type:t}))}},{key:"resetAnimPrevTime",value:function(e,t){var i="".concat(e,"//").concat(t);this.animPrevTimeMap[i]=0,this.animFrameCountMap[i]=0}},{key:"concatStr",value:function(e){return e.reduce((function(e,t,i){var n=t.value;return i?"".concat(e,"#").concat(n):"".concat(n)}),"")}},{key:"handleColorAnimStyle",value:function(e,t,i){if(k.o.includes(i)&&(!e.fillColor&&t.fillColor&&(e.fillColor=x.i.white),e.fillColor||e.lineColor||e.fontColor)){var n=[x.g.FONT_COLOR,x.g.FONT_SIZE],a=t.factoryOptions;x.d.forEach((function(i){e[i]&&(a.anim=X(X({},t.factoryOptions.anim),{},S()({},i,e[i]),n.includes(i)?{needUpdateFont:!0}:{}))})),t.factoryUpdateComponent()}}}]),n}(C.a)},"68dfd6e92f":function(e,t,i){"use strict";i.d(t,"a",(function(){return z}));var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=i("516fa97df2"),d=i("1068873c4f"),u=(i("73b854064b"),i("547611bd96")),h=i.n(u),v=i("8eec1e4a03"),p=i.n(v),f=i("bd29e2df90"),g=i.n(f),y=i("ab5eb40518"),m=i.n(y),b=i("1b4cdd6a36"),S=i.n(b),A=i("2a5f3314a4"),C=i("eabf3daf43"),E=i("5fac0349d3"),M=i("70c9433299"),k=i("d5c3deb8c7"),T=i("026816c976"),R=i("4b55f9bde3"),O=i("6a9e93341e"),w=i("5cdbac46e8"),P=i("8c4a025d08"),L=i("d9812f1c6f"),x=i("b86964b011"),I=i("b74ee0edd6"),B=i.n(I),D=i("3471fb3b60"),H=i("1958c4fc35"),F=i("f9193d718f"),N=i("fd65b6e450"),j=i("0f25ec4562");function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=S()(e);if(t){var a=S()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return m()(this,i)}}var W=Math.max(document.body.clientHeight,document.body.clientWidth)+100,_="note_delay_render_task",V=function(e){g()(i,e);var t=U(i);function i(e){var n;return a()(this,i),n=t.call(this),c()(h()(n),"editMode",void 0),c()(h()(n),"containerHeight",void 0),c()(h()(n),"isLargeNote",void 0),c()(h()(n),"offsetTop",void 0),c()(h()(n),"application",void 0),c()(h()(n),"reactionHandler",void 0),c()(h()(n),"textEditor",void 0),c()(h()(n),"model",void 0),c()(h()(n),"slide",void 0),c()(h()(n),"isFocus",void 0),c()(h()(n),"placeHolderComponent",void 0),c()(h()(n),"cacheSelectionRect",void 0),c()(h()(n),"reactionSlideLengthHandler",void 0),c()(h()(n),"props",void 0),c()(h()(n),"touchHandler",void 0),c()(h()(n),"selectionTimeout",void 0),c()(h()(n),"mobileRightMenuManager",void 0),c()(h()(n),"textTouchHandler",void 0),c()(h()(n),"taskId",void 0),c()(h()(n),"isShowTip",!1),c()(h()(n),"scrollContainerIfHeightChange",(function(e){var t,i;if(n.textEditor){var a=n.application.view.height;e<=n.containerHeight&&a<=n.containerHeight||e!==(null===(t=(i=n.props).getTextAreaElemHeight)||void 0===t?void 0:t.call(i))&&n.updateContainerScroll()}})),c()(h()(n),"scrollToView",(function(){n.updateContainerScroll(!0)})),c()(h()(n),"slideIndexHasChange",(function(){var e;return n.model!==(null===(e=n.getAppServices().viewableServiceLayer.selectionService.currentSlide)||void 0===e?void 0:e.noteData)})),c()(h()(n),"isShowPlaceHolder",(function(){var e;return!n.slideExistence()||!(n.isFocus||!n.isEditable()||n.editMode)&&Object(C.i)((null===(e=n.model.noteTextBody)||void 0===e?void 0:e.paragraphList)||[])})),c()(h()(n),"setFocus",(function(){var e;return null===(e=n.textEditor)||void 0===e?void 0:e.setFocus()})),c()(h()(n),"getTextAreaHeightSync",(function(){var e;return(null===(e=n.textEditor)||void 0===e?void 0:e.getTextAreaHeightSync())||0})),c()(h()(n),"updateTextEditorProps",(function(){var e;null===(e=n.textEditor)||void 0===e||e.updateEditorProps(n.getEditorProps(!0))})),c()(h()(n),"updateCacheSelectionRect",(function(){if(n.cacheSelectionRect.top){var e,t=null===(e=n.textEditor)||void 0===e?void 0:e.getExpandedRect(),i=Math.floor((null==t?void 0:t.top)||0),a=Math.floor((null==t?void 0:t.bottom)||0);n.cacheSelectionRect={top:i,bottom:a}}})),c()(h()(n),"updateApplicationSize",(function(e,t){n.setApplicationWidth(e),n.setApplicationHeight(t)})),c()(h()(n),"updateArea",(function(e){n.updateModel(),!0===e?n.delayRenderNote():n.renderNote()})),c()(h()(n),"updateModel",(function(){var e;n.model=(null===(e=n.getAppServices().viewableServiceLayer.selectionService.currentSlide)||void 0===e?void 0:e.noteData)||new M.a({}),n.slide=n.getAppServices().viewableServiceLayer.selectionService.currentSlide})),c()(h()(n),"delayRenderNote",(function(){D.b.getTaskWithKey(_+n.taskId)&&D.b.cancelTaskByKey(_+n.taskId),n.taskId=n.taskId+1;var e=new H.a(_+n.taskId,D.a.LOW,(function(){n.renderNote()}));n.removeLastEditor(),D.b.addTask(e)})),c()(h()(n),"renderNote",(function(){n.renderTextEditor(),n.renderPlaceholder()})),c()(h()(n),"removeLastEditor",(function(){n.textEditor&&(n.textEditor.editorContainer.dispose(),n.removeChild(n.textEditor.editorContainer),n.textEditor=null),!n.isShowPlaceHolder()&&n.placeHolderComponent&&(n.placeHolderComponent.editorContainer.dispose(),n.removeChild(n.placeHolderComponent.editorContainer),n.placeHolderComponent=null)})),c()(h()(n),"isEditable",(function(){var e;return(null===(e=n.model)||void 0===e?void 0:e.currentEditState)===w.b.EDITABLE})),c()(h()(n),"slideExistence",(function(){return-1!==n.getAppServices().viewableServiceLayer.selectionService.currentSlideIndex})),c()(h()(n),"updateEditorInstance",(function(){var e;null===(e=n.model.noteTextBody)||void 0===e||e.setEditorComponent(n.textEditor)})),c()(h()(n),"renderTextEditor",(function(){if(n.isShowPlaceHolder())n.textEditor&&(n.textEditor.editorContainer.dispose(),n.removeChild(n.textEditor.editorContainer),n.textEditor=null);else{var e,t=n.getEditorProps(!0);if(n.textEditor)n.textEditor.updateEditorProps(t);else n.textEditor=new j.a(t,n.getTextServices()),null===(e=n.model.noteTextBody)||void 0===e||e.setEditorComponent(n.textEditor),n.addChild(n.textEditor.editorContainer);n.model.noteInstance=h()(n),n.updateNoteHeight()}})),c()(h()(n),"getEditorProps",(function(e){var t,i,a;return{shouldUpdate:e,paragraphList:null===(t=n.model.noteTextBody)||void 0===t?void 0:t.paragraphList,textBodyStyle:null===(i=n.model.noteTextBody)||void 0===i?void 0:i.textBodyStyle,modelKey:n.model.key,textRect:n.getTextRect(),selected:n.model.selected,editable:n.isEditable(),selectable:!0,eventArea:A.h.maxBlock,slideNum:Object(P.a)(null===(a=n.model)||void 0===a?void 0:a.slideRef)+1,datetime:n.getInfrastructureService().initDatetime,onEnterEditing:n.handleEnterEditing,onTextChange:n.handleTextChange,onExitEditing:n.handleExitEditing,onChange:n.handleChange,onStyleChange:n.handleEditorStyleChange,handleSelectionChange:n.handleSelectionChange,resetShouldUpdate:function(){n.model.shouldUpdate=!1},cursor:n.isEditable()?"text":"point",styleRenderCallback:n.handleStyleRenderCallback,getApplication:function(){return n.application},isNotFillInvisibleText:!0,supportScrollMobile:n.editMode}})),c()(h()(n),"getTextRect",(function(){var e=n.application;return{height:e.height,width:e.width,left:0,top:0-n.offsetTop}})),c()(h()(n),"handleChange",(function(){var e;(e=n).updateData.apply(e,arguments)})),c()(h()(n),"updateData",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{paragraphList:[],textBodyStyle:{}},i=t.paragraphList,a=t.textBodyStyle;null===(e=n.model)||void 0===e||e.updateParagraphList(i,a)})),c()(h()(n),"handleTextChange",(function(e){n.getAppServices().viewableServiceLayer.textEditorStateService.editorContentChangeFlag+=1;var t=n.getTextRectHeight(e);t>n.containerHeight&&(n.updateNoteHeight(t),n.scrollContainerIfHeightChange(t))})),c()(h()(n),"updateNoteHeight",(function(e){var t,i,a=e||n.getTextRectHeight(),r=n.application.view.height,o=n.props.isScrollMode?Math.min(a,W):a;n.shouldUpdateNoteHeight(o,r,n.containerHeight)&&(n.setApplicationHeight(Math.max(o,n.containerHeight)),n.isLargeNote=a>W,null===(t=(i=n.props).handleNoteHeightUpdated)||void 0===t||t.call(i,a,n.application.height),n.updateEditorPropsWithoutValueChange())})),c()(h()(n),"handleStyleRenderCallback",(function(e,t){var i={bodyStyle:n.props.noteBodyStyle};return Object(T.c)(i)(e,t)})),c()(h()(n),"handleSelectionChange",(function(){n.updateContainerScroll(),n.showMobileRightMenu(!0)})),c()(h()(n),"updateContainerScroll",(function(e){var t,i=null===(t=n.textEditor)||void 0===t?void 0:t.getExpandedRect(),a=n.getContainerElem();if(i&&a){i.top+=n.offsetTop,i.bottom+=n.offsetTop;var r=Math.floor(i.top),o=Math.floor(i.bottom),l=n.cacheSelectionRect.top,c=n.cacheSelectionRect.bottom,s=a.scrollTop,d=a.clientHeight+a.scrollTop;if(e&&(r>d||o<s)){var u=Math.floor((d-s)/2);a.scrollTo(0,r-u)}else n.activeScroll(o,c,d,a,r,l,s);n.cacheSelectionRect={top:r,bottom:o}}})),c()(h()(n),"activeScroll",(function(e,t,i,n,a,r,o){e>Math.max(t,i)?n.scrollTo(0,e-n.clientHeight):a<Math.min(r,o)?e<=t&&n.scrollTo(0,a):e<Math.min(t,o+T.a)?n.scrollTo(0,e-T.a):a>Math.max(r,i-T.a)&&n.scrollTo(0,a-n.clientHeight+T.a)})),c()(h()(n),"showMobileRightMenu",(function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];n.mobileRightMenuManager&&(n.mobileRightMenuManager.isClickOnElement=!0),n.selectionTimeout&&clearTimeout(n.selectionTimeout);var a,r=null===(e=n.textEditor)||void 0===e||null===(t=e.isExpanded)||void 0===t?void 0:t.call(e);n.getEditorInstanceService().checkEditorIsEditing()&&n.isEditing&&(!i||r)?n.selectionTimeout=setTimeout((function(){var e,t,i=null===(e=n.textEditor)||void 0===e?void 0:e.getExpandedRect();i&&(null===(t=n.mobileRightMenuManager)||void 0===t||t.showNoteAreaMenu({left:i.left,top:i.top,right:i.right,bottom:i.bottom,offsetTop:n.offsetTop,container:n.getContainerElem()}))}),200):null===(a=n.mobileRightMenuManager)||void 0===a||a.hideMenu()})),c()(h()(n),"getContainerElem",(function(){return n.props.containerElement})),c()(h()(n),"handleEditorStyleChange",(function(e){n.model.noteTextBody&&(n.model.noteTextBody.selectionStyles=e.style)})),c()(h()(n),"handleEnterEditing",(function(){var e,t;n.isFocus=!0,null===(e=(t=n.props).onEnterEditing)||void 0===e||e.call(t)})),c()(h()(n),"handleNoteDoubleTap",(function(){var e,t;null===(e=(t=n.props).onDoubleTap)||void 0===e||e.call(t)})),c()(h()(n),"handleExitEditing",(function(){var e,t;n.isFocus&&(n.isFocus=!1,n.isShowPlaceHolder()&&n.renderNote()),null===(e=(t=n.props).onExitEditing)||void 0===e||e.call(t)})),c()(h()(n),"getTextRectHeight",(function(e){return Math.floor((null==e?void 0:e.height)||n.getTextAreaHeightSync())})),n.props=e,n.application=e.application,n.isFocus=!1,n.offsetTop=0,n.editMode=e.editMode,n.containerHeight=O.r,n.updateArea(),n.addObserver(),n.addSlideObserver(),n.cacheSelectionRect={top:0,bottom:0},n.touchHandler=new R.a(h()(n),{preventDefaultConfig:{touchend:!0},doubleTap:function(){n.handleNoteDoubleTap(),n.showMobileRightMenu()}}),n.getAppServices().viewableServiceLayer.mobileRightMenuMananger.promise().then((function(e){n.mobileRightMenuManager=e})),n.taskId=0,n}return o()(i,[{key:"dispose",value:function(){var e,t,n;null===(e=this.model.noteInstance)||void 0===e||null===(t=e.textEditor)||void 0===t||t.triggerBlur(),p()(S()(i.prototype),"dispose",this).call(this),this.removeSlideObserver(),this.removeObserver(),this.touchHandler.dispose(),null===(n=this.textTouchHandler)||void 0===n||n.dispose()}},{key:"updateEditorPropsFromSizeChange",value:function(e){var t=this;L.a.isIOS&&e?setTimeout((function(){return t.activeUpdateEditorPropsFromSizeChange()}),100):this.activeUpdateEditorPropsFromSizeChange()}},{key:"activeUpdateEditorPropsFromSizeChange",value:function(){var e=this;this.isShowTip||!this.editMode||Object(x.m)()||!L.a.isMobile||L.a.isPad||(this.isShowTip=!0,B.a.show({message:E.a.t("为了你的更好体验，建议在竖屏下编辑备注。"),duration:2e3}),setTimeout((function(){e.isShowTip=!1}),2e3)),this.updateArea()}},{key:"renderNoteFromKayBoardChange",value:function(){var e,t=this.getContainerElem();if(t){var i=null===(e=this.props.canvasElement)||void 0===e?void 0:e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=Math.round((null==i?void 0:i.bottom)||0),r=Math.round((null==n?void 0:n.bottom)||0),o=Math.round((null==i?void 0:i.top)||0),l=Math.round((null==n?void 0:n.top)||0);a<r&&(t.scrollTop=Math.max(t.scrollTop-(r-a+1),0)),o>l&&(t.scrollTop=Math.max(t.scrollTop-(o-l),0))}}},{key:"updateEditorPropsWithoutValueChange",value:function(){var e,t=this.getEditorProps(!1);null===(e=this.textEditor)||void 0===e||e.updateEditorProps(t)}},{key:"triggerBlur",value:function(){var e,t;this.isFocus&&(null===(e=this.model.noteInstance)||void 0===e||null===(t=e.textEditor)||void 0===t||t.triggerBlur(),this.isFocus=!1,this.updateArea())}},{key:"addSlideObserver",value:function(){var e=this;this.reactionHandler=Object(k.r)((function(){return e.getAppServices().viewableServiceLayer.selectionService.currentSlide}),(function(){var t,i,n,a;if(null===(t=(i=e.props).handleCurrentSlideChangeStart)||void 0===t||t.call(i),!e.getAppServices().viewableServiceLayer.noteAreaManager.show)return e.removeObserver(),e.updateModel(),void e.addObserver();e.triggerBlur(),e.removeObserver(),e.updateArea(!0),e.addObserver(),e.updateEditorInstance(),null===(n=(a=e.props).handleCurrentSlideChangeEnd)||void 0===n||n.call(a)})),this.reactionSlideLengthHandler=Object(k.r)((function(){return e.getAppServices().viewableServiceLayer.selectionService.slides.length}),(function(){e.getAppServices().viewableServiceLayer.noteAreaManager.show&&e.updateArea()}))}},{key:"removeSlideObserver",value:function(){this.reactionHandler(),this.reactionSlideLengthHandler()}},{key:"addObserver",value:function(){var e,t;null!==(e=this.slide)&&void 0!==e&&e.changeSetEngine&&this.slide.changeSetEngine.addObserveForChangeAtPath("noteSlideId",this.updateArea),null!==(t=this.model.noteTextBody)&&void 0!==t&&t.changeSetEngine&&this.model.noteTextBody.changeSetEngine.addChangesetObserver(this.updateArea)}},{key:"removeObserver",value:function(){var e,t;null!==(e=this.slide)&&void 0!==e&&e.changeSetEngine&&this.slide.changeSetEngine.removeObserveForChangeAtPath("noteSlideId",this.updateArea),null!==(t=this.model.noteTextBody)&&void 0!==t&&t.changeSetEngine&&this.model.noteTextBody.changeSetEngine.removeChangesetObserver(this.updateArea)}},{key:"shouldUpdateNoteHeight",value:function(e,t,i){return!(e===t&&i<e)&&!(e<t&&i===t)}},{key:"renderPlaceholder",value:function(){var e,t=this;if(this.isShowPlaceHolder()){var i=this.slideExistence()?E.a.t("双击添加备注"):E.a.t("请先添加页面再添加备注");this.setApplicationHeight(this.containerHeight);var n=this.props.placeholderBodyStyle,a={shouldUpdate:!0,paragraphList:Object(T.b)(i),modelKey:null===(e=this.model)||void 0===e?void 0:e.key,textBodyStyle:{bodyStyle:n},textRect:this.getTextRect(),selected:!1,editable:!1,eventArea:A.h.maxBlock,getApplication:function(){return t.application}};this.placeHolderComponent?this.placeHolderComponent.updateEditorProps(a):(this.placeHolderComponent=new j.a(a,this.getTextServices()),this.addChild(this.placeHolderComponent.editorContainer))}else this.placeHolderComponent&&(this.placeHolderComponent.editorContainer.dispose(),this.removeChild(this.placeHolderComponent.editorContainer),this.placeHolderComponent=null)}},{key:"isEditing",get:function(){var e;return!(null===(e=this.textEditor)||void 0===e||!e.isEditing)}},{key:"getAppServices",value:function(){return F.a.getInstance().getAppServices()}},{key:"getInfrastructureService",value:function(){return this.getAppServices().getInfrastructureService()}},{key:"getEditorInstanceService",value:function(){return this.getAppServices().viewableServiceLayer.editorInstanceService}},{key:"setApplicationHeight",value:function(e){var t=Math.floor(e);e&&this.application.height!==t&&(this.application.height=t)}},{key:"setApplicationWidth",value:function(e){var t=Math.floor(e);e&&this.application.width!==t&&(this.application.width=t)}},{key:"getTextServices",value:function(){var e;return{uiDataService:this.getAppServices().getUiDataService(),editingStateManager:this.getAppServices().viewableServiceLayer.editingStateManager,selectionService:this.getAppServices().viewableServiceLayer.selectionService,fontManager:this.getAppServices().viewableServiceLayer.fontManager,textEditorStateService:this.getAppServices().viewableServiceLayer.textEditorStateService,accessibilityManager:this.getAppServices().viewableServiceLayer.accessibilityManager,undoRedoService:null===(e=this.getAppServices().editableServiceLayer)||void 0===e?void 0:e.undoRedoService,linkManager:this.getAppServices().viewableServiceLayer.linkManager,logicService:new N.a}}}]),i}(s.k),Y=i("05d181ac40"),X=i("5a0c794c87"),z=function(){function e(t){var i=this;a()(this,e),c()(this,"application",void 0),c()(this,"noteArea",void 0),c()(this,"editMode",void 0),c()(this,"containerWidth",void 0),c()(this,"containerHeight",void 0),c()(this,"props",void 0),c()(this,"isShowPlaceHolder",(function(){var e;return null===(e=i.noteArea)||void 0===e?void 0:e.isShowPlaceHolder()})),c()(this,"setFocus",(function(){var e;return null===(e=i.noteArea)||void 0===e?void 0:e.setFocus()})),c()(this,"getTextAreaHeightSync",(function(){var e;return null===(e=i.noteArea)||void 0===e?void 0:e.getTextAreaHeightSync()})),c()(this,"updateTextEditorProps",(function(){var e;return null===(e=i.noteArea)||void 0===e?void 0:e.updateTextEditorProps()})),c()(this,"updateCacheSelectionRect",(function(){var e;return null===(e=i.noteArea)||void 0===e?void 0:e.updateCacheSelectionRect()})),c()(this,"scrollToView",(function(){var e;return null===(e=i.noteArea)||void 0===e?void 0:e.scrollToView()})),c()(this,"renderNoteFromKayBoardChange",(function(){var e;return null===(e=i.noteArea)||void 0===e?void 0:e.renderNoteFromKayBoardChange()})),c()(this,"setOffsetTop",(function(e){i.noteArea&&(i.noteArea.offsetTop=e)})),c()(this,"getOffsetTop",(function(){var e;return(null===(e=i.noteArea)||void 0===e?void 0:e.offsetTop)||0})),c()(this,"shouldUpdate",(function(e,t,n,a){if(a&&i.noteArea.slideIndexHasChange())return!0;if(i.containerWidth!==e)return!0;if(n!==i.noteArea.editMode)return!0;var r=i.application.height;return t!==i.containerHeight&&!(r>Math.max(t,i.containerHeight))})),c()(this,"resetScrollIfEditModeChange",(function(e,t){var n,a;e!==t&&(null===(n=(a=i.props).resetScroll)||void 0===n||n.call(a))}));var n=t.canvasElement,r=t.width,o=t.height,l=t.editMode;this.props=t,this.editMode=l,this.application=new s.a(new d.c,{interactive:!0,native:n,delayDrawHit:!1}),this.application.width=r,this.application.height=o,this.containerWidth=r,this.containerHeight=o,this.application.resolution=Math.floor(window.devicePixelRatio),Y.a.IS_TEST&&(window.noteApp=this.application),this.buildLayer()}return o()(e,[{key:"updateWithData",value:function(e,t,i,n){if(e=Math.floor(e),t=Math.floor(t),this.noteArea){if(this.shouldUpdate(e,t,i,n)){this.noteArea.updateApplicationSize(e,t),this.resetScrollIfEditModeChange(this.noteArea.editMode,i);var a=this.noteArea.editMode;this.noteArea.containerHeight=t,this.noteArea.editMode=i,this.noteArea.updateEditorPropsFromSizeChange(a)}else this.noteArea.containerHeight!==t&&(this.noteArea.containerHeight=t);this.containerWidth=e,this.containerHeight=t}}},{key:"dispose",value:function(){this.noteArea.dispose(),this.application.stage.removeChild(this.noteArea)}},{key:"buildLayer",value:function(){this.noteArea=new V({application:this.application,canvasElement:this.props.canvasElement,containerElement:this.props.containerElement,noteBodyStyle:X.f,placeholderBodyStyle:X.g,editMode:this.editMode,onEnterEditing:this.props.onEnterEditing,onExitEditing:this.props.onExitEditing,onDoubleTap:this.props.onDoubleTap,handleCurrentSlideChangeStart:this.props.handleCurrentSlideChangeStart,handleCurrentSlideChangeEnd:this.props.handleCurrentSlideChangeEnd,handleNoteHeightUpdated:this.props.handleNoteHeightUpdated,getTextAreaElemHeight:this.props.getTextAreaElemHeight,isScrollMode:!!this.props.isScrollMode}),this.application.stage.addChild(this.noteArea),this.application.requestRender()}},{key:"isLargeNote",get:function(){var e;return null===(e=this.noteArea)||void 0===e?void 0:e.isLargeNote}}]),e}()},"71d0c20804":function(e,t,i){"use strict";i.d(t,"a",(function(){return q}));i("342844cefa"),i("a84962d637"),i("8a35b54c1d"),i("c554310b5c"),i("8ee19818c4"),i("bcb5d93d36");var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=i("516fa97df2"),d=i("1068873c4f"),u=(i("73b854064b"),i("547611bd96")),h=i.n(u),v=i("8eec1e4a03"),p=i.n(v),f=i("bd29e2df90"),g=i.n(f),y=i("ab5eb40518"),m=i.n(y),b=i("1b4cdd6a36"),S=i.n(b),A=(i("826dc923b3"),i("75563bc376"),i("c6244f7705"),i("bd80bf2d0f"),i("2a5f3314a4")),C=i("5fac0349d3"),E=i("70c9433299"),M=i("eabf3daf43"),k=i("d5c3deb8c7"),T=800,R={paddingBottom:18,paddingTop:18,paddingLeft:24,paddingRight:24},O={paddingBottom:9,paddingTop:9,paddingLeft:12,paddingRight:12},w=i("026816c976"),P=i("6a9e93341e"),L=i("05d181ac40"),x=i("3471fb3b60"),I=i("1958c4fc35"),B=i("54bdd803dc"),D=i.n(B),H=i("5cdbac46e8"),F=i("8c4a025d08"),N=i("f8fc8e0087"),j=i("f9193d718f"),U=i("fd65b6e450"),W=i("0f25ec4562");function _(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function V(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?_(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=S()(e);if(t){var a=S()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return m()(this,i)}}var X="note_delay_render_task",z=function(e){g()(i,e);var t=Y(i);function i(e){var n;a()(this,i),n=t.call(this),c()(h()(n),"widthHasChanged",void 0),c()(h()(n),"application",void 0),c()(h()(n),"forceStyle",void 0),c()(h()(n),"forceReadOnly",!1),c()(h()(n),"reactionHandler",void 0),c()(h()(n),"textEditor",void 0),c()(h()(n),"model",void 0),c()(h()(n),"slide",void 0),c()(h()(n),"isFocus",void 0),c()(h()(n),"placeHolderComponent",void 0),c()(h()(n),"cacheSelectionRect",void 0),c()(h()(n),"reactionSlideLengthHandler",void 0),c()(h()(n),"reactionSelectedElementsHandler",void 0),c()(h()(n),"containerHeight",void 0),c()(h()(n),"containerWidth",void 0),c()(h()(n),"editStateReaction",void 0),c()(h()(n),"playingStateReaction",void 0),c()(h()(n),"taskId",void 0),c()(h()(n),"offsetTop",void 0),c()(h()(n),"cachedScrollTop",void 0),c()(h()(n),"scrollPending",void 0),c()(h()(n),"canvasElement",void 0),c()(h()(n),"topBlankDiv",void 0),c()(h()(n),"bottomBlankDiv",void 0),c()(h()(n),"isLargeNote",void 0),c()(h()(n),"topBlankDivHeight",void 0),c()(h()(n),"bottomBlankDivHeight",void 0),c()(h()(n),"noteAreaInstanceId",void 0),c()(h()(n),"getDisplayStatus",void 0),c()(h()(n),"uncommonFontLogic",void 0),c()(h()(n),"placeholderText",void 0),c()(h()(n),"updateNoteHeight",(function(e){if(n.textEditor){var t=e||n.getTextRectHeight(),i=n.application.view.height,a=n.isScrollMode?Math.min(t,T):t;n.shouldUpdateNoteHeight(a,i,n.containerHeight)&&((a>i||n.containerHeight>i||a<i&&n.containerHeight<i)&&n.setApplicationHeight(Math.max(n.containerHeight,a)),n.updateBlankDivHeight(t,n.application.height),n.updateEditorPropsWithoutValueChange())}else n.renderPlaceholder()})),c()(h()(n),"scrollContainerIfHeightChange",(function(e){if(n.textEditor){var t=n.application.view.height;e<=n.containerHeight&&t<=n.containerHeight||e!==n.containerHeight+n.topBlankDivHeight+n.bottomBlankDivHeight&&n.updateContainerScroll()}})),c()(h()(n),"resetScrollState",(function(){n.offsetTop=0,n.resetBlankDiv(),n.getContainerElem().scrollTop=0})),c()(h()(n),"updateArea",(function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.model=(null===(e=n.getAppServices().viewableServiceLayer.selectionService.currentSlide)||void 0===e?void 0:e.noteData)||new E.a({}),n.slide=n.getAppServices().viewableServiceLayer.selectionService.currentSlide,!1===t?n.delayRenderNote():n.renderNote()})),c()(h()(n),"renderNote",(function(){n.getDisplayStatus()&&(n.showPlaceHolder()?n.renderPlaceholder():n.renderTextEditor())})),c()(h()(n),"delayRenderNote",(function(){if(n.getDisplayStatus()){x.b.getTaskWithKey(X+n.noteAreaInstanceId+n.taskId)&&x.b.cancelTaskByKey(X+n.noteAreaInstanceId+n.taskId),n.taskId=n.taskId+1;var e=new I.a(X+n.noteAreaInstanceId+n.taskId,x.a.LOW,(function(){n.renderNote(),n.addMarkIfInSearch()}));n.removeLastEditor(),setTimeout((function(){x.b.addTask(e)}))}})),c()(h()(n),"removeLastEditor",(function(){n.textEditor&&(n.textEditor.dispose(),n.removeChild(n.textEditor.editorContainer),n.textEditor=null),!n.showPlaceHolder()&&n.placeHolderComponent&&(n.placeHolderComponent.dispose(),n.removeChild(n.placeHolderComponent.editorContainer),n.placeHolderComponent=null)})),c()(h()(n),"isEditable",(function(){var e;return!(Number(Object(N.getQuery)("editorState"))>H.b.EDITABLE)&&(!n.forceReadOnly&&(null===(e=n.model)||void 0===e?void 0:e.currentEditState)===H.b.EDITABLE)})),c()(h()(n),"slideExistence",(function(){return-1!==n.getAppServices().viewableServiceLayer.selectionService.currentSlideIndex})),c()(h()(n),"isNoteHide",(function(){return n.containerHeight<=P.r})),c()(h()(n),"showPlaceHolder",(function(){var e;return!n.slideExistence()||!(n.isFocus||!n.isEditable())&&Object(M.i)((null===(e=n.model.noteTextBody)||void 0===e?void 0:e.paragraphList)||[])})),c()(h()(n),"updateEditorInstance",(function(){var e;null===(e=n.model.noteTextBody)||void 0===e||e.setEditorComponent(n.textEditor)})),c()(h()(n),"getNoteSearchResult",(function(){var e=n.getSearchreplaceManager();if(e){var t,i=n.model.sdkData,a=e.currentPageResult,r=e.isSearchingFlag;if(i&&a&&r)return null===(t=e.currentPageResult)||void 0===t?void 0:t.find((function(e){return e.component===i.note}))}})),c()(h()(n),"renderTextEditor",(function(){var e;n.placeHolderComponent&&(n.placeHolderComponent.dispose(),n.removeChild(n.placeHolderComponent.editorContainer),n.placeHolderComponent=null),n.updateApplicationSize(n.containerWidth);var t,i=n.getEditorProps(!0);(n.textEditor?n.textEditor.updateEditorProps(i):(n.textEditor=new W.a(i,n.getTextServices()),n.addChild(n.textEditor.editorContainer)),(null===(e=n.model.noteTextBody)||void 0===e?void 0:e.editorComponent)!==n.textEditor)&&(null===(t=n.model.noteTextBody)||void 0===t||t.setEditorComponent(n.textEditor));n.model.noteInstance=h()(n),n.updateNoteHeight()})),c()(h()(n),"getEditorProps",(function(e){var t,i,a;return{shouldUpdate:e,paragraphList:null===(t=n.model.noteTextBody)||void 0===t?void 0:t.paragraphList,textBodyStyle:null===(i=n.model.noteTextBody)||void 0===i?void 0:i.textBodyStyle,modelKey:n.model.key,textRect:n.getTextRect(),getSelected:function(){return n.model.selected},editable:n.isEditable(),selectable:!0,eventArea:A.h.maxBlock,slideNum:Object(F.a)(null===(a=n.model)||void 0===a?void 0:a.slideRef)+1,datetime:n.getAppServices().getInfrastructureService().initDatetime.toString(),onEnterEditing:n.handleEnterEditing,onTextChange:n.handleTextChange,onExitEditing:n.handleExitEditing,onChange:n.handleChange,onBeforeValueChange:n.beforeEditorValueChange,onStyleChange:n.handleEditorStyleChange,handleSelectionChange:n.handleSelectionChange,resetShouldUpdate:function(){n.model.shouldUpdate=!1},cursor:n.isEditable()?"text":"point",onClick:n.tipsIfLock,styleRenderCallback:n.handleStyleRenderCallback,getApplication:function(){return n.application},isNotFillInvisibleText:!0}})),c()(h()(n),"getPlaceholderProps",(function(){var e,t,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=n.placeholderText||(n.slideExistence()?C.a.t("点击添加备注"):C.a.t("请先添加页面再添加备注"));return{shouldUpdate:i,paragraphList:Object(w.b)(a),modelKey:null===(e=n.model)||void 0===e?void 0:e.key,textBodyStyle:{bodyStyle:O},textRect:n.getTextRect(),selected:!1,editable:!1,eventArea:A.h.maxBlock,slideNum:Object(F.a)(null===(t=n.model)||void 0===t?void 0:t.slideRef)+1,cursor:"point",onClick:n.handlePlaceholderClick,getApplication:function(){return n.application},styleRenderCallback:n.handleStyleRenderCallbackForPlaceholder}})),c()(h()(n),"getTextRect",(function(){var e=n.application;return{height:e.height,width:e.width,left:0,top:0-n.offsetTop}})),c()(h()(n),"handleChange",(function(){var e;(e=n).updateData.apply(e,arguments)})),c()(h()(n),"beforeEditorValueChange",(function(){var e=n.getTextSelectionUndoRedo();null==e||e.clearRedo(),null==e||e.stashSelectionBefore(n.textEditor.getSelection(),n.model.parent.id)})),c()(h()(n),"updateData",(function(){var e,t,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{paragraphList:[],textBodyStyle:{}},r=a.paragraphList,o=a.textBodyStyle;(null===(e=n.model)||void 0===e||e.updateParagraphList(r,o),L.a.IS_SUBSIDIARY)&&window.dispatchEvent(new CustomEvent("SUBSIDIARY_PLAYER_UPDATE_NOTE",{detail:{slideId:null===(t=n.model)||void 0===t||null===(i=t.slideRef)||void 0===i?void 0:i.id,paragraphList:r,textBodyStyle:o}}))})),c()(h()(n),"handleTextChange",(function(e){n.getAppServices().viewableServiceLayer.textEditorStateService.editorContentChangeFlag+=1;var t=n.getTextRectHeight(e);n.updateNoteHeight(t),n.scrollContainerIfHeightChange(t)})),c()(h()(n),"handleStyleRenderCallback",(function(e,t){var i=V({bodyStyle:R},n.forceStyle);return n.getNoteSearchResult()&&"textRun"===t&&e.isSearchResult&&(i.textRunStyle={background:e.background}),Object(w.c)(i)(e,t)})),c()(h()(n),"handleStyleRenderCallbackForPlaceholder",(function(e,t){var i;return"textRun"===t?V(V({},e),null===(i=n.forceStyle)||void 0===i?void 0:i.textRunStyle):e})),c()(h()(n),"handleSelectionChange",(function(){var e=n.getTextSelectionUndoRedo();n.textEditor&&(null==e||e.stashSelectionAfter(n.textEditor.getSelection(),n.model.parent.id)),n.updateContainerScroll()})),c()(h()(n),"updateContainerScroll",(function(){var e,t=null===(e=n.textEditor)||void 0===e?void 0:e.getExpandedRect(),i=n.getContainerElem();if(t&&i){var a=Math.ceil(t.top),r=Math.ceil(t.bottom),o=n.cacheSelectionRect.top,l=n.cacheSelectionRect.bottom,c=i.scrollTop-n.offsetTop,s=i.clientHeight+i.scrollTop-n.offsetTop;r>Math.max(l,s)?i.scrollTo(0,r-i.clientHeight+n.offsetTop):a<Math.min(o,c)?r<=l&&i.scrollTo(0,a+n.offsetTop):r<Math.min(l,c+w.a)?i.scrollTo(0,r-w.a+n.offsetTop):a>Math.max(o,s-w.a)&&i.scrollTo(0,a-i.clientHeight+w.a+n.offsetTop),n.cacheSelectionRect={top:a,bottom:r}}})),c()(h()(n),"resetContainerScroll",(function(){var e=n.getContainerElem();null!=e&&e.scrollTop&&e.scrollTo(0,0)})),c()(h()(n),"getContainerElem",(function(){var e,t,i;return n.isScrollMode?null===(t=n.canvasElement)||void 0===t||null===(i=t.parentElement)||void 0===i?void 0:i.parentElement:null===(e=n.canvasElement)||void 0===e?void 0:e.parentElement})),c()(h()(n),"handleEditorStyleChange",(function(e){n.model.noteTextBody&&(n.model.noteTextBody.selectionStyles=e.style)})),c()(h()(n),"handleEnterEditing",(function(){n.isFocus=!0})),c()(h()(n),"handlePlaceholderClick",(function(){n.tipsIfLock(),n.getUserPriviledgeService().pptEditorState===H.b.EDITABLE&&n.model&&(n.isFocus=!0,n.renderNote(),requestAnimationFrame((function(){var e;null===(e=n.model.noteTextBody)||void 0===e||e.editorInstance.setFocus()})))})),c()(h()(n),"handleExitEditing",(function(){n.isFocus&&(n.isFocus=!1,n.showPlaceHolder()&&n.renderNote())})),c()(h()(n),"tipsIfLock",(function(){n.getUserPriviledgeService().pptEditorState>H.b.EDITABLE&&n.getAppServices().viewableServiceLayer.tipsManager.showCannotEditTips()})),c()(h()(n),"addMarkIfInSearch",(function(){var e,t,i=n.getSearchreplaceManager(),a=n.getNoteSearchResult();a&&i&&(null===(e=n.model.noteInstance)||void 0===e||null===(t=e.textEditor)||void 0===t||t.addSearchMark(a.result,i.keyword))})),c()(h()(n),"updateCanvasRenderOffsetScrollDown",(function(e,t){var i,a=e.scrollTop,r=e.clientHeight;T-(a-n.offsetTop+r)>50||0!==t-n.offsetTop-T&&(n.offsetTop=Math.min(a-150,t-T),n.scrollPending=!0,null===(i=n.textEditor)||void 0===i||i.updateEditorProps(n.getEditorProps(!0)),requestAnimationFrame((function(){if(n.scrollPending=!1,n.topBlankDivHeight=n.offsetTop,n.bottomBlankDivHeight=Math.ceil(t-n.offsetTop-T),n.setBlankDivHeight(n.topBlankDivHeight,n.bottomBlankDivHeight),n.getContainerElem().scrollTop=a,n.cacheSelectionRect.top){var e,i=null===(e=n.textEditor)||void 0===e?void 0:e.getExpandedRect(),r=Math.ceil((null==i?void 0:i.top)||0),o=Math.ceil((null==i?void 0:i.bottom)||0);n.cacheSelectionRect={top:r,bottom:o}}})))})),c()(h()(n),"updateCanvasRenderOffsetScrollUp",(function(e,t){var i,a=e.scrollTop;0!==n.offsetTop&&(a-n.offsetTop>50||(n.offsetTop=Math.max(a-150,0),n.scrollPending=!0,null===(i=n.textEditor)||void 0===i||i.updateEditorProps(n.getEditorProps(!0)),requestAnimationFrame((function(){if(n.scrollPending=!1,n.topBlankDivHeight=n.offsetTop,n.bottomBlankDivHeight=t-n.offsetTop-T,n.setBlankDivHeight(n.topBlankDivHeight,n.bottomBlankDivHeight),n.getContainerElem().scrollTop=a,n.cacheSelectionRect.top){var e,i=null===(e=n.textEditor)||void 0===e?void 0:e.getExpandedRect(),r=Math.ceil((null==i?void 0:i.top)||0),o=Math.ceil((null==i?void 0:i.bottom)||0);n.cacheSelectionRect={top:r,bottom:o}}}))))})),c()(h()(n),"handleNoteScroll",(function(){var e;if(!n.scrollPending&&n.isLargeNote&&n.isScrollMode){var t=n.getContainerElem(),i=t.scrollTop,a=n.cachedScrollTop<i,r=(null===(e=n.textEditor)||void 0===e?void 0:e.getTextAreaHeightSync())||0;a?n.updateCanvasRenderOffsetScrollDown(t,r):n.updateCanvasRenderOffsetScrollUp(t,r),n.cachedScrollTop=i}})),c()(h()(n),"setBlankDivHeight",(function(e,t){n.topBlankDiv&&n.bottomBlankDiv&&(n.topBlankDiv.style.height===e&&n.bottomBlankDiv.style.height===t||(n.topBlankDiv.style.height="".concat(e||n.topBlankDivHeight,"px"),n.bottomBlankDiv.style.height="".concat(t||n.bottomBlankDivHeight,"px")))})),c()(h()(n),"getTextRectHeight",(function(e){var t;return Math.ceil((null==e?void 0:e.height)||(null===(t=n.textEditor)||void 0===t?void 0:t.getTextAreaHeightSync())||0)})),c()(h()(n),"updateBlankDivHeight",(function(e,t){var i;if(n.isScrollMode)if(e<=T)n.isLargeNote&&(n.isLargeNote=!1,n.offsetTop=0,n.resetBlankDiv());else{n.isLargeNote=!0;var a=(null===(i=n.getContainerElem())||void 0===i?void 0:i.scrollTop)||0,r=a,o=Math.max(e-t-a,0);n.setBlankDivHeight(r,o)}})),c()(h()(n),"resetBlankDiv",(function(){n.topBlankDivHeight=0,n.bottomBlankDivHeight=0,n.setBlankDivHeight(0,0)})),c()(h()(n),"updateApplicationSize",(function(e,t){n.setApplicationWidth(e),n.setApplicationHeight(t)})),c()(h()(n),"onUncommonFontLoaded",(function(e,t){var i,a;null===(i=n.textEditor)||void 0===i||i.onFontDownloadedCallback(t),null===(a=n.uncommonFontLogic)||void 0===a||a.removeObserverForUncommonFontLoaded(n.onUncommonFontLoaded)})),n.noteAreaInstanceId=n.generateInstanceId();var r=e.application,o=e.forceStyle,l=e.canvasElement,s=e.topBlankDiv,d=e.bottomBlankDiv,u=e.forceReadOnly,v=e.getDisplayStatus,p=void 0===v?function(){return!0}:v;return n.uncommonFontLogic=e.uncommonFontLogic,n.placeholderText=e.placeholderText,n.application=r,n.canvasElement=l,n.topBlankDiv=s,n.bottomBlankDiv=d,n.forceStyle=o,n.forceReadOnly=null!=u&&u,n.getDisplayStatus=p,n.isFocus=!1,n.containerHeight=P.s,n.containerWidth=r.width||0,n.offsetTop=0,n.cachedScrollTop=0,n.updateArea(),n.addObserver(),n.addSlideObserver(),n.cacheSelectionRect={top:0,bottom:0},n.taskId=0,n.topBlankDivHeight=0,n.bottomBlankDivHeight=0,n}return o()(i,[{key:"dispose",value:function(){p()(S()(i.prototype),"dispose",this).call(this),this.removeSlideObserver(),this.removeObserver(),this.resetBlankDiv()}},{key:"updateEditorProps",value:function(){this.renderNote()}},{key:"updateEditorPropsWithoutValueChange",value:function(){var e,t=this.getEditorProps(!1);null===(e=this.textEditor)||void 0===e||e.updateEditorProps(t)}},{key:"triggerBlur",value:function(){var e,t;this.isFocus&&(null===(e=this.model.noteInstance)||void 0===e||null===(t=e.textEditor)||void 0===t||t.triggerBlur(),this.isFocus=!1)}},{key:"saveContainerHeight",value:function(e){this.containerHeight=e||0}},{key:"saveContainerWidth",value:function(e){this.containerWidth=e||0}},{key:"updateForceStyle",value:function(e){var t,i,n;D()(this.forceStyle,e)||(this.forceStyle=e,this.showPlaceHolder()?null===(t=this.placeHolderComponent)||void 0===t||null===(i=t.editorContainer)||void 0===i||i.forceRender():(null===(n=this.textEditor)||void 0===n||n.editorContainer.forceRender(),this.updateNoteHeight()))}},{key:"shouldUpdateNoteHeight",value:function(e,t,i){return this.widthHasChanged?(this.widthHasChanged=!1,!0):!(e===t&&i<e)&&!(e<t&&i===t)}},{key:"addSlideObserver",value:function(){var e=this;this.reactionHandler=Object(k.r)((function(){return e.getAppServices().viewableServiceLayer.selectionService.currentSlide}),(function(){e.triggerBlur(),e.removeObserver(),e.resetBlankDiv(),e.updateArea(!1),e.addObserver(),e.updateEditorInstance(),e.resetContainerScroll()})),this.reactionSlideLengthHandler=Object(k.r)((function(){return e.getAppServices().viewableServiceLayer.selectionService.slides.length}),(function(){var t,i;(null===(t=e.slide)||void 0===t?void 0:t.key)===(null===(i=e.getAppServices().viewableServiceLayer.selectionService.currentSlide)||void 0===i?void 0:i.key)&&e.updateArea()}))}},{key:"removeSlideObserver",value:function(){this.reactionHandler(),this.reactionSlideLengthHandler()}},{key:"addObserver",value:function(){var e,t,i,n=this;null===(e=this.slide)||void 0===e||e.changeSetEngine.addObserveForChangeAtPath("noteSlideId",this.updateArea),null!==(t=this.model.noteTextBody)&&void 0!==t&&t.changeSetEngine&&this.model.noteTextBody.changeSetEngine.addChangesetObserver(this.updateArea),this.slide&&(this.editStateReaction=Object(k.r)((function(){var e;return{slideEditState:null===(e=n.slide)||void 0===e?void 0:e.pptEditorState}}),(function(){return n.updateArea()}))),this.playingStateReaction=Object(k.r)((function(){return n.getPlayManager().isPlaying}),(function(){return n.updateArea()}));var a=this.getContainerElem();a&&this.isScrollMode&&a.addEventListener("scroll",this.handleNoteScroll),this.reactionSelectedElementsHandler=Object(k.r)((function(){return n.getAppServices().viewableServiceLayer.selectionService.selectedElements.length}),(function(e){0!==e&&n.triggerBlur()})),null===(i=this.uncommonFontLogic)||void 0===i||i.addObserverForUncommonFontLoaded(this.onUncommonFontLoaded)}},{key:"removeObserver",value:function(){var e,t,i,n,a,r;null!==(e=this.slide)&&void 0!==e&&e.changeSetEngine&&this.slide.changeSetEngine.removeObserveForChangeAtPath("noteSlideId",this.updateArea),null!==(t=this.model.noteTextBody)&&void 0!==t&&t.changeSetEngine&&this.model.noteTextBody.changeSetEngine.removeChangesetObserver(this.updateArea),null===(i=this.editStateReaction)||void 0===i||i.call(this),null===(n=this.reactionSelectedElementsHandler)||void 0===n||n.call(this),null===(a=this.playingStateReaction)||void 0===a||a.call(this),null===(r=this.uncommonFontLogic)||void 0===r||r.removeObserverForUncommonFontLoaded(this.onUncommonFontLoaded)}},{key:"renderPlaceholder",value:function(){this.textEditor&&(this.textEditor.dispose(),this.removeChild(this.textEditor.editorContainer),this.textEditor=null),this.updateApplicationSize(this.containerWidth,this.containerHeight);var e=this.getPlaceholderProps();this.placeHolderComponent?this.placeHolderComponent.updateEditorProps(e):this.isNoteHide()||(this.placeHolderComponent=new W.a(e,this.getTextServices()),this.addChild(this.placeHolderComponent.editorContainer))}},{key:"isScrollMode",get:function(){return!(!this.topBlankDiv||!this.bottomBlankDiv)}},{key:"isEditing",get:function(){var e;return!(null===(e=this.textEditor)||void 0===e||!e.isEditing)}},{key:"getAppServices",value:function(){return j.a.getInstance().getAppServices()}},{key:"getUserPriviledgeService",value:function(){return this.getAppServices().viewableServiceLayer.userPriviledgeService}},{key:"getPlayManager",value:function(){return this.getAppServices().viewableServiceLayer.playManager}},{key:"generateInstanceId",value:function(){return Math.floor(1e5*Math.random())}},{key:"getSearchreplaceManager",value:function(){var e,t;return null===(e=this.getAppServices().editableServiceLayer)||void 0===e||null===(t=e.searchReplaceManager)||void 0===t?void 0:t.dangerousInstance}},{key:"setApplicationHeight",value:function(e){var t=Math.ceil(e);e&&this.application.height!==t&&(this.application.height=e)}},{key:"setApplicationWidth",value:function(e){var t=Math.ceil(e);e&&this.application.width!==t&&(this.application.width=e)}},{key:"getTextServices",value:function(){var e;return{uiDataService:this.getAppServices().getUiDataService(),editingStateManager:this.getAppServices().viewableServiceLayer.editingStateManager,selectionService:this.getAppServices().viewableServiceLayer.selectionService,fontManager:this.getAppServices().viewableServiceLayer.fontManager,textEditorStateService:this.getAppServices().viewableServiceLayer.textEditorStateService,accessibilityManager:this.getAppServices().viewableServiceLayer.accessibilityManager,undoRedoService:null===(e=this.getAppServices().editableServiceLayer)||void 0===e?void 0:e.undoRedoService,linkManager:this.getAppServices().viewableServiceLayer.linkManager,logicService:new U.a}}},{key:"getTextSelectionUndoRedo",value:function(){var e;return null===(e=this.getAppServices().editableServiceLayer)||void 0===e?void 0:e.textSelectionUndoRedo}}]),i}(s.j);function K(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function G(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?K(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var q=function(){function e(t){a()(this,e),c()(this,"application",void 0),c()(this,"noteArea",void 0),c()(this,"isHideNote",(function(e){return e<=P.r}));var i=t.canvasElement,n=t.width,r=t.height;this.application=new s.a(new d.c,{interactive:!0,native:i,delayDrawHit:!1}),this.application.width=n,this.application.height=r,this.application.resolution=Math.ceil(window.devicePixelRatio),L.a.IS_TEST&&(window.noteApp=this.application),this.buildLayer(G(G({},t),{},{application:this.application}))}return o()(e,[{key:"updateWithData",value:function(e,t,i){var n,a,r;(e=Math.ceil(e),t=Math.ceil(t),this.isHideNote(t)&&(t=0),this.application.width!==e&&(this.application.requestRender(),this.noteArea&&(this.noteArea.saveContainerWidth(e),this.noteArea.widthHasChanged=!0,this.noteArea.resetScrollState(),this.noteArea.updateEditorProps())),this.application.height!==t)&&(null===(a=this.noteArea)||void 0===a||a.saveContainerHeight(t),null===(r=this.noteArea)||void 0===r||r.updateNoteHeight());null===(n=this.noteArea)||void 0===n||n.updateForceStyle(i)}},{key:"dispose",value:function(){this.noteArea.dispose(),this.application.stage.removeChild(this.noteArea)}},{key:"buildLayer",value:function(e){this.noteArea=new z(e),this.application.stage.addChild(this.noteArea),this.application.requestRender()}}]),e}()},"7de344a8f3":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));i("73b854064b");var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("547611bd96"),c=i.n(l),s=i("bd29e2df90"),d=i.n(s),u=i("ab5eb40518"),h=i.n(u),v=i("1b4cdd6a36"),p=i.n(v),f=i("85d0a7609b"),g=i.n(f),y=(i("3bf1976a4f"),i("d5c3deb8c7"));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=p()(e);if(t){var a=p()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return h()(this,i)}}var b=function(e){d()(i,e);var t=m(i);function i(){var e;a()(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),g()(c()(e),"addExecuteObserver",(function(e){var t=e.slideModel,i=e.callback,n=Object(y.r)((function(){return t.childrenConverted}),(function(e){e&&(null==i||i(),null==n||n())}))})),g()(c()(e),"checkIsExecuted",(function(t){var i=e.presentation.children[t];return!(null==i||!i.timingModel)})),g()(c()(e),"taskFunc",(function(t){var i=t.slideModel;i.childrenConverted?i.convertTimingDataSdkToUi():e.addExecuteObserver({slideModel:i,callback:function(){i.convertTimingDataSdkToUi()}})})),g()(c()(e),"createTaskKey",(function(e){return"convert-timing-".concat(e)})),e}return o()(i,null,[{key:"getInstance",value:function(){return this.instance||(this.instance=new i),this.instance}}]),i}(i("f47a23bb49").a);g()(b,"instance",void 0)},"9a4506300b":function(e,t,i){"use strict";i.d(t,"a",(function(){return x}));var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=(i("8e7cce0ada"),i("29f8c5f672"),i("c6244f7705"),i("85d48ef22b"),i("2a6f332b5e"),i("c9a7ecac4d"),i("8ee19818c4"),i("a2a09da1e3"),i("63513d8b56"),i("22569efd03"),i("516fa97df2")),d=i("1068873c4f"),u=(i("73b854064b"),i("176815363d")),h=i.n(u),v=i("547611bd96"),p=i.n(v),f=i("8eec1e4a03"),g=i.n(f),y=i("bd29e2df90"),m=i.n(y),b=i("ab5eb40518"),S=i.n(b),A=i("1b4cdd6a36"),C=i.n(A),E=i("3ef2352f0b"),M=i.n(E),k=(i("3bf1976a4f"),i("081c8cafea"),i("9d0daf5c3f"),i("c3daaad4d1")),T=i("c195ed2318"),R=i("d5c3deb8c7"),O=i("3471fb3b60"),w=i("f9193d718f");function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=C()(e);if(t){var a=C()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return S()(this,i)}}var L=function(e){m()(i,e);var t=P(i);function i(e,n,r,o,l,s,d){var u;return a()(this,i),u=t.call(this),c()(p()(u),"slideComponent",void 0),c()(p()(u),"application",void 0),c()(p()(u),"renderVersion",void 0),c()(p()(u),"callbacks",void 0),c()(p()(u),"slideImageSrc",void 0),c()(p()(u),"canvasWrapper",void 0),c()(p()(u),"slideModel",void 0),c()(p()(u),"getPageScale",void 0),c()(p()(u),"region",void 0),c()(p()(u),"mobileEditMode",void 0),c()(p()(u),"syncBuild",void 0),c()(p()(u),"handleSlideChange",void 0),c()(p()(u),"onDidRenderCallback",void 0),c()(p()(u),"renderRequested",void 0),c()(p()(u),"lastScale",void 0),c()(p()(u),"mount",(function(){u.slideComponent||(u.syncBuild=!0,u.doAfterConverted())})),c()(p()(u),"unmount",(function(){if(u.canvasWrapper){var e,t,i=null===(e=u.application)||void 0===e||null===(t=e.view)||void 0===t?void 0:t.native;"block"===(null==i?void 0:i.style.display)&&(i.style.display="none"),u.canvasWrapper.hasChildNodes()&&u.canvasWrapper.removeChild(u.canvasWrapper.childNodes[0])}u.lastScale=u.getPageScale()})),c()(p()(u),"dispose",(function(){var e;null===(e=u.slideComponent)||void 0===e||e.dispose(),u._removeUpdateListener(u.onUpdate)})),c()(p()(u),"generateImage",(function(e){var t=u.renderVersion,i="generate-image-".concat(u.slideModel.key,"-").concat(u.renderVersion-1);O.b.getTaskWithKey(i)&&O.b.cancelTaskByKey(i);var n="generate-image-".concat(u.slideModel.key,"-").concat(u.renderVersion);O.b.addTaskWithBlock(n,O.a.HIGH,h()(M.a.mark((function i(){var n;return M.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t===u.renderVersion){i.next=2;break}return i.abrupt("return");case 2:if(u.app===e){i.next=4;break}return i.abrupt("return");case 4:if(i.prev=4,n=null,!u.needSyncToImg){i.next=10;break}n=u.syncCanvasToImg(e.view.native,t),i.next=13;break;case 10:return i.next=12,u.asyncCanvasToImg(e.view.native,t);case 12:n=i.sent;case 13:n&&(u.slideImageSrc=n,u.handleSlideChange(u.slideModel)),i.next=19;break;case 16:i.prev=16,i.t0=i.catch(4),window.log.error("[generateImage-toBlob-error]".concat(i.t0));case 19:case"end":return i.stop()}}),i,null,[[4,16]])}))))})),c()(p()(u),"needRender",(function(){return!u.slideImageSrc||u.lastScale!==u.getPageScale()})),c()(p()(u),"syncCanvasToImg",(function(e,t){return t!==u.renderVersion&&u.slideImageSrc?null:e.toDataURL("image/jpeg")})),c()(p()(u),"asyncCanvasToImg",function(){var e=h()(M.a.mark((function e(t,i){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.toBlob((function(t){if(t){if(i!==u.renderVersion&&u.slideImageSrc)return void e(null);e(URL.createObjectURL(t))}}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()),c()(p()(u),"onUpdate",(function(){u.releaseImage()})),c()(p()(u),"releaseImage",(function(){u.slideImageSrc&&(/^blob:/.test(u.slideImageSrc)&&URL.revokeObjectURL(u.slideImageSrc),u.slideImageSrc="")})),c()(p()(u),"init",(function(){u.slideModel.childrenConverted?u.doAfterConverted():u.addConvertObserver()})),c()(p()(u),"addConvertObserver",(function(){var e=Object(R.r)((function(){return u.slideModel.childrenConverted}),(function(t){t&&(u.doAfterConverted(),null==e||e())}))})),c()(p()(u),"doAfterConverted",(function(){u.build()})),c()(p()(u),"getApplication",(function(){return u.application})),c()(p()(u),"build",(function(){var e,t,i,n,a;if(!u.slideComponent){var r=new k.a,o=u.getAppServices().getUiDataService().presentation.children.findIndex((function(e){return e===u.slideModel}));u.slideComponent=new T.a({slideModel:u.slideModel,getPageScale:u.getPageScale,getApplication:u.getApplication,region:u.region,fromScale:1,logicService:r,asyncBuild:0!==o&&!u.syncBuild,mobileEditMode:u.mobileEditMode,onWillRenderCallback:u.onWillRenderCallback,onDidRenderCallback:u.canvasRenderCallback,infrastructureService:u.getAppServices().getInfrastructureService(),uiDataService:null===(e=u.getAppServices())||void 0===e?void 0:e.getUiDataService(),selectionService:null===(t=u.getAppServices())||void 0===t||null===(i=t.viewableServiceLayer)||void 0===i?void 0:i.selectionService,mediaManager:null===(n=u.getAppServices().viewableServiceLayer)||void 0===n?void 0:n.mediaManager,attachmentManager:null===(a=u.getAppServices().viewableServiceLayer)||void 0===a?void 0:a.attachmentManager,editingStateManager:u.getAppServices().viewableServiceLayer.editingStateManager,addonManager:u.getAppServices().viewableServiceLayer.addonManager,fontManager:u.getAppServices().viewableServiceLayer.fontManager,linkManager:u.getAppServices().viewableServiceLayer.linkManager}),u.addChild(u.slideComponent)}})),c()(p()(u),"onWillRenderCallback",(function(e){e.options.slideModel.pptEditorState=u.getAppServices().viewableServiceLayer.userPriviledgeService.pptEditorState})),c()(p()(u),"canvasRenderCallback",(function(){u.onDidRenderCallback(u.slideComponent)})),u.slideModel=e,u.getPageScale=n,u.region=r,u.mobileEditMode=l,u.handleSlideChange=s,u.onDidRenderCallback=d,u.renderVersion=0,u._addUpdateListener(u.onUpdate),u.callbacks=[],u.init(),u}return o()(i,[{key:"render",value:function(){var e=this;if(this.application&&(g()(C()(i.prototype),"render",this).call(this,this.application.view),this.slideModel.childrenConverted&&this.slideComponent.hasBuild)){if(this.renderRequested)return;this.renderRequested=!0,requestAnimationFrame((function(){if(e.renderRequested=!1,e.renderVersion+=1,e.application)try{e.releaseImage(),e.generateImage(e.application)}catch(e){window.log.error("[generateImage-error]".concat(e))}}))}}},{key:"needSyncToImg",get:function(){var e,t=this;return((null===(e=this.slideModel.parent)||void 0===e?void 0:e.children.findIndex((function(e){return e===t.slideModel})))||0)<10}},{key:"getAppServices",value:function(){return w.a.getInstance().getAppServices()}}]),i}(s.k),x=function(){function e(){var t=this;a()(this,e),c()(this,"hasInit",!1),c()(this,"region",void 0),c()(this,"mobileEditMode",void 0),c()(this,"renderAreaMap",new Map),c()(this,"width",void 0),c()(this,"height",void 0),c()(this,"scale",void 0),c()(this,"availableApps",new Set),c()(this,"needRender",void 0),c()(this,"listChangeListener",void 0),c()(this,"unmounted",!1),c()(this,"onDidRenderCallback",void 0),c()(this,"initService",(function(e){if(!t.hasInit){t.hasInit=!0;var i=e.region,n=e.mobileEditMode,a=e.width,r=e.height,o=e.onDidRenderCallback;t.region=i,t.mobileEditMode=n,t.onDidRenderCallback=o,t.updateInfo(a,r),t.buildAllSlidesCache(t.getAppServices().viewableServiceLayer.selectionService.slides),t.addSlidesChangeListener()}})),c()(this,"handleCellAppear",(function(){var e=t.getAppServices().getUiDataService().presentation.props,i=e.slideWidth,n=e.slideHeight,a=t.width/i<t.height/n?t.width/i:t.height/n;a!==t.scale&&(t.scale=a),t.renderVisibleSlide()})),c()(this,"handleCellDisappear",(function(e){var i=t.getAppServices().viewableServiceLayer.selectionService.slides[e];t.hidden(i)})),c()(this,"handleSlideChange",(function(e){var i=t.getRenderArea(e);i.callbacks.forEach((function(e){null==e||e(i.slideImageSrc,i.slideComponent)}))})),c()(this,"updateInfo",(function(e,i){if(t.mobileEditMode())t.unmounted||(t.unmounted=!0,t.unmountVisibleSlide());else{var n=t.getAppServices().getUiDataService().presentation.props,a=n.slideWidth,r=n.slideHeight,o=e/a<i/r?e/a:i/r;e===t.width&&i===t.height&&o===t.scale||(t.width=e,t.height=i,t.scale=o,t.renderVisibleSlide())}})),c()(this,"injectGenerateImageCallback",(function(e,i){t.getRenderArea(e).callbacks.push(i)})),c()(this,"removeGenerateImageCallback",(function(e,i){var n=t.getRenderArea(e),a=n.callbacks.indexOf(i);-1!==a&&n.callbacks.splice(a,1)})),c()(this,"renderVisibleSlide",(function(){t.getAppServices().viewableServiceLayer.slideRenderStateManager.visibleSlideKeyList.forEach((function(e){var i=t.getAppServices().viewableServiceLayer.selectionService.slides.findIndex((function(t){return t.key===e}));t.display(t.getAppServices().viewableServiceLayer.selectionService.slides[i])}))})),c()(this,"unmountVisibleSlide",(function(){t.getAppServices().viewableServiceLayer.slideRenderStateManager.visibleSlideKeyList.forEach((function(e){var i=t.getAppServices().viewableServiceLayer.selectionService.slides.findIndex((function(t){return t.key===e})),n=t.getRenderArea(t.getAppServices().viewableServiceLayer.selectionService.slides[i]);n.canvasWrapper&&n.unmount()}))})),c()(this,"display",(function(e){if(e){var i=t.getRenderArea(e);i.mount(),i.application?(t.updateTempApplication(i.application),t.needRender&&(i.application.requestRender(),t.needRender=!1)):(i.application=t.getTempApplication(),i.application.autoRender=!1,i.application.stage.addChild(i),i.application.autoRender=!0,i.needRender()&&i.application.requestRender())}})),c()(this,"hidden",(function(e){var i=t.renderAreaMap.get(e);if(null!=i&&i.application){if(0===e.parent.children.findIndex((function(t){return t===e}))&&!i.slideImageSrc)return;if(i.canvasWrapper){var n,a,r=null===(n=i.application)||void 0===n||null===(a=n.view)||void 0===a?void 0:a.native;return void("block"===(null==r?void 0:r.style.display)&&(r.style.display="none"))}i.application.autoRender=!1,i.application.stage.removeChild(i),i.application.autoRender=!0,i.unmount(),t.availableApps.add(i.application),i.application=null}})),c()(this,"getTempApplication",(function(){var e;return t.availableApps.size?(e=t.availableApps.values().next().value,t.updateTempApplication(e),t.availableApps.delete(e)):e=t.createTempApplication(),e}))}return o()(e,[{key:"destroyLayer",value:function(){var e;this.getAppServices().viewableServiceLayer.animManager.playSlideComponent=void 0,null===(e=this.listChangeListener)||void 0===e||e.call(this)}},{key:"getRenderArea",value:function(e){return this.renderAreaMap.has(e)?this.renderAreaMap.get(e):this.buildSingleSlideCache(e)}},{key:"getSlideImageSrc",value:function(e){return this.getRenderArea(e).slideImageSrc}},{key:"buildAllSlidesCache",value:function(e){for(var t=this,i=function(i){var n=e[i];i<3?t.renderAreaMap.has(n)||t.buildSingleSlideCache(n):O.b.addTaskWithBlock("slide-list-".concat(n.key),O.a.LOW,(function(){t.renderAreaMap.has(n)||t.buildSingleSlideCache(n)}))},n=0;n<e.length;n++)i(n)}},{key:"buildSingleSlideCache",value:function(e){var t=this,i=new L(e,(function(){return t.scale}),this.region,!1,this.mobileEditMode,this.handleSlideChange,this.onDidRenderCallback);return this.renderAreaMap.set(e,i),i}},{key:"addSlidesChangeListener",value:function(){var e=this;this.listChangeListener=Object(R.r)((function(){return[e.getAppServices().viewableServiceLayer.selectionService.slides]}),(function(){e.handleSlideListChange()}))}},{key:"handleSlideListChange",value:function(){var e=this,t=this.getAppServices().viewableServiceLayer.selectionService.slides,i=new Map;t.forEach((function(e){i.set(e,!0)})),this.renderAreaMap.forEach((function(t,n){if(!i.has(n)){var a;e.hidden(n);var r=e.renderAreaMap.get(n);null==r||null===(a=r.dispose)||void 0===a||a.call(r),e.renderAreaMap.delete(n)}})),this.buildAllSlidesCache(t)}},{key:"createTempApplication",value:function(){var e=document.createElement("canvas");e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.display="none";var t=new d.c,i=new s.a(t,{interactive:!1,native:e,delayDrawHit:!1});return i.resolution=Math.ceil(window.devicePixelRatio),document.body.appendChild(e),this.updateTempApplication(i),i}},{key:"updateTempApplication",value:function(e){var t=Math.round(this.getAppServices().getUiDataService().presentation.props.slideWidth*this.scale),i=Math.round(this.getAppServices().getUiDataService().presentation.props.slideHeight*this.scale),n=window,a=n.devicePixelRatio,r=n.mobileZoomScale,o=a*(void 0===r?1:r);e.width===t&&e.height===i&&e.resolution===Math.ceil(o)||(e.resolution=Math.ceil(o),e.width=t,e.height=i,e.stage.transform.scaleX=this.scale,e.stage.transform.scaleY=this.scale,this.needRender=!0)}},{key:"getAppServices",value:function(){return w.a.getInstance().getAppServices()}}],[{key:"getInstance",value:function(){return e.serviceInstance||(e.serviceInstance=new e),e.serviceInstance}}]),e}();c()(x,"serviceInstance",void 0)},a36a02b860:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=i("ec11356cf6"),d=function(){function e(t){a()(this,e),c()(this,"instance",void 0),this.instance=new s.BrevityTimeline(t)}return o()(e,[{key:"add",value:function(e,t){var i=null==e?void 0:e.instance;null!=e&&e.instance&&this.instance.add(i,t)}},{key:"addLabel",value:function(e){this.instance.addLabel(e)}},{key:"getChildren",value:function(){return this.instance.getChildren()}},{key:"isActive",value:function(){return this.instance.isActive()}},{key:"pause",value:function(){this.instance.pause()}},{key:"restart",value:function(){this.instance.restart()}},{key:"play",value:function(){this.instance.play()}},{key:"getById",value:function(e){return this.instance.getById(e)}},{key:"tweenFromTo",value:function(e,t,i){return this.instance.tweenFromTo(e,t,i)}},{key:"clear",value:function(){this.instance.clear()}},{key:"getDuration",value:function(){return this.instance._dur}}]),e}();c()(d,"globalTimeline",s.BrevityTimeline.globalTimeline)},a921a6d264:function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));var n,a,r,o,l,c=i("1f925d7f50"),s=i.n(c),d=i("9132715560"),u=i.n(d),h=i("6a364eb35c"),v=i.n(h),p=i("85d0a7609b"),f=i.n(p),g=i("2dc700e1e6"),y=i.n(g),m=(i("f1054791f4"),i("8e7cce0ada"),i("29f8c5f672"),i("c6244f7705"),i("85d48ef22b"),i("2a6f332b5e"),i("8aebbf296a"),i("3bf1976a4f"),i("3471fb3b60")),b=(i("a2a09da1e3"),i("c195ed2318")),S=i("516fa97df2"),A=i("1068873c4f"),C=i("dd7af56d98"),E=i("0a8ecd6412"),M=i("2d47c066fb"),k=i("f9193d718f"),T=i("a937422e21"),R=function(){function e(t){var i=this;u()(this,e),f()(this,"slideComponent",void 0),f()(this,"id",void 0),f()(this,"application",void 0),f()(this,"slideModel",void 0),f()(this,"onDidRenderCallback",void 0),f()(this,"handleSlideClickRef",void 0),f()(this,"asyncBuild",void 0),f()(this,"scale",void 0),f()(this,"canvasWrapperDom",void 0),f()(this,"getPlayerReduxStore",void 0),f()(this,"canvasDom",void 0),f()(this,"getApplication",(function(){return i.application})),f()(this,"getPageScale",(function(){return i.scale})),f()(this,"handleSlideClick",(function(e,t){var n;null===(n=i.handleSlideClickRef)||void 0===n||n.call(i,e,t)})),f()(this,"onWillRenderCallback",(function(e){e.options.slideModel.pptEditorState=i.getAppServices().viewableServiceLayer.userPriviledgeService.pptEditorState}));var n=t.slideModel,a=t.asyncBuild,r=t.getPlayerReduxStore,o=t.onDidRenderCallback;this.slideModel=n,this.asyncBuild=a,this.getPlayerReduxStore=r,this.onDidRenderCallback=o,this.scale=1,this.id=Object(T.a)(),this.canvasDom=document.createElement("canvas"),this.canvasDom.id=M.l,this.build()}return v()(e,[{key:"dispose",value:function(){var e,t,i,n;if(null!==(e=this.application)&&void 0!==e&&e.hitView&&(this.application.hitView.clear(),this.application.hitView.width=0,this.application.hitView.height=0),null===(t=this.slideComponent)||void 0===t||t.dispose(),null===(i=this.application)||void 0===i||i.dispose(),null!==(n=this.canvasDom)&&void 0!==n&&n.width){var a,r=this.canvasDom.getContext("2d");null===(a=r)||void 0===a||a.clearRect(0,0,this.canvasDom.width,this.canvasDom.height),this.canvasDom.width=0,this.canvasDom.height=0,r=null}this.canvasDom=null,this.canvasWrapperDom=null}},{key:"display",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,a=!1;if(t!==this.scale&&(this.scale=t,a=!0),this.handleSlideClickRef=i,this.application&&e!==this.canvasWrapperDom&&this.canvasDom&&(this.handleTransitionWrapper(),e.appendChild(this.canvasDom),this.canvasWrapperDom=e,a=!0),this.slideComponent||(this.asyncBuild=!1,this.build()),this.slideComponent.hasBuild||this.slideComponent.display(),!this.application&&this.canvasDom){e.appendChild(this.canvasDom);var r=new A.c;this.application=new S.a(r,{interactive:!0,native:this.canvasDom,delayDrawHit:!1}),this.application.resolution=Math.ceil(window.devicePixelRatio),this.application.hitView.resolution=window.devicePixelRatio/8,this.application.stage.addChild(this.slideComponent),a=!0}if(a){var o=this.getAppServices().getUiDataService().presentation.props.slideWidth*t,l=this.getAppServices().getUiDataService().presentation.props.slideHeight*t;this.application.width=o,this.application.height=l,this.setTransform(n)}}},{key:"setTransform",value:function(e){var t=e.scaleX,i=e.scaleY,n=e.pivotX,a=e.pivotY;this.application.stage.transform.scaleX=t*this.scale,this.application.stage.transform.scaleY=i*this.scale,this.application.stage.transform.pivotX=n,this.application.stage.transform.pivotY=a,this.application.requestRender()}},{key:"build",value:function(){var e,t=new C.a;this.slideComponent=new b.a({slideModel:this.slideModel,getPageScale:this.getPageScale,getApplication:this.getApplication,region:E.s.PLAYER,fromScale:1,logicService:t,handleSlideClick:this.handleSlideClick,asyncBuild:this.asyncBuild,onWillRenderCallback:this.onWillRenderCallback,onDidRenderCallback:this.onDidRenderCallback,getPlayerReduxStore:this.getPlayerReduxStore,infrastructureService:this.getAppServices().getInfrastructureService(),uiDataService:this.getAppServices().getUiDataService(),mediaManager:this.getAppServices().viewableServiceLayer.mediaManager,attachmentManager:null===(e=this.getAppServices().viewableServiceLayer)||void 0===e?void 0:e.attachmentManager,editingStateManager:this.getAppServices().viewableServiceLayer.editingStateManager,addonManager:this.getAppServices().viewableServiceLayer.addonManager,fontManager:this.getAppServices().viewableServiceLayer.fontManager,linkManager:this.getAppServices().viewableServiceLayer.linkManager,accessibilityManager:this.getAppServices().viewableServiceLayer.accessibilityManager})}},{key:"getAppServices",value:function(){return k.a.getInstance().getAppServices()}},{key:"handleTransitionWrapper",value:function(){var e,t,i;this.canvasDom&&(null!==(e=this.canvasWrapperDom)&&void 0!==e&&e.childNodes&&-1!==Array.from(null===(t=this.canvasWrapperDom)||void 0===t?void 0:t.childNodes).indexOf(this.canvasDom)&&(null===(i=this.canvasWrapperDom)||void 0===i||i.removeChild(this.canvasDom)))}}]),e}(),O=function(){function e(t){var i=this;u()(this,e),f()(this,"slideComponent",void 0),f()(this,"id",void 0),f()(this,"application",void 0),f()(this,"slideModel",void 0),f()(this,"onDidRenderCallback",void 0),f()(this,"handleSlideClickRef",void 0),f()(this,"asyncBuild",void 0),f()(this,"scale",void 0),f()(this,"canvasWrapperDom",void 0),f()(this,"getPlayerReduxStore",void 0),f()(this,"canvasDom",void 0),f()(this,"hidden",(function(){i.application&&i.application.stage.removeChild(i.slideComponent)})),f()(this,"getApplication",(function(){return i.application})),f()(this,"getPageScale",(function(){return i.scale})),f()(this,"handleSlideClick",(function(e,t){var n;null===(n=i.handleSlideClickRef)||void 0===n||n.call(i,e,t)}));var n=t.slideModel,a=t.asyncBuild,r=t.getPlayerReduxStore,o=t.canvasDom,l=t.application,c=t.onDidRenderCallback;this.slideModel=n,this.asyncBuild=a,this.getPlayerReduxStore=r,this.onDidRenderCallback=c,this.scale=1,this.id=Object(T.a)(),o&&(this.canvasDom=o),l&&(this.application=l),this.build()}return v()(e,[{key:"dispose",value:function(){var e;this.hidden(),null===(e=this.slideComponent)||void 0===e||e.dispose(),this.application=void 0}},{key:"display",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(this.application){var a=!1;if(t!==this.scale&&(this.scale=t,a=!0),this.handleSlideClickRef=i,this.application&&e!==this.canvasWrapperDom&&(e.appendChild(this.canvasDom),this.canvasWrapperDom=e,a=!0),this.slideComponent||(this.asyncBuild=!1,this.build()),this.slideComponent.hasBuild||this.slideComponent.display(),this.application.stage.addChild(this.slideComponent),a){this.slideComponent.renderBackground();var r=this.getAppServices().getUiDataService().presentation.props.slideWidth*t,o=this.getAppServices().getUiDataService().presentation.props.slideHeight*t;this.application.width=r,this.application.height=o,this.setTransform(n)}}}},{key:"setTransform",value:function(e){var t=e.scaleX,i=e.scaleY,n=e.pivotX,a=e.pivotY;this.application&&(this.application.stage.transform.scaleX=t*this.scale,this.application.stage.transform.scaleY=i*this.scale,this.application.stage.transform.pivotX=n,this.application.stage.transform.pivotY=a,this.application.requestRender())}},{key:"build",value:function(){var e=new C.a;this.slideComponent=new b.a({slideModel:this.slideModel,getPageScale:this.getPageScale,getApplication:this.getApplication,region:E.s.PLAYER,fromScale:1,logicService:e,handleSlideClick:this.handleSlideClick,asyncBuild:this.asyncBuild,getPlayerReduxStore:this.getPlayerReduxStore,onDidRenderCallback:this.onDidRenderCallback,infrastructureService:this.getAppServices().getInfrastructureService(),uiDataService:this.getAppServices().getUiDataService(),mediaManager:this.getAppServices().viewableServiceLayer.mediaManager,editingStateManager:this.getAppServices().viewableServiceLayer.editingStateManager,addonManager:this.getAppServices().viewableServiceLayer.addonManager,fontManager:this.getAppServices().viewableServiceLayer.fontManager,linkManager:this.getAppServices().viewableServiceLayer.linkManager,accessibilityManager:this.getAppServices().viewableServiceLayer.accessibilityManager})}},{key:"getAppServices",value:function(){return k.a.getInstance().getAppServices()}}]),e}(),w=i("d9812f1c6f"),P=i("d5c3deb8c7"),L=(n=Reflect.metadata("design:type",Object),l=o=function(){function e(){u()(this,e),s()(this,"userTransform",r,this),f()(this,"playerReduxStore",void 0),f()(this,"renderTreeMap",new Map),f()(this,"currentSlide",null),f()(this,"canvasDom",void 0),f()(this,"application",void 0),f()(this,"slideRenderTree",void 0),f()(this,"lastSlideRenderTree",void 0),f()(this,"prevSlideCanvasCache",void 0)}return v()(e,[{key:"initWithStore",value:function(){this.createApp()}},{key:"setPlayerReduxStore",value:function(e){this.playerReduxStore=e}},{key:"getPlayerReduxStore",value:function(){return this.playerReduxStore}},{key:"clearPlayerReduxStore",value:function(){this.playerReduxStore=null}},{key:"destroyLayer",value:function(){var e;this.getAppServices().viewableServiceLayer.animManager.playSlideComponent=void 0;for(var t=Array.from(this.renderTreeMap.keys()),i=t.length-1;i>=0;i--){var n=t[i],a=this.renderTreeMap.get(n);this.renderTreeMap.delete(n),null==a||a.dispose()}null===(e=this.application)||void 0===e||e.dispose(),this.application=void 0,this.slideRenderTree=void 0,this.lastSlideRenderTree=void 0,this.canvasDom=void 0,this.clearPrevSlideCanvasCache()}},{key:"applyStrategy",value:function(e,t){var i=this,n=this.getAppServices().getUiDataService().presentation,a=new Map;if(e<n.children.length&&e>=0){var r=n.children[e];a.set(r.key,!0),this.currentSlide=r,this.buildSlideRenderTree(!1,r,t)}if(e>0){var o=n.children[e-1];a.set(o.key,!0),this.buildSlideRenderTree(!0,o,t)}if(e+1<n.children.length){var l=n.children[e+1];a.set(l.key,!0),this.buildSlideRenderTree(!0,l,t)}for(var c=Array.from(this.renderTreeMap.keys()),s=c.length-1;s>=0;s--){var d=c[s];a.has(d)||function(){var e=i.renderTreeMap.get(d);i.renderTreeMap.delete(d),w.a.isMobile?null==e||e.dispose():m.b.addTaskWithBlock("dispose-player-tree-".concat(d,"-").concat(null==e?void 0:e.id),m.a.LOW,(function(){null==e||e.dispose()}))}()}}},{key:"display",value:function(e,t,i,n,a){var r,o;(this.renderTreeMap.has(e.key)||this.buildSlideRenderTree(!1,e,a),this.slideRenderTree=this.renderTreeMap.get(e.key),this.slideRenderTree)&&(null===(r=this.lastSlideRenderTree)||void 0===r||null===(o=r.hidden)||void 0===o||o.call(r),this.slideRenderTree.display(t,i,n,this.userTransform),this.getAppServices().viewableServiceLayer.animManager.playSlideComponent=this.slideRenderTree.slideComponent,this.lastSlideRenderTree=this.slideRenderTree)}},{key:"setTransform",value:function(e){var t;this.userTransform=e,null===(t=this.slideRenderTree)||void 0===t||t.setTransform(e)}},{key:"getRenderTree",value:function(e){return this.renderTreeMap.get(e.key)}},{key:"getPrevSlideCanvas",value:function(){return this.prevSlideCanvasCache}},{key:"setPrevSlideCanvasCache",value:function(e,t){try{if(e===t)return;var i=this.getAppServices().getUiDataService().presentation.children[t];if(i){var n,a,r=this.getRenderTree(i);this.prevSlideCanvasCache=this.createCanvasCacheFormRenderResult(null==r||null===(n=r.getApplication())||void 0===n||null===(a=n.view)||void 0===a?void 0:a.native)}else this.clearPrevSlideCanvasCache()}catch(e){this.clearPrevSlideCanvasCache()}}},{key:"getSlideModelByIndex",value:function(e){return this.getAppServices().getUiDataService().slideModelList[e]}},{key:"createCanvasCacheFormRenderResult",value:function(e){if(e&&0!==e.width&&0!==e.height){var t=this.prevSlideCanvasCache;this.prevSlideCanvasCache||(t=document.createElement("canvas")),t.width=e.width,t.height=e.height,t.style.cssText=e.style.cssText;var i=t.getContext("2d");return null==i||i.drawImage(e,0,0),t}}},{key:"buildSlideRenderTree",value:function(e,t,i){var n=this;if(!this.renderTreeMap.has(t.key)){var a=new(w.a.isMobile?O:R)({slideModel:t,asyncBuild:e,getPlayerReduxStore:function(){return n.playerReduxStore},canvasDom:this.canvasDom,application:this.application,onDidRenderCallback:i});this.renderTreeMap.set(t.key,a)}}},{key:"createApp",value:function(){if(w.a.isMobile&&!this.application){this.canvasDom=document.createElement("canvas"),this.canvasDom.id=M.l;var e=new A.c;this.application=new S.a(e,{interactive:!0,native:this.canvasDom,delayDrawHit:!1}),this.application.resolution=Math.ceil(window.devicePixelRatio),this.application.hitView.resolution=window.devicePixelRatio}}},{key:"clearPrevSlideCanvasCache",value:function(){this.prevSlideCanvasCache=void 0}},{key:"getAppServices",value:function(){return k.a.getInstance().getAppServices()}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}(),f()(o,"instance",void 0),a=l,r=y()(a.prototype,"userTransform",[P.q,n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{scaleX:1,scaleY:1,pivotX:0,pivotY:0}}}),a)},bd2cdd75ae:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));i("342844cefa"),i("a84962d637"),i("8a35b54c1d"),i("c554310b5c"),i("8ee19818c4"),i("bcb5d93d36");var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=i("ec11356cf6");function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){c()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var h=function(){function e(t){var i,n=t.type,r=t.target,o=t.fromStyle,l=t.toStyle;a()(this,e),c()(this,"instance",void 0),c()(this,"vars",void 0),this.instance=this.getInstance({type:n,target:r,fromStyle:o,toStyle:l}),this.vars=null===(i=this.instance)||void 0===i?void 0:i.vars}return o()(e,[{key:"play",value:function(){var e;null===(e=this.instance)||void 0===e||e.play()}},{key:"restart",value:function(){var e;null===(e=this.instance)||void 0===e||e.restart()}},{key:"pause",value:function(){var e;null===(e=this.instance)||void 0===e||e.pause()}},{key:"resume",value:function(){var e;null===(e=this.instance)||void 0===e||e.resume()}},{key:"isActive",value:function(){var e;return null===(e=this.instance)||void 0===e?void 0:e.isActive()}},{key:"set",value:function(e){var t,i=null===(t=this.instance)||void 0===t?void 0:t.target();s.BrevityTween.set(i,e)}},{key:"getInstance",value:function(e){var t=e.type,i=e.target,n=e.fromStyle,a=e.toStyle;return"fromTo"===t?s.BrevityTween.fromTo(i,n,a):null}}]),e}();c()(h,"set",(function(e,t){s.BrevityTween.set(e,u(u({},t),{},{duration:0}))}))},cfcfbe15b7:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));i("342844cefa"),i("a84962d637"),i("8a35b54c1d"),i("c554310b5c"),i("8ee19818c4"),i("bcb5d93d36");var n,a=i("9132715560"),r=i.n(a),o=i("6a364eb35c"),l=i.n(o),c=i("85d0a7609b"),s=i.n(c),d=i("a921a6d264"),u=i("a36a02b860"),h=i("bd2cdd75ae");function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){s()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}!function(e){e.START="transition-start",e.COMPLETE="transition-complete"}(n||(n={}));var f=function(){function e(t){r()(this,e),s()(this,"timeline",void 0),s()(this,"options",void 0),s()(this,"animation",void 0),this.options=t,this.timeline=this.generateTimeline()}return l()(e,[{key:"generateTimeline",value:function(){var e=this,t={id:"transition",paused:!1,callbackScope:this,onStart:this.handleTimelineStart.bind(this),onUpdate:this.handleTimelineUpdate.bind(this),onComplete:this.handleTimelineComplete.bind(this)},i=new u.a(t);i.addLabel(n.START);var a=this.options,r=a.model,o=a.isSwitchForward;return r.getAnimationSetting(null==o?void 0:o()).forEach((function(t){var a=t.fromStyle,o=t.toStyle,l=t.target,c=t.label,s=p({},a),d=new h.a({type:"fromTo",target:s,fromStyle:a,toStyle:p({duration:r.animationDuration,onStart:e.handleAnimationStart.bind(e),onUpdate:e.handleAnimationUpdate.bind(e),onComplete:e.handleAnimationComplete.bind(e),onUpdateParams:[{target:l,style:s}],onStartParams:[{target:l}],onCompleteParams:[{target:l}]},o)});i.add(d,null!=c?c:n.START)})),i.addLabel(n.COMPLETE),i}},{key:"startAnimation",value:function(){this.animation=this.timeline.tweenFromTo(n.START,n.COMPLETE,{})}},{key:"stopAnimation",value:function(){var e,t;return!(null===(e=this.animation)||void 0===e||null===(t=e.isActive)||void 0===t||!t.call(e))&&(this.animation.progress(1).kill(),!0)}},{key:"isActive",value:function(){var e,t;return null===(e=this.animation)||void 0===e||null===(t=e.isActive)||void 0===t?void 0:t.call(e)}},{key:"dispose",value:function(){this.timeline.clear()}},{key:"handleTimelineStart",value:function(){var e,t;null===(e=(t=this.options).handleTimelineStart)||void 0===e||e.call(t)}},{key:"handleTimelineUpdate",value:function(){var e,t;null===(e=(t=this.options).handleTimelineUpdate)||void 0===e||e.call(t)}},{key:"handleTimelineComplete",value:function(){var e,t;null===(e=(t=this.options).handleTimelineComplete)||void 0===e||e.call(t)}},{key:"handleAnimationStart",value:function(e){var t,i;null===(t=(i=this.options).handleAnimationStart)||void 0===t||t.call(i,e)}},{key:"handleAnimationUpdate",value:function(e){var t,i;null===(t=(i=this.options).handleAnimationUpdate)||void 0===t||t.call(i,e)}},{key:"handleAnimationComplete",value:function(e){var t,i;null===(t=(i=this.options).handleAnimationComplete)||void 0===t||t.call(i,e)}}]),e}(),g=i("4abf199b59"),y=function e(t){var i=this;r()(this,e),s()(this,"options",void 0),s()(this,"beforeAnimation",(function(){var e,t;null===(e=(t=i.options).beforeAnimation)||void 0===e||e.call(t)})),s()(this,"renderAnimationFrame",(function(e){var t,n;null===(t=(n=i.options).renderAnimationFrame)||void 0===t||t.call(n,e)})),s()(this,"afterAnimation",(function(){var e,t;null===(e=(t=i.options).afterAnimation)||void 0===e||e.call(t)})),this.options=t},m=(i("b4638a0243"),i("3bf1976a4f"),i("405b4a5e2b"),i("1068873c4f")),b=i("ab17200d42"),S=i("516fa97df2"),A=function(){function e(t){var i=this;r()(this,e),s()(this,"options",void 0),s()(this,"enterCanvas",void 0),s()(this,"exitCanvas",void 0),s()(this,"buffer",void 0),s()(this,"beforeAnimation",(function(){var e,t,n,a,r,o,l,c,s=d.a.getInstance().getRenderTree(i.options.slideModel),u=null!==(e=i.options.prevSlideModel)&&void 0!==e?e:null===(t=(n=i.options).getPrevSlideModel)||void 0===t?void 0:t.call(n);if(i.options.enterCanvas||i.options.exitCanvas)i.enterCanvas=i.options.enterCanvas,i.exitCanvas=i.options.exitCanvas;else if(null!==(l=(c=i.options).isSwitchForward)&&void 0!==l&&l.call(c)){var h;if(u){var v,p=d.a.getInstance().getRenderTree(u);i.enterCanvas=null==p||null===(v=p.getApplication())||void 0===v?void 0:v.view}i.exitCanvas=null==s||null===(h=s.getApplication())||void 0===h?void 0:h.view}else{var f;if(i.enterCanvas=null==s||null===(f=s.getApplication())||void 0===f?void 0:f.view,u){var g,y=d.a.getInstance().getRenderTree(u);i.exitCanvas=null==y||null===(g=y.getApplication())||void 0===g?void 0:g.view}}if(i.enterCanvas&&(i.buffer=b.e?i.enterCanvas.createBuffer():i.enterCanvas.getGlBuffer(i.enterCanvas.width/i.enterCanvas.resolution,i.enterCanvas.height/i.enterCanvas.resolution)),null!==(a=i.buffer)&&void 0!==a&&a.native){var m,S,A=null===(m=(S=i.options).getExitWrapper)||void 0===m?void 0:m.call(S);null==A||A.appendChild(i.buffer.native)}null===(r=(o=i.options).beforeAnimation)||void 0===r||r.call(o,!0)})),s()(this,"renderAnimationFrame",(function(e){var t,n,a,r=e.target,o=e.style;if(null===(t=(n=i.options).renderAnimationFrame)||void 0===t||t.call(n,e,!0),r!==g.h.ENTER||1!==o.progress){var l=r===g.h.ENTER?i.enterCanvas:i.exitCanvas;if(l){var c=100*(null!==(a=o.progress)&&void 0!==a?a:0),s=0===c?1:100!==c?1/(1-c/100):100;i.renderCanvas(l,s)}else if(i.buffer instanceof m.a){var d;i.buffer.rect(0,0,i.buffer.width,i.buffer.height);var u=(255*(null!==(d=o.progress)&&void 0!==d?d:0)).toFixed(0);i.buffer.nativeFillStyle="rgba(".concat(u,", ").concat(u,", ").concat(u,", 1)"),i.buffer.fill()}}})),s()(this,"afterAnimation",(function(){var e,t,n,a,r;null===(e=(t=i.options).afterAnimation)||void 0===e||e.call(t,!0);var o=null===(n=(a=i.options).getExitWrapper)||void 0===n?void 0:n.call(a);o&&(null==o||null===(r=o.childNodes)||void 0===r?void 0:r.length)>0&&o.removeChild(o.childNodes[0])})),this.options=t}return l()(e,[{key:"renderCanvas",value:function(e,t){if(this.buffer){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];if(b.e){var n=Object(S.X)(e.width,e.height,"".concat(i[0]," ").concat(i[1]," ").concat(i[2]," ").concat(i[3]," ").concat(i[4],"\n                ").concat(i[5]," ").concat(i[6]," ").concat(i[7]," ").concat(i[8]," ").concat(i[9],"\n                ").concat(i[10]," ").concat(i[11]," ").concat(i[12]," ").concat(i[13]," ").concat(i[14],"\n                ").concat(i[15]," ").concat(i[16]," ").concat(i[17]," ").concat(i[18]," ").concat(i[19]));this.buffer.filter="url(#".concat(n,")"),this.buffer.drawCanvas(e,e.padding.left,e.padding.top)}else Object(S.Z)(this.buffer,e.native,i)}}}]),e}();function C(e){var t,i,n=null===(t=e.slideModel.transition)||void 0===t?void 0:t.getImplementationType();if(n===g.c.FLAT||n===g.c.PRESERVE_3D)return new y(e);if(n===g.c.CUSTOM&&(null===(i=e.slideModel.transition)||void 0===i?void 0:i.type)===g.i.FLASH)return new A(e)}function E(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function M(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?E(Object(i),!0).forEach((function(t){s()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var k=function(){function e(t){r()(this,e),s()(this,"transition",void 0),s()(this,"blackPlaceHolder",void 0),s()(this,"options",void 0),s()(this,"renderer",void 0),this.options=t,this.renderer=C(t)}return l()(e,[{key:"startTransition",value:function(){var e,t,i=this.options,n=i.slideModel,a=i.handleTimelineComplete,r=i.isSwitchForward,o=i.getPrevSlideModel;if(this.isSupportTransition()){var l=this.getAnimationRenderer();null==l||l.beforeAnimation();var c=null!=r&&r()?null==o||null===(e=o())||void 0===e?void 0:e.transition:n.transition;this.transition=new f({model:c,isSwitchForward:r,handleTimelineComplete:function(){null==a||a(),null==l||l.afterAnimation()},handleAnimationUpdate:function(e){null==l||l.renderAnimationFrame(e)}}),null===(t=this.transition)||void 0===t||t.startAnimation()}}},{key:"stopTransition",value:function(){var e;return!(null===(e=this.transition)||void 0===e||!e.stopAnimation())}},{key:"isSupportTransition",value:function(){var e,t,i,n=this.options,a=n.slideModel,r=n.isSwitchForward,o=n.getPrevSlideModel;return null!=r&&r()?!(null==o||null===(e=o())||void 0===e||null===(t=e.transition)||void 0===t||!t.isSupported):!(null===(i=a.transition)||void 0===i||!i.isSupported)}},{key:"isTransitionActive",get:function(){var e;return!(null===(e=this.transition)||void 0===e||!e.isActive())}},{key:"dispose",value:function(){var e;null===(e=this.transition)||void 0===e||e.dispose(),this.transition=null}},{key:"getExitElement",value:function(){var e,t,i,n=null===(e=(t=this.options).getPrevSlideModel)||void 0===e?void 0:e.call(t);if(n){var a=d.a.getInstance().getPrevSlideCanvas();if(a)i=a;else{var r,o,l=d.a.getInstance().getRenderTree(n);i=null==l||null===(r=l.getApplication())||void 0===r||null===(o=r.view)||void 0===o?void 0:o.native}}return i||(i=this.createBlackPlaceHolder()),i}},{key:"getAnimationRenderer",value:function(){var e=this.options,t=e.isSwitchForward,i=e.getPrevSlideModel,n=null==i?void 0:i();return null!=t&&t()&&n?C(M(M({},this.options),{},{slideModel:n,prevSlideModel:this.options.slideModel})):this.renderer}},{key:"createBlackPlaceHolder",value:function(){return this.blackPlaceHolder||(this.blackPlaceHolder=document.createElement("div"),this.blackPlaceHolder.style.backgroundColor="#000"),this.blackPlaceHolder.style.width="100%",this.blackPlaceHolder.style.height="100%",this.blackPlaceHolder}}]),e}()},e1618a5648:function(e,t,i){"use strict";i.d(t,"a",(function(){return L}));var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=i("75bd1be246"),d=i("ec5cae33cb"),u=(i("73b854064b"),i("bd29e2df90")),h=i.n(u),v=i("ab5eb40518"),p=i.n(v),f=i("1b4cdd6a36"),g=i.n(f),y=(i("8e7cce0ada"),i("29f8c5f672"),i("c6244f7705"),i("85d48ef22b"),i("2a6f332b5e"),i("c77811d8de")),m=i("9559b6ab8e"),b=function(){function e(t){var i=this;a()(this,e),c()(this,"handlerMap",void 0),c()(this,"elementModel",void 0),c()(this,"animType",void 0),c()(this,"animStopAtLength",void 0),this.mediaManager=t,this.handlerMap=new Map,this.handlerMap.set(m.b.Play,(function(){return i.playHandler()})),this.handlerMap.set(m.b.Pause,(function(){return i.togglePauseHandler()})),this.handlerMap.set(m.b.Stop,(function(){return i.stopHandler()}))}return o()(e,[{key:"startMediaControl",value:function(e){var t=e.elementModel,i=e.animType,n=e.presetClass,a=e.animStopAtLength;this.elementModel=t,this.animType=i,this.animStopAtLength=a,n===y.e.MEDIA?this.handleMediaAnimStart():this.stopHandler()}},{key:"completeMediaControl",value:function(e){}},{key:"isPlaying",value:function(){return!1}},{key:"playHandler",value:function(e){}},{key:"togglePauseHandler",value:function(){}},{key:"stopHandler",value:function(){}},{key:"getMediaInstance",value:function(e){return null}},{key:"handleMediaAnimStart",value:function(){var e;null===(e=this.handlerMap.get(this.animType))||void 0===e||e()}}]),e}(),S=i("862b984676"),A=i("0cbec907c5"),C=i("7af4d80efc");function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g()(e);if(t){var a=g()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}var M=function(e){h()(i,e);var t=E(i);function i(){return a()(this,i),t.apply(this,arguments)}return o()(i,[{key:"isPlaying",value:function(){var e=this.getMediaInstance(this.elementModel.key);return(null==e?void 0:e.playerType)===C.b.WEB?(null==e?void 0:e.state)===A.A.PLAYING:(null==e?void 0:e.playerType)===C.b.DESKTOP&&(null==e?void 0:e.isPlaying)}},{key:"completeMediaControl",value:function(e){this.mediaManager.pauseVideoByRegion(e.elementModel.key,S.a.PLAYER)}},{key:"playHandler",value:function(){var e=this.mediaManager;e&&e.playVideoByRegion(this.elementModel.key,S.a.PLAYER)}},{key:"togglePauseHandler",value:function(){var e;(null===(e=this.getMediaInstance(this.elementModel.key))||void 0===e?void 0:e.playerType)!==C.b.DESKTOP&&(this.isPlaying()?this.stopHandler():this.playHandler())}},{key:"stopHandler",value:function(){var e=this.mediaManager;e&&e.pauseVideoByRegion(this.elementModel.key,S.a.PLAYER)}},{key:"getMediaInstance",value:function(e){var t;return null===(t=this.mediaManager)||void 0===t?void 0:t.getVideoInstanceByRegion(e,S.a.PLAYER)}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new i(e)),this.instance}}]),i}(b);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g()(e);if(t){var a=g()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}c()(M,"instance",void 0);var T=function(e){h()(i,e);var t=k(i);function i(){return a()(this,i),t.apply(this,arguments)}return o()(i,[{key:"isPlaying",value:function(){var e,t=this.mediaManager.getAudioInstanceByRegion(null===(e=this.elementModel)||void 0===e?void 0:e.key,S.a.PLAYER);return!!t&&!t.paused}},{key:"completeMediaControl",value:function(e){this.mediaManager.resetAudioByRegion(e.elementModel.key,S.a.PLAYER)}},{key:"playHandler",value:function(){var e;if(this.animStopAtLength&&this.animStopAtLength>1){var t,i=this.mediaManager.getAudioInstanceByRegion(null===(t=this.elementModel)||void 0===t?void 0:t.key,S.a.PLAYER);if(i){var n,a=this.elementModel.presentationRef.indexOfSlide(this.elementModel.slideRef);this.mediaManager.setPreserveAudioByKey(null===(n=this.elementModel)||void 0===n?void 0:n.key,{audioIns:i,stopAtSlideIndex:this.animStopAtLength+a-1,startAtSlideIndex:a})}}this.mediaManager.playAudioByRegion(null===(e=this.elementModel)||void 0===e?void 0:e.key,S.a.PLAYER)}},{key:"togglePauseHandler",value:function(){this.isPlaying()?this.stopHandler():this.playHandler()}},{key:"stopHandler",value:function(){var e;this.mediaManager.resetAudioByRegion(null===(e=this.elementModel)||void 0===e?void 0:e.key,S.a.PLAYER)}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new i(e)),this.instance}}]),i}(b);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g()(e);if(t){var a=g()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}c()(T,"instance",void 0);var O=function(e){h()(i,e);var t=R(i);function i(){return a()(this,i),t.apply(this,arguments)}return o()(i,[{key:"completeMediaControl",value:function(e){this.mediaManager.pauseVideoByRegion(e.elementModel.key,S.a.EDITOR)}},{key:"isPlaying",value:function(){var e=this.getMediaInstance(this.elementModel.key);return(null==e?void 0:e.state)===A.A.PLAYING}},{key:"playHandler",value:function(){var e=this.mediaManager;e&&e.playVideoByRegion(this.elementModel.key,S.a.EDITOR)}},{key:"togglePauseHandler",value:function(){this.playHandler()}},{key:"stopHandler",value:function(){var e=this.mediaManager;e&&e.pauseVideoByRegion(this.elementModel.key,S.a.EDITOR)}},{key:"getMediaInstance",value:function(e){var t;return null===(t=this.mediaManager)||void 0===t?void 0:t.getVideoInstanceByRegion(e,S.a.EDITOR)}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new i(e)),this.instance}}]),i}(b);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g()(e);if(t){var a=g()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return p()(this,i)}}c()(O,"instance",void 0);var P=function(e){h()(i,e);var t=w(i);function i(){return a()(this,i),t.apply(this,arguments)}return o()(i,[{key:"completeMediaControl",value:function(e){this.mediaManager.resetAudioByRegion(e.elementModel.key,S.a.EDITOR)}},{key:"isPlaying",value:function(){var e,t=this.mediaManager.getAudioInstanceByRegion(null===(e=this.elementModel)||void 0===e?void 0:e.key,S.a.EDITOR);return!!t&&!t.paused}},{key:"playHandler",value:function(){var e;this.mediaManager.playAudioByRegion(null===(e=this.elementModel)||void 0===e?void 0:e.key,S.a.EDITOR)}},{key:"togglePauseHandler",value:function(){this.playHandler()}},{key:"stopHandler",value:function(){var e;this.mediaManager.resetAudioByRegion(null===(e=this.elementModel)||void 0===e?void 0:e.key,S.a.EDITOR)}},{key:"getMediaInstance",value:function(e){var t;return null===(t=this.mediaManager)||void 0===t?void 0:t.getAudioInstanceByRegion(e,S.a.EDITOR)}}],[{key:"getInstance",value:function(e){return this.instance||(this.instance=new i(e)),this.instance}}]),i}(b);c()(P,"instance",void 0);var L=function(){function e(){a()(this,e)}return o()(e,null,[{key:"setMediaManagerDelegate",value:function(t){e.mediaManager||(e.mediaManager=t)}},{key:"getInstance",value:function(t,i){var n,a,r,o;return null===(o=(r={},c()(r,d.a.PLAYER,(n={},c()(n,s.n.VIDEO,M.getInstance(e.mediaManager)),c()(n,s.n.AUDIO,T.getInstance(e.mediaManager)),n)),c()(r,d.a.EDITOR,(a={},c()(a,s.n.VIDEO,O.getInstance(e.mediaManager)),c()(a,s.n.AUDIO,P.getInstance(e.mediaManager)),a)),r)[t])||void 0===o?void 0:o[i]}}]),e}();c()(L,"mediaManager",void 0)},e73d26c593:function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));i("73b854064b"),i("342844cefa"),i("a84962d637"),i("8a35b54c1d"),i("c554310b5c"),i("bcb5d93d36");var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("547611bd96"),c=i.n(l),s=i("bd29e2df90"),d=i.n(s),u=i("ab5eb40518"),h=i.n(u),v=i("1b4cdd6a36"),p=i.n(v),f=i("85d0a7609b"),g=i.n(f);i("3bf1976a4f"),i("8ee19818c4");function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=p()(e);if(t){var a=p()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return h()(this,i)}}var m=function(e){d()(i,e);var t=y(i);function i(){return a()(this,i),t.apply(this,arguments)}return i}(i("5fee0c5911").a),b=i("f47a23bb49"),S=i("d5c3deb8c7"),A=i("a921a6d264"),C=i("3471fb3b60"),E=i("75bd1be246"),M=i("fed003a03b");function k(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?k(Object(i),!0).forEach((function(t){g()(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=p()(e);if(t){var a=p()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return h()(this,i)}}var O=function(e){d()(i,e);var t=R(i);function i(){var e;a()(this,i);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),g()(c()(e),"mediaManager",void 0),g()(c()(e),"playManager",void 0),g()(c()(e),"needStopExecuteCurrentSlide",(function(t){return!e.checkHasAnim(t)})),g()(c()(e),"addExecuteObserver",(function(e){var t=e.slideModel,i=e.slideComponent,n=e.callback,a=Object(S.r)((function(){return{animConverted:t.animConverted,hasBuilt:i.slideElementsHasBuilt}}),(function(e){var t=e.animConverted,i=e.hasBuilt;t&&i&&(null==n||n(),null==a||a())}))})),g()(c()(e),"handleUnexecutedTask",(function(t){e.unexecutedTaskKeySet.forEach((function(e){t.forEach((function(t){var i=t.taskKey;e!==i&&C.b.cancelTaskByKey(e)}))}))})),g()(c()(e),"checkIsExecuted",(function(t){var i=e.presentation.children[t];return!(null==i||!i.mainSlideTimeline)})),g()(c()(e),"taskFunc",(function(t){var i,n=t.slideModel,a=null===(i=A.a.getInstance().getRenderTree(n))||void 0===i?void 0:i.slideComponent;a&&(a.slideElementsHasBuilt&&n.animConverted?e.mountTimeline(n,a):e.addExecuteObserver({slideModel:n,slideComponent:a,callback:function(){e.mountTimeline(n,a)}}))})),g()(c()(e),"createTaskKey",(function(e){return"create-timeline-".concat(e)})),g()(c()(e),"mountTimeline",(function(t,i){var n=Object(M.k)(t);if(n){var a,r=t;if(i.isDispose)r.mainSlideTimeline=null;else r.mainSlideTimeline=new m({animList:n,slideComponent:i,mediaManager:e.mediaManager,options:T(T({},E.m),{},{autoPlay:null===(a=t.transition)||void 0===a?void 0:a.autoAdvance}),playManager:e.playManager})}})),e}return o()(i,[{key:"init",value:function(e,t,i){this.presentation=e,this.mediaManager=t,this.playManager=i}},{key:"checkHasAnim",value:function(e){return!!e.timing}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new i),this.instance}}]),i}(b.a);g()(O,"instance",void 0)},e944fda0e4:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n,a,r,o,l,c=i("1f925d7f50"),s=i.n(c),d=i("9132715560"),u=i.n(d),h=i("6a364eb35c"),v=i.n(h),p=i("85d0a7609b"),f=i.n(p),g=i("2dc700e1e6"),y=i.n(g),m=(i("f1054791f4"),i("8ee19818c4"),i("d5c3deb8c7")),b=i("fed003a03b");!function(e){e[e.HAVE_NOTHING=0]="HAVE_NOTHING",e[e.HAVE_METADATA=1]="HAVE_METADATA",e[e.HAVE_CURRENT_DATA=2]="HAVE_CURRENT_DATA",e[e.HAVE_FUTURE_DATA=3]="HAVE_FUTURE_DATA",e[e.HAVE_ENOUGH_DATA=4]="HAVE_ENOUGH_DATA"}(l||(l={}));var S="pause",A="loadeddata",C="visibilitychange",E="focus",M="blur",k=(o=r=function(){function e(){var t=this;u()(this,e),f()(this,"audio",void 0),f()(this,"mediaManager",void 0),f()(this,"isAlwaysPlayFirstAudio",!1),f()(this,"disposeAudioReaction",void 0),f()(this,"isInit",!1),f()(this,"isForbidAutoPlay",!b.r),f()(this,"disposeConfigReaction",void 0),s()(this,"audioUrlFromConfig",a,this),f()(this,"audioHasPlayed",!1),f()(this,"configFetched",null),f()(this,"isPageFocus",!0),f()(this,"onAudioLoaded",(function(){t.playWhenSlideAudioCreated()})),f()(this,"onAudioPause",(function(){var e,i,n;t.isPageFocus&&(null===(e=t.audio)||void 0===e||null===(i=e.play())||void 0===i||null===(n=i.then((function(){window.log.info("play OK after pause")})))||void 0===n||n.catch((function(e){window.log.info("play FAIL after pause",e)})))})),f()(this,"handlePageFocus",(function(){t.isPageFocus=!0,t.playAudioActually()})),f()(this,"handlePageBlur",(function(){var e;t.audioHasPlayed=!1,t.isPageFocus=!1,null===(e=t.audio)||void 0===e||e.pause()})),f()(this,"onPageVisibleChange",(function(){"visible"!==document.visibilityState?t.handlePageBlur():t.handlePageFocus()}))}return v()(e,[{key:"initData",value:function(e){var t=e.mediaManager,i=e.isLoop;!t||this.isForbidAutoPlay||this.isInit||(this.mediaManager=t,this.disposeAudioReaction||(this.disposeAudioReaction=this.createAudioReaction(i)),this.isInit=!0,this.addPageChangeListener())}},{key:"playAudio",value:function(){this.audio&&this.playWhenSlideAudioCreated()}},{key:"setAudioUrl",value:function(e){this.audioUrlFromConfig=e}},{key:"setConfigStatus",value:function(e){this.configFetched=e}},{key:"disposeAudio",value:function(){var e,t,i,n,a;this.isInit&&(this.removePageChangeListener(),null===(e=this.disposeAudioReaction)||void 0===e||e.call(this),null===(t=this.disposeConfigReaction)||void 0===t||t.call(this),null===(i=this.audio)||void 0===i||i.removeEventListener(A,this.onAudioLoaded),null===(n=this.audio)||void 0===n||n.removeEventListener(S,this.onAudioPause),null===(a=this.audio)||void 0===a||a.pause(),this.audio=null)}},{key:"playWhenSlideAudioCreated",value:function(){var e=this;this.audio&&(null!==this.configFetched?this.configFetched?this.playWhenFetchSuccess(this.audioUrlFromConfig):this.audio.readyState<l.HAVE_CURRENT_DATA||this.playAudioActually():this.disposeConfigReaction=Object(m.r)((function(){return e.audioUrlFromConfig}),(function(t){e.playWhenFetchSuccess(t)})))}},{key:"playWhenFetchSuccess",value:function(e){this.audio&&(e&&e!==this.audio.src&&(this.audio.src=e),this.playAudioActually())}},{key:"createAudioReaction",value:function(e){var t=this;return Object(m.r)((function(){return t.mediaManager.audioInstancesInPlayer.size}),(function(){t.isAlwaysPlayFirstAudio||(t.mediaManager.audioInstancesInPlayer.forEach((function(e,i){i&&(t.audio=e)})),t.audio&&(t.isAlwaysPlayFirstAudio=!0,t.audio.loop=e,t.audioUrlFromConfig&&(t.audio.src=t.audioUrlFromConfig,t.audio.load()),t.audio.readyState<l.HAVE_CURRENT_DATA?t.audio.addEventListener(A,t.onAudioLoaded):t.playAudioActually(),t.audio.addEventListener(S,t.onAudioPause)))}))}},{key:"playAudioActually",value:function(){var e,t,i=this;this.audio&&!this.audioHasPlayed&&(this.audio.muted=!1,null===(e=this.audio.play())||void 0===e||null===(t=e.then((function(){i.audioHasPlayed=!0})))||void 0===t||t.catch((function(e){window.log.info("audio play fail",e)})))}},{key:"addPageChangeListener",value:function(){void 0===document.hidden?(window.addEventListener(E,this.handlePageFocus),window.addEventListener(M,this.handlePageBlur)):document.addEventListener(C,this.onPageVisibleChange)}},{key:"removePageChangeListener",value:function(){void 0===document.hidden?(window.removeEventListener(E,this.handlePageFocus),window.removeEventListener(M,this.handlePageBlur)):document.removeEventListener(C,this.onPageVisibleChange)}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}(),f()(r,"instance",void 0),n=o,a=y()(n.prototype,"audioUrlFromConfig",[m.q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),n)},f47a23bb49:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("9132715560"),a=i.n(n),r=i("6a364eb35c"),o=i.n(r),l=i("85d0a7609b"),c=i.n(l),s=(i("8e7cce0ada"),i("c6244f7705"),i("c9a7ecac4d"),i("85d48ef22b"),i("2a6f332b5e"),i("8ee19818c4"),i("3471fb3b60")),d=i("1958c4fc35"),u=function(){function e(){var t=this;a()(this,e),c()(this,"presentation",void 0),c()(this,"currentSlideIndex",void 0),c()(this,"unexecutedTaskKeySet",new Set),c()(this,"addExecuteObserver",void 0),c()(this,"checkIsExecuted",void 0),c()(this,"taskFunc",void 0),c()(this,"createTaskKey",void 0),c()(this,"cancelUnexecutedTask",(function(){t.unexecutedTaskKeySet.size&&t.unexecutedTaskKeySet.forEach((function(e){"string"==typeof e&&s.b.cancelTaskByKey(e)}))})),c()(this,"addNewTask",(function(e){var i,n=t.createTaskKey(null!==(i=e.id)&&void 0!==i?i:String(e.id)),a=new d.a(n,s.a.NORMAL,(function(){t.taskFunc({slideModel:e})}));s.b.addTask(a),t.unexecutedTaskKeySet.add(n),a.promise.then((function(){!a.isFinished||a.isCanceled||a.isPaused||t.unexecutedTaskKeySet.delete(n),a.isCanceled&&(s.b.instance.taskMap.delete(n),t.unexecutedTaskKeySet.delete(n))}))})),c()(this,"handleUnexecutedTask",(function(e){t.unexecutedTaskKeySet.forEach((function(t){e.forEach((function(e){var i=e.taskKey;if(t!==i){var n=s.b.getTaskWithKey(t);n&&(n.priority=n.priority-1)}}))}))})),c()(this,"needStopExecuteCurrentSlide",(function(e){return!1})),c()(this,"executeCurrentSlide",(function(){var e=t.presentation.children[t.currentSlideIndex];e&&(t.needStopExecuteCurrentSlide(e)||t.checkIsExecuted(t.currentSlideIndex)||t.checkIsExecuting(e.key)||(s.b.cancelTaskByKey(t.createTaskKey(e.key)),t.taskFunc({slideModel:e})))})),c()(this,"executeSiblingSlide",(function(){var e=t.getNeedAdvanceExecuteSlideIndexList();e.length&&(t.handleUnexecutedTask(e),e.forEach((function(e){var i=e.slideIndex,n=e.taskKey;if(!t.checkIsExecuted(i)){var a=t.presentation.children[i];t.checkIfInTaskManager(n)||t.addNewTask(a)}})))})),c()(this,"getNeedAdvanceExecuteSlideIndexList",(function(){var e,i=null===(e=t.presentation)||void 0===e?void 0:e.slideCount;if(!i||i<1||1===i)return[];var n=[];return[t.currentSlideIndex-1,t.currentSlideIndex+1].forEach((function(e){var i=t.presentation.children[e];i&&n.push({slideIndex:e,taskKey:t.createTaskKey(i.key)})})),n})),c()(this,"checkIfInTaskManager",(function(e){return!!s.b.getTaskWithKey(e)})),c()(this,"checkIsExecuting",(function(e){var i=t.createTaskKey(e),n=s.b.getTaskWithKey(i);return!(null==n||!n.isExecuting)}))}return o()(e,[{key:"initPresentation",value:function(e){this.presentation=e}},{key:"execute",value:function(e){this.currentSlideIndex=e,this.executeCurrentSlide(),this.executeSiblingSlide()}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}();c()(u,"instance",void 0)},f690a9be16:function(e,t,i){"use strict";i.d(t,"a",(function(){return jt}));var n,a,r,o,l,c,s,d=i("9132715560"),u=i.n(d),h=i("6a364eb35c"),v=i.n(h),p=i("85d0a7609b"),f=i.n(p),g=(i("75563bc376"),i("8e7cce0ada"),i("29f8c5f672"),i("c6244f7705"),i("85d48ef22b"),i("2a6f332b5e"),i("9559b6ab8e")),y=i("75bd1be246"),m=i("1f925d7f50"),b=i.n(m),S=i("547611bd96"),A=i.n(S),C=i("bd29e2df90"),E=i.n(C),M=i("ab5eb40518"),k=i.n(M),T=i("1b4cdd6a36"),R=i.n(T),O=i("2dc700e1e6"),w=i.n(O),P=(i("f1054791f4"),i("826dc923b3"),i("73b854064b"),i("516fa97df2"));function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var x,I,B,D,H,F,N,j=(n=Reflect.metadata("design:type",Number),s=c=function(e){E()(i,e);var t=L(i);function i(e){var n,a,c,s;u()(this,i),s=t.call(this),b()(A()(s),"rate",r,A()(s)),b()(A()(s),"direction",o,A()(s)),b()(A()(s),"action",l,A()(s)),f()(A()(s),"forbidWebgl",!0),f()(A()(s),"type",y.h.BLINDS);var d=Object(P.Y)(A()(s));return s.rate=null!==(n=e.rate)&&void 0!==n?n:d.rate,s.direction=null!==(a=e.direction)&&void 0!==a?a:d.direction,s.action=null!==(c=e.action)&&void 0!==c?c:d.action,s}return v()(i,[{key:"apply",value:function(e,t){this.direction===g.A.Across?this.applyHorizon(t):this.applyVertical(t)}},{key:"applyHorizon",value:function(e){for(var t=e.height/6,i=this.rate*t,n=this.action===y.e.ENTR,a=e.bounds.x,r=n?t-i:i,o=0;o<6;o++){var l=n?t*o+i:t*(o+1)-i;e.clearRect(a,l+e.bounds.y,e.width,r)}}},{key:"applyVertical",value:function(e){for(var t=e.width/6,i=this.rate*t,n=this.action===y.e.ENTR,a=e.bounds.y,r=n?t-i:i,o=0;o<6;o++){var l=n?t*o+i:t*(o+1)-i;e.clearRect(l+e.bounds.x,a,r,e.height)}}}]),i}(P.r),f()(c,"defaults",{rate:0,direction:g.A.Across,action:y.e.ENTR}),a=s,r=w()(a.prototype,"rate",[P.V,n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=w()(a.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.Across}}),l=w()(a.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),a);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var W,_,V,Y,X,z,K,G=2e3,q=(x=Reflect.metadata("design:type",Number),N=F=function(e){E()(i,e);var t=U(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",B,A()(o)),b()(A()(o),"direction",D,A()(o)),b()(A()(o),"action",H,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.BOUNCE);var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o}return v()(i,[{key:"apply",value:function(e,t){this.isEntr?this.applyEntr(t):this.applyExit(t)}},{key:"applyEntr",value:function(e){var t=this.getCanvasInfo(e),i=t.width,n=t.height,a=t.x,r=t.y,o=3.4482758620689653*this.rate;o>=1&&(o=1);var l=(1-o)*n;e.clearRect(a,r,i,l)}},{key:"applyExit",value:function(e){var t=this.getCanvasInfo(e),i=t.width,n=t.height,a=t.x,r=(t.y,1);G*(1-this.rate)<=180&&(r=G*(1-this.rate)/180);var o=r*n;e.clearRect(a,o,i,n)}},{key:"getCanvasInfo",value:function(e){var t=e.width,i=e.height,n=e.bounds;return{width:t,height:i,x:n.x,y:n.y}}},{key:"isEntr",get:function(){return this.action===y.e.ENTR}}]),i}(P.r),f()(F,"defaults",{rate:0,direction:g.A.UnSupport,action:y.e.ENTR}),I=N,B=w()(I.prototype,"rate",[P.V,x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=w()(I.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.UnSupport}}),H=w()(I.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),I),Z=i("1e7449cd88"),J=i.n(Z);function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var $,ee,te,ie,ne,ae,re,oe=(W=Reflect.metadata("design:type",Number),K=z=function(e){E()(i,e);var t=Q(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",V,A()(o)),b()(A()(o),"direction",Y,A()(o)),b()(A()(o),"action",X,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.CHECKERBOARD),f()(A()(o),"isEntr",(function(){return o.action===y.e.ENTR}));var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o}return v()(i,[{key:"apply",value:function(e,t){this.direction===g.A.Across?this.applyAcross(t):this.applyDown(t)}},{key:"applyAcross",value:function(e){for(var t=e.width/6,i=e.height/6,n=J()(i),a=this.rate*t,r=this.isEntr(),o=e.bounds,l=o.y,c=o.x,s=r?t-a:a,d=0;d<6;d++)for(var u=i*d,h=0;h<7;h++){var v=r?t*h+a:t*(h+1)-a;v=d%2?v-t/2:v,e.clearRect(v+c,u+l,s,n)}}},{key:"applyDown",value:function(e){for(var t=e.width,i=e.height,n=t/6,a=J()(n),r=i/6,o=this.rate*r,l=this.isEntr(),c=e.bounds,s=c.y,d=c.x,u=l?r-o:o,h=0;h<6;h++)for(var v=n*h,p=0;p<7;p++){var f=l?r*p+o:n*(p+1)-o;f=h%2?f-r/2:f,e.clearRect(v+d,f+s,a,u)}}}]),i}(P.r),f()(z,"defaults",{rate:0,direction:g.A.Across,action:y.e.ENTR}),_=K,V=w()(_.prototype,"rate",[P.V,W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y=w()(_.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.Across}}),X=w()(_.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),_);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var ce,se,de,ue,he,ve,pe,fe=($=Reflect.metadata("design:type",Number),re=ae=function(e){E()(i,e);var t=le(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",te,A()(o)),b()(A()(o),"direction",ie,A()(o)),b()(A()(o),"action",ne,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.CUT),f()(A()(o),"applyEntr",(function(e){var t=e.width,i=e.height,n=e.bounds,a=n.x,r=n.y,l=t,c=i;o.direction===g.A.Bottom&&(r+=o.rate*i),o.direction===g.A.Left&&(l=t-o.rate*t),o.direction===g.A.Top&&(c=i-o.rate*i),o.direction===g.A.Right&&(a+=o.rate*t),e.clearRect(a,r,l,c)})),f()(A()(o),"applyExit",(function(e){var t=e.width,i=e.height,n=e.bounds,a=n.x,r=n.y,l=t,c=i;o.direction===g.A.Bottom&&(r+=i-o.rate*i),o.direction===g.A.Left&&(l=o.rate*t),o.direction===g.A.Top&&(c=o.rate*i),o.direction===g.A.Right&&(a+=t-o.rate*t),e.clearRect(a,r,l,c)}));var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o}return v()(i,[{key:"apply",value:function(e,t){this.action===y.e.ENTR?this.applyEntr(t):this.applyExit(t)}}]),i}(P.r),f()(ae,"defaults",{rate:0,direction:g.A.Bottom,action:y.e.ENTR}),ee=re,te=w()(ee.prototype,"rate",[P.V,$],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ie=w()(ee.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.Bottom}}),ne=w()(ee.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),ee),ge=i("14502724a6"),ye=i.n(ge);i("3bf1976a4f"),i("963f2eaace"),i("8ee19818c4");function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var be,Se,Ae,Ce,Ee,Me,ke,Te=(ce=Reflect.metadata("design:type",Number),pe=ve=function(e){E()(i,e);var t=me(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",de,A()(o)),b()(A()(o),"direction",ue,A()(o)),b()(A()(o),"action",he,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.DISSOLVE),f()(A()(o),"dotsCache",void 0),f()(A()(o),"sizeCache",void 0),f()(A()(o),"genDots",(function(e){var t=e.width,i=e.height,n=e.bounds,a="".concat(o.action,"-").concat(t,"-").concat(i),r=o.dotsCache.get(a);if(r)return r;for(var l=o.sizeCache.get(a)||1,c=n.x,s=n.y,d=[],u=0;u<t;u+=l)for(var h=0;h<i;h+=l)d.push([u+c,h+s]);for(var v=d.length-1;v>0;v--){var p=Math.floor(Math.random()*(v+1)),f=[d[p],d[v]];d[v]=f[0],d[p]=f[1]}return o.dotsCache.set(a,d),d})),f()(A()(o),"updateSize",(function(e){var t=e.width,i=e.height,n="".concat(o.action,"-").concat(t,"-").concat(i),a=o.sizeCache.get(n);if(a)return a;var r=t*i,l="".concat(Math.floor(r/1e4)).length||1;return o.sizeCache.set(n,l),l})),f()(A()(o),"isEntr",(function(){return o.action===y.e.ENTR}));var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o.dotsCache=new Map,o.sizeCache=new Map,o}return v()(i,[{key:"apply",value:function(e,t){var i=this.updateSize(t),n=this.genDots(t),a=this.rate*n.length;(this.isEntr()?n.slice(a,n.length):n.slice(0,a)).forEach((function(e){var n=ye()(e,2),a=n[0],r=n[1];t.clearRect(a,r,i,i)}))}}]),i}(P.r),f()(ve,"defaults",{rate:0,direction:g.A.Across,action:y.e.ENTR}),se=pe,de=w()(se.prototype,"rate",[P.V,ce],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ue=w()(se.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.UnSupport}}),he=w()(se.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),se);i("6e20b6a7d8"),i("405b4a5e2b");function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var Oe,we,Pe,Le,xe,Ie,Be,De=(be=Reflect.metadata("design:type",Number),ke=Me=function(e){E()(i,e);var t=Re(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",Ae,A()(o)),b()(A()(o),"direction",Ce,A()(o)),b()(A()(o),"action",Ee,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.RANDOMBAR),f()(A()(o),"lineGroupCache",void 0),f()(A()(o),"applyHorizon",(function(e){var t=e.width,i=e.height,n=e.bounds,a=n.x,r=n.y,l=o.genLineGroup(r,i/1),c=l.length,s=c*o.rate;(o.isEntr()?l.slice(s,c):l.slice(0,s)).forEach((function(i){e.clearRect(a,i,t,1)}))})),f()(A()(o),"applyVertical",(function(e){var t=e.width,i=e.height,n=e.bounds,a=n.x,r=n.y,l=o.genLineGroup(a,t/1),c=l.length,s=c*o.rate;(o.isEntr()?l.slice(s,c):l.slice(0,s)).forEach((function(t){e.clearRect(t,r,1,i)}))})),f()(A()(o),"genLineGroup",(function(e,t){var i="".concat(o.action,"-").concat(o.direction),n=o.lineGroupCache.get(i);if(null!=n&&n.length)return n;for(var a=new Array(t).fill(0).map((function(t,i){return e+1*i})),r=a.length-1;r>0;r--){var l=Math.floor(Math.random()*(r+1)),c=[a[l],a[r]];a[r]=c[0],a[l]=c[1]}return o.lineGroupCache.set(i,a),a})),f()(A()(o),"isEntr",(function(){return o.action===y.e.ENTR}));var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o.lineGroupCache=new Map,o}return v()(i,[{key:"apply",value:function(e,t){this.direction===g.A.Across?this.applyHorizon(t):this.applyVertical(t)}}]),i}(P.r),f()(Me,"defaults",{rate:0,direction:g.A.Across,action:y.e.ENTR}),Se=ke,Ae=w()(Se.prototype,"rate",[P.V,be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ce=w()(Se.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.Across}}),Ee=w()(Se.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),Se);function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var Fe=(Oe=Reflect.metadata("design:type",Number),Be=Ie=function(e){E()(i,e);var t=He(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",Pe,A()(o)),b()(A()(o),"direction",Le,A()(o)),b()(A()(o),"action",xe,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.SHAPE_CIRCLE);var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o}return v()(i,[{key:"apply",value:function(e,t){var i,n=(i={},f()(i,y.e.ENTR+g.A.EleCenter,"destination-out"),f()(i,y.e.ENTR+g.A.ToEleCenter,"destination-in"),f()(i,y.e.EXIT+g.A.EleCenter,"destination-in"),f()(i,y.e.EXIT+g.A.ToEleCenter,"destination-out"),i);t.globalCompositeOperation=n[this.action+this.direction],this.drawShape(t),t.globalCompositeOperation="source-over"}},{key:"drawShape",value:function(e){}}]),i}(P.r),f()(Ie,"defaults",{rate:0,direction:g.A.EleCenter,action:y.e.ENTR}),we=Be,Pe=w()(we.prototype,"rate",[P.V,Oe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Le=w()(we.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.EleCenter}}),xe=w()(we.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),we);function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var je=function(e){E()(i,e);var t=Ne(i);function i(e){var n;return u()(this,i),n=t.call(this,e),f()(A()(n),"type",y.h.SHAPE_BOX),n}return v()(i,[{key:"drawShape",value:function(e){var t=e.width,i=e.height,n=e.bounds,a=n.x,r=n.y,o=this.direction===g.A.EleCenter?1-this.rate:this.rate;e.beginPath();var l=t*o,c=i*o,s=a+(t-l)/2,d=r+(i-c)/2;e.rect(s,d,l,c),e.fill()}}]),i}(Fe);function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var We=function(e){E()(i,e);var t=Ue(i);function i(e){var n;return u()(this,i),n=t.call(this,e),f()(A()(n),"type",y.h.SHAPE_CIRCLE),n}return v()(i,[{key:"drawShape",value:function(e){var t=e.width,i=e.height,n=e.bounds,a=n.x,r=n.y,o=this.direction===g.A.EleCenter?1-this.rate:this.rate;e.beginPath();var l=a+t/2,c=r+i/2,s=1.414*t/2*o,d=1.414*i/2*o;e.ellipse(l,c,s,d,0,0,2*Math.PI),e.fill()}}]),i}(Fe);function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var Ve=function(e){E()(i,e);var t=_e(i);function i(e){var n;return u()(this,i),n=t.call(this,e),f()(A()(n),"type",y.h.SHAPE_DIAMOND),n}return v()(i,[{key:"drawShape",value:function(e){var t=e.width,i=e.height,n=e.bounds,a=n.x,r=n.y,o=this.direction===g.A.EleCenter?1-this.rate:this.rate,l=a+t/2,c=r+i/2,s=t*o,d=i*o,u=[l-s,l,l+s],h=[c-d,c,c+d];e.beginPath(),e.moveTo(u[0],h[1]),e.lineTo(u[1],h[0]),e.lineTo(u[2],h[1]),e.lineTo(u[1],h[2]),e.lineTo(u[0],h[1]),e.fill()}}]),i}(Fe);function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var Xe,ze,Ke,Ge,qe,Ze,Je,Qe=function(e){E()(i,e);var t=Ye(i);function i(e){var n;return u()(this,i),n=t.call(this,e),f()(A()(n),"type",y.h.SHAPE_PLUS),n}return v()(i,[{key:"drawShape",value:function(e){var t=e.width,i=e.height,n=e.bounds,a=n.x,r=n.y,o=this.direction===g.A.EleCenter?1-this.rate:this.rate,l=t*o,c=i*o,s=a+(t-l)/2,d=r+(i-c)/2,u=(i-c)/2;e.beginPath(),e.rect(a,d,t,c),e.rect(s,r,l,u),e.rect(s,i-u,l,u),e.fill()}}]),i}(Fe);function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var et,tt,it,nt,at,rt,ot,lt=(Xe=Reflect.metadata("design:type",Number),Je=Ze=function(e){E()(i,e);var t=$e(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",Ke,A()(o)),b()(A()(o),"direction",Ge,A()(o)),b()(A()(o),"action",qe,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.SPLIT),f()(A()(o),"applyHorizontalIn",(function(e){var t=o.getCanvasSizeAndPosition(e),i=t.width,n=t.height,a=t.x,r=t.y;if(o.isEntr){var l=(1-o.rate)*n,c=r+(n-l)/2;e.clearRect(a,c,i,l)}else{var s=n*(1-o.rate)/2,d=r-s,u=r+s+n/2;e.clearRect(a,d,i,n/2),e.clearRect(a,u,i,n/2)}})),f()(A()(o),"applyHorizontalOut",(function(e){var t=o.getCanvasSizeAndPosition(e),i=t.width,n=t.height,a=t.x,r=t.y;if(o.isEntr){var l=n*o.rate/2,c=r-l,s=r+l+n/2;e.clearRect(a,c,i,n/2),e.clearRect(a,s,i,n/2)}else{var d=o.rate*n,u=r+(n-d)/2;e.clearRect(a,u,i,d)}})),f()(A()(o),"applyVerticalIn",(function(e){var t=o.getCanvasSizeAndPosition(e),i=t.width,n=t.height,a=t.x,r=t.y;if(o.isEntr){var l=(1-o.rate)*i,c=a+(i-l)/2;e.clearRect(c,r,l,n)}else{var s=i*(1-o.rate)/2,d=a-s,u=a+s+i/2;e.clearRect(d,r,i/2,n),e.clearRect(u,r,i/2,n)}})),f()(A()(o),"applyVerticalOut",(function(e){var t=o.getCanvasSizeAndPosition(e),i=t.width,n=t.height,a=t.x,r=t.y;if(o.isEntr){var l=i*o.rate/2,c=a-l,s=a+l+i/2;e.clearRect(c,r,i/2,n),e.clearRect(s,r,i/2,n)}else{var d=o.rate*i,u=a+(i-d)/2;e.clearRect(u,r,d,n)}})),f()(A()(o),"getCanvasSizeAndPosition",(function(e){var t=e.width,i=e.height,n=e.bounds;return{width:t,height:i,x:n.x,y:n.y}}));var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o}return v()(i,[{key:"apply",value:function(e,t){switch(this.direction){case g.A.HorizontalIn:this.applyHorizontalIn(t);break;case g.A.HorizontalOut:this.applyHorizontalOut(t);break;case g.A.VerticalOut:this.applyVerticalOut(t);break;default:this.applyVerticalIn(t)}}},{key:"isEntr",get:function(){return this.action===y.e.ENTR}}]),i}(P.r),f()(Ze,"defaults",{rate:0,direction:g.A.Bottom,action:y.e.ENTR}),ze=Je,Ke=w()(ze.prototype,"rate",[P.V,Xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ge=w()(ze.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.Bottom}}),qe=w()(ze.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),ze);i("b8217400dc"),i("e6f68cdf2e");function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var st,dt,ut,ht,vt,pt,ft,gt=(et=Reflect.metadata("design:type",Number),ot=rt=function(e){E()(i,e);var t=ct(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",it,A()(o)),b()(A()(o),"direction",nt,A()(o)),b()(A()(o),"action",at,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.STRIPS),f()(A()(o),"matrixCache",void 0),f()(A()(o),"rows",16),f()(A()(o),"cols",16),f()(A()(o),"itemWidth",void 0),f()(A()(o),"itemHeight",void 0);var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o.cols=16,o.rows=16,o}return v()(i,[{key:"apply",value:function(e,t){for(var i=this.initItemInfo(t),n=i.x,a=i.y,r=i.width,o=this.isEntr?Math.ceil(this.rate*this.cols*2):Math.ceil((1-this.rate)*this.cols*2),l=[g.A.TopRight,g.A.TopLeft].includes(this.direction),c=[g.A.TopRight,g.A.BottomRight].includes(this.direction),s=J()(this.itemHeight||0),d=0;d<this.rows;d++){var u=l?(this.cols-d)*this.itemWidth:d*this.itemWidth,h=a+d*this.itemHeight,v=c?n-u+o*this.itemWidth:n-o*this.itemWidth,p=l?r+(this.cols-d)*this.itemWidth:r+d*this.itemWidth;t.clearRect(v,h,p,s)}}},{key:"initItemInfo",value:function(e){var t=e.width,i=e.height,n=e.bounds,a=n.x,r=n.y;return this.rows=i>this.rows?this.rows:i,this.cols=t>this.cols?this.cols:t,this.itemWidth=t/this.cols,this.itemHeight=i/this.rows,{width:t,height:i,x:a,y:r}}},{key:"isEntr",get:function(){return this.action===y.e.ENTR}}]),i}(P.r),f()(rt,"defaults",{rate:0,direction:g.A.BottomLeft,action:y.e.ENTR}),tt=ot,it=w()(tt.prototype,"rate",[P.V,et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nt=w()(tt.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.BottomLeft}}),at=w()(tt.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),tt);function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var mt,bt,St,At,Ct,Et,Mt,kt=(st=Reflect.metadata("design:type",Number),ft=pt=function(e){E()(i,e);var t=yt(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",ut,A()(o)),b()(A()(o),"direction",ht,A()(o)),b()(A()(o),"action",vt,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.WEDGE);var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o}return v()(i,[{key:"apply",value:function(e,t){var i=t.width,n=t.height,a=t.bounds,r=a.x+i/2,o=a.y+n/2,l=i+n,c=Math.PI*(this.rate-.5),s=Math.PI*(1.5-this.rate);t.globalCompositeOperation=this.action===y.e.ENTR?"destination-out":"destination-in",t.beginPath(),t.moveTo(r,o),t.arc(r,o,l,c,s),t.fill(),t.globalCompositeOperation="source-over"}}]),i}(P.r),f()(pt,"defaults",{rate:0,direction:g.A.UnSupport,action:y.e.ENTR}),dt=ft,ut=w()(dt.prototype,"rate",[P.V,st],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ht=w()(dt.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.UnSupport}}),vt=w()(dt.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),dt);function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var Rt,Ot,wt,Pt,Lt,xt,It,Bt=(mt=Reflect.metadata("design:type",Number),Mt=Et=function(e){E()(i,e);var t=Tt(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",St,A()(o)),b()(A()(o),"direction",At,A()(o)),b()(A()(o),"action",Ct,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.WHEEL);var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o}return v()(i,[{key:"apply",value:function(e,t){var i=t.width,n=t.height,a=t.bounds,r=a.x+i/2,o=a.y+n/2,l=i+n,c=2*Math.PI/this.direction,s=-.5*Math.PI,d=this.action===y.e.ENTR?"destination-in":"destination-out";t.globalCompositeOperation=d,t.beginPath();for(var u=0;u<this.direction;u++){t.moveTo(r,o);var h=s+c*u,v=h+this.rate*c;t.arc(r,o,l,h,v)}t.fill(),t.globalCompositeOperation="source-over"}}]),i}(P.r),f()(Et,"defaults",{rate:0,direction:g.A.Top,action:y.e.ENTR}),bt=Mt,St=w()(bt.prototype,"rate",[P.V,mt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At=w()(bt.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.Top}}),Ct=w()(bt.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),bt);function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R()(e);if(t){var a=R()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return k()(this,i)}}var Ht=(Rt=Reflect.metadata("design:type",Number),It=xt=function(e){E()(i,e);var t=Dt(i);function i(e){var n,a,r,o;u()(this,i),o=t.call(this),b()(A()(o),"rate",wt,A()(o)),b()(A()(o),"direction",Pt,A()(o)),b()(A()(o),"action",Lt,A()(o)),f()(A()(o),"forbidWebgl",!0),f()(A()(o),"type",y.h.WIPE),f()(A()(o),"applyEntr",(function(e,t){var i=e.width,n=e.height,a=e.bounds,r=a.x,l=a.y,c=i,s=n;t===g.A.Bottom&&(s=n-o.rate*n),t===g.A.Left&&(r+=o.rate*i),t===g.A.Top&&(l+=o.rate*n),t===g.A.Right&&(c=i-o.rate*i),e.clearRect(r,l,c,s)})),f()(A()(o),"applyExit",(function(e,t){var i=e.width,n=e.height,a=e.bounds,r=a.x,l=a.y,c=i,s=n;t===g.A.Bottom&&(l+=n-o.rate*n),t===g.A.Left&&(c=o.rate*i),t===g.A.Top&&(s=o.rate*n),t===g.A.Right&&(r+=i-o.rate*i),e.clearRect(r,l,c,s)}));var l=Object(P.Y)(A()(o));return o.rate=null!==(n=e.rate)&&void 0!==n?n:l.rate,o.direction=null!==(a=e.direction)&&void 0!==a?a:l.direction,o.action=null!==(r=e.action)&&void 0!==r?r:l.action,o}return v()(i,[{key:"apply",value:function(e,t){this.action===y.e.ENTR?this.applyEntr(t,this.direction):this.applyExit(t,this.direction)}}]),i}(P.r),f()(xt,"defaults",{rate:0,direction:g.A.Bottom,action:y.e.ENTR}),Ot=It,wt=w()(Ot.prototype,"rate",[P.V,Rt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pt=w()(Ot.prototype,"direction",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.A.Bottom}}),Lt=w()(Ot.prototype,"action",[P.V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return y.e.ENTR}}),Ot),Ft=function(){function e(){u()(this,e)}return v()(e,null,[{key:"createAnimFilter",value:function(e,t){var i=this.animFilterFnMap.get(e);return i?new i(t):null}}]),e}();f()(Ft,"animFilterFnMap",new Map([[y.h.BLINDS,j],[y.h.CHECKERBOARD,oe],[y.h.WIPE,Ht],[y.h.CUT,fe],[y.h.RANDOMBAR,De],[y.h.DISSOLVE,Te],[y.h.SPLIT,lt],[y.h.STRIPS,gt],[y.h.SHAPE_CIRCLE,We],[y.h.SHAPE_BOX,je],[y.h.SHAPE_DIAMOND,Ve],[y.h.SHAPE_PLUS,Qe],[y.h.WEDGE,kt],[y.h.WHEEL,Bt],[y.h.BOUNCE,q]])),f()(Ft,"animTypeFilterMap",new Map([[g.b.EntrBlinds,y.h.BLINDS],[g.b.ExitBlinds,y.h.BLINDS],[g.b.EntrCheckerboard,y.h.CHECKERBOARD],[g.b.ExitCheckerboard,y.h.CHECKERBOARD],[g.b.EntrWipe,y.h.WIPE],[g.b.ExitWipe,y.h.WIPE],[g.b.CutIn,y.h.CUT],[g.b.CutOut,y.h.CUT],[g.b.EntrRandomBars,y.h.RANDOMBAR],[g.b.ExitRandomBars,y.h.RANDOMBAR],[g.b.DissolveIn,y.h.DISSOLVE],[g.b.DissolveOut,y.h.DISSOLVE],[g.b.EntrSplit,y.h.SPLIT],[g.b.ExitSplit,y.h.SPLIT],[g.b.EntrStrips,y.h.STRIPS],[g.b.ExitStrips,y.h.STRIPS],[g.b.EntrShapeBox,y.h.SHAPE_BOX],[g.b.ExitShapeBox,y.h.SHAPE_BOX],[g.b.EntrShapeCircle,y.h.SHAPE_CIRCLE],[g.b.ExitShapeCircle,y.h.SHAPE_CIRCLE],[g.b.EntrShapeDiamond,y.h.SHAPE_DIAMOND],[g.b.ExitShapeDiamond,y.h.SHAPE_DIAMOND],[g.b.EntrShapePlus,y.h.SHAPE_PLUS],[g.b.ExitShapePlus,y.h.SHAPE_PLUS],[g.b.EntrWedge,y.h.WEDGE],[g.b.ExitWedge,y.h.WEDGE],[g.b.EntrWheel,y.h.WHEEL],[g.b.ExitWheel,y.h.WHEEL],[g.b.EntrBounce,y.h.BOUNCE],[g.b.ExitBounce,y.h.BOUNCE]]));var Nt=i("fed003a03b"),jt=function(){function e(){u()(this,e)}return v()(e,[{key:"handleAnimFiltersStart",value:function(e,t,i){if(!Object(Nt.t)(t)){var n=this.getEleRenderComponent(t);if(n){var a=this.getAnimFilterByType(n,e);a?(a.rate=0,a.direction=i.direction,a.action=i.action):(a=Ft.createAnimFilter(e,i),n.addFilter(a))}}}},{key:"handleAnimFiltersComplete",value:function(e,t,i,n){var a=this.getEleRenderComponent(t);if(a){var r=this.getAnimFilterByType(a,e);r&&(r.action=i,r.rate=n?0:1)}}},{key:"getAnimFilter",value:function(e,t){var i=this.getAnimFilterType(t);if(i){var n=this.getEleRenderComponent(e);if(n)return this.getAnimFilterByType(n,i)}}},{key:"resetAnimFilters",value:function(e,t,i){var n=this.getAnimFilterType(e);n&&this.handleAnimFiltersComplete(n,i,t,!0)}},{key:"handleAnimFiltersUpdate",value:function(e){var t=e.animTarget,i=e.animFilterType,n=e.animIns,a=e.duration,r=this.getEleRenderComponent(t);if(r){var o=this.getAnimFilterByType(r,i);o&&(o.rate=n.instance.time()/a)}}},{key:"getAnimFilterType",value:function(e){var t=Ft.animTypeFilterMap.get(e);return t||null}},{key:"getEleRenderComponent",value:function(e){var t;return null===(t=e.children[0])||void 0===t?void 0:t.children[0]}},{key:"getAnimFilterByType",value:function(e,t){var i;return null===(i=e.filters)||void 0===i?void 0:i.find((function(e){return(null==e?void 0:e.type)===t}))}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}();f()(jt,"instance",void 0)},fb7e6d7df6:function(e,t,i){"use strict";i.d(t,"a",(function(){return W}));var n,a,r=i("14502724a6"),o=i.n(r),l=i("9132715560"),c=i.n(l),s=i("6a364eb35c"),d=i.n(s),u=i("85d0a7609b"),h=i.n(u),v=(i("8ee19818c4"),i("342844cefa"),i("cd88b12bb6"),i("3dc760a4d9"),i("73b854064b"),i("547611bd96")),p=i.n(v),f=i("8eec1e4a03"),g=i.n(f),y=i("bd29e2df90"),m=i.n(y),b=i("ab5eb40518"),S=i.n(b),A=i("1b4cdd6a36"),C=i.n(A),E=(i("3bf1976a4f"),i("711a53c9fc"));i("826dc923b3");!function(e){e.FILL_COLOR="fillcolor",e.FONT_COLOR="style.color",e.LINE_COLOR="stroke.color",e.FILL_TYPE="fill.type",e.FILL_ON="fill.on",e.FONT_SIZE="style.fontSize",e.FONT_WEIGHT="style.fontWeight"}(n||(n={})),function(e){e.SC_RGB="scrgbClr",e.SRGB="srgbClr",e.HSL="hslClr",e.SCHEME="schemeClr",e.SYSTEM="sysClr"}(a||(a={}));var M=i("147aa73f92"),k=i("75bd1be246"),T=i("020899bf26"),R=i("e0e8dd9366"),O=i("fed003a03b"),w=function(){function e(){c()(this,e),h()(this,"behavior",void 0),h()(this,"elementModel",void 0),h()(this,"behaviorType",void 0)}return d()(e,[{key:"parse",value:function(e,t,i){this.behavior=e,this.elementModel=i}},{key:"getKeyframeData",value:function(e){var t,i,a,r,o,l,c,s,d,u,v=this.behavior.cBhvr,p={};if(null!=v&&null!==(t=v.cTn)&&void 0!==t&&t.dur){var f=Number(v.cTn.dur),g=null!==(i=null==v||null===(a=v.cTn)||void 0===a||null===(r=a.stCondLst)||void 0===r||null===(o=r.cond)||void 0===o||null===(l=o[0])||void 0===l?void 0:l.delay)&&void 0!==i?i:0,y=Number(g)/e;if(!(y<0||y>1)){var m=null==v||null===(c=v.attrNameLst)||void 0===c||null===(s=c.attrName)||void 0===s?void 0:s[0];if(m){var b=(d={},h()(d,n.FILL_COLOR,k.g.FILL_COLOR),h()(d,n.FONT_COLOR,k.g.FONT_COLOR),h()(d,n.LINE_COLOR,k.g.LINE_COLOR),h()(d,n.FONT_SIZE,k.g.FONT_SIZE),d)[m];if(b){var S=this.convertAttrValue(m);if(S)return p[b]=[{value:S,duration:f,rate:y}],null!=v&&null!==(u=v.cTn)&&void 0!==u&&u.autoRev?(p[b].push({value:this.getOriginalValue(m),duration:f,rate:1-y}),p):p}}}}}},{key:"convertAttrValue",value:function(e){var t,i,a=this,r=(t={},h()(t,n.FILL_COLOR,(function(){return a.convertToRgbaColor(e)})),h()(t,n.FONT_COLOR,(function(){return a.convertToRgbaColor(e)})),h()(t,n.LINE_COLOR,(function(){return a.convertToRgbaColor(e)})),h()(t,n.FONT_SIZE,(function(){return a.convertFontSize()})),h()(t,n.FONT_WEIGHT,(function(){return a.convertFontWeight()})),t);return null===(i=r[e])||void 0===i?void 0:i.call(r)}},{key:"getOriginalValue",value:function(e){var t,i,a=this,r=(t={},h()(t,n.FILL_COLOR,(function(){var e;return null===(e=Object(O.g)(a.elementModel))||void 0===e?void 0:e.rgba})),h()(t,n.FONT_COLOR,(function(){var e;return null===(e=Object(O.h)(a.elementModel))||void 0===e?void 0:e.rgba})),h()(t,n.LINE_COLOR,(function(){var e;return null===(e=Object(O.j)(a.elementModel))||void 0===e?void 0:e.rgba})),h()(t,n.FONT_SIZE,(function(){return Object(O.i)(a.elementModel)})),h()(t,n.FONT_WEIGHT,(function(){return a.getFontWeight()})),t);return null===(i=r[e])||void 0===i?void 0:i.call(r)}},{key:"convertToRgbaColor",value:function(e){}},{key:"convertSchemeClrToRgba",value:function(e){var t,i;if(e){var n=this.getPageDataModel();if(n){var a=T.a.SDKDataServices.ColorManager(),r=Object(M.b)(E.eb[Number(e)]),o=null==a||null===(t=a.resolveColor(r,n))||void 0===t||null===(i=t.srgbClr)||void 0===i?void 0:i.val;return Object(M.j)("#".concat(o))}}}},{key:"convertSrgbClrToRgba",value:function(e){if(e)return Object(M.j)("#".concat(e))}},{key:"handleRGBSpace",value:function(e){var t,i=this;if(e){var n,r=e.schemeClr,o=e.srgbClr,l=(t={},h()(t,a.SCHEME,(function(){return i.convertSchemeClrToRgba(null==r?void 0:r.val)})),h()(t,a.SRGB,(function(){return i.convertSrgbClrToRgba(null==o?void 0:o.val)})),t);return Object.keys(e).forEach((function(e){var t=l[e];t&&(n=t())})),n}}},{key:"handleHSLSpace",value:function(e,t){return Object(O.a)(t,this.getOriginalColor(e))}},{key:"convertFontSize",value:function(){var e=Number(this.behavior.to),t=Object(O.i)(this.elementModel);return t&&t*e}},{key:"convertFontWeight",value:function(){}},{key:"getFontWeight",value:function(){}},{key:"getOriginalColor",value:function(e){var t,i,a=this,r=(t={},h()(t,n.FILL_COLOR,(function(){return Object(O.g)(a.elementModel)})),h()(t,n.FONT_COLOR,(function(){return Object(O.h)(a.elementModel)})),h()(t,n.LINE_COLOR,(function(){return Object(O.j)(a.elementModel)})),t);return null===(i=r[e])||void 0===i?void 0:i.call(r)}},{key:"getPageDataModel",value:function(){var e,t,i,n,a,r,o,l;(null===(e=this.elementModel)||void 0===e||null===(t=e.parent)||void 0===t?void 0:t.type)===R.d.TABLE?i=null===(n=this.elementModel.parent.sdkData)||void 0===n||null===(a=n.getPage)||void 0===a?void 0:a.call(n):i=null===(r=this.elementModel)||void 0===r||null===(o=r.sdkData)||void 0===o||null===(l=o.getPage)||void 0===l?void 0:l.call(o);return i}}]),e}();function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=C()(e);if(t){var a=C()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return S()(this,i)}}var L=function(e){m()(i,e);var t=P(i);function i(){var e;c()(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),h()(p()(e),"behavior",void 0),e}return d()(i,[{key:"parse",value:function(e,t,n){return g()(C()(i.prototype),"parse",this).call(this,e,t,n),this.getKeyframeData(t)}},{key:"convertToRgbaColor",value:function(e){var t,i,n=this,a=this.behavior.clrSpc||E.pb.rgb,r=(t={},h()(t,E.pb.rgb,(function(){return n.handleRGBSpace(n.behavior.to)})),h()(t,E.pb.hsl,(function(){var t;return n.handleHSLSpace(e,null===(t=n.behavior.by)||void 0===t?void 0:t.hsl)})),t);return null===(i=r[a])||void 0===i?void 0:i.call(r)}}]),i}(w),x=i("9559b6ab8e");function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=C()(e);if(t){var a=C()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return S()(this,i)}}var B=function(e){m()(i,e);var t=I(i);function i(){var e;c()(this,i);for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a)),h()(p()(e),"behavior",void 0),e}return d()(i,[{key:"parse",value:function(e,t,n){var a;if(g()(C()(i.prototype),"parse",this).call(this,e,t,n),null!==(a=this.behavior.to)&&void 0!==a&&a.clrVal)return this.getKeyframeData(t)}},{key:"convertToRgbaColor",value:function(e){var t;return this.handleRGBSpace(null===(t=this.behavior.to)||void 0===t?void 0:t.clrVal)}}]),i}(w);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=C()(e);if(t){var a=C()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return S()(this,i)}}var H=function(e){m()(i,e);var t=D(i);function i(){return c()(this,i),t.apply(this,arguments)}return d()(i,[{key:"parse",value:function(e,t,n){return g()(C()(i.prototype),"parse",this).call(this,e,t,n),this.getKeyframeData(t)}}]),i}(w),F=function(){function e(){c()(this,e),h()(this,"handler",void 0)}return d()(e,[{key:"setHandler",value:function(e){this.handler=e}},{key:"executeHandler",value:function(e,t,i){return this.handler.parse(e,t,i)}}]),e}();function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=C()(e);if(t){var a=C()(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return S()(this,i)}}var j=function(e){m()(i,e);var t=N(i);function i(){return c()(this,i),t.apply(this,arguments)}return d()(i,[{key:"parse",value:function(e,t,i){}}]),i}(w),U=function(){function e(){c()(this,e)}return d()(e,[{key:"convertAnimToStyle",value:function(e){var t,i,n,a,r,l,c,s,d,u=this,v=e.unitTimeNode,p=e.duration,f=e.elementModel,g={},y=new F,m=(t={},h()(t,x.f.animClr,new L),h()(t,x.f.set,new B),h()(t,x.f.anim,new H),t),b=new j,S=(null==v||null===(i=v.par)||void 0===i||null===(n=i.cTn)||void 0===n?void 0:n.presetId)===x.z.FillColor&&(null==v||null===(a=v.par)||void 0===a||null===(r=a.cTn)||void 0===r?void 0:r.presetClass)===E.Ab.emph;null===(l=v.par)||void 0===l||null===(c=l.cTn)||void 0===c||null===(s=c.childTnLst)||void 0===s||null===(d=s.egTimeNodeChoice)||void 0===d||d.forEach((function(e){var t,i,n,a,r,l,c=Object.keys(e),s=o()(c,1)[0],d=null!==(t=m[s])&&void 0!==t?t:b;y.setHandler(d);var h=y.executeHandler(e[s],p,f);h&&((!(null!=f&&null!==(i=f.props)&&void 0!==i&&null!==(n=i.style)&&void 0!==n&&n.fillBackground)||(null==f||null===(a=f.props)||void 0===a||null===(r=a.style)||void 0===r||null===(l=r.fillBackground)||void 0===l?void 0:l.noFill))&&!S&&Reflect.deleteProperty(h,k.g.FILL_COLOR),g=u.mergeKeyframe(g,h))}));var A=Object.keys(g);if(A.length){for(var C=A.length-1;C>=0;C--){var M=A[C];g[M].some((function(e){return void 0===e.value}))&&Reflect.deleteProperty(g,M)}return g}window.log.error("convertAmimKeyframe error")}},{key:"mergeKeyframe",value:function(e,t){var i=this;return Object.entries(t).forEach((function(n){var a=o()(n,2),r=a[0],l=a[1],c=e[r];if(c){if(Array.isArray(c)){var s=i.mergeSortedList(c,t[r]);e[r]=s}}else e[r]=l})),e}},{key:"mergeSortedList",value:function(e,t){for(var i=[],n=0,a=0;n<e.length&&a<t.length;)e[n].rate<t[a].rate?(i.push(e[n]),n+=1):(i.push(t[a]),a+=1);for(;n<e.length;)i.push(e[n]),n+=1;for(;a<t.length;)a+=1;return i}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}();function W(){return U.getInstance()}h()(U,"instance",void 0)}}]);
//# sourceMappingURL=slide-async~718865d2-f3d88d.js.map