(this.webpackJsonp=this.webpackJsonp||[]).push([["commonAsync~205ac551"],{"052105b914":function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},"0d99992889":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackDisposable=t.markTracked=t.disableDisposablesTrack=t.enableDisposablesTrack=void 0;var r=n("8e26833a3b"),i=!1,o="__is_disposable_tracked__";t.enableDisposablesTrack=function(){i=!0},t.disableDisposablesTrack=function(){i=!1},t.markTracked=function(e){if(i&&e&&e!==r.DisposableNone)try{e[o]=!0}catch(e){}},t.trackDisposable=function(e){if(!i)return e;e[o]||(e[o]=!1);var t=new Error("Potentially leaked disposable").stack;return setTimeout((function(){e[o]||console.log(t)}),3e3),e}},"1cc181d9f8":function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},"22b96304bb":function(e,t,n){"use strict";var r=n("94b54f38ee");e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},"239887fb93":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryToMarkDispose=t.tryToDispose=t.toDisposable=t.combinedDisposable=t.dispose=t.isDisposable=void 0;var r=n("697ecdc674"),i=n("0d99992889");function o(e){return"function"==typeof e.dispose&&(0===e.dispose.length||1===e.dispose.length)}function a(e,t){if(Array.isArray(e)){var n=t||r.DisposeTrace.traceRoot("disposables");return e.forEach((function(e){e&&(i.markTracked(e),e.dispose(n))})),n.stop(),[]}if(e){var o=t||r.DisposeTrace.traceRoot("disposables");return i.markTracked(e),e.dispose(o),o.stop(),e}}t.isDisposable=o,t.dispose=a,t.combinedDisposable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.forEach(i.markTracked),i.trackDisposable({dispose:function(t){return a(e,t)}})},t.toDisposable=function(e,t){void 0===t&&(t="");var n=i.trackDisposable({dispose:function(t){i.markTracked(n),e(t)},disposableId:t});return n},t.tryToDispose=function(e,t){e&&o(e)&&e.dispose(t)},t.tryToMarkDispose=function(e){o(e)&&i.markTracked(e)}},"2beec10acc":function(e,t,n){var r;r=()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{BrevityTimeline:()=>xt,BrevityTween:()=>ut});var n=1e8,r=1e-8,i=1e5,o=2*Math.PI,a={duration:.5,overwrite:!1,delay:0},s={onComplete:1,onCompleteParams:1,onUpdate:1,onUpdateParams:1,onStart:1,onStartParams:1,onReverseComplete:1,onReverseCompleteParams:1,onInterrupt:1,onInterruptParams:1,parent:1,duration:1,ease:1,delay:1,overwrite:1,runBackwards:1,startAt:1,immediateRender:1,data:1,paused:1,reversed:1,lazy:1,callbackScope:1,stringFilter:1,id:1,inherit:1,keyframes:1,autoRevert:1};function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var l,f,h,p,d,v,b,y,m,_,g,w,x,O=/(?:-?\.?\d|\.)+/gi,j=function(e){return"number"==typeof e},k=function(e){return"string"==typeof e},T=function(e){return"function"==typeof e},E=function(e){return!1!==e},S=function(e){return"object"===u(e)},A=function(e){return T(e)||k(e)},D=function(e){return void 0===e},C="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},I=/[\d.+\-=]+(?:e[-+]\d*)*/i,M=function(e,t){for(var n in t)e[n]=t[n];return e},R=function(e,t,n){return(n=e[t])&&T(n)?e[t]():D(n)&&e.getAttribute&&e.getAttribute(t)||n},P=function(e,t){return k(e)&&(t=I.exec(e))?e.substr(t.index+t[0].length):""},N=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},B=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},L=function(e,t,n){return e[t]=n},q=function(e,t,n){return e[t](n)},U=function(e,t,n,r){return e[t](r.fp,n)},F=function(e,t,n){return e.setAttribute(t,n)},z=function(e,t){return T(e[t])?q:D(e[t])&&e.setAttribute?F:L},V=function(e,t){return(e=e.split(",")).forEach(t)||e},G=Array.isArray,K=[].slice,W=function(e,t){return e&&S(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&S(e[0]))&&!e.nodeType&&e!==window},H=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((function(e){return k(e)&&!t||W(e,1)?n.push.apply(n,function(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Q(e))):n.push(e)}))||n},Q=function(e,t,n){return k(e)&&!n?K.call(t.querySelectorAll(e),0):G(e)?H(e,n):W(e)?K.call(e,0):e?[e]:[]},J=function(e,t,n,r){return o=function(){return G(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,"".concat(n).length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r},(i=G(e)?!t:!0===n?!!(n=0):!r)||0===i?o():o;var i,o},Y=function(e){for(var t,n,r,i,o=0,a="",s=/[^,'"\[\]\s]+/gi;~(t=e.indexOf("random(",o));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?s:O),a+=e.substr(o,t-o)+J(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+e.substr(o,e.length-o)},X=function(e){var t=parseFloat(e);return(t||0===t)&&"".concat(e).match(/[^,'"\[\]\s]+/gi).length<2?t:k(e)?e.trim():e},$=function(e,t,n){return n<e?e:n>t?t:n},Z=function(){return 0},ee=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},te=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},ne={_start:0,endTime:Z,totalDuration:Z},re=function(e){return Math.round((e+1e8)%1*i)/i||(e<0?0:1)},ie=function(e){return Math.round(e*i)/i||0},oe=function e(t,r,i){var o,a,s,c=t.labels,u=t._recent||ne,l=t.duration()>=n?u.endTime(!1):t._dur;return k(r)&&(isNaN(r)||r in c)?(a=r.charAt(0),s="%"===r.substr(-1),o=r.indexOf("="),"<"===a||">"===a?(o>=0&&(r=r.replace(/=/,"")),("<"===a?u._start:u.endTime(!0))+(parseFloat(r.substr(1))||0)*(s?(o<0?u:i).totalDuration()/100:1)):o<0?(r in c||(c[r]=l),c[r]):(a=parseFloat(r.charAt(o-1)+r.substr(o+1)),s&&i&&(a=a/100*(G(i)?i[0]:i).totalDuration()),o>1?e(t,r.substr(0,o-1),i)+a:l+a)):null==r?l:+r},ae=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},se=function(e){return Math.round(1e7*e)/1e7||0},ce=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},ue=function(e){var t=e._tDur/Math.abs(e._ts||e._rts||r),n=se(e._start+(t||0));return e._end=n,n},le=function(e,t){var n=e._dp;if(n&&n.smoothChildTiming&&e._ts){var r=e._dirty?e.totalDuration():e._tDur,i=e._ts>0?t/e._ts:(r-t)/-e._ts;e._start=se(n._time-i),ue(e),n._dirty||ce(n,e)}return e},fe=function(e,t,n,r){var i=se(t)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=i/e._dur),e._dur=i,e._tDur=i,o>0&&(r?e.parent&&ue(e):(e._tTime=e._tDur*o,le(e,e._tTime))),n||ce(e.parent,e),e},he=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},pe=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},de=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},ve=function(e,t){var n;if((t._time||t._initted&&!t._dur)&&(n=de(e.rawTime(),t),(!t._dur||$(0,t.totalDuration(),n)-t._tTime>r)&&t.render(n,!0)),ce(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},be=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0},ye=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},me=function(e,t,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(e,t,n),o=i},_e=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?_removeLinkedListItem(this,r,"_pt"):r.dep||(t=1),r=n;return!t},ge=(v=Date.now,b=v(),y=b,_=m=1e3/240,w=function e(t){var n,r,i,o=v()-y,a=!0===t;o>500&&(b+=o-33);var s=(r=(y+=o)-b)-_;if((s>0||a)&&(x.frame+=1,i=x.frame,p=r-1e3*x.time,r/=1e3,x.time=r,_+=s+(s>=m?4:m-s),n=1),a||(l=f(e)),n)for(d=0;d<g.length;d++)g[d](r,p,i,t)},x={time:0,frame:0,tickerActive:0,coreReady:!1,tick:function(){w(!0)},wake:function(){x.coreReady&&!x.tickerActive&&(h=window.requestAnimationFrame,l&&x.sleep(),f=h||function(e){return setTimeout(e,_-1e3*x.time+1|0)},x.tickerActive=!0,w(2))},sleep:function(){(h?window.cancelAnimationFrame:clearTimeout)(l),x.tickerActive=!1,f=function(){return 0}},add:function(e){g.indexOf(e)<0&&g.push(e),x.wake()},remove:function(e,t){~(t=g.indexOf(e))&&g.splice(t,1)&&d>=t&&d--},_listeners:g=[]});function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}function Oe(e,t,n){return(t=je(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e){var t=function(e,t){if("object"!==we(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===we(t)?t:String(t)}var ke=[],Te={},Ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vars=t,this._delay=+t.delay||0,this._ts=1,fe(this,+t.duration,1,1),this.data=t.data,ge.wake(),this._lazyTweens=ke,this._lazyLookup=Te}var t,n,i;return t=e,n=[{key:"delay",value:function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay}},{key:"duration",value:function(e){return arguments.length?this.totalDuration(e):this.totalDuration()&&this._dur}},{key:"totalDuration",value:function(e){return arguments.length?(this._dirty=0,fe(this,e)):this._tDur}},{key:"totalTime",value:function(t,n){if(ge.wake(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(le(this,t),!i._dp||i.parent||ve(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&this._addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===r||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),e._lazySafeRender(this,t,n)),this}},{key:"time",value:function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e)%this._dur||(e?this._dur:0),t):this._time}},{key:"totalProgress",value:function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio}},{key:"progress",value:function(e,t){return arguments.length?this.totalTime(this.duration()*e,t):this.duration()?Math.min(1,this._time/this._dur):this.ratio}},{key:"iteration",value:function(e,t){var n=this.duration();return arguments.length?this.totalTime(this._time+(e-1)*n,t):1}},{key:"timeScale",value:function(e){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var t=this.parent&&this._ts?de(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this._recacheAncestors(this.totalTime($(-this._delay,this._tDur,t),!0)),ue(this),this}},{key:"_recacheAncestors",value:function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}},{key:"paused",value:function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._act=0,this._ts=0):(ge.wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==r&&(this._tTime-=r)))),this):this._ps}},{key:"startTime",value:function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&this._addToTimeline(t,this,e-this._delay),this}return this._start}},{key:"endTime",value:function(e){return this._start+(E(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)}},{key:"rawTime",value:function(e){var t=this.parent||this._dp;return t?e&&!this._ts?this._tTime%this._dur:this._ts?de(t.rawTime(e),this):this._tTime:this._tTime}},{key:"globalTime",value:function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(t._ts||1),t=t._dp;return n}},{key:"seek",value:function(e,t){return this.totalTime(oe(this,e),E(t))}},{key:"restart",value:function(e,t){return this.play().totalTime(e?-this._delay:0,E(t))}},{key:"play",value:function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)}},{key:"reverse",value:function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)}},{key:"pause",value:function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)}},{key:"resume",value:function(){return this.paused(!1)}},{key:"reversed",value:function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0}},{key:"invalidate",value:function(){return this._act=0,this._initted=0,this._zTime=-1e-8,this}},{key:"isActive",value:function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-r))}},{key:"eventCallback",value:function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r["".concat(e,"Params")]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]}},{key:"then",value:function(e){var t=this;return new Promise((function(n){var r=T(e)?e:function(e){return e},i=function(){var e=t.then;t.then=null,T(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))}},{key:"kill",value:function(){this._interrupt(this)}},{key:"_interrupt",value:function(e){return this._removeFromParent(e),e.progress()<1&&this._callback(e,"onInterrupt"),e}},{key:"_removeFromParent",value:function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove(e),e._act=0}},{key:"_callback",value:function(t,n,r){var i=t.vars,o=i[n];if(o){var a=i["".concat(n,"Params")],s=i.callbackScope||t;return r&&ke.length&&e._lazyRender(),a?o.apply(s,a):o.call(s)}}},{key:"_addToTimeline",value:function(t,n,r,i){return n.parent&&be(n),n._start=se((j(r)?r:r||t!==e.tl.globalTimeline?oe(t,r,n):t._time)+n._delay),n._end=se(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),this._addLinkedListItem(t,n,"_first","_last",t._sort?"_start":0),he(n)||(t._recent=n),i||ve(t,n),t}},{key:"_addLinkedListItem",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_first",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_last",o=arguments.length>4?arguments[4]:void 0,a=e[i];if(o)for(n=t[o];a&&a[o]>n;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t._dp=e,t.parent=e,t}},{key:"_removeLinkedListItem",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"_first",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"_last",i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t.parent=null,t._prev=null,t._next=null}}],i=[{key:"_lazyRender",value:function(){var e,t,n=ke.length,r=ke.slice(0);for(Te={},this._lazyLookup=Te,ke.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)}},{key:"_lazySafeRender",value:function(e,t,n,r){ke.length&&this._lazyRender(),e.render(t,n,r),ke.length&&this._lazyRender()}}],n&&xe(t.prototype,n),i&&xe(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();Oe(Ee,"_lastRenderedFrame",void 0),Oe(Ee,"_plugins",{}),Oe(Ee,"_nextGCFrame",30),Oe(Ee,"_config",{autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}}),ae(Ee.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,parent:null,_initted:!1,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Se=void 0;function Ae(e){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ae(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==Ae(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Ae(i)?i:String(i)),r)}var i}var Ce,Ie,Me,Re,Pe,Ne,Be=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},Le=function(){function e(t,n,r,i,o,a,s,c,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=n,this.s=i,this.c=o,this.p=r,this.r=a||ee,this.d=s||this,this.set=c||L,this.pr=u||0,this._next=t,t&&(t._prev=this)}var t,n;return t=e,(n=[{key:"modifier",value:function(e,t,n){this.mSet=this.mSet||this.set,this.set=Be,this.m=e,this.mt=n,this.tween=t}}])&&De(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),qe=function(e,t,n,r,i,o,a){var s,c,u,l,f,h,p,d=new Le(Se._pt,e,t,0,1,B,null,i),v=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,b=0,y=0;d.b=n,d.e=r,n+="",(h=~(r+="").indexOf("random("))&&(r=Y(r)),o&&(o(p=[n,r],e,t),n=p[0],r=p[1]);for(var m=n.match(v)||[];s=v.exec(r);)u=s[0],l=r.substring(b,s.index),c?c=(c+1)%5:"rgba("===l.substr(-5)&&(c=1),u!==m[y++]&&(f=parseFloat(m[y-1])||0,d._pt={_next:d._pt,p:l||1===y?l:",",s:f,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-f,m:c&&c<4?Math.round:0},b=v.lastIndex);return d.c=b<r.length?r.substring(b,r.length):"",d.fp=a,(/[+-]=-?[.\d]+/.test(r)||h)&&(d.e=0),Se._pt=d,d},Ue=function(e,t,n,r,i,o,a,s,c){T(r)&&(r=r(i||0,e,o));var u,l=e[t],f="get"!==n?n:T(l)?c?e[t.indexOf("set")||!T(e["get".concat(t.substr(3))])?t:"get".concat(t.substr(3))](c):e[t]():l,h=T(l)?c?U:q:L;if(k(r)&&(~r.indexOf("random(")&&(r=Y(r)),"="===r.charAt(1)&&((u=parseFloat(f)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(P(f)||0))||0===u)&&(r=u)),f!==r)return isNaN(f*r)||""===r?qe.call(Se,e,t,f,r,h,s,c):(u=new Le(Se._pt,e,t,+f||0,r-(f||0),"boolean"==typeof l?te:ee,0,h),c&&(u.fp=c),a&&u.modifier(a,Se,e),Se._pt=u)},Fe={},ze=/["']/g,Ve=function(e){for(var t,n,r,i={},o=e.substr(1,e.length-3).split(":"),a=o[0],s=1,c=o.length;s<c;s++)n=o[s],t=s!==c-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[a]=isNaN(r)?r.replace(ze,"").trim():+r,a=n.substr(t+1).trim();return i},Ge=function(e,t){return e&&(T(e)?e:Fe[e]||function(e){var t,n,r,i,o="".concat(e).split("("),a=Fe[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[Ve(o[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n),t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)).split(",").map(X)):a}(e))||t},Ke=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return 1-t(1-e)},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2},o={easeIn:t,easeOut:r,easeInOut:i};return V(e,(function(e){for(var t in Fe[e]=o,Fe[n=e.toLowerCase()]=r,o)Fe[n+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Fe["".concat(e,".").concat(t)]=o[t]})),o},We=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},He=function e(t,n,r){var i=n>=1?n:1,a=(r||(t?.3:.45))/(n<1?n:1),s=a/o*(Math.asin(1/i)||0),c=function(e){return 1===e?1:i*Math.pow(2,-10*e)*Math.sin((e-s)*a)+1},u="out"===t?c:"in"===t?function(e){return 1-c(1-e)}:We(c);return a=o/a,u.config=function(n,r){return e(t,n,r)},u},Qe=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.70158,r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:We(r);return i.config=function(n){return e(t,n)},i};function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==Je(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===Je(i)?i:String(i)),r)}var i}V("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Ke("".concat(e,",Power").concat(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),Fe.Linear.easeNone=Fe.none=Fe.Linear.easeIn,Ke("Elastic",He("in"),He("out"),He()),Ce=7.5625,Re=2*(Me=1/(Ie=2.75)),Pe=2.5*Me,Ke("Bounce",(function(e){return 1-Ne(1-e)}),Ne=function(e){return e<Me?Ce*e*e:e<Re?Ce*Math.pow(e-1.5/Ie,2)+.75:e<Pe?Ce*(e-=2.25/Ie)*e+.9375:Ce*Math.pow(e-2.625/Ie,2)+.984375}),Ke("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Ke("Circ",(function(e){return-(Math.sqrt(1-e*e)-1)})),Ke("Sine",(function(e){return 1===e?1:1-Math.cos(e*Math.PI/2)})),Ke("Back",Qe("in"),Qe("out"),Qe()),Fe.SteppedEase=Fe.steps={config:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0,n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*$(0,.99999999,e)|0)+i)*n}}},a.ease=Fe.none;var Xe,$e=[],Ze=0,et=function(e,t,n){return t&&Ye(e.prototype,t),n&&Ye(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Ze,Ze+=1,t.brevity=this,this.target=t,this.harness=n,this.get=n?n.get:R,this.set=n?n.getSetter:z})),tt=function(e){var t,n,r=e[0];if(S(r)||T(r)||(e=[e]),!(t=(r.brevity||{}).harness)){for(n=$e.length;n--&&!$e[n].targetTest(r););t=$e[n]}for(n=e.length;n--;)e[n]&&(e[n].brevity||(e[n].brevity=new et(e[n],t)))||e.splice(n,1);return e},nt=function(e){return e.brevity||tt(Q(e))[0].brevity};function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==rt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===rt(i)?i:String(i)),r)}var i}function ot(){return ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ct(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ot.apply(this,arguments)}function at(e,t){return at=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},at(e,t)}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ct(e)}var ut=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&at(e,t)}(u,e);var t,i,o,c=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ct(e);if(t){var i=ct(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return st(e)}(this,n)}}(u);function u(e,t,n,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var o,a,s,l,f,h,p=(i=c.call(this,r?t:u._inheritDefaults(t))).vars,d=p.duration,v=p.delay,b=p.immediateRender,y=p.overwrite,m=p.keyframes,_=p.defaults,g=t.parent||u.tl.globalTimeline,w=(G(e)||C(e)?j(e[0]):"length"in t)?[e]:Q(e);if(i._targets=w.length?tt(w):[],i._ptLookup=[],i._overwrite=y,m||A(d)||A(v)){if(t=i.vars,i.timeline=new u.tl({data:"nested",defaults:_||{}}),(o=i.timeline).kill(),o.parent=o._dp=st(i),o._start=0,A(d)||A(v)){for(l=w.length,a=0;a<l;a++)s=N(t,{}),h=w[a],s.duration=+i._parseFuncOrString(d,st(i),a,h,w),s.delay=(+i._parseFuncOrString(v,st(i),a,h,w)||0)-i._delay,1===l&&s.delay&&(i._delay=v=s.delay,i._start+=v,s.delay=0),o.to(h,s,0),o._ease=Fe.none;o.duration()?(v=0,d=0):i.timeline=0,o.duration()?d=v=0:i.timeline=0}else if(m){u._inheritDefaults(ae(o.vars.defaults,{ease:"none"})),o._ease=Ge(m.ease||t.ease||"none");var x,O,k,T=0;if(G(m))m.forEach((function(e){return o.to(w,e,">")}));else{for(f in s={},m)"ease"===f||"easeEach"===f||i._parseKeyframe(f,m[f],s,m.easeEach);for(f in s)for(x=s[f].sort((function(e,t){return e.t-t.t})),T=0,a=0;a<x.length;a++)(k={ease:(O=x[a]).e,duration:(O.t-(a?x[a-1].t:0))/100*d})[f]=O.v,o.to(w,k,T),T+=k.duration;o.duration()<d&&o.to({},{duration:d-o.duration()})}}d||i.duration(d=o.duration())}else i.timeline=0;return!0===y&&(Xe=st(i),u.tl.globalTimeline.killTweensOf(w),Xe=0),i._addToTimeline(g,st(i),n),t.reversed&&i.reverse(),t.paused&&i.paused(!0),(b||!d&&!m&&i._start===se(g._time)&&E(b)&&i._hasNoPausedAncestors(st(i))&&"nested"!==g.data)&&(i._tTime=-1e-8,i.render(Math.max(0,-v))),i}return t=u,i=[{key:"render",value:function(e,t,n){var i,o,a,s,c=this._time,u=this._tDur,l=this._dur,f=e>u-r&&e>=0?u:e<r?0:e;if(l){if(f!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=e<0){if(i=f,s=this.timeline,!this._initted){if(this._attemptInitTween(this,e<0?e:i,n,t))return this._tTime=0,this;if(l!==this._dur)return this.render(e,t,n)}if(this._tTime=f,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=a=this._ease(i/l),this._from&&(this.ratio=a=1-a),i&&!c&&!t&&(this._callback(this,"onStart"),this._tTime!==f))return this;for(o=this._pt;o;)o.r(a,o.d),o=o._next;s&&s.render(e<0?e:s._dur*s._ease(i/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(e<0&&this._startAt&&this._startAt.render(e,!0,n),this._callback(this,"onUpdate")),f!==this._tDur&&f||this._tTime!==f||(e<0&&this._startAt&&!this._onUpdate&&this._startAt.render(e,!0,!0),(e||!l)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&be(this,1),t||e<0&&!c||!f&&!c||(this._callback(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}}else this._renderZeroDurationTween(this,e,t,n);return this}},{key:"targets",value:function(){return this._targets}},{key:"invalidate",value:function(){return this.ratio=0,this._lazy=0,this._onUpdate=0,this._startAt=0,this._op=0,this._pt=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),ot(ct(u.prototype),"invalidate",this).call(this)}},{key:"kill",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";if(!(e||t&&"all"!==t))return this._pt=0,this._lazy=0,this.parent?this._interrupt(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Xe&&!0!==Xe.vars.overwrite)._first||this._interrupt(this),this.parent&&n!==this.timeline.totalDuration()&&fe(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,c,u,l=this._targets,f=e?Q(e):l,h=this._ptLookup,p=this._pt;if((!t||"all"===t)&&this._arraysMatch(l,f))return"all"===t&&(this._pt=0),this._interrupt(this);for(this._op=this._op||[],r=this._op,"all"!==t&&(k(t)&&(s={},V(t,(function(e){return s[e]=1})),t=s),t=this._addAliasesToVars(l,t)),u=l.length;u--;)if(~f.indexOf(l[u]))for(s in i=h[u],"all"===t?(r[u]=t,a=i,o={}):(r[u]=r[u]||{},o=r[u],a=t),a)(c=i&&i[s])&&("kill"in c.d&&!0!==c.d.kill(s)||this._removeLinkedListItem(this,c,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&p&&this._interrupt(this),this}},{key:"_parseKeyframe",value:function(e,t,n,r){var i,o,a=t.ease||r;if(G(t))o=n[e]||(n[e]=[]),t.forEach((function(e,n){return o.push({t:n/(t.length-1)*100,v:e,e:a})}));else for(i in t)o=n[i]||(n[i]=[]),"ease"===i||o.push({t:parseFloat(e),v:t[i],e:a})}},{key:"_hasNoPausedAncestors",value:function(e){return!e||e._ts&&this._hasNoPausedAncestors(e.parent)}},{key:"_arraysMatch",value:function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}},{key:"_addAliasesToVars",value:function(e,t){var n,r,i,o=e[0]?nt(e[0]).harness:0,a=o&&o.aliases;if(!a)return t;var s=Object.assign({},t);for(n in a)if(n in s)for(r=(i=a[n].split(",")).length;r--;)s[i[r]]=s[n];return s}},{key:"_renderZeroDurationTween",value:function(e,t,n,i){var o,a,s=e.ratio,c=t<0||!t&&(!e._start&&this._parentPlayheadIsBeforeStart(e)&&(e._initted||!he(e))||(e._ts<0||e._dp._ts<0)&&!he(e))?0:1;if(c!==s||i||e._zTime===r||!t&&e._zTime){if(!e._initted&&this._attemptInitTween(e,t,i,n))return;for(a=e._zTime,e._zTime=t||(n?r:0),n||(n=t&&!a),e.ratio=c,e._from&&(c=1-c),e._time=0,e._tTime=0,o=e._pt;o;)o.r(c,o.d),o=o._next;e._startAt&&t<0&&e._startAt.render(t,!0,!0),e._onUpdate&&!n&&this._callback(e,"onUpdate"),(t>=e._tDur||t<0)&&e.ratio===c&&(c&&be(e,1),n||(this._callback(e,c?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}},{key:"_attemptInitTween",value:function(e,t,n,r){return this._initTween(e,t),e._initted?!n&&e._pt&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Ee._lastRenderedFrame!==ge.frame?(this._lazyTweens.push(e),e._lazy=[t,r],1):void 0:1}},{key:"_parentPlayheadIsBeforeStart",value:function(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||this._parentPlayheadIsBeforeStart(t))}},{key:"_initTween",value:function(e,t){var i,o,c,l,f,h,p,d,v,b,y,m,_=e.vars,g=_.ease,w=_.startAt,x=_.immediateRender,O=_.lazy,j=_.onUpdate,k=_.onUpdateParams,T=_.callbackScope,S=_.runBackwards,A=_.keyframes,D=_.autoRevert,C=e._dur,I=e._startAt,M=e._targets,R=e.parent,P=R&&"nested"===R.data?R.parent._targets:M,B="auto"===e._overwrite,L=e.timeline;if(L&&(!A||!g)&&(g="none"),e._ease=Ge(g,a.ease),e._from=!L&&!!_.runBackwards,!L||A){if(y=(p=M[0]?nt(M[0]).harness:0)&&_[p.prop],i=N(_,s),I&&be(I.render(-1,!0)),w)if(be(e._startAt=u.set(M,ae({data:"isStart",overwrite:!1,parent:R,immediateRender:!0,lazy:E(O),startAt:null,delay:0,onUpdate:j,onUpdateParams:k,callbackScope:T},w))),t<0&&!x&&!D&&e._startAt.render(-1,!0),x){if(t>0&&!D&&(e._startAt=0),C&&t<=0)return void(t&&(e._zTime=t))}else!1===D&&(e._startAt=0);else if(S&&C)if(I)!D&&(e._startAt=0);else if(t&&(x=!1),c=ae({overwrite:!1,data:"isFromStart",lazy:x&&E(O),immediateRender:x,parent:R},i),y&&(c[p.prop]=y),be(e._startAt=u.set(M,c)),t<0&&e._startAt.render(-1,!0),e._zTime=t,x){if(!t)return}else this._initTween(e._startAt,r);for(e._pt=0,O=C&&E(O)||O&&!C,o=0;o<M.length;o++){if(h=(f=M[o]).brevity||tt(M)[o].brevity,v={},e._ptLookup[o]={},this._lazyLookup[h.id]&&this._lazyTweens.length&&Ee._lazyRender(),b=P===M?o:P.indexOf(f),p&&!1!==(d=new p).init(f,y||i,e,b,P)&&(l=new Le(e._pt,f,d.name,0,1,d.render,d,0,d.priority),e._pt=l,d._props.forEach((function(e){v[e]=l})),d.priority),!p||y)for(c in i)Ee._plugins[c]&&(d=this._checkPlugin(c,i,e,b,f,P))?d.priority:(l=u._addPropTween.call(e,f,c,"get",i[c],b,P,0,_.stringFilter),v[c]=l);e._op&&e._op[o]&&e.kill(f,e._op[o]),B&&e._pt&&(Xe=e,u.tl.globalTimeline.killTweensOf(f,v,e.globalTime(t)),m=!e.parent,Xe=0),e._pt&&O&&(this._lazyLookup[h.id]=1)}e._onInit&&e._onInit(e)}e._onUpdate=j,e._initted=(!e._op||e._pt)&&!m,A&&t<=0&&L.render(n,!0,!0)}},{key:"_checkPlugin",value:function(e,t,n,r,i,o){var a,s,c,u;if(Ee._plugins[e]&&!1!==(a=new Ee._plugins[e]).init(i,a.rawVars?t[e]:this._processVars(t[e],r,i,o,n),n,r,o))for(s=new Le(n._pt,i,e,0,1,a.render,a,0,a.priority),n._pt=s,c=n._ptLookup[n._targets.indexOf(i)],u=a._props.length;u--;)c[a._props[u]]=s;return a}},{key:"_processVars",value:function(e,t,n,r,i){if(T(e)&&(e=this._parseFuncOrString(e,i,t,n,r)),!S(e)||e.style&&e.nodeType||G(e)||C(e))return k(e)?this._parseFuncOrString(e,i,t,n,r):e;var o,a={};for(o in e)a[o]=this._parseFuncOrString(e[o],i,t,n,r);return a}},{key:"_parseFuncOrString",value:function(e,t,n,r,i){return T(e)?e.call(t,n,r,i):k(e)&&~e.indexOf("random(")?Y(e):e}}],o=[{key:"_addPropTween",value:function(e,t,n,r,i,o,a,s,c){T(r)&&(r=r(i||0,e,o));var l,f=e[t],h="get"!==n?n:T(f)?c?e[t.indexOf("set")||!T(e["get".concat(t.substr(3))])?t:"get".concat(t.substr(3))](c):e[t]():f,p=T(f)?c?U:q:L;if(k(r)&&(~r.indexOf("random(")&&(r=Y(r)),"="===r.charAt(1)&&((l=parseFloat(h)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(P(h)||0))||0===l)&&(r=l)),h!==r)return isNaN(h*r)||""===r?u._addComplexStringPropTween.call(this,e,t,h,r,p,s,c):(l=new Le(this._pt,e,t,+h||0,r-(h||0),"boolean"==typeof f?te:ee,0,p),c&&(l.fp=c),a&&l.modifier(a,this,e),this._pt=l)}},{key:"_addComplexStringPropTween",value:function(e,t,n,r,i,o,a){var s,c,u,l,f,h,p,d=new Le(this._pt,e,t,0,1,B,null,i),v=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,b=0,y=0;d.b=n,d.e=r,n+="",(h=~(r+="").indexOf("random("))&&(r=Y(r)),o&&(o(p=[n,r],e,t),n=p[0],r=p[1]);for(var m=n.match(v)||[];s=v.exec(r);)u=s[0],l=r.substring(b,s.index),c?c=(c+1)%5:"rgba("===l.substr(-5)&&(c=1),u!==m[y++]&&(f=parseFloat(m[y-1])||0,d._pt={_next:d._pt,p:l||1===y?l:",",s:f,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-f,m:c&&c<4?Math.round:0},b=v.lastIndex);return d.c=b<r.length?r.substring(b,r.length):"",d.fp=a,(/[+-]=-?[.\d]+/.test(r)||h)&&(d.e=0),this._pt=d,d}},{key:"to",value:function(e,t){return new u(e,t,arguments[2])}},{key:"from",value:function(){return u._createTweenType(1,arguments)}},{key:"delayedCall",value:function(e,t,n,r){return new u(t,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:t,onReverseComplete:t,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:r})}},{key:"fromTo",value:function(){return u._createTweenType(2,arguments)}},{key:"set",value:function(e,t){return t.duration=0,new u(e,t)}},{key:"killTweensOf",value:function(e,t,n){return u.tl.globalTimeline.killTweensOf(e,t,n)}},{key:"_createTweenType",value:function(e,t,n){var r,i,o=j(t[1]),a=(o?2:1)+(e<2?0:1),s=t[a];if(o&&(s.duration=t[1]),s.parent=n,e){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=E(i.vars.inherit)&&i.parent;s.immediateRender=E(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[a-1]}return new u(t[0],s,t[a+1])}},{key:"_inheritDefaults",value:function(e){var t,n=e.parent||u.tl.globalTimeline,r=e.keyframes?(t=G(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):ae;if(E(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e}}],i&&it(t.prototype,i),o&&it(t,o),Object.defineProperty(t,"prototype",{writable:!1}),u}(Ee);function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ft(e){return function(e){if(Array.isArray(e))return ht(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ht(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mt(r.key),r)}}function dt(){return dt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},dt.apply(this,arguments)}function vt(e,t){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},vt(e,t)}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yt(e){return yt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},yt(e)}function mt(e){var t=function(e,t){if("object"!==lt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===lt(t)?t:String(t)}ae(ut.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});var _t,gt,wt,xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vt(e,t)}(s,e);var t,i,o,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yt(e);if(t){var i=yt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===lt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return bt(e)}(this,n)}}(s);function s(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this,t)).labels={},e.smoothChildTiming=!!t.smoothChildTiming,e.autoRemoveChildren=!!t.autoRemoveChildren,e._sort=E(t.sortChildren),s.globalTimeline&&e._addToTimeline(t.parent||s.globalTimeline,bt(e),n),t.reversed&&e.reverse(),t.paused&&e.paused(!0),e}return t=s,i=[{key:"add",value:function(e,t){var n=this;if(j(t)||(t=oe(this,t,e)),!(e instanceof Ee)){if(G(e))return e.forEach((function(e){return n.add(e,t)})),this;if(k(e))return this.addLabel(e,t);if(!T(e))return this;e=ut.delayedCall(0,e)}return this!==e?this._addToTimeline(this,e,t):this}},{key:"addLabel",value:function(e,t){return this.labels[e]=oe(this,t),this}},{key:"getChildren",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-n,o=[],a=this._first;a;)a._start>=i&&(a instanceof ut?t&&o.push(a):(r&&o.push(a),e&&o.push.apply(o,ft(a.getChildren(!0,t,r))))),a=a._next;return o}},{key:"getById",value:function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]}},{key:"tweenFromTo",value:function(e,t,n){return this.tweenTo(t,ae({startAt:{time:oe(this,e)}},n))}},{key:"clear",value:function(){for(var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),ce(this)}},{key:"to",value:function(e,t,n){return ut._createTweenType(0,arguments,this),this}},{key:"render",value:function(e,t,n){var i,o,a,c,u,l,f,h=this._time,p=this._dirty?this.totalDuration():this._tDur,d=this._dur,v=e<=0?0:se(e),b=this._zTime<0!=e<0&&(this._initted||!d);if(this!==s.globalTimeline&&v>p&&e>=0&&(v=p),v!==this._tTime||n||b){if(h!==this._time&&d&&(v+=this._time-h,e+=this._time-h),i=v,f=this._start,c=!(l=this._ts),b&&(d||(h=this._zTime),(e||!t)&&(this._zTime=e)),this._hasPause&&!this._forcing&&this._lock<2&&(u=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,se(h),se(i)),u&&(v-=i-(i=u._start))),this._tTime=v,this._time=i,this._act=!l,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,h=0),!h&&i&&!t&&(this._callback(this,"onStart"),this._tTime!==v))return this;if(i>=h&&e>=0)for(o=this._first;o;){if(a=o._next,(o._act||i>=o._start)&&o._ts&&u!==o){if(o.parent!==this)return this.render(e,t,n);if(o.render(o._ts>0?(i-o._start)*o._ts:(o._dirty?o.totalDuration():o._tDur)+(i-o._start)*o._ts,t,n),i!==this._time||!this._ts&&!c){u=0,a&&(v+=this._zTime=-1e-8);break}}o=a}else{o=this._last;for(var y=e<0?e:i;o;){if(a=o._prev,(o._act||y<=o._end)&&o._ts&&u!==o){if(o.parent!==this)return this.render(e,t,n);if(o.render(o._ts>0?(y-o._start)*o._ts:(o._dirty?o.totalDuration():o._tDur)+(y-o._start)*o._ts,t,n),i!==this._time||!this._ts&&!c){u=0,a&&(v+=this._zTime=y?-1e-8:r);break}}o=a}}if(u&&!t&&(this.pause(),u.render(i>=h?0:-1e-8)._zTime=i>=h?1:-1,this._ts))return this._start=f,ue(this),this.render(e,t,n);this._onUpdate&&!t&&this._callback(this,"onUpdate",!0),(v===p&&p>=this.totalDuration()||!v&&h)&&(f!==this._start&&Math.abs(l)===Math.abs(this._ts)||this._lock||((e||!d)&&(v===p&&this._ts>0||!v&&this._ts<0)&&be(this,1),t||e<0&&!h||!v&&!h&&p||(this._callback(this,v===p&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(v<p&&this.timeScale()>0)&&this._prom())))}return this}},{key:"remove",value:function(e){return k(e)?this.removeLabel(e):T(e)?this.killTweensOf(e):(this._removeLinkedListItem(this,e),e===this._recent&&(this._recent=this._last),ce(this))}},{key:"totalTime",value:function(e,t){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=se(ge.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),dt(yt(s.prototype),"totalTime",this).call(this,e,t),this._forcing=0,this):this._tTime}},{key:"removeLabel",value:function(e){return delete this.labels[e],this}},{key:"killTweensOf",value:function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)r[i].kill(e,t);return this}},{key:"getTweensOf",value:function(e,t){for(var n,r=[],i=Q(e),o=this._first,a=j(t);o;)o instanceof ut?pe(o._targets,i)&&(a?o._initted&&o._ts&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&r.push(o):(n=o.getTweensOf(i,t)).length&&r.push.apply(r,ft(n)),o=o._next;return r}},{key:"tweenTo",value:function(e,t){t=t||{};var n,i=this,o=oe(i,e),a=t,s=a.startAt,c=a.onStart,u=a.onStartParams,l=a.immediateRender,f=ut.to(i,ae({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:t.duration||Math.abs((o-(s&&"time"in s?s.time:i._time))/i.timeScale())||r,onStart:function(){if(i.pause(),!n){var e=t.duration||Math.abs((o-(s&&"time"in s?s.time:i._time))/i.timeScale());f._dur!==e&&fe(f,e,0,1).render(f._time,!0,!0),n=1}c&&c.apply(f,u||[])}},t));return l?f.render(0):f}},{key:"shiftChildren",value:function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this._first,o=this.labels;i;)i._start>=r&&(i._start+=e,i._end+=e),i=i._next;if(t)for(n in o)o[n]>=r&&(o[n]+=e);return ce(this)}},{key:"invalidate",value:function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return dt(yt(s.prototype),"invalidate",this).call(this)}},{key:"totalDuration",value:function(e){var t,r,i,o=0,a=this,c=a._last,u=n;if(arguments.length)return a.timeScale(a.totalDuration()/e);if(a._dirty){for(i=a.parent;c;)t=c._prev,c._dirty&&c.totalDuration(),(r=c._start)>u&&a._sort&&c._ts&&!a._lock?(a._lock=1,this._addToTimeline(a,c,r-c._delay,1)._lock=0):u=r,r<0&&c._ts&&(o-=r,(!i&&!a._dp||i&&i.smoothChildTiming)&&(a._start+=r/a._ts,a._time-=r,a._tTime-=r),a.shiftChildren(-r,!1,-1/0),u=0),c._end>o&&c._ts&&(o=c._end),c=t;fe(a,a===s.globalTimeline&&a._time>o?a._time:o,1,1),a._dirty=0}return a._tDur}}],o=[{key:"updateRoot",value:function(e){if(s.globalTimeline._ts&&(Ee._lazySafeRender(s.globalTimeline,de(e,s.globalTimeline)),Ee._lastRenderedFrame=ge.frame),ge.frame>=Ee._nextGCFrame){Ee._nextGCFrame+=Ee._config.autoSleep||120;var t=s.globalTimeline._first;if((!t||!t._ts)&&Ee._config.autoSleep&&ge._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||ge.sleep()}}}}],i&&pt(t.prototype,i),o&&pt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),s}(Ee);function Ot(e){var t,n=(e=k(e)&&/(^[#\.][a-z]|[a-y][a-z])/i.test(e)&&document.querySelector(e)||e).getAttribute?e:0;return n&&(e=e.getAttribute("d"))?(n.brevityPath||(n.brevityPath={}),(t=n.brevityPath[e])&&!t._dirty?t:n.brevityPath[e]=Bt(e)):e?k(e)?Bt(e):j(e[0])?[e]:e:console.warn("Expecting a <path> element or an SVG path data string")}function jt(e,t){for(var n=0,r=0,i=0;i<e.length;i++){var o=e[i];o.resolution=~~t||12,r+=o.length,n+=Mt(o)}return e.totalPoints=r,e.totalLength=n,e}function kt(e,t,n,r){var i,o,a,s,c,u,l,f,h,p=e[0],d=r||{};if((t<0||t>1)&&(t=re(t)),e.length>1){for(a=e.totalLength*t,c=u=0;(c+=e[u++].totalLength)<a;)p=e[u];t=(a-(s=c-p.totalLength))/(c-s)||0}return i=p.samples,o=p.resolution,a=p.totalLength*t,s=(u=p.lookup.length?p.lookup[t<1?~~(a/p.minLength):p.lookup.length-1]||0:Et(i,a,t))?i[u-1]:0,(c=i[u])<a&&(s=c,c=i[++u]),h=1-(l=1/o*((a-s)/(c-s)+u%o)||0),f=p[u=6*~~(u/o)],d.x=ie((l*l*(p[u+6]-f)+3*h*(l*(p[u+4]-f)+h*(p[u+2]-f)))*l+f),d.y=ie((l*l*(p[u+7]-(f=p[u+1]))+3*h*(l*(p[u+5]-f)+h*(p[u+3]-f)))*l+f),n&&(d.angle=p.totalLength?It(p,u,l>=1?1-1e-9:l||1e-9):p.angle||0),d}_t=xt,gt="globalTimeline",wt=new xt({sortChildren:!1,defaults:a,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),(gt=mt(gt))in _t?Object.defineProperty(_t,gt,{value:wt,enumerable:!0,configurable:!0,writable:!0}):_t[gt]=wt,ae(xt.prototype,{_lock:0,_hasPause:0,_forcing:0}),ut.tl=xt,Ee.tl=xt;var Tt=function(e,t,n,r){var i=e[t],o=1===r?6:Rt(i,n,r);if(o&&o+n+2<i.length)return e.splice(t,0,i.slice(0,n+o+2)),i.splice(0,n+o),1},Et=function(e,t,n){var r=e.length,i=~~(n*r);if(e[i]>t)for(;--i&&e[i]>t;);else for(;e[++i]<t&&i<r;);return i<r?i:r-1},St=function(e,t){var n=e.length;for(t||e.reverse();n--;)e[n].reversed||Ct(e[n])},At=function(e,t){return t.totalLength=e.totalLength,e.samples?(t.samples=e.samples.slice(0),t.lookup=e.lookup.slice(0),t.minLength=e.minLength,t.resolution=e.resolution):e.totalPoints&&(t.totalPoints=e.totalPoints),t},Dt=function(e,t){var n=e.length,r=e[n-1]||[],i=r.length;n&&t[0]===r[i-2]&&t[1]===r[i-1]&&(t=r.concat(t.slice(2)),n--),e[n]=t};function Ct(e){var t,n=0;for(e.reverse();n<e.length;n+=2)t=e[n],e[n]=e[n+1],e[n+1]=t;e.reversed=!e.reversed}function It(e,t,n){var r,i=e[t],o=e[t+2],a=e[t+4];return i+=(o-i)*n,i+=((o+=(a-o)*n)-i)*n,r=o+(a+(e[t+6]-a)*n-o)*n-i,i=e[t+1],i+=((o=e[t+3])-i)*n,i+=((o+=((a=e[t+5])-o)*n)-i)*n,ie(180*Math.atan2(o+(a+(e[t+7]-a)*n-o)*n-i,r)/Math.PI)}function Mt(e,t,n){t=t||0,e.samples||(e.samples=[],e.lookup=[]);var r,i,o,a,s,c,u,l,f,h,p,d,v,b,y,m,_,g=~~e.resolution||12,w=1/g,x=n?t+6*n+1:e.length,O=e[t],j=e[t+1],k=t?t/6*g:0,T=e.samples,E=e.lookup,S=1e8,A=(t?e.minLength:S)||S,D=T[k+n*g-1],C=t?T[k-1]:0;for(T.length=E.length=0,i=t+2;i<x;i+=6){if(o=e[i+4]-O,a=e[i+2]-O,s=e[i]-O,l=e[i+5]-j,f=e[i+3]-j,h=e[i+1]-j,c=u=p=d=0,Math.abs(o)<.01&&Math.abs(l)<.01&&Math.abs(s)+Math.abs(h)<.01)e.length>8&&(e.splice(i,6),i-=6,x-=6);else for(r=1;r<=g;r++)c=u-(u=((b=w*r)*b*o+3*(v=1-b)*(b*a+v*s))*b),p=d-(d=(b*b*l+3*v*(b*f+v*h))*b),(m=Math.sqrt(p*p+c*c))<A&&(A=m),C+=m,T[k++]=C;O+=o,j+=l}if(D)for(D-=C;k<T.length;k++)T[k]+=D;if(T.length&&A){if(e.totalLength=_=T[T.length-1]||0,e.minLength=A,_/A<9999)for(m=y=0,r=0;r<_;r+=A)E[m++]=T[y]<r?++y:y}else e.totalLength=T[0]=0;return t?C-T[t/2-1]:C}function Rt(e,t,n){if(n<=0||n>=1)return 0;var r=e[t],i=e[t+1],o=e[t+2],a=e[t+3],s=e[t+4],c=e[t+5],u=r+(o-r)*n,l=o+(s-o)*n,f=i+(a-i)*n,h=a+(c-a)*n,p=u+(l-u)*n,d=f+(h-f)*n,v=s+(e[t+6]-s)*n,b=c+(e[t+7]-c)*n;return l+=(v-l)*n,h+=(b-h)*n,e.splice(t+2,4,ie(u),ie(f),ie(p),ie(d),ie(p+(l-p)*n),ie(d+(h-d)*n),ie(l),ie(h),ie(v),ie(b)),e.samples&&e.samples.splice(t/6*e.resolution|0,0,0,0,0,0,0,0),6}function Pt(e,t,n,r){n=n||{},e.totalLength||jt(e),(t<0||t>1)&&(t=re(t));var i,o,a,s,c,u,l,f=0,h=e[0];if(t)if(1===t)l=1,u=(h=e[f=e.length-1]).length-8;else{if(e.length>1){for(a=e.totalLength*t,c=u=0;(c+=e[u++].totalLength)<a;)f=u;t=(a-(s=c-(h=e[f]).totalLength))/(c-s)||0}i=h.samples,o=h.resolution,a=h.totalLength*t,s=(u=h.lookup.length?h.lookup[~~(a/h.minLength)]||0:Et(i,a,t))?i[u-1]:0,(c=i[u])<a&&(s=c,c=i[++u]),l=1/o*((a-s)/(c-s)+u%o),u=6*~~(u/o),r&&1===l&&(u+6<h.length?(u+=6,l=0):f+1<e.length&&(u=l=0,h=e[++f]))}else l=u=f=0,h=e[0];return n.t=l,n.i=u,n.path=e,n.segment=h,n.segIndex=f,n}function Nt(e,t,n,r,i,o,a,s,c){if(e!==s||t!==c){n=Math.abs(n),r=Math.abs(r);var u=i%360*Math.PI/180,l=Math.cos(u),f=Math.sin(u),h=Math.PI,p=2*h,d=(e-s)/2,v=(t-c)/2,b=l*d+f*v,y=-f*d+l*v,m=b*b,_=y*y,g=m/(n*n)+_/(r*r);g>1&&(n=Math.sqrt(g)*n,r=Math.sqrt(g)*r);var w=n*n,x=r*r,O=(w*x-w*_-x*m)/(w*_+x*m);O<0&&(O=0);var j=(o===a?-1:1)*Math.sqrt(O),k=j*(n*y/r),T=j*(-r*b/n),E=(e+s)/2+(l*k-f*T),S=(t+c)/2+(f*k+l*T),A=(b-k)/n,D=(y-T)/r,C=(-b-k)/n,I=(-y-T)/r,M=A*A+D*D,R=(D<0?-1:1)*Math.acos(A/Math.sqrt(M)),P=(A*I-D*C<0?-1:1)*Math.acos((A*C+D*I)/Math.sqrt(M*(C*C+I*I)));isNaN(P)&&(P=h),!a&&P>0?P-=p:a&&P<0&&(P+=p),R%=p,P%=p;var N,B=Math.ceil(Math.abs(P)/(p/4)),L=[],q=P/B,U=4/3*Math.sin(q/2)/(1+Math.cos(q/2)),F=l*n,z=f*n,V=f*-r,G=l*r;for(N=0;N<B;N++)i=R+N*q,b=Math.cos(i),y=Math.sin(i),A=Math.cos(i+=q),D=Math.sin(i),L.push(b-U*y,y+U*b,A+U*D,D-U*A,A,D);for(N=0;N<L.length;N+=2)b=L[N],y=L[N+1],L[N]=b*F+y*V+E,L[N+1]=b*z+y*G+S;return L[N-2]=s,L[N-1]=c,L}}function Bt(e){var t,n,r,i,o,a,s,c,u,l,f,h,p,d,v,b="".concat(e).replace(/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,(function(e){var t=+e;return t<1e-4&&t>-1e-4?0:t})).match(/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi)||[],y=[],m=0,_=0,g=2/3,w=b.length,x=0,O="ERROR: malformed path: ".concat(e),j=function(e,t,n,r){l=(n-e)/3,f=(r-t)/3,s.push(e+l,t+f,n-l,r-f,n,r)};if(!e||!isNaN(b[0])||isNaN(b[1]))return console.log(O),y;for(t=0;t<w;t++)if(p=o,isNaN(b[t])?a=(o=b[t].toUpperCase())!==b[t]:t--,r=+b[t+1],i=+b[t+2],a&&(r+=m,i+=_),t||(c=r,u=i),"M"===o)s&&(s.length<8?y.length-=1:x+=s.length),m=c=r,_=u=i,s=[r,i],y.push(s),t+=2,o="L";else if("C"===o)s||(s=[0,0]),a||(m=_=0),s.push(r,i,m+1*b[t+3],_+1*b[t+4],m+=1*b[t+5],_+=1*b[t+6]),t+=6;else if("S"===o)l=m,f=_,"C"!==p&&"S"!==p||(l+=m-s[s.length-4],f+=_-s[s.length-3]),a||(m=_=0),s.push(l,f,r,i,m+=1*b[t+3],_+=1*b[t+4]),t+=4;else if("Q"===o)l=m+(r-m)*g,f=_+(i-_)*g,a||(m=_=0),m+=1*b[t+3],_+=1*b[t+4],s.push(l,f,m+(r-m)*g,_+(i-_)*g,m,_),t+=4;else if("T"===o)l=m-s[s.length-4],f=_-s[s.length-3],s.push(m+l,_+f,r+(m+1.5*l-r)*g,i+(_+1.5*f-i)*g,m=r,_=i),t+=2;else if("H"===o)j(m,_,m=r,_),t+=1;else if("V"===o)j(m,_,m,_=r+(a?_-m:0)),t+=1;else if("L"===o||"Z"===o)"Z"===o&&(r=c,i=u,s.closed=!0),("L"===o||Math.abs(m-r)>.5||Math.abs(_-i)>.5)&&(j(m,_,r,i),"L"===o&&(t+=2)),m=r,_=i;else if("A"===o){if(d=b[t+4],v=b[t+5],l=b[t+6],f=b[t+7],n=7,d.length>1&&(d.length<3?(f=l,l=v,n--):(f=v,l=d.substr(2),n-=2),v=d.charAt(1),d=d.charAt(0)),h=Nt(m,_,+b[t+1],+b[t+2],+b[t+3],+d,+v,(a?m:0)+1*l,(a?_:0)+1*f),t+=n,h)for(n=0;n<h.length;n++)s.push(h[n]);m=s[s.length-2],_=s[s.length-1]}else console.log(O);return(t=s.length)<6?(y.pop(),t=0):s[0]===s[t-2]&&s[1]===s[t-1]&&(s.closed=!0),y.totalPoints=x+t,y}return function(e){var t=(e=!e.name&&e.default||e).name,n=T(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:function(){return 0},render:ye,add:Ue,kill:_e,modifier:me,rawVars:0},o={targetTest:0,get:0,getSetter:z,aliases:{},register:0};if(ge.wake(),e!==r){if(Ee._plugins[t])return;ae(r,ae(N(e,i),o)),M(r.prototype,M(i,N(e,o))),Ee._plugins[r.prop=t]=r}}({name:"pathAnime",init:function(e,t){var n=[],r=this.sliceModifier(t.start,"end"in t?t.end:1);this.rawPaths=n,this.target=e;var i=r(this.align(Ot(t.path),e,t));jt(i,t.resolution),n.push(i),this.addDimensionalPropTween(this,e,t.x||"x",i,"x",t.unitX||"px"),this.addDimensionalPropTween(this,e,t.y||"y",i,"y",t.unitY||"px")},render:function(e,t){var n=t.rawPaths,r=n.length,i=t._pt;for(e>1?e=1:e<0&&(e=0);r--;)kt(n[r],e,!r&&t.rotate,n[r]);for(;i;)i.set(i.t,i.p,i.path[i.pp]+i.u,i.d,e),i=i._next},getLength:function(e){return jt(Ot(e)).totalLength},addDimensionalPropTween:function(e,t,n,r,i,o){var a=t.brevity,s=a.harness,c=s&&s.aliases&&s.aliases[n],u=c&&c.indexOf(",")<0?c:n;e._pt=new Le(e._pt,t,u,0,0,(function(e){return e}),0,a.set(t,u,e));var l=e._pt;l.u=P(a.get(t,u,o))||0,l.path=r,l.pp=i,e._props.push(u)},align:function(e){return e&&e.length?e:Ot("M0,0L0,0")},sliceModifier:function(e,t){return function(n){return e||1!==t?function(e,t,n){n=D(n)?1:se(n)||0,t=se(t)||0;var r=Math.max(0,~~(Math.abs(n-t)-1e-8)),i=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=At(e[n],e[n].slice(0));return At(e,t)}(e);if(t>n&&(t=1-t,n=1-n,St(i),i.totalLength=0),t<0||n<0){var o=Math.abs(~~Math.min(t,n))+1;t+=o,n+=o}i.totalLength||jt(i);var a,s,c,u,l,f,h,p,d=n>1,v=Pt(i,t,{},!0),b=Pt(i,n,{}),y=b.segment,m=v.segment,_=b.segIndex,g=v.segIndex,w=b.i,x=v.i,O=g===_,j=w===x&&O;if(d||r){for(a=_<g||O&&w<x||j&&b.t<v.t,Tt(i,g,x,v.t)&&(g++,a||(_++,j?(b.t=(b.t-v.t)/(1-v.t),w=0):O&&(w-=x))),Math.abs(1-(n-t))<1e-5?_=g-1:!b.t&&_?_--:Tt(i,_,w,b.t)&&a&&g++,1===v.t&&(g=(g+1)%i.length),l=[],h=1+(f=i.length)*r,p=g,h+=(f-g+_)%f,u=0;u<h;u++)Dt(l,i[p++%f]);i=l}else if(c=1===b.t?6:Rt(y,w,b.t),t!==n)for(s=Rt(m,x,j?v.t/b.t:v.t),O&&(c+=s),y.splice(w+c+2),(s||x)&&m.splice(0,x+s),u=i.length;u--;)(u<g||u>_)&&i.splice(u,1);else y.angle=It(y,w+c,0),v=y[w+=c],b=y[w+1],y.length=y.totalLength=0,y.totalPoints=i.totalPoints=8,y.push(v,b,v,b,v,b,v,b);return i.totalLength=0,i}(n,e,t):n}}}),ge.add(xt.updateRoot),ge.coreReady=!0,"undefined"!=typeof window&&ge.wake(),t})(),e.exports=r()},"31a899c9f3":function(e,t){e.exports={version:"0.26.1"}},"389ef8f989":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=function(){try{var e=localStorage.getItem("person-account-wedriveUin-tinyid-map")||"{}";return JSON.parse(e)}catch(e){return console.error(e),{}}},i=function(e){var t=e.wedriveUin,n=e.tinyid;try{var r=localStorage.getItem("person-account-wedriveUin-tinyid-map")||"{}",i=JSON.parse(r);i[t]=n,localStorage.setItem("person-account-wedriveUin-tinyid-map",i)}catch(e){console.error(e)}}},"39a4b3c3c1":function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},"39cb95f88d":function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},"446c52c6f2":function(e,t,n){"use strict";var r=n("94b54f38ee");function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},"4498e7a6fb":function(e,t,n){"use strict";var r=n("94b54f38ee");e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function c(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var u={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:c};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=u[e]||o,i=t(e);r.isUndefined(i)&&t!==c||(n[e]=i)})),n}},"4a49840677":function(e,t,n){"use strict";var r=n("94b54f38ee");e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},"4bae7615ca":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCancellationToken=t.CancellationTokenState=void 0;var r=function(){function e(){}return e.None=Object.freeze({isCancellationRequested:!1}),e.Cancelled=Object.freeze({isCancellationRequested:!0}),e}();t.CancellationTokenState=r,t.isCancellationToken=function(e){return e===r.None||e===r.Cancelled||!(!e||"object"!=typeof e)&&"boolean"==typeof e.isCancellationRequested}},"52bbb6cc53":function(e,t,n){"use strict";var r,i;n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"k",(function(){return o})),n.d(t,"j",(function(){return h})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"n",(function(){return p})),n.d(t,"m",(function(){return d})),n.d(t,"l",(function(){return v})),n.d(t,"g",(function(){return m})),n.d(t,"i",(function(){return b})),function(e){e.CreateCollection="create-collection",e.DropCollection="drop-collection",e.CreateIndex="create-index",e.DropIndex="drop-index"}(r||(r={})),function(e){e.MoveProperty="move-property",e.DropProperty="drop-property",e.ReplaceProperty="replace-property",e.ClearData="clear-data",e.ReplaceData="replace-data"}(i||(i={}));var o,a={name:"alloy_db_schema_table",indices:[],key:{path:"name"},properties:[]};!function(e){e.Equals="=",e.NotEquals="!=",e.GreaterThan=">",e.GreaterOrEqualThan=">=",e.LessThan="<",e.LessOrEqualThan="<=",e.In="in",e.NotIn="nin"}(o||(o={}));var s,c,u,l,f,h=void 0;function p(e){return"number"==typeof e&&!Number.isNaN(e)||"string"==typeof e||e instanceof Date&&!Number.isNaN(e.getTime())||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||Array.isArray(e)&&e.every(p)}function d(e,t){var n=e;return Array.isArray(t)?t.map((function(e){return n[e]})):n[t]}function v(e,t){return Array.isArray(e)?Array.isArray(t)&&e.length===t.length&&e.every((function(e,n){return v(e,t[n])})):e===t}!function(e){e.OR="or",e.AND="and",e.FILTER="filter",e.NONE="none",e.ALL="all"}(s||(s={})),function(e){e.ENTRIES="entries",e.VALUES="values",e.KEYS="keys",e.COUNT="count"}(c||(c={})),function(e){e.DESCENDING="desc",e.ASCENDING="asc"}(u||(u={})),function(e){e.AutoIncrement="auto-increment"}(l||(l={})),function(e){e.Equals="=",e.GreaterThan=">",e.GreaterOrEqualThan=">=",e.LessThan="<",e.LessOrEqualThan="<="}(f||(f={}));var b,y=n("d7c625d1f2"),m=function(){function e(){}return e.collectionDiff=function(e,t){if(e.name!==t.name)throw new Error("can not compare collection schema with different name");var n={collection:e.name},r=t.indices.filter((function(t){return!e.indices.some((function(e){return e.name===t.name}))})),i=e.indices.filter((function(e){return!t.indices.some((function(t){return t.name===e.name}))}));return(r.length||i.length)&&(n.index={added:Object(y.__spreadArray)([],Object(y.__read)(r)),deleted:Object(y.__spreadArray)([],Object(y.__read)(i))}),n},e.databaseDiff=function(e,t){var n,r,i=this.getCompareMap(e,t),o={added:[],deleted:[],different:[]};try{for(var a=Object(y.__values)(i.values()),s=a.next();!s.done;s=a.next()){var c=s.value;if(!c.oldValue||c.newValue)if(c.oldValue||!c.newValue){if(c.oldValue&&c.newValue){var u=this.collectionDiff(c.oldValue,c.newValue);if(!u.index)continue;o.different.push(u)}}else o.added.push(c.newValue);else o.deleted.push(c.oldValue)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o},e.getCompareMap=function(e,t){var n,r,i,o,a=new Map;try{for(var s=Object(y.__values)(t.collections),c=s.next();!c.done;c=s.next()){var u=c.value;(h=a.get(u.name)||{}).newValue=u,a.set(u.name,h)}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}try{for(var l=Object(y.__values)(e.collections),f=l.next();!f.done;f=l.next()){var h;u=f.value;(h=a.get(u.name)||{}).oldValue=u,a.set(u.name,h)}}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return a},e}();!function(e){e.READ_ONLY="readonly",e.READ_WRITE="readwrite",e.VERSION_CHANGE="versionchange"}(b||(b={}))},"533c8fd00a":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0}),t.mixinRootDisposable=t.mixinDisposable=t.Disposable=t.RootDisposable=void 0;var s=n("697ecdc674"),c=n("0d99992889"),u=n("ff6b6fad8b"),l=function(){function e(){this.disposedStore=new u.DisposableStore}return e.prototype.dispose=function(e){this.disposedStore.dispose(e)},e.prototype._register=function(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.disposedStore.add(e)},e}(),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.dispose=function(t){var n=t,r=!1;if(!n){var i=this.constructor.name;n=s.DisposeTrace.traceRoot(i),r=!0}e.prototype.dispose.call(this,n),r&&n.stop()},t.prototype._register=function(t){return e.prototype._register.call(this,t)},t}(l);t.RootDisposable=f;var h=function(e){function t(){var t=e.call(this)||this;return c.trackDisposable(t),t}return i(t,e),t.prototype.dispose=function(t){c.markTracked(this),e.prototype.dispose.call(this,t)},t}(l);t.Disposable=h,t.mixinDisposable=function(e){return function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,a(t))||this;return r.disposedStore=new u.DisposableStore,c.trackDisposable(r),r}return i(t,e),t.prototype.dispose=function(e){c.markTracked(this),this.disposedStore.dispose(e)},t.prototype._register=function(e){return this.disposedStore.add(e)},t}(e)},t.mixinRootDisposable=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disposedStore=new u.DisposableStore,t}return i(t,e),t.prototype.dispose=function(e){c.markTracked(this);var t=e,n=!1;if(!t){var r=this.constructor.name;t=s.DisposeTrace.traceRoot(r),n=!0}this.disposedStore.dispose(t),n&&t.stop()},t.prototype._register=function(e){return this.disposedStore.add(e)},t}(e)}},"540dabb65d":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("d7c625d1f2"),i=function(e){return"".concat(String(e),"__locked")},o=function(e){return"".concat(String(e),"__result")};function a(){return function(e,t,n){var a=n.value,s=i(t),c=o(t);n.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this[s]||(this[c]=a.call.apply(a,Object(r.__spreadArray)([this],Object(r.__read)(e),!1)),this[s]=!0),this[c]}}}},"58bffcf462":function(e,t,n){"use strict";(function(t){var r=n("94b54f38ee"),i=n("22b96304bb"),o=n("fa25e7cd6c"),a=n("744ee0b6cd"),s={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var u,l={transitional:a,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==t&&"[object process]"===Object.prototype.toString.call(t))&&(u=n("6dc82740da")),u),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,a=!n&&"json"===this.responseType;if(a||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(a){if("SyntaxError"===e.name)throw o(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(s)})),e.exports=l}).call(this,n("6c0cbd9268"))},"624cdb524f":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n("a6ef31917d");function i(e,t){return null!==e&&Object.prototype.hasOwnProperty.call(e,t)}function o(e){if(!e||!Object(r.isObject)(e))return e;var t={};return Object.keys(e).forEach((function(n){var r,i=(r=n).length<1?r:(r[0].toLowerCase()+r.substr(1)).replace(/([A-Z])/g,(function(e){return"_".concat(e.toLowerCase())}));if(Object.prototype.hasOwnProperty.call(e,n))if(Array.isArray(e[n])){var a=e[n],s=[];a.forEach((function(e){var t=o(e);s.push(t)})),t[i]=s}else e[n]instanceof Object?t[i]=o(e[n]):t[i]=e[n]})),t}function a(e){if(!e||!Object(r.isObject)(e))return e;var t={};return Object.keys(e).forEach((function(n){var r=function(e){for(var t=e.split("_"),n="",r=0;r<t.length;r++){var i=t[r];i.length>0&&(n+=0===r?i:i="".concat(i[0].toUpperCase()).concat(i.substring(1)))}return n}(n);if(Object.prototype.hasOwnProperty.call(e,n))if(Array.isArray(e[n])){var i=e[n],o=[];i.forEach((function(e){var t=a(e);o.push(t)})),t[r]=o}else e[n]instanceof Object?t[r]=a(e[n]):t[r]=e[n]})),t}function s(e,t,n){Object.getOwnPropertyNames(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);r&&"constructor"!==n&&Object.defineProperty(e,n,r)})),Object.getOwnPropertyNames(n.prototype).forEach((function(t){"constructor"!==t&&(e[t]=n.prototype[t])}))}},"6423ed0b81":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r,i=n("70eedf593c"),o=n("624cdb524f"),a=(n("a6ef31917d"),"document");function s(e){if(!Object(o.b)(i.a,a))return null;var t=new RegExp("(?:^|;+|\\s+)".concat(e,"=([^;]*)")),n=document.cookie.match(t);return(n?n[1]:null)||null}function c(e){return s(e)}!function(e){e.xsrf="TOK",e.devRouteId="dev_route_id",e.devOaName="dev_oa_name",e.fd="fd",e.envId="env_id",e.sid="SID",e.sids="SID_S",e.uid="uid",e.uidKey="uid_key",e.uin="uin",e.loginTime="loginTime",e.hasBeenLogin="has_been_login",e.adtag="adtag",e.plUin="p_luin",e.pUin="p_uin",e.pSkey="p_skey",e.plSkey="p_lskey"}(r||(r={}))},"65e41bd588":function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.QQ=1]="QQ",e[e.WX=2]="WX",e[e.WORK=3]="WORK",e[e.EMAIL=4]="EMAIL",e[e.PHONE=8]="PHONE",e[e.WORK_COMBINATION=9]="WORK_COMBINATION",e[e.TOWER=10]="TOWER",e[e.ROBOT=11]="ROBOT",e[e.QFYF=12]="QFYF",e[e.OPEN=13]="OPEN",e[e.MEETING=14]="MEETING"}(r||(r={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WECHAT=4]="WECHAT",e[e.WEWORK=3]="WEWORK"}(i||(i={}))},"697ecdc674":function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a};Object.defineProperty(t,"__esModule",{value:!0}),t.DisposeTrace=t.disableDisposeTrace=t.enableDisposeTrace=void 0;var s=!1;t.enableDisposeTrace=function(){s=!0},t.disableDisposeTrace=function(){s=!1};var c=function(){function e(e){this.name=e,this._dep=[]}return e.traceRoot=function(t){return s?new e(t):e._None},e.prototype.branch=function(t){var n=new e(t);return this._dep.push([t,n]),n},e.prototype.stop=function(){var e=["dispose "+this.name,""+function e(t,n){var r,i,s=[],c=new Array(t+1).join("\t");try{for(var u=o(n._dep),l=u.next();!l.done;l=u.next()){var f=a(l.value,2),h=f[0],p=f[1];if(p){s.push(c+"dispose -> "+h);var d=e(t+1,p);d&&s.push(d)}else s.push(c+"dispose -> "+h)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s.join("\n")}(1,this)];console.log(e.join("\n"))},e._None=new(function(e){function t(){return e.call(this,null)||this}return i(t,e),t.prototype.stop=function(){},t.prototype.branch=function(){return this},t}(e)),e}();t.DisposeTrace=c},"6dc82740da":function(e,t,n){"use strict";var r=n("94b54f38ee"),i=n("8e87c39c39"),o=n("bf3ff0c91e"),a=n("ac1e2b0319"),s=n("9e41b0871b"),c=n("9ae390a68c"),u=n("4a49840677"),l=n("f9f6cd81c2"),f=n("744ee0b6cd"),h=n("1cc181d9f8");e.exports=function(e){return new Promise((function(t,n){var p,d=e.data,v=e.headers,b=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(d)&&delete v["Content-Type"];var m=new XMLHttpRequest;if(e.auth){var _=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(_+":"+g)}var w=s(e.baseURL,e.url);function x(){if(m){var r="getAllResponseHeaders"in m?c(m.getAllResponseHeaders()):null,o={data:b&&"text"!==b&&"json"!==b?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m};i((function(e){t(e),y()}),(function(e){n(e),y()}),o),m=null}}if(m.open(e.method.toUpperCase(),a(w,e.params,e.paramsSerializer),!0),m.timeout=e.timeout,"onloadend"in m?m.onloadend=x:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(x)},m.onabort=function(){m&&(n(l("Request aborted",e,"ECONNABORTED",m)),m=null)},m.onerror=function(){n(l("Network Error",e,null,m)),m=null},m.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||f;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",m)),m=null},r.isStandardBrowserEnv()){var O=(e.withCredentials||u(w))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;O&&(v[e.xsrfHeaderName]=O)}"setRequestHeader"in m&&r.forEach(v,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete v[t]:m.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(m.withCredentials=!!e.withCredentials),b&&"json"!==b&&(m.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&m.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&m.upload&&m.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){m&&(n(!e||e&&e.type?new h("canceled"):e),m.abort(),m=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),d||(d=null),m.send(d)}))}},"6fa7b8d7bc":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r="#",i="?",o="&";function a(e,t){if(e.includes(i)){var n=e;return Object.keys(t).map((function(e){n=function(e,t,n){var r=e.split(i),a=r[1].split(o),s=!0,c=new Map;a.forEach((function(e){var t=e.split("=");c.set(t[0],t[1])})),a.some((function(e){0===e.indexOf("".concat(t,"="))&&(c.set(t,n),s=!1)})),s&&c.set(t,n);var u=[];return c.forEach((function(e,t){var n="".concat(t,"=").concat(e);u.push(n)})),r[1]=u.join(o),r.join(i)}(n,e,t[e])})),n}var r=Object.keys(t).map((function(e){return"".concat(e,"=").concat(t[e])})).join(o);return"".concat(e,"?").concat(r)}function s(e,t){if(Object.keys(t).length<1)return e;if(e.includes(r)){var n=e.split(r);return n[0]=a(n[0],t),n.join(r)}return a(e,t)}},"70eedf593c":function(e,t,n){"use strict";(function(e){var n={};function r(){return"undefined"!=typeof window}function i(){return void 0!==e}var o=r()?window:i()?e:r||"undefined"==typeof self?(i()&&e.describe,n):self;t.a=o}).call(this,n("5ef37df1a0"))},"725707fbbc":function(e,t,n){"use strict";n.r(t),n.d(t,"SortOrder",(function(){return d.a})),n.d(t,"DBEngineType",(function(){return Y})),n.d(t,"DB_NAME_BACKUP",(function(){return ee})),n.d(t,"DocumentDataStorage",(function(){return ie})),n.d(t,"DocumentEntityStorage",(function(){return ce})),n.d(t,"DocumentIdStorage",(function(){return ae})),n.d(t,"DocumentStatusStorage",(function(){return se})),n.d(t,"DriveDataStorage",(function(){return fe})),n.d(t,"OfflineDataStorage",(function(){return oe})),n.d(t,"PadInfoStorage",(function(){return ue})),n.d(t,"StorageBackupManager",(function(){return te})),n.d(t,"StorageManager",(function(){return $})),n.d(t,"UserInfoStorage",(function(){return le}));var r,i=n("9132715560"),o=n.n(i),a=n("6a364eb35c"),s=n.n(a),c=n("3ef2352f0b"),u=n.n(c),l=(n("c6244f7705"),n("081c8cafea"),n("6c6f26abf4"),n("d7c625d1f2")),f=n("10f9b6de11"),h=n("52bbb6cc53"),p=n("9c60cb7ff5"),d=n("c564d09b70");!function(e){e.pending="[PENDING]",e.success="[SUCCESS]",e.failure="[FAILURE]",e.slow="[SLOW]"}(r||(r={}));var v,b,y,m=Symbol("begin"),_=function(e,t){return e+"/"+t},g=function(e,t){return"["+e+"."+t+"]"},w=function(e){var t=Array.isArray(e)?e:Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){return t+"="+e[t]}));return t.length?Object(l.__spreadArray)(["args:"],Object(l.__read)(t)):[]},x=function(e){return"[-* "+e+"]"},O=function(){function e(e){var t=this,n=void 0===e?{logger:console,verbose:!1,disabled:!1,prefix:""}:e,i=n.logger,o=void 0===i?console:i,a=n.disabled,s=void 0!==a&&a,c=n.verbose,u=void 0!==c&&c,f=n.prefix,p=void 0===f?"":f;this.name="LoggerPlugin",this.formatQueryConditionsExp=function(e){if(e.type===h.e.AND||e.type===h.e.OR){if(!e.exps.length)return;return e.exps.map(t.formatQueryConditionsExp).filter(Boolean).map((function(t){return e.type===h.e.OR&&e.exps.length>1?"("+t+")":t})).join(e.type===h.e.AND?" AND ":" OR ")}return e.type===h.e.FILTER?t.formatPredicate(e.path,e.predicate):e.type},this.formatPredicate=function(e,t){return Object.keys(t).filter((function(e){return void 0!==t[e]})).map((function(n){return e+" "+n+" "+JSON.stringify(t[n])})).join(" AND ")},this.logMethodBegin=function(e,n,i,o){var a;e.timings.set(m,new Date),(a=t.logger).info.apply(a,Object(l.__spreadArray)([t.prefix,r.pending,g(n,i)],Object(l.__read)(w(o))))},this.logMethodEnd=function(e,n,i,o,a){var s,c,u,f,h=e.timings.get(m)||new Date,p=g(n,i),d=Date.now()-h.getTime(),v="cost="+d+"ms",b=d>=500;a.error?(s=t.logger).error.apply(s,Object(l.__spreadArray)([t.prefix,r.failure,g(n,i),v,null===(u=a.error)||void 0===u?void 0:u.message,null===(f=a.error)||void 0===f?void 0:f.stack],Object(l.__read)(w(o)))):(c=t.logger)[b?"warn":"info"].apply(c,Object(l.__spreadArray)(Object(l.__spreadArray)(Object(l.__spreadArray)(Object(l.__spreadArray)([t.prefix,r.success],Object(l.__read)(b?[r.slow]:[])),[p,v]),Object(l.__read)(w(o))),["result:",a.data]))},this.logger=o,this.disabled=s,this.verbose=u,this.prefix=p}return e.prototype.register=function(e){this.disabled||(this.prefix=this.prefix||"["+e.name+"]",this.hookPrimaryKeyQueries(e),this.hookConditionQueries(e),this.hookDataManipulationQueries(e),this.hookEvents(e),this.hookMigration(e),this.verbose&&this.hookEngine(e))},e.prototype.dispose=function(e){throw new p.b({storage:e})},e.prototype.hookMigration=function(e){var t=this,n=function(e,n,r){void 0===r&&(r="migration"),e.before((function(e){t.logMethodBegin(e,r,n,e.args)})).after((function(e){t.logMethodEnd(e,r,n,e.args,{data:e.return,error:e.error})}))};n(e.aspects.migration.buildMigration,"buildMigration"),n(e.aspects.migration.executeDataMigration,"executeDataMigration"),n(e.aspects.migration.executeSchemaMigration,"executeSchemaMigration"),n(e.aspects.migration.updateMigrationChangeInfo,"updateMigrationChangeInfo"),n(e.aspects.migration.prepareAutoUpgradeHandler,"prepareAutoUpgradeHandler"),n(e.aspects.migration.log,"innerLog"),n(e.aspects.migration.actionExecutor.executeSchemaAction,"executeSchemaAction"),n(e.aspects.migration.actionExecutor.executeDataAction,"executeDataAction")},e.prototype.hookEngine=function(e){var t=this,n=function(e,n,r){e.before((function(e){t.logMethodBegin(e,n,r,e.args)})).after((function(e){t.logMethodEnd(e,n,r,e.args,{data:e.return,error:e.error})}))},r=e.aspects.engine;n(r.openDB,"engine","openDB"),n(r.deleteDB,"engine","deleteDB"),this.hookEngineDatabase(r.database,n),this.hookEngineTable(r.table,n),this.hookEngineTransaction(r.transaction,n),this.hookEngineIndex(r.index,n),this.hookEngineCursor(r.cursor,n)},e.prototype.hookEngineDatabase=function(e,t){var n=_("engine","database");t(e.close,n,"close"),t(e.table,n,"table"),t(e.transaction,n,"transaction"),t(e.createTable,n,"createTable"),t(e.deleteTable,n,"deleteTable")},e.prototype.hookEngineTransaction=function(e,t){var n=_("engine","transaction");t(e.commit,n,"commit"),t(e.rollback,n,"rollback"),t(e.table,n,"table")},e.prototype.hookEngineIndex=function(e,t){var n=_("engine","index");t(e.get,n,"get"),t(e.getAll,n,"getAll"),t(e.getAllKeys,n,"getAllKeys"),t(e.openCursor,n,"openCursor")},e.prototype.hookEngineCursor=function(e,t){var n=_("engine","cursor");t(e.delete,n,"delete"),t(e.update,n,"update"),t(e.next,n,"next"),t(e.value,n,"value")},e.prototype.hookEngineTable=function(e,t){var n=_("engine","table");t(e.clear,n,"clear"),t(e.get,n,"get"),t(e.delete,n,"delete"),t(e.getAll,n,"getAll"),t(e.getAllKeys,n,"getAllKeys"),t(e.index,n,"index"),t(e.insert,n,"insert"),t(e.upsert,n,"upsert"),t(e.createIndex,n,"createIndex"),t(e.deleteIndex,n,"deleteIndex"),t(e.openCursor,n,"openCursor"),t(e.query,n,"query"),t(e.bulkDelete,n,"bulkDelete"),t(e.bulkUpsert,n,"bulkUpsert")},e.prototype.hookPrimaryKeyQueries=function(e){var t=this,n=function(e,n){e.before((function(e){t.logMethodBegin(e,e.this.name,n,{key:e.args[0]})})).after((function(e){t.logMethodEnd(e,e.this.name,n,{key:e.args[0]},{data:e.return,error:e.error})}))};n(e.aspects.collection.get,"get"),n(e.aspects.collection.has,"has"),n(e.aspects.collection.delete,"delete")},e.prototype.hookConditionQueries=function(e){var t=this,n=function(e,n){e.before((function(e){t.logMethodBegin(e,e.this.name,n,t.formatQueryConditions(e.this.conditions()))})).after((function(e){t.logMethodEnd(e,e.this.name,n,t.formatQueryConditions(e.this.conditions()),{data:e.return,error:e.error})}))};n(e.aspects.collection.count,"count"),n(e.aspects.collection.entries,"entries"),n(e.aspects.collection.keys,"keys"),n(e.aspects.collection.values,"values"),n(e.aspects.collection.first,"first"),n(e.aspects.collection.last,"last"),n(e.aspects.collection.clear,"clear"),n(e.aspects.collection.update,"update")},e.prototype.hookDataManipulationQueries=function(e){var t=this,n=function(e,n){e.before((function(e){t.logMethodBegin(e,e.this.name,n,e.args)})).after((function(e){t.logMethodEnd(e,e.this.name,n,e.args,{data:e.return,error:e.error})}))};n(e.aspects.collection.insert,"insert"),n(e.aspects.collection.upsert,"upsert"),n(e.aspects.collection.bulkInsert,"bulkInsert"),n(e.aspects.collection.bulkUpsert,"bulkUpsert")},e.prototype.hookEvents=function(e){var t,n=this,r=(t=Date.now(),function(){var e=Date.now(),n="+"+(e-t)+"ms";return t=e,n});e.events.onBootstrapStart((function(){n.logger.info(n.prefix,x(d.b.BootstrapStart),r())})),e.events.onBootstrapEnd((function(){n.logger.info(n.prefix,x(d.b.BootstrapEnd),r())})),e.events.onSchemaMigrationStart((function(){n.logger.info(n.prefix,x(d.b.SchemaMigrationStart),r())})),e.events.onSchemaMigrationEnd((function(){n.logger.info(n.prefix,x(d.b.SchemaMigrationEnd),r())})),e.events.onRegisterModel((function(e){var t,i=e.schema;return(t=n.logger).info.apply(t,Object(l.__spreadArray)(Object(l.__spreadArray)([n.prefix,x(d.b.RegisterModel)],Object(l.__read)(w({schema:JSON.stringify(i)}))),[r()]))})),e.events.onRegisterPlugin((function(e){var t,i=e.name;return(t=n.logger).info.apply(t,Object(l.__spreadArray)(Object(l.__spreadArray)([n.prefix,x(d.b.RegisterPlugin)],Object(l.__read)(w({name:i}))),[r()]))})),e.events.onReady((function(e){var t,i=e.version,o=e.tableNames;return(t=n.logger).info.apply(t,Object(l.__spreadArray)(Object(l.__spreadArray)([n.prefix,x(d.b.Ready)],Object(l.__read)(w({version:i,collections:Array.from(o)}))),[r()]))}))},e.prototype.formatQueryConditions=function(e){var t=e.offset,n=e.limit,r=e.order,i=e.exp;return{OFFSET:t||void 0,LIMIT:n,ORDER_BY:r&&"("+r.path+" "+r.type+")",WHERE:"("+this.formatQueryConditionsExp(i)+")"}},e}(),j=O;!function(e){e.storage="storage",e.collection="collection",e.query="query",e.migration="migration",e.engine="engine"}(v||(v={})),function(e){e.tableGetAll="table#getAll",e.tableGetAllKeys="table#getAllKeys",e.tableGet="table#get",e.tableInsert="table#insert",e.tableUpsert="table#upsert",e.tableDelete="table#delete",e.tableClear="table#clear",e.tableBulkUpsert="table#bulkUpsert",e.tableBulkDelete="table#bulkDelete",e.tableQuery="table#query",e.tableCreateIndex="table#createIndex",e.tableDeleteIndex="table#deleteIndex",e.indexGet="index#get",e.indexGetAll="index#getAll",e.indexGetAllKeys="index#getAllKeys",e.cursorNext="cursor#next",e.cursorValue="cursor#value",e.cursorUpdate="cursor#update",e.cursorDelete="cursor#delete",e.transactionCommit="transaction#commit",e.transactionRollback="transaction#rollback",e.databaseClose="database#close",e.databaseCreateTable="database#createTable",e.databaseDeleteTable="database#deleteTable",e.engineOpenDB="engine#openDB",e.engineDeleteDB="engine#deleteDB"}(b||(b={})),function(e){e[e.success=0]="success",e[e.fail=1]="fail"}(y||(y={}));var k=function(){function e(e,t){this.module=v.engine,this.actionExecuteState=0,this.status=0,this.time=new Date,this.action=e,this.cost=t}return e.prototype.markError=function(e){this.errorMsg=e.message,this.actionExecuteState=1,this.status=1},e}(),T=function(){function e(e,t){this.module=v.collection,this.status=0,this.actionExecuteState=0,this.write={count:0},this.read={count:0},this.delete={count:0},this.fail={count:0,reasons:[]},this.time=new Date,this.action=e,this.cost=t}return e.prototype.increment=function(e,t){void 0===t&&(t=1),this[e].count+=t},e.prototype.error=function(e){this.actionExecuteState=1,this.status=1,this.increment("fail"),this.fail.reasons.push(e.name)},e}(),E=Symbol("begin");function S(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}var A=function(){function e(e){var t=this,n=void 0===e?{}:e,r=n.disabled,i=void 0!==r&&r,o=n.onEvent,a=n.onCollectionEvent,s=n.onEngineEvent;this.name="MonitorPlugin",this.begin=function(e){e.timings.set(E,new Date)},this.reportReadEvent=function(e,n){t.reportCollectionEvent(e,n,(function(r){return Object(l.__awaiter)(t,void 0,void 0,(function(){var t,i;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return e.return?[4,e.return]:[3,2];case 1:t=o.sent(),i="has"===n?!t:null===t,r.increment("read",i?0:1),o.label=2;case 2:return[2]}}))}))}))},this.reportBatchReadEvent=function(e,n){t.reportCollectionEvent(e,n,(function(n){return Object(l.__awaiter)(t,void 0,void 0,(function(){var t,r,i;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return e.return?(r=(t=n).increment,i=["read"],[4,e.return]):[3,2];case 1:r.apply(t,i.concat([o.sent().length])),o.label=2;case 2:return[2]}}))}))}))},this.reportWriteEvent=function(e,n){t.reportCollectionEvent(e,n,(function(n){return Object(l.__awaiter)(t,void 0,void 0,(function(){var t,r,i;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return e.return?(r=(t=n).increment,i=["write"],[4,e.return]):[3,2];case 1:r.apply(t,i.concat([null===o.sent()?0:1])),o.label=2;case 2:return[2]}}))}))}))},this.reportBatchWriteEvent=function(e,n){t.reportCollectionEvent(e,n,(function(n){return Object(l.__awaiter)(t,void 0,void 0,(function(){var t,r,i;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return e.return?(r=(t=n).increment,i=["write"],[4,e.return]):[3,2];case 1:r.apply(t,i.concat([o.sent().length])),o.label=2;case 2:return[2]}}))}))}))},this.reportDeleteEvent=function(e,n){t.reportCollectionEvent(e,n,(function(n){return Object(l.__awaiter)(t,void 0,void 0,(function(){var t,r,i;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return e.return?(r=(t=n).increment,i=["delete"],[4,e.return]):[3,2];case 1:r.apply(t,i.concat([null===o.sent()?0:1])),o.label=2;case 2:return[2]}}))}))}))},this.reportBatchDeleteEvent=function(e,n){t.reportCollectionEvent(e,n,(function(n){return Object(l.__awaiter)(t,void 0,void 0,(function(){var t,r,i;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return e.return?(r=(t=n).increment,i=["delete"],[4,e.return]):[3,2];case 1:r.apply(t,i.concat([o.sent().length])),o.label=2;case 2:return[2]}}))}))}))},this.disabled=i,this.onEvent=o,this.onCollectionEvent=a,this.onEngineEvent=s}return e.prototype.register=function(e){var t,n,r,i,o,a,s,c,u=this;if(!this.disabled){var f=e.aspects,h=f.collection,p=f.engine,d=function(e){h[e].before(v.begin).after((function(t){return u.reportReadEvent(t,e)}))},v=this;try{for(var y=Object(l.__values)(S("get","has","first","last")),m=y.next();!m.done;m=y.next()){d(m.value)}}catch(e){t={error:e}}finally{try{m&&!m.done&&(n=y.return)&&n.call(y)}finally{if(t)throw t.error}}var _=function(e){h[e].before(g.begin).after((function(t){return u.reportBatchReadEvent(t,e)}))},g=this;try{for(var w=Object(l.__values)(S("entries","keys","values","update")),x=w.next();!x.done;x=w.next()){_(x.value)}}catch(e){r={error:e}}finally{try{x&&!x.done&&(i=w.return)&&i.call(w)}finally{if(r)throw r.error}}var O=function(e){h[e].before(j.begin).after((function(t){return u.reportWriteEvent(t,e)}))},j=this;try{for(var k=Object(l.__values)(S("upsert","insert")),T=k.next();!T.done;T=k.next()){O(T.value)}}catch(e){o={error:e}}finally{try{T&&!T.done&&(a=k.return)&&a.call(k)}finally{if(o)throw o.error}}var E=function(e){h[e].before(A.begin).after((function(t){return u.reportBatchWriteEvent(t,e)}))},A=this;try{for(var D=Object(l.__values)(S("bulkUpsert","bulkInsert","update")),C=D.next();!C.done;C=D.next()){E(C.value)}}catch(e){s={error:e}}finally{try{C&&!C.done&&(c=D.return)&&c.call(D)}finally{if(s)throw s.error}}h.delete.before(this.begin).after((function(e){return u.reportDeleteEvent(e,"delete")})),h.clear.before(this.begin).after((function(e){return u.reportBatchDeleteEvent(e,"clear")})),p.openDB.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.engineOpenDB)})),p.deleteDB.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.engineDeleteDB)}));var I=p.database,M=p.table,R=p.transaction,P=p.index,N=p.cursor;I.close.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.databaseClose)})),I.createTable.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.databaseCreateTable)})),I.deleteTable.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.databaseDeleteTable)})),M.get.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableGet)})),M.getAll.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableGetAll)})),M.getAllKeys.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableGetAllKeys)})),M.insert.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableInsert)})),M.upsert.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableUpsert)})),M.delete.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableDelete)})),M.clear.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableClear)})),M.bulkDelete.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableBulkDelete)})),M.bulkUpsert.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableBulkUpsert)})),M.query.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableQuery)})),M.createIndex.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableCreateIndex)})),M.deleteIndex.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.tableDeleteIndex)})),R.commit.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.transactionCommit)})),R.rollback.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.transactionRollback)})),P.get.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.indexGet)})),P.getAll.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.indexGetAll)})),P.getAllKeys.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.indexGetAllKeys)})),N.delete.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.cursorDelete)})),N.update.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.cursorUpdate)})),N.next.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.cursorNext)})),N.value.before(this.begin).after((function(e){return u.reportEngineEvent(e,b.cursorValue)}))}},e.prototype.dispose=function(e){throw new p.b({storage:e})},e.prototype.reportEngineEvent=function(e,t){var n,r,i=e.timings.get(E)||new Date,o=Date.now()-i.getTime(),a=new k(t,o);e.error&&a.markError(e.error),null===(n=this.onEvent)||void 0===n||n.call(this,a),null===(r=this.onEngineEvent)||void 0===r||r.call(this,a)},e.prototype.reportCollectionEvent=function(e,t,n){var r,i;return Object(l.__awaiter)(this,void 0,void 0,(function(){var o,a,s;return Object(l.__generator)(this,(function(c){switch(c.label){case 0:return o=e.timings.get(E)||new Date,a=Date.now()-o.getTime(),s=new T(t,a),e.error?(s.error(e.error),[3,3]):[3,1];case 1:return[4,n(s,e)];case 2:c.sent(),c.label=3;case 3:return null===(r=this.onEvent)||void 0===r||r.call(this,s),null===(i=this.onCollectionEvent)||void 0===i||i.call(this,s),[2]}}))}))},e}(),D=n("85d0a7609b"),C=n.n(D),I=n("9fb5ff8c6f"),M=function(){function e(e,t,n,r){var i,o=this;this.mode=e,this.proxyCursor=t,this.direction=n,this.engineAspects=r,this.delete=void 0,this.update=void 0,e!==h.i.READ_ONLY&&(this.delete=function(){return o.getProxyCursorWithMode().delete()},this.update=function(e){return o.getProxyCursorWithMode().update(e)}),(null===(i=this.engineAspects)||void 0===i?void 0:i.cursor)&&this.applyAspectPatch()}return e.prototype[Symbol.asyncIterator]=function(){return new R(this)},e.prototype.next=function(){return Object(l.__awaiter)(this,void 0,void 0,(function(){var e;return Object(l.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.proxyCursor.continue()];case 1:return(e=t.sent())?(this.proxyCursor=e,[2,this]):[2,null]}}))}))},e.prototype.value=function(){return this.proxyCursor.value},e.prototype.getProxyCursorWithMode=function(){return this.proxyCursor},e.prototype.applyAspectPatch=function(){var e,t=null===(e=this.engineAspects)||void 0===e?void 0:e.cursor;if(this.mode!==h.i.READ_ONLY){null==t||t.delete.patch(this,"delete"),null==t||t.update.patch(this,"update")}null==t||t.next.patch(this,"next"),null==t||t.value.patch(this,"value")},e}(),R=function(){function e(e){this.currentCursor=e}return e.prototype[Symbol.asyncIterator]=function(){return this},e.prototype.next=function(){return Object(l.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(l.__generator)(this,(function(n){switch(n.label){case 0:return this.currentCursor?(e=this.currentCursor.value(),t=this,[4,this.currentCursor.next()]):[2,{value:void 0,done:!0}];case 1:return t.currentCursor=n.sent(),[2,{value:e,done:!1}]}}))}))},e}(),P=function(){function e(e,t,n,r){this.table=e,this.proxyIndex=t,this.mode=n,this.engineAspects=r,this.name=t.name,this.keyPath=t.keyPath,this.unique=t.unique,(null==r?void 0:r.index)&&this.applyAspectPatch()}return e.prototype.getAll=function(e){return this.proxyIndex.getAll(e)},e.prototype.getAllKeys=function(e,t){return this.proxyIndex.getAllKeys(e,t)},e.prototype.get=function(e){return this.proxyIndex.get(e)},e.prototype.openCursor=function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n;return Object(l.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.proxyIndex.openCursor(e,t)];case 1:return(n=r.sent())?[2,new M(this.mode,n,null!=t?t:"next")]:[2,null]}}))}))},e.prototype.applyAspectPatch=function(){var e,t=null===(e=this.engineAspects)||void 0===e?void 0:e.index,n=this;null==t||t.get.patch(n,"get"),null==t||t.getAll.patch(n,"getAll"),null==t||t.getAllKeys.patch(n,"getAllKeys"),null==t||t.openCursor.patch(n,"openCursor")},e}(),N=function(){function e(e,t,n,r){this.mode=e,this.objectStore=t,this.engineAspects=n,this.transaction=r,this.createIndex=void 0,this.delete=void 0,this.bulkDelete=void 0,this.clear=void 0,this.insert=void 0,this.upsert=void 0,this.deleteIndex=void 0,this.bulkUpsert=void 0,this.keyPath=t.keyPath,this.autoIncrement=t.autoIncrement,this.tableName=t.name,this.indexNames=Object(l.__spreadArray)([],Object(l.__read)(t.indexNames)),this.initWriteFun(e),(null==n?void 0:n.table)&&this.applyAspectPatch()}return e.prototype.query=function(){throw new Error("query Method is not support for IDB.")},e.prototype.supports=function(e){return!["query","bulkDelete"].includes(e)},e.prototype.index=function(e){var t=this.objectStore.index(e);return new P(this,t,this.mode,this.engineAspects)},e.prototype.getAll=function(e){return this.objectStore.getAll(e)},e.prototype.getAllKeys=function(e,t){return this.objectStore.getAllKeys(e,t)},e.prototype.get=function(e){var t;return null!==(t=this.objectStore.get(e))&&void 0!==t?t:null},e.prototype.openCursor=function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n;return Object(l.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.objectStore.openCursor(e,t)];case 1:return(n=r.sent())?[2,new M(this.mode,n,null!=t?t:"next")]:[2,null]}}))}))},e.prototype.initWriteFun=function(e){var t=this;e===h.i.VERSION_CHANGE&&(this.createIndex=this.createIndexFun,this.deleteIndex=function(e){return t.getProxyObjectStoreWithMode().deleteIndex(e)}),e!==h.i.READ_ONLY&&(this.delete=function(e){return t.getProxyObjectStoreWithMode().delete(e)},this.bulkDelete=function(e){throw new Error("bulkDelete Method is not support for IDB.")},this.clear=function(){return t.getProxyObjectStoreWithMode().clear()},this.insert=function(e){return t.getProxyObjectStoreWithMode().add(e)},this.upsert=function(e){return t.getProxyObjectStoreWithMode().put(e)},this.bulkUpsert=function(e){var n=t.getProxyObjectStoreWithMode(),r=e.reduce((function(e,t){return e.push(n.put(t)),e}),[]);return Promise.all(r)})},e.prototype.createIndexFun=function(e,t,n){var r=this.getProxyObjectStoreWithMode();return new P(this,r.createIndex(e,t,n),this.mode)},e.prototype.getProxyObjectStoreWithMode=function(){return this.objectStore},e.prototype.applyAspectPatch=function(){var e,t=null===(e=this.engineAspects)||void 0===e?void 0:e.table;if(this.mode===h.i.READ_ONLY)return null==t||t.get.patch(this,"get"),null==t||t.getAll.patch(this,"getAll"),null==t||t.getAllKeys.patch(this,"getAllKeys"),null==t||t.index.patch(this,"index"),void(null==t||t.openCursor.patch(this,"openCursor"));this.mode===h.i.VERSION_CHANGE&&(null==t||t.createIndex.patch(this,"createIndex"),null==t||t.deleteIndex.patch(this,"deleteIndex")),null==t||t.delete.patch(this,"delete"),null==t||t.insert.patch(this,"insert"),null==t||t.upsert.patch(this,"upsert"),null==t||t.bulkUpsert.patch(this,"bulkUpsert"),null==t||t.clear.patch(this,"clear")},e}(),B=function(){function e(e,t){this.proxyTransaction=e,this.engineAspects=t,this.tables=e.objectStoreNames,this.mode=e.mode,(null==t?void 0:t.transaction)&&this.applyAspectPatch()}return e.prototype.table=function(e){var t=this.proxyTransaction.objectStore(e);return new N(this.mode,t,this.engineAspects,this)},e.prototype.commit=function(){return Object(l.__awaiter)(this,void 0,void 0,(function(){return Object(l.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.proxyTransaction.done];case 1:return e.sent(),[3,3];case 2:return e.sent(),[2,!1];case 3:return[2,!0]}}))}))},e.prototype.rollback=function(){return Object(l.__awaiter)(this,void 0,void 0,(function(){return Object(l.__generator)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,1,,6]),this.proxyTransaction.abort(),[3,6];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.proxyTransaction.done];case 3:return e.sent(),[3,5];case 4:return e.sent(),[2,!0];case 5:return[2,!1];case 6:return[2,!0]}}))}))},e.prototype.applyAspectPatch=function(){var e,t=null===(e=this.engineAspects)||void 0===e?void 0:e.transaction,n=this;null==t||t.commit.patch(n,"commit"),null==t||t.rollback.patch(n,"rollback"),null==t||t.table.patch(n,"table")},e}(),L=function(){function e(e,t){this.idbDatabase=e,this.engineAspect=t,this.name=e.name,this.version=e.version,this.tableNames=Object(l.__spreadArray)([],Object(l.__read)(e.objectStoreNames)),this.engineAspect&&this.applyAspectPatch()}return e.prototype.setVersionChangeListener=function(e){this.idbDatabase.addEventListener("versionchange",(function(t){e(t.oldVersion,t.newVersion)}))},e.prototype.close=function(){this.idbDatabase.close()},e.prototype.createTable=function(e,t){var n=this.idbDatabase.createObjectStore(e,t);return new N(h.i.VERSION_CHANGE,n)},e.prototype.deleteTable=function(e){this.idbDatabase.deleteObjectStore(e)},e.prototype.transaction=function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n;return Object(l.__generator)(this,(function(r){return n=this.idbDatabase.transaction(e,t),[2,new B(n,this.engineAspect)]}))}))},e.prototype.table=function(e,t){return Object(l.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(l.__generator)(this,(function(o){return n=this.idbDatabase.transaction([e],t),r=new B(n),i=n.objectStore(e),[2,new N(t,i,this.engineAspect,r)]}))}))},e.prototype.applyAspectPatch=function(){var e,t=null===(e=this.engineAspect)||void 0===e?void 0:e.database;null==t||t.deleteTable.patch(this,"deleteTable"),null==t||t.createTable.patch(this,"createTable"),null==t||t.transaction.patch(this,"transaction"),null==t||t.table.patch(this,"table"),null==t||t.close.patch(this,"close")},e}();var q,U=function(e,t){var n=typeof e,r=typeof t;if(isNaN(e)||isNaN(t))return indexedDB.cmp(e,t);if(n===r){if("number"===n||"bigint"===n)return e-t;if("string"===n)return function(e,t){return e<t?-1:+(e>t)}(e,t)}return e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():indexedDB.cmp(e,t)},F=p.a.withDefaultMessage("IndexedDB is missing in global context. Consider using `indexeddbshim` for better compatibility or `fake-indexeddb` in your test environment."),z=function(){function e(){if("undefined"==typeof indexedDB)throw new F;this.cmp=U}return e.prototype.deleteDB=function(e){return Object(l.__awaiter)(this,void 0,void 0,(function(){return Object(l.__generator)(this,(function(t){return[2,I.a(e)]}))}))},e.prototype.setAspects=function(e){this.engineAspects=e,this.engineAspects.openDB.patch(this,"openDB"),this.engineAspects.deleteDB.patch(this,"deleteDB")},e.prototype.openDB=function(e,t,n,r){return Object(l.__awaiter)(this,void 0,void 0,(function(){var t,i=this;return Object(l.__generator)(this,(function(o){switch(o.label){case 0:return[4,I.b(e,n,{upgrade:function(e,t,n,o){var a;null===(a=null==r?void 0:r.upgrade)||void 0===a||a.call(r,new L(e,i.engineAspects),t,n,new B(o))},blocked:function(){var e;return null===(e=null==r?void 0:r.blocked)||void 0===e?void 0:e.call(r)},blocking:function(){var e;return null===(e=null==r?void 0:r.blocking)||void 0===e?void 0:e.call(r)},terminated:function(){var e;return null===(e=null==r?void 0:r.terminated)||void 0===e?void 0:e.call(r)}})];case 1:return t=o.sent(),[2,new L(t,this.engineAspects)]}}))}))},e}(),V=n("cc55475c1f"),G=(n("56683198d5"),n("73b854064b"),n("bd29e2df90")),K=n.n(G),W=n("ab5eb40518"),H=n.n(W),Q=n("1b4cdd6a36"),J=n.n(Q);n("3bf1976a4f"),n("8e7cce0ada"),n("2a6f332b5e"),n("ef3480511c"),n("826dc923b3"),n("ef51bf4fed"),n("af802ec74b"),n("6e20b6a7d8");var Y;!function(e){e[e.indexDB=1]="indexDB",e[e.nativeDB=2]="nativeDB"}(Y||(Y={}));var X=(q={},C()(q,Y.indexDB,z),C()(q,Y.nativeDB,V.a),q),$=function(){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:Y.indexDB,disableAutoOpen:!0};o()(this,e),this.config=n;var r=X[n.type];this.storage=new d.c({name:null!==(t=n.databaseName)&&void 0!==t?t:f.DB_NAME,version:5,engine:new r,databaseSchema:'{"name":"unknown","collections":[{"name":"DocumentData","key":{"path":"key"},"indices":[{"name":"secretId","path":"secretId","unique":false},{"name":"globalPadId","path":"globalPadId","unique":false},{"name":"subGlobalPadId","path":"subGlobalPadId","unique":false},{"name":"subDocType","path":"subDocType","unique":false},{"name":"version","path":"version","unique":false},{"name":"type","path":"type","unique":false},{"name":"uid","path":"uid","unique":false},{"name":"subId","path":"subSheetId","unique":false},{"name":"chunkId","path":"chunkId","unique":false}],"properties":["key","secretId","globalPadId","subGlobalPadId","subDocType","version","type","uid","subId","chunkId","taskId","data","docType","docStatus","createTimestamp","lastModifyTimestamp","dataVersion","isDefaultChunk"]},{"name":"DocumentEntities","key":{"path":"key"},"indices":[],"properties":["key","data"]},{"name":"NewDocumentIds","key":{"path":"globalPadId"},"indices":[],"properties":["globalPadId","secretId","documentType","localPadId","isCreated"]},{"name":"DocumentStatus","key":{"path":"globalPadId"},"indices":[{"name":"secretId","path":"secretId","unique":false},{"name":"uid","path":"uid","unique":false}],"properties":["globalPadId","secretId","uid","lastSyncTimestamp","lastErrorTimestamp"]},{"name":"DriveData","key":{"path":"driveId"},"indices":[{"name":"fileId","path":"fileId","unique":false},{"name":"objKey","path":"objKey","unique":false},{"name":"secretId","path":"secretId","unique":false},{"name":"uid","path":"uid","unique":false}],"properties":["driveId","fileId","objKey","secretId","uid","type","lastRequestTime","fileInfo","previewInfo"]},{"name":"OfflineData","key":{"path":"key"},"indices":[{"name":"secretId","path":"secretId","unique":false},{"name":"globalPadId","path":"globalPadId","unique":false},{"name":"subGlobalPadId","path":"subGlobalPadId","unique":false},{"name":"subDocType","path":"subDocType","unique":false},{"name":"version","path":"version","unique":false},{"name":"type","path":"type","unique":false},{"name":"uid","path":"uid","unique":false},{"name":"subId","path":"subSheetId","unique":false},{"name":"chunkId","path":"chunkId","unique":false}],"properties":["key","secretId","globalPadId","subGlobalPadId","subDocType","version","type","uid","subId","chunkId","taskId","data","docType","docStatus","createTimestamp","lastModifyTimestamp","dataVersion","isDefaultChunk"]},{"name":"PadInfo","key":{"path":"key"},"indices":[{"name":"secretId","path":"secretId","unique":false},{"name":"globalPadId","path":"globalPadId","unique":false},{"name":"uid","path":"uid","unique":false}],"properties":["key","secretId","globalPadId","uid","addListTimestamp","attribute","childrenLength","clientVersion","createTimestamp","creator","creatorDomain","icon","docPolicy","docPrivilege","thumbnail","docType","docTypeDesc","url","domainId","dver","folder","folderId","folderPolicy","folderPrivilege","isDeleted","isManualOffline","isMyCreated","isMydoc","isOfflineCache","isRencent","isShareToMe","hasSnapShot","isStar","isAddedToMy","isCollected","isOwner","isPinned","isShortcut","isUserChangeTitle","lastSyncTimestamp","lastBrowseTimestamp","lastCollectTimestamp","lastDeleteTimestamp","lastModifyTimestamp","lastModifyNick","lastModifyUid","lastPinnedTimestamp","listInfoType","listType","offlineCommiting","offlineCommitSuccessd","originFolderId","ownerNick","ownerUid","padId","parentFolderId","parents","privilege","status","title","type","hasLocalChanges","docSubType","officialAuthInfo","personalizeInfo","nativeEngineStatusRecord","nativeEngineDocPrivilege","data","ext","isOfflineCacheByNative","mimeType","ownerVipInfo","documentResourceCacheStatus","cacheStatus","cacheStatusTs"]},{"name":"Users","key":{"path":"key"},"indices":[{"name":"tinyId","path":"tinyId","unique":false},{"name":"nowUserIndex","path":"nowUserIndex","unique":false},{"name":"docId","path":"docId","unique":false},{"name":"pageType","path":"pageType","unique":false},{"name":"wedriveUin","path":"wedriveUin","unique":false},{"name":"wedocOpenId","path":"wedocOpenId","unique":false}],"properties":["key","tinyId","nowUserIndex","docId","pageType","wedriveUin","wedocOpenId","corpId","corpName","englishName","loginType","openId","uidSource","uin","userId","userName","userPic","updateTime","settings","bindUserInfo","vipUserInfo"]}]}',disableAutoOpen:n.disableAutoOpen,plugins:this.getPlugins(n),supportCompatibleOpen:!0})}return s()(e,[{key:"dispose",value:function(){this.storage.close()}},{key:"init",value:function(){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var n,r=setTimeout((function(){var n,r;null===(r=null===(n=t.config.logger)||void 0===n?void 0:n.error)||void 0===r||r.call(n,"dababase init timeout."),e(!1)}),null!==(n=t.config.timeout)&&void 0!==n?n:15e3);t.storage.open().then((function(){e(!0),clearTimeout(r)})).catch((function(){e(!1),clearTimeout(r)}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"getPlugins",value:function(e){var t,n=[];if(e.logger){var r=new j({logger:e.logger,disabled:!!e.disabled,verbose:!!e.verbose});n.push(r)}return e.monitorReporter&&n.push((t=e.monitorReporter,new A({onEvent:function(e){t.report("storageActionResultAndCost",{action:e.action,module:e.module,retCode:e.actionExecuteState,cost:e.cost,time:e.time.getTime(),errorMsg:e.errorMsg})}}))),n}}]),e}();function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J()(e);if(t){var i=J()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H()(this,n)}}var ee="TencentDocsBackup",te=function(e){K()(n,e);var t=Z(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:Y.indexDB,disableAutoOpen:!0};return o()(this,n),(e=t.call(this,r)).config=r,e}return s()(n)}($);function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J()(e);if(t){var i=J()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H()(this,n)}}var re=function(){function e(t){o()(this,e),this.collection=t}return s()(e,[{key:"getChanges",value:function(e,t){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.collection.where({uid:e.uid,secretId:e.secretId,subGlobalPadId:e.subGlobalPadId,subDocType:{in:e.subDocType},type:{in:e.types},docType:e.docType,dataVersion:e.dataVersion,subId:{in:e.subId?(new Array).concat(e.subId):void 0},chunkId:{in:e.chunkId?(new Array).concat(e.chunkId):void 0},version:{">=":null==t?void 0:t.startVersion,"<=":null==t?void 0:t.endVersion}}),(null==t?void 0:t.orderPath)&&r.orderBy(t.orderPath,t.sortOrder),(null==t?void 0:t.limit)&&r.take(t.limit),n.abrupt("return",r.values());case 4:case"end":return n.stop()}}),n,this)})))}},{key:"upsertChanges",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.bulkUpsert(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"deleteChanges",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){var n,r,i,o,a,s,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.uid,r=e.secretId,i=e.globalPadId,o=e.types,a=e.taskIds,s=e.subGlobalPadId,c=e.subDocType,t.next=3,this.collection.where({uid:n,secretId:r,globalPadId:i,subGlobalPadId:s,subDocType:{in:c},type:{in:o},taskId:{in:a},version:{">":e.startVersion||Number.MIN_SAFE_INTEGER,"<":e.endVersion||Number.MAX_SAFE_INTEGER}}).clear();case 3:case"end":return t.stop()}}),t,this)})))}}]),e}(),ie=function(e){K()(n,e);var t=ne(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n)}(re),oe=function(e){K()(n,e);var t=ne(n);function n(){return o()(this,n),t.apply(this,arguments)}return s()(n)}(re),ae=function(){function e(t){o()(this,e),this.collection=t}return s()(e,[{key:"popDocumentId",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){var n,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.where({documentType:e}).first();case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return r=n.globalPadId,t.next=8,this.collection.delete(r);case 8:if(i=t.sent,r===i){t.next=11;break}return t.abrupt("return",null);case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,this)})))}},{key:"upsertDocumentIds",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.bulkUpsert(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"countDocumentIds",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.collection.where({documentType:e}).count());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"deleteDocumentIds",value:function(){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collection.clear();case 2:case"end":return e.stop()}}),e,this)})))}}]),e}(),se=function(){function e(t){o()(this,e),this.collection=t}return s()(e,[{key:"getStatus",value:function(e,t){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.collection.where({secretId:t,uid:e}).first();case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n,this)})))}},{key:"upsertStatus",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.upsert(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"deleteStatus",value:function(e,t){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.collection.where({secretId:t,uid:e}).clear();case 2:case"end":return n.stop()}}),n,this)})))}}]),e}(),ce=function(){function e(t){o()(this,e),this.collection=t}return s()(e,[{key:"getEntity",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.get(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"upsertEntities",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.bulkUpsert(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"deleteEntity",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.delete(e);case 2:case"end":return t.stop()}}),t,this)})))}}]),e}(),ue=function(){function e(t){o()(this,e),this.collection=t}return s()(e,[{key:"getPadInfo",value:function(e,t){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getPadInfos({uid:e,secretId:t});case 2:if(0!==(r=n.sent).length){n.next=5;break}return n.abrupt("return",null);case 5:return n.abrupt("return",r.shift());case 6:case"end":return n.stop()}}),n,this)})))}},{key:"getPadInfos",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.collection.where({uid:e.uid,secretId:{in:e.secretId?(new Array).concat(e.secretId):void 0}}),t.abrupt("return",n.values());case 2:case"end":return t.stop()}}),t,this)})))}},{key:"upsertPadInfo",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.upsert(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"updateField",value:function(e,t,n){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function r(){var i;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.collection.where({uid:e,secretId:t}).first();case 2:if(i=r.sent){r.next=5;break}return r.abrupt("return");case 5:return Object.assign(i,n),r.next=8,this.collection.upsert(i);case 8:case"end":return r.stop()}}),r,this)})))}},{key:"deletePadInfo",value:function(e,t){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.collection.where({uid:e,secretId:t}).clear();case 2:case"end":return n.stop()}}),n,this)})))}}]),e}(),le=function(){function e(t){o()(this,e),this.collection=t}return s()(e,[{key:"getUserInfoByTinyId",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.where({tinyId:e}).last();case 2:if(!(n=t.sent)){t.next=5;break}return t.abrupt("return",n);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getUserInfoByNowUserIndex",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.where({nowUserIndex:e}).last();case 2:if(!(n=t.sent)){t.next=5;break}return t.abrupt("return",n);case 5:return t.abrupt("return",this.getUserInfoLastByAll());case 6:case"end":return t.stop()}}),t,this)})))}},{key:"getUserInfoByDocInfo",value:function(e,t){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.collection.where({pageType:e,docId:t}).last();case 2:if(!(r=n.sent)){n.next=5;break}return n.abrupt("return",r);case 5:return n.abrupt("return",this.getUserInfoLastByAll());case 6:case"end":return n.stop()}}),n,this)})))}},{key:"addUserInfo",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.collection.get(e.key);case 3:return n=t.sent,this.collection.upsert(Object.assign(Object.assign({},n),e)),t.abrupt("return",!0);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))}},{key:"updateUserInfo",value:function(e,t){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function n(){var r,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.collection.where(e).values();case 3:if(0!==(r=n.sent).length){n.next=6;break}return n.abrupt("return",!1);case 6:return i=r.map((function(e){return Object.assign(Object.assign({},e),t)})),n.next=9,this.collection.bulkUpsert(i);case 9:return n.abrupt("return",!0);case 12:return n.prev=12,n.t0=n.catch(0),n.abrupt("return",!1);case 15:case"end":return n.stop()}}),n,this,[[0,12]])})))}},{key:"getUserInfoLastByAll",value:function(){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.collection.last();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})))}}]),e}(),fe=function(){function e(t){o()(this,e),this.collection=t}return s()(e,[{key:"getDriveData",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.collection.where(Object.assign({},e)).first());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getDriveDatas",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.collection.where(Object.assign({},e)).values());case 1:case"end":return t.stop()}}),t,this)})))}},{key:"insertDriveDatas",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.bulkUpsert(e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"deleteDriveDatas",value:function(e){return Object(l.__awaiter)(this,void 0,void 0,u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.collection.where(Object.assign({},e)).clear();case 2:case"end":return t.stop()}}),t,this)})))}}]),e}()},"744ee0b6cd":function(e,t,n){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},"8ac5678f09":function(e,t,n){"use strict";var r=n("94b54f38ee"),i=n("58bffcf462");e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},"8e26833a3b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisposableNone=void 0,t.DisposableNone=Object.freeze({dispose:function(){}})},"8e87c39c39":function(e,t,n){"use strict";var r=n("f9f6cd81c2");e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},"94b54f38ee":function(e,t,n){"use strict";var r=n("d3e4db71be"),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function a(e){return void 0===e}function s(e){return"[object ArrayBuffer]"===i.call(e)}function c(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function f(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:s,isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer)},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:c,isPlainObject:u,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return c(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:f,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},"9ab1857893":function(e,t,n){"use strict";n.r(t),n.d(t,"Emitter",(function(){return s}));var r=n("d7c625d1f2"),i=n("c7db5dbe42"),o=function(){function e(t){this.element=t,this.next=e.Undefined,this.prev=e.Undefined}return e.Undefined=new e(void 0),e}(),a=function(){function e(){this.first=o.Undefined,this.last=o.Undefined,this.mSize=0}return Object.defineProperty(e.prototype,"size",{get:function(){return this.mSize},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return this.first===o.Undefined},e.prototype.clear=function(){this.first=o.Undefined,this.last=o.Undefined,this.mSize=0},e.prototype.unshift=function(e){return this.insert(e,!1)},e.prototype.push=function(e){return this.insert(e,!0)},e.prototype.shift=function(){if(this.first!==o.Undefined){var e=this.first.element;return this.remove(this.first),e}},e.prototype.pop=function(){if(this.last!==o.Undefined){var e=this.last.element;return this.remove(this.last),e}},e.prototype[Symbol.iterator]=function(){var e;return Object(r.__generator)(this,(function(t){switch(t.label){case 0:e=this.first,t.label=1;case 1:return e===o.Undefined?[3,3]:[4,e.element];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}}))},e.prototype.insert=function(e,t){var n=this,r=new o(e);if(this.first===o.Undefined)this.first=r,this.last=r;else if(t){var i=this.last;this.last=r,r.prev=i,i.next=r}else{var a=this.first;this.first=r,r.next=a,a.prev=r}this.mSize+=1;var s=!1;return function(){s||(s=!0,n.remove(r))}},e.prototype.remove=function(e){if(e.prev!==o.Undefined&&e.next!==o.Undefined){var t=e.prev;t.next=e.next,e.next.prev=t,e.next=o.Undefined,e.prev=o.Undefined}else e.prev===o.Undefined&&e.next===o.Undefined?(this.first=o.Undefined,this.last=o.Undefined):e.next===o.Undefined?(this.last=this.last.prev,this.last.next=o.Undefined,e.prev=o.Undefined):e.prev===o.Undefined&&(this.first=this.first.next,this.first.prev=o.Undefined,e.next=o.Undefined);this.mSize-=1},e}(),s=function(){function e(e){this.disposed=!1,this.options=e}return Object.defineProperty(e.prototype,"event",{get:function(){var e=this;return this.mEvent||(this.mEvent=function(t,n,r){var o,s,c;e.listeners||(e.listeners=new a);var u=e.listeners.isEmpty();u&&(null===(o=e.options)||void 0===o?void 0:o.onFirstListenerAdd)&&e.options.onFirstListenerAdd(e);var l=e.listeners.push(n?[t,n]:t);u&&(null===(s=e.options)||void 0===s?void 0:s.onFirstListenerDidAdd)&&e.options.onFirstListenerDidAdd(e),(null===(c=e.options)||void 0===c?void 0:c.onListenerDidAdd)&&e.options.onListenerDidAdd(e,t,n);var f={dispose:function(){var t;e.disposed||(l(),(null===(t=e.options)||void 0===t?void 0:t.onLastListenerRemove)&&(e.listeners&&!e.listeners.isEmpty()||e.options.onLastListenerRemove(e)));Object(i.markTracked)(f)},disposableId:"event"};return Array.isArray(r)&&r.push(f),Object(i.trackDisposable)(f),f}),this.mEvent},enumerable:!1,configurable:!0}),e.prototype.fire=function(e){var t,n;if(this.listeners){this.deliveryQueue||(this.deliveryQueue=new a);try{for(var i=Object(r.__values)(this.listeners),o=i.next();!o.done;o=i.next()){var s=o.value;this.deliveryQueue.push([s,e])}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}for(;this.deliveryQueue.size>0;){var c=Object(r.__read)(this.deliveryQueue.shift(),2),u=(s=c[0],c[1]);try{"function"==typeof s?s.call(void 0,u):s[0].call(s[1],u)}catch(e){console.error(e)}}}},e.prototype.dispose=function(){this.listeners&&this.listeners.clear(),this.deliveryQueue&&this.deliveryQueue.clear(),this.disposed=!0},e}()},"9ae390a68c":function(e,t,n){"use strict";var r=n("94b54f38ee"),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},"9c60cb7ff5":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n("d7c625d1f2"),i=function(e){function t(t,n){for(var r=this,i=t,o={cause:n};o.cause&&o.cause instanceof Error;)i=t+"\n\t "+n,o=o.cause;return(r=e.call(this,i)||this).cause=n,r.name=r.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(r,r.constructor):r.stack=(new Error).stack,Object.setPrototypeOf(r,r.constructor.prototype),r}return Object(r.__extends)(t,e),t}(Error),o={withDefaultMessage:function(e,t){return function(n){function i(r,i){var o=n.call(this,r||t||"",i)||this;return o.name=e,Object.setPrototypeOf(o,o.constructor.prototype),o}return Object(r.__extends)(i,n),i}(i)},withMessageCreator:function(e,t){return function(n){function i(r,i){var o=n.call(this,t(r),i)||this;return o.name=e,Object.setPrototypeOf(o,o.constructor.prototype),o}return Object(r.__extends)(i,n),i}(i)}},a=(o.withDefaultMessage("AssertionError","the asserted condition is invalid"),o.withMessageCreator("UnimplementedError",(function(e){return e?"called with arguments: "+JSON.stringify(e):"called with nothing"})));var s=function(e){0}},"9cc8fbe3ef":function(e,t,n){e.exports=n("c5371f6846")},"9e41b0871b":function(e,t,n){"use strict";var r=n("eec87fff73"),i=n("39a4b3c3c1");e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},a6ef31917d:function(e,t,n){"use strict";function r(e,t){return Object.prototype.toString.call(t)==="[object ".concat(e,"]")}function i(e){return r("Boolean",e)}function o(e){return r("Number",e)}function a(e){return r("String",e)}function s(e){return r("Function",e)}function c(e){return r("Array",e)}function u(e){return r("Date",e)}function l(e){return r("RegExp",e)}function f(e){return r("Object",e)}function h(e){return r("Error",e)}n.r(t),n.d(t,"isType",(function(){return r})),n.d(t,"isBoolean",(function(){return i})),n.d(t,"isNumber",(function(){return o})),n.d(t,"isString",(function(){return a})),n.d(t,"isFunction",(function(){return s})),n.d(t,"isArray",(function(){return c})),n.d(t,"isDate",(function(){return u})),n.d(t,"isRegExp",(function(){return l})),n.d(t,"isObject",(function(){return f})),n.d(t,"isError",(function(){return h}))},ac1e2b0319:function(e,t,n){"use strict";var r=n("94b54f38ee");function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},ad26985843:function(e,t,n){"use strict";var r=n("94b54f38ee");e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},b512c0eccb:function(e,t,n){"use strict";n.r(t),n.d(t,"BaseBackoff",(function(){return V})),n.d(t,"ConstantBackoff",(function(){return K})),n.d(t,"CustomBackoff",(function(){return oe})),n.d(t,"IterableBackoff",(function(){return ce})),n.d(t,"REQUEST_ERROR_CODE",(function(){return r})),n.d(t,"RetryPolicy",(function(){return Y})),n.d(t,"createNativeRequestInstance",(function(){return q})),n.d(t,"createNetworkRequestInstance",(function(){return ne})),n.d(t,"default",(function(){return ue})),n.d(t,"nativeRequest",(function(){return U})),n.d(t,"networkRequest",(function(){return re}));n("c6244f7705"),n("56683198d5"),n("73b854064b");var r,i,o=n("9132715560"),a=n.n(o),s=n("6a364eb35c"),c=n.n(s),u=n("bd29e2df90"),l=n.n(u),f=n("ab5eb40518"),h=n.n(f),p=n("1b4cdd6a36"),d=n.n(p),v=n("3ef2352f0b"),b=n.n(v),y=(n("8aebbf296a"),n("85d48ef22b"),n("081c8cafea"),n("d7c625d1f2")),m=(n("4a871f4295"),n("e8b2c0f5e8"),n("3bf1976a4f"),n("85d0a7609b")),_=n.n(m),g=(n("7b8243a880"),n("8e7cce0ada"),n("29f8c5f672"),n("2a6f332b5e"),n("d66c2b8c37"),n("47ca619755"),n("c14c4f06d8"),n("229fddc286"),n("7a5536c9bf")),w=n.n(g),x=(n("af802ec74b"),n("9cc8fbe3ef")),O=n.n(x);n("b8217400dc"),n("e6f68cdf2e"),n("6c6f26abf4");!function(e){e.aborted="ECONNABORTED",e.network="ERR_NETWORK",e.timeout="ETIMEDOUT",e.badRequest="ERR_BAD_REQUEST",e.badResponse="ERR_BAD_RESPONSE"}(r||(r={})),function(e){e[e.unknown=-1]="unknown",e[e.success=200]="success"}(i||(i={}));function j(e){return{data:e,status:i.success,statusText:"Success"}}function k(e){return{data:[],status:i.unknown,statusText:e}}var T=function(){function e(){a()(this,e),this.interceptors=[]}return c()(e,[{key:"add",value:function(e){this.interceptors.push(e)}},{key:"proceed",value:function(e){return Object(y.__awaiter)(this,void 0,void 0,b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(this.interceptors),this.fillBuildInInterceptors(n,e),t.abrupt("return",this.dispatch(e,n,0));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"dispatch",value:function(e,t,n){var r=this;if(n>=t.length){var i=j([]);return Promise.resolve(i)}return t[n].intercept((function(){return r.dispatch(e,t,n+1)}),e)}}]),e}(),E=function(){function e(){var t,n;a()(this,e),this.canUseNativeAndroid=(null===(t=globalThis.mqq)||void 0===t?void 0:t.android)&&(null===(n=globalThis._mqqWebViewJSInterface)||void 0===n?void 0:n.invoke),this.currentSeqId=0,this.reqCallbacks=new Map}return c()(e,[{key:"JSApiCallback",value:function(e){var t=this.reqCallbacks.get(e.callbackId);if(!t)throw new Error("TypeError:[ark-request] the reqCallback of response[".concat(e.callbackId,"] can't found!"));t.callback(e)}},{key:"invokeNative",value:function(e,t,n,r){var i,o=null!=n?n:{},a=o.command;if(r){var s=this.createReqSeq();this.reqCallbacks.set(s,{callback:r,command:a,startTime:Date.now()}),o.callbackId=s}this.canUseNativeAndroid?this.invokeNativeAndroid(e,t,o):null===(i=globalThis.mqq)||void 0===i||i.invoke(e,t,o)}},{key:"invokeNativeAndroid",value:function(e,t,n){var r,i="jsbridge://".concat(encodeURIComponent(e),"/").concat(encodeURIComponent(t));n&&(i+="?p=".concat(encodeURIComponent(JSON.stringify(n)))),null===(r=globalThis._mqqWebViewJSInterface)||void 0===r||r.invoke(i)}},{key:"createReqSeq",value:function(){return this.currentSeqId+=1}}]),e}();globalThis.jsApi||(globalThis.jsApi=new E,globalThis.JSApiCallback||(globalThis.JSApiCallback=globalThis.jsApi.JSApiCallback.bind(globalThis.jsApi)));var S=globalThis.jsApi,A=function(){function e(){a()(this,e)}return c()(e,[{key:"invoke",value:function(e){return new Promise((function(t,n){if(!e.namespace)throw new Error("jsapi, namespace is null.");var r=e.params||{},i=e.callback?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t(j(n))}:void 0;try{S.invokeNative(e.namespace,e.method,r,i),i||t(j([]))}catch(e){n(k("Error:[ark-request] Jsapi invokeNative fail."))}}))}}]),e}();function D(e){return"[object Function]"===Object.prototype.toString.call(e)}var C,I,M=function(){function e(){a()(this,e)}return c()(e,[{key:"invoke",value:function(e){return Object(y.__awaiter)(this,void 0,void 0,b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(globalThis.mqq){t.next=2;break}throw new Error("UnknownError:[ark-request] mqq channel is undefined.");case 2:if(e.namespace){t.next=4;break}throw new Error("TypeError:[ark-request] mqq invoke has no namespace!");case 4:if(n=globalThis.mqq[e.namespace],!(r=null==n?void 0:n[e.method])||!D(r)){t.next=10;break}return t.next=9,this.innerModuleInvoke(r,e.params,e.callback);case 9:case 12:return t.abrupt("return",t.sent);case 10:return t.next=12,this.innerCoreInvoke(globalThis.mqq.invoke,e);case 13:case"end":return t.stop()}}),t,this)})))}},{key:"innerModuleInvoke",value:function(e,t,n){return new Promise((function(r,i){var o=[];t&&o.push(t),n&&o.push((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r(j(t))}));try{e.apply(void 0,o),n||r(j([]))}catch(e){i(k("Error:[ark-request] Mqq invoke module fail."))}}))}},{key:"innerCoreInvoke",value:function(e,t){return new Promise((function(n,r){try{e(t.namespace,t.method,t.params,(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n(j(t))}))}catch(e){r(k("Error:[ark-request] Mqq invoke core[".concat(t.namespace,".").concat(t.method,"] fail.")))}}))}}]),e}();!function(e){e.mqq="mqq",e.jsapi="jsapi"}(I||(I={}));var R={schema:"mqq",channels:(C={},_()(C,I.mqq,M),_()(C,I.jsapi,A),C)},P=function(){function e(){a()(this,e)}return c()(e,[{key:"intercept",value:function(e,t){return Object(y.__awaiter)(this,void 0,void 0,b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.schema){e.next=2;break}throw Error("TypeError[ark-request]: the schema of request(".concat(t.namespace,".").concat(t.method,") is undefined."));case 2:if(n=R.channels[t.schema]){e.next=5;break}throw Error("TypeError[ark-request]: can't match strategy to handle request(".concat(t.schema,".").concat(t.namespace,".").concat(t.method,")."));case 5:return e.next=7,(new n).invoke(t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))}}]),e}();function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var B=function(e){l()(n,e);var t=N(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"fillBuildInInterceptors",value:function(e){return e.push(new P),e}}]),n}(T),L=function(){function e(t){a()(this,e),this.interceptors=t}return c()(e,[{key:"invoke",value:function(e){this.interceptors.proceed(Object.assign({schema:R.schema},e)).then((function(t){var n,r,i,o=t.data;null===(r=e.callback)||void 0===r||(n=r).call.apply(n,[e].concat(w()(o))),e.removeCallback&&(null===(i=e.params)||void 0===i?void 0:i.callbackId)&&S.reqCallbacks.delete(e.params.callbackId)}))}},{key:"register",value:function(e,t){if(!D(t))throw new Error("TypeError:[ark-request] The handler[".concat(e,"] to register is not function."));this.getNativeChannel()[this.generateCallbackName(e)]=t}},{key:"unregister",value:function(e){this.getNativeChannel()[this.generateCallbackName(e)]=void 0}},{key:"notify",value:function(e){var t=this.getNativeChannel()[this.generateCallbackName(e)];if(!D(t))throw new Error("TypeError:[ark-request] The handler[".concat(e,"] is not function!"));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.apply(void 0,r)}},{key:"generateCallbackName",value:function(e){return e}},{key:"getNativeChannel",value:function(){return window}}]),e}();function q(){var e=new B;return new L(e)}var U=q(),F={maxRetry:3},z=function(){function e(){a()(this,e)}return c()(e,[{key:"intercept",value:function(e,t){return Object(y.__awaiter)(this,void 0,void 0,b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.request(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}]),e}(),V=function(){function e(t){a()(this,e),this.duration=t,this.attempt=0}return c()(e,[{key:"next",value:function(e){throw new Error("Method not implemented.")}}]),e}();function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var K=function(e){l()(n,e);var t=G(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,e)).limit=r,i}return c()(n,[{key:"next",value:function(){return void 0===this.limit?this:this.attempt>=this.limit?void 0:(this.attempt+=1,this)}}]),n}(V);new K(0,0);var W=function(){return!1},H=function(){return!1},Q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;a()(this,e),this.errorFilter=t,this.resultFilter=n}return c()(e,[{key:"invoke",value:function(e,t){return Object(y.__awaiter)(this,void 0,void 0,b.a.mark((function n(){var r,i;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e(t);case 3:if(r=n.sent,this.resultFilter(r)){n.next=6;break}return n.abrupt("return",{success:r});case 6:return n.abrupt("return",{value:r});case 9:if(n.prev=9,n.t0=n.catch(0),i=n.t0,this.errorFilter(i)){n.next=15;break}throw i;case 15:return n.abrupt("return",{error:i});case 16:case"end":return n.stop()}}),n,this,[[0,9]])})))}}]),e}(),J=function(e){var t=Math.max(e,0);return 0===t?Promise.resolve():new Promise((function(e){return setTimeout(e,t)}))},Y=function(){function e(t){var n;a()(this,e),this.options=t,this.executor=new Q(t.errorFilter,t.resultFilter),this.backoffFactory=null!==(n=t.backoffFactory)&&void 0!==n?n:new K(0,t.maxRetry)}return c()(e,[{key:"execute",value:function(e){return Object(y.__awaiter)(this,void 0,void 0,b.a.mark((function t(){var n,r,i,o,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:return r={attempt:n,startTimestamp:Date.now()},t.next=4,this.executor.invoke(e,r);case 4:if(!("success"in(i=t.sent))){t.next=7;break}return t.abrupt("return",i.success);case 7:if(!(n<this.options.maxRetry)){t.next=14;break}if(o={attempt:n+1,result:i},!(a=this.backoffFactory.next(o))){t.next=13;break}return t.next=13,J(a.duration);case 13:return t.abrupt("continue",17);case 14:if(!("error"in i)){t.next=16;break}throw i.error;case 16:return t.abrupt("return",i.value);case 17:n++,t.next=1;break;case 20:case"end":return t.stop()}}),t,this)})))}}]),e}(),X=function(e){var t;return null===(t=e.message)||void 0===t?void 0:t.includes("timeout")},$=function(){function e(){a()(this,e)}return c()(e,[{key:"intercept",value:function(e,t){return Object(y.__awaiter)(this,void 0,void 0,b.a.mark((function n(){var r,i=this;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.maxRetry<=0)){n.next=2;break}return n.abrupt("return",e());case 2:return r=new Y(Object.assign({maxRetry:F.maxRetry,errorFilter:X},t)),n.abrupt("return",r.execute((function(t){return Object(y.__awaiter)(i,void 0,void 0,b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:return(r=n.sent).retryContext=t,n.abrupt("return",r);case 5:case"end":return n.stop()}}),n)})))})));case 4:case"end":return n.stop()}}),n)})))}}]),e}();function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var ee=function(e){l()(n,e);var t=Z(n);function n(){return a()(this,n),t.apply(this,arguments)}return c()(n,[{key:"fillBuildInInterceptors",value:function(e,t){var n;return(null!==(n=t.maxRetry)&&void 0!==n?n:F.maxRetry)>0&&e.push(new $),e.push(new z),e}}]),n}(T),te=function(){function e(t,n){a()(this,e),this.defaults=t,this.interceptors=n}return c()(e,[{key:"get",value:function(e,t){return this.dispatchRequest("get",e,void 0,t)}},{key:"post",value:function(e,t,n){return this.dispatchRequest("post",e,t,n)}},{key:"request",value:function(e){return this.interceptors.proceed(Object.assign(Object.assign({},this.defaults),e))}},{key:"dispatchRequest",value:function(e,t,n,r){var i,o=null!=r?r:{},a=null!==(i=o.headers)&&void 0!==i?i:{};return o.contentType&&(a["Content-Type"]=o.contentType),this.interceptors.proceed(Object.assign(Object.assign(Object.assign({},this.defaults),o),{url:t,method:e,headers:a,data:null!=n?n:o.data}))}}]),e}();function ne(e){var t=new ee;return new te(e||F,t)}var re=ne();function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var oe=function(e){l()(n,e);var t=ie(n);function n(e){var r,i;return a()(this,n),(r=t.call(this,null!==(i=e({attempt:0}))&&void 0!==i?i:0)).generator=e,r}return c()(n,[{key:"next",value:function(e){var t=this.generator(e);if(t)return this.duration=t,this}}]),n}(V);function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d()(e);if(t){var i=d()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var se=function(e){return Math.max(null!=e?e:0,0)},ce=function(e){l()(n,e);var t=ae(n);function n(e){var r,i;return a()(this,n),(r=t.call(this,null!==(i=se(e[0]))&&void 0!==i?i:0)).durations=e,r}return c()(n,[{key:"next",value:function(){if(!(this.attempt>=this.durations.length))return this.duration=se(this.durations[this.attempt]),this.attempt+=1,this}}]),n}(V),ue={}},b7cba4397b:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=n("d7a2286b24").default.getInstance()},baa9fada98:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationTokenSource=void 0;var r=n("4bae7615ca"),i=function(){function e(){this.isCancelled=!1}return e.prototype.cancel=function(){this.isCancelled||(this.isCancelled=!0)},Object.defineProperty(e.prototype,"isCancellationRequested",{get:function(){return this.isCancelled},enumerable:!1,configurable:!0}),e}(),o=function(){function e(){this.innertoken=void 0}return Object.defineProperty(e.prototype,"token",{get:function(){return this.innertoken||(this.innertoken=new i),this.innertoken},enumerable:!1,configurable:!0}),e.prototype.cancel=function(){this.innertoken?this.innertoken instanceof i&&this.innertoken.cancel():this.innertoken=r.CancellationTokenState.Cancelled},e.prototype.dispose=function(){this.cancel()},e}();t.CancellationTokenSource=o},bf3ff0c91e:function(e,t,n){"use strict";var r=n("94b54f38ee");e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},c5371f6846:function(e,t,n){"use strict";var r=n("94b54f38ee"),i=n("d3e4db71be"),o=n("e9fad8bcaf"),a=n("4498e7a6fb");var s=function e(t){var n=new o(t),s=i(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(n("58bffcf462"));s.Axios=o,s.Cancel=n("1cc181d9f8"),s.CancelToken=n("f42cbfcd9d"),s.isCancel=n("052105b914"),s.VERSION=n("31a899c9f3").version,s.all=function(e){return Promise.all(e)},s.spread=n("39cb95f88d"),s.isAxiosError=n("ad26985843"),e.exports=s,e.exports.default=s},c564d09b70:function(e,t,n){"use strict";n.d(t,"a",(function(){return i.h})),n.d(t,"b",(function(){return x}));var r=n("d7c625d1f2"),i=n("52bbb6cc53"),o=n("9c60cb7ff5"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.isQuotaExceeded=function(){return this.message.includes("QuotaExceededError")},t}(o.a.withMessageCreator("DatabaseConnectError",(function(e){return"failed to connect to database '"+e+"'."}))),s=o.a.withMessageCreator("CollectionNotFoundError",(function(e){return"model '"+e+"' is not registered, please register it before use it."})),c=o.a.withMessageCreator("DataMigrationError",(function(e){return"failed to perform data migration, versionChange: "+e.oldVersion+" -> "+e.newVersion+"."})),u=o.a.withMessageCreator("IncorrectTransactionModeError",(function(e){return"use error transaction type["+e+"]."})),l=o.a.withMessageCreator("NoTableInfoError",(function(e){return"'"+e+"' is not a valid model with table info injected, please ensure the model class is decorated by @table(), @field() etc."})),f=(o.a.withDefaultMessage("EmptyTableInfoError","table without any field declare, please define model use [field] decorator."),o.a.withMessageCreator("InvalidWhereInValueError",(function(e){return"there is an error in your where clause of field '"+e.path+"'."+e.op+", the value must be an array."}))),h=o.a.withMessageCreator("UnsupportedWhereOperatorError",(function(e){return"unsupported where operator '"+e+"', current supported operators are >, >=, <, <=, =, !=, in, nin."})),p=o.a.withDefaultMessage("OrderByKeyError","can not order value that is not Key: 'Key = number | string | Date | BufferSource | Key[]'."),d=o.a.withMessageCreator("DatabaseInternalError",(function(e){return"there is an internal error of database, reason: "+e+"."})),v=(o.a.withMessageCreator("QueryJobError",(function(e){return"failed to execute query job, reason: "+e+"."})),o.a.withMessageCreator("PluginError",(function(e){return'an error has occurred on plugin "'+e.name+'"": '+e.message+"."})),o.a.withDefaultMessage("TransactionCommitError","failed to commit transaction.")),b=o.a.withDefaultMessage("UpdateMigrationChangeInfoError","failed to update migration change info"),y=o.a.withMessageCreator("ExecuteDataUpgradeError",(function(e){return"failed to execute data upgrade on collection '"+e+"'."})),m=o.a.withMessageCreator("UnexpectedClosedError",(function(e){return"database "+e+" is unexpectedly closed by browser, this could happen when disk is unavailable or the page is shutdown."})),_=Symbol.for("TABLE_KEY"),g=function(){function e(){}return e.saveTableInfo=function(e,t){Object.defineProperty(t,_,{configurable:!0,value:Object(r.__assign)({},e)})},e.getTableInfo=function(e){return e[_]},e.getFirstTableInfoAlongPrototypeChain=function(e){var t=this.getTableInfo(e),n=Object.assign({},t);return n.properties=new Map(n.properties),n},e.getTableName=function(e){var t=this.getTableInfo(e.prototype);if(!(null==t?void 0:t.tableName))throw new l(e.name);return t.tableName},e.addTablePropertyInfo=function(t,n){var r=e.getOrCreateTableInfo(t);if(r.properties.has(n.name)){var i=r.properties.get(n.name);Object.assign(n,i)}r.properties.set(n.name,n),this.saveTableInfo(r,t)},e.createPropertyInfo=function(e,t){return{name:e,alias:t,isUnionKey:!1}},e.convertTableInfoToSchema=function(e){if(!e.tableName)return null;var t,n=Object(r.__spreadArray)([],Object(r.__read)(e.properties.values())),o=n.filter((function(e){return e.isIndex})).map((function(e){var t,n;return{name:null!==(t=e.alias)&&void 0!==t?t:e.name,path:null!==(n=e.alias)&&void 0!==n?n:e.name,unique:e.isUnique}}));return t=!e.autoIncrement&&e.keyPath?{path:1===e.keyPath.length?e.keyPath[0]:e.keyPath}:{generator:i.b.AutoIncrement},{properties:n.map((function(e){var t;return null!==(t=e.alias)&&void 0!==t?t:e.name})),indices:o,key:t,name:e.tableName}},e.createDefaultTableInfo=function(){return{tableName:null,autoIncrement:!0,properties:new Map}},e.getOrCreateTableInfo=function(t){if(Object.prototype.hasOwnProperty.call(t,_))return t[_];var n=e.createDefaultTableInfo(),i=t[_];return i&&(n.properties=new Map(Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__read)(i.properties)),Object(r.__read)(n.properties)))),e.saveTableInfo(n,t),n},e}();let w=()=>({events:{},emit(e,...t){(this.events[e]||[]).forEach((e=>e(...t)))},on(e,t){return(this.events[e]=this.events[e]||[]).push(t),()=>this.events[e]=(this.events[e]||[]).filter((e=>e!==t))}});var x,O;!function(e){e.Ready="Ready",e.Fetal="Fetal",e.Closed="Closed",e.Destroyed="Destroyed",e.Error="Error",e.RegisterModel="RegisterModel",e.RegisterPlugin="RegisterPlugin",e.BootstrapStart="BootstrapStart",e.BootstrapEnd="BootstrapEnd",e.SchemaMigrationStart="SchemaMigrationStart",e.SchemaMigrationEnd="SchemaMigrationEnd",e.VersionChange="VersionChange"}(x||(x={})),function(e){e.CollectionCreated="CollectionCreated",e.ModelLazyMigrationEnd="ModelLazyMigrationEnd",e.PrepareAutoUpgradeEnd="PrepareAutoUpgradeEnd",e.UpdateMigrationChangeInfo="UpdateMigrationChangeInfoEnd",e.StartTransaction="StartTransaction"}(O||(O={}));var j,k=function(){function e(e){var t=this;this.onClosed=function(e){t.eventBus.on(x.Closed,e)},this.eventBus=e}return e.prototype.onReady=function(e){this.eventBus.on(x.Ready,e)},e.prototype.onFetal=function(e){this.eventBus.on(x.Fetal,e)},e.prototype.onError=function(e){this.eventBus.on(x.Error,e)},e.prototype.onRegisterModel=function(e){this.eventBus.on(x.RegisterModel,e)},e.prototype.onRegisterPlugin=function(e){this.eventBus.on(x.RegisterPlugin,e)},e.prototype.onBootstrapStart=function(e){this.eventBus.on(x.BootstrapStart,e)},e.prototype.onBootstrapEnd=function(e){this.eventBus.on(x.BootstrapEnd,e)},e.prototype.onSchemaMigrationStart=function(e){this.eventBus.on(x.SchemaMigrationStart,e)},e.prototype.onSchemaMigrationEnd=function(e){this.eventBus.on(x.SchemaMigrationEnd,e)},e.prototype.onVersionChange=function(e){this.eventBus.on(x.VersionChange,e)},e.prototype.emitError=function(e){this.eventBus.emit(x.Error,e)},e}(),T=function(){function e(){}return e.revealSchema=function(e){var t=g.getTableInfo(e.prototype);return t?g.convertTableInfoToSchema(t):null},e}(),E=function(){function e(e){this.models=[],this.eventBus=e}return e.prototype.register=function(e){if(!this.models.includes(e)){var t=this.getSchema(e);this.models.push(e),this.eventBus.emit(x.RegisterModel,{class:e,schema:t})}},e.prototype.getSchema=function(e){var t=T.revealSchema(e);if(!t){var n=new l(e.name);throw this.eventBus.emit(x.Error,n),new l(e.name)}return t},e.prototype.getSchemaAndRegisterModelIfNeed=function(e){return this.register(e),this.getSchema(e)},e}();function S(e){var t,n,i,o=g.getTableInfo(Object.getPrototypeOf(e));if(!o)return e;var a={};try{for(var s=Object(r.__values)(o.properties.values()),c=s.next();!c.done;c=s.next()){var u=c.value;a[null!==(i=u.alias)&&void 0!==i?i:u.name]=e[u.name]}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a}function A(e,t){var n,i;if(null==e)return null;var o=g.getTableInfo(t.prototype);if(!o)return e;var a=function(e,t){var n,i,o,a={};try{for(var s=Object(r.__values)(t.properties.values()),c=s.next();!c.done;c=s.next()){var u=c.value,l=null!==(o=u.alias)&&void 0!==o?o:u.name;a[u.name]=e[l]}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a}(e,o),s=new t(a);try{for(var c=Object(r.__values)(Object.keys(a)),u=c.next();!u.done;u=c.next()){var l=u.value;void 0!==a[l]&&(s[l]=a[l])}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return s}!function(e){e.FILL="fill",e.HYDRATE="hydrate",e.PAGINATE="paginate",e.FILTER="filter",e.SORT="sort",e.SCAN="scan",e.SCAN_ALL="scan-all",e.INDEX_SCAN="index-scan",e.UNION="union",e.DISTINCT="distinct",e.INTERSECT="intersect"}(j||(j={}));var D=function(){function e(e,t){this.node=e,this.parent=t,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,a;return Object(r.__generator)(this,(function(s){try{for(t=Object(r.__values)(this.node.inputs),n=t.next();!n.done;n=t.next())i=n.value,e.push(i)}catch(e){o={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(o)throw o.error}}return[2]}))}))},e}(),C=function(){function e(e){this.comparer=e}return e.prototype.has=function(e,t){return-1!==this.getOrder(e,t)},e.prototype.getOrder=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+Math.floor((r-n)/2),o=e[i],a=this.comparer.cmp(t,o);if(0===a)return i;a>0?n=i+1:r=i}return-1},e}(),I=function(){function e(e,t){this.node=e,this.parent=t,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,a,s,c,u,l,f,h,p,d,v,b,y,m;return Object(r.__generator)(this,(function(_){t=new C(this.node.comparer);try{for(n=Object(r.__values)(this.context.inputs),i=n.next();!i.done;i=n.next()){o=i.value,a=new Map,s=o.map((function(e){return Object(r.__read)(e,1)[0]})).sort(this.node.comparer.cmp),c=[];try{for(y=void 0,u=Object(r.__values)(o),l=u.next();!l.done;l=u.next())f=l.value,h=Object(r.__read)(f,1),p=h[0],d=t.getOrder(s,p),a.has(d)||(a.set(d,!0),c.push(f))}catch(e){y={error:e}}finally{try{l&&!l.done&&(m=u.return)&&m.call(u)}finally{if(y)throw y.error}}e.push(c)}}catch(e){v={error:e}}finally{try{i&&!i.done&&(b=n.return)&&b.call(n)}finally{if(v)throw v.error}}return[2]}))}))},e}(),M=Symbol("-"),R=Symbol("+"),P=function(){function e(e){var t=this;this.contains=function(e,n){var r=t,i=r.cmp,o=r.lowerOf,a=r.upperOf;if(!t.isValid(e))return!1;var s=e.lowerOpen,c=e.upperOpen,u=i(o(e),n),l=i(a(e),n);return 0===u&&!s||u<0&&l>0||0===l&&!c},this.union=function(e){if(e.length<=1)return e;t.sort(e);for(var n=[],r=e[0],i=1;i<e.length;i++){var o=e[i];t.isOverlapped(r,o)?r=t.wrap(r,o):(n.push(r),r=o)}return n.push(r),n},this.intersect=function(e){var n,i;if(e.length<=1)return e;t.sort(e);var o=e[0];try{for(var a=Object(r.__values)(e),s=a.next();!s.done;s=a.next()){var c=s.value;if(!t.isOverlapped(o,c))return[];o=t.overlap(o,c)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return[o]},this.isValid=function(e){var n=t,r=n.cmp,i=n.lowerOf,o=n.upperOf,a=r(i(e),o(e));return a<0||0===a&&!e.lowerOpen&&!e.upperOpen},this.cmp=function(e,n){return e!==M&&e!==R&&n!==M&&n!==R?t.comparer.cmp(e,n):e===n?0:e===M||n===R?-1:1},this.lowerOf=function(e){return void 0===e.lower?M:e.lower},this.upperOf=function(e){return void 0===e.upper?R:e.upper},this.comparer=e}return e.prototype.isOverlapped=function(e,t){var n,i=this,o=i.cmp,a=i.lowerOf,s=i.upperOf,c=Object(r.__read)([e,t],2),u=c[0],l=c[1],f=o(a(u),a(l));(f>0||0===f&&!u.lowerOpen&&l.lowerOpen)&&(u=(n=Object(r.__read)([l,u],2))[0],l=n[1]);var h=o(s(u),a(l));return h>0||0===h&&!u.upperOpen&&!l.lowerOpen},e.prototype.sort=function(e){var t=this.cmp,n=this.lowerOf;return e.sort((function(e,r){var i=t(n(e),n(r));return 0!==i||e.lowerOpen===r.lowerOpen?i:e.lowerOpen?-1:1}))},e.prototype.wrap=function(e,t){var n=this,i=n.cmp,o=n.lowerOf,a=n.upperOf,s=Object(r.__assign)({},e),c=i(o(e),o(t)),u=i(a(e),a(t));return(c>0||0===c&&!t.lowerOpen)&&(s.lower=t.lower,s.lowerOpen=t.lowerOpen),(u<0||0===u&&!t.upperOpen)&&(s.upper=t.upper,s.upperOpen=t.upperOpen),s},e.prototype.overlap=function(e,t){var n=this,i=n.cmp,o=n.lowerOf,a=n.upperOf,s=Object(r.__assign)({},e),c=i(o(e),o(t)),u=i(a(e),a(t));return(c<0||0===c&&!e.lowerOpen)&&(s.lower=t.lower,s.lowerOpen=t.lowerOpen),(u>0||0===u&&!e.upperOpen)&&(s.upper=t.upper,s.upperOpen=t.upperOpen),s},e}(),N=function(){function e(e,t){this.node=e,this.parent=t,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,a,s,c,u,l;return Object(r.__generator)(this,(function(f){for(t=[],n=this.node,i=[t];n;)n.regroup&&(t=[],i.push(t)),t.push(this.createFilter(n)),n=n.nextFilter;o=function(e){var t=Object(r.__read)(e,2)[1];return i.some((function(e){return e.every((function(e){return e(t)}))}))};try{for(a=Object(r.__values)(this.context.inputs),s=a.next();!s.done;s=a.next())c=s.value,e.push(c.filter(o))}catch(e){u={error:e}}finally{try{s&&!s.done&&(l=a.return)&&l.call(a)}finally{if(u)throw u.error}}return[2]}))}))},e.prototype.createFilter=function(e){var t=new P(e.comparer);return function(n){return e.intervals.some((function(r){if(void 0===n)throw new d("can not do filter on non-hydrated data");var o=Object(i.m)(n,e.path);return Object(i.n)(o)&&t.contains(r,o)}))}},e}();var B=function(){function e(e,t,n){this.node=e,this.parent=t,this.transaction=n,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,a,s,c,u,l=this;return Object(r.__generator)(this,(function(f){switch(f.label){case 0:t=this.transaction.table(this.node.collectionSchema.name),n=function(n){var i;return Object(r.__generator)(this,(function(o){switch(o.label){case 0:return i=n.filter((function(e){return!function(e){return!!Object(r.__read)(e,2)[1]}(e)})),[4,Promise.all(i.map((function(e,n){var o=Object(r.__read)(e,1)[0];return Object(r.__awaiter)(l,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.get(o)];case 1:return e=r.sent(),i[n][1]=e,[2]}}))}))})))];case 1:return o.sent(),e.push(n),[2]}}))},f.label=1;case 1:f.trys.push([1,6,7,8]),i=Object(r.__values)(this.context.inputs),o=i.next(),f.label=2;case 2:return o.done?[3,5]:(a=o.value,[5,n(a)]);case 3:f.sent(),f.label=4;case 4:return o=i.next(),[3,2];case 5:return[3,8];case 6:return s=f.sent(),c={error:s},[3,8];case 7:try{o&&!o.done&&(u=i.return)&&u.call(i)}finally{if(c)throw c.error}return[7];case 8:return[2]}}))}))},e}(),L=function(){function e(e,t,n,r){this.lower=e,this.upper=t,this.lowerOpen=n,this.upperOpen=r}return e.getKeyRange=function(e,t){if(void 0!==t){if(!e.isValid(t))throw new Error("invalid key interval");var n=t.lower,r=t.upper,i=t.lowerOpen,o=t.upperOpen;return n===r?n:void 0!==n&&void 0!==r?IDBKeyRange.bound(n,r,i,o):void 0!==n?IDBKeyRange.lowerBound(n,i):IDBKeyRange.upperBound(r,o)}},e}(),q=function(){function e(e,t){var n=this;this.comparer=t,this.math=new P(t),this.intervals=e.filter((function(e){return n.math.isValid(e)}))}return e.fromWherePredicate=function(t,n){var i,o,a;try{for(var s=Object(r.__values)(Object.keys(t)),c=s.next();!c.done;c=s.next()){var u=c.value,l=t[u];if(void 0!==l){var f=e.fromWhereExp(u,l,n);a=a?a.intersect(f):f}}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return a||this.createFullGroup(n)},e.fromWhereExp=function(t,n,r){var o;if(t===i.k.In||t===i.k.NotIn){if(!Array.isArray(n))throw new f({op:t});var a=n;return t===i.k.In?a.reduce((function(t,n){return t.union(e.fromWhereExp(i.k.Equals,n,r))}),this.createEmptyGroup(r)):a.reduce((function(t,n,o){var a=e.fromWhereExp(i.k.NotEquals,n,r);return o?t.intersect(a):a}),this.createFullGroup(r))}switch(t){case i.k.Equals:o=[new L(n,n,!1,!1)];break;case i.k.NotEquals:o=[new L(void 0,n,!0,!0),new L(n,void 0,!0,!0)];break;case i.k.GreaterThan:o=[new L(n,void 0,!0,!0)];break;case i.k.GreaterOrEqualThan:o=[new L(n,void 0,!1,!0)];break;case i.k.LessThan:o=[new L(void 0,n,!0,!0)];break;case i.k.LessOrEqualThan:o=[new L(void 0,n,!0,!1)];break;default:throw new h(t)}return new e(o,r)},e.prototype.union=function(t){return new e(this.math.union(Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__read)(this.intervals)),Object(r.__read)(t.intervals))),this.comparer)},e.prototype.intersect=function(t){for(var n=this.math,i=n.cmp,o=n.upperOf,a=n.lowerOf,s=n.intersect,c=Object(r.__read)([this.intervals,t.intervals],2),u=c[0],l=c[1],f=Object(r.__read)([0,0],2),h=f[0],p=f[1],d=[];h<u.length;){for(;p<l.length&&i(o(u[h]),a(l[p]))>=0;){var v=s([u[h],l[p]]);d.push.apply(d,Object(r.__spreadArray)([],Object(r.__read)(v))),p+=1}p-=1,h+=1}return new e(d,this.comparer)},e.prototype.contains=function(e){var t=this;return!!this.intervals.find((function(n){return t.math.contains(n,e)}))},e.prototype.isEmpty=function(){return 0===this.intervals.length},e.prototype.isFull=function(){return!!this.intervals.length&&void 0===this.intervals[0].lower&&void 0===this.intervals[0].upper},e.createFullGroup=function(t){return new e([new L(void 0,void 0,!0,!0)],t)},e.createEmptyGroup=function(t){return new e([],t)},e}(),U=L,F=function(){function e(e,t,n){this.node=e,this.parent=t,this.transaction=n,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,o,a,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.node.hydrate?[3,2]:[4,this.scanKeys()];case 1:return t=r.sent(),e.push(t.map((function(e){return[e,void 0]}))),[2];case 2:return(n=this.node.collectionSchema.key.path)?[4,this.scanValues()]:[3,4];case 3:return o=r.sent(),e.push(o.map((function(e){return[Object(i.m)(e,n),e]}))),[2];case 4:return[4,this.scanKeys()];case 5:return a=r.sent(),[4,this.scanValues()];case 6:return s=r.sent(),e.push(a.map((function(e,t){return[e,s[t]]}))),[2]}}))}))},e.prototype.scanKeys=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return e=this.getKeyQueries(),t=this.getIndex(),[4,Promise.all(e.map((function(e){return t.getAllKeys(e)})))];case 1:return[2,n.sent().reduce((function(e,t){return e.push.apply(e,Object(r.__spreadArray)([],Object(r.__read)(t))),e}),[])]}}))}))},e.prototype.scanValues=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return e=this.getKeyQueries(),t=this.getIndex(),[4,Promise.all(e.map((function(e){return t.getAll(e)})))];case 1:return[2,n.sent().reduce((function(e,t){return e.push.apply(e,Object(r.__spreadArray)([],Object(r.__read)(t))),e}),[])]}}))}))},e.prototype.getKeyQueries=function(){var e=new P(this.node.comparer);return this.node.intervals.map((function(t){return U.getKeyRange(e,t)}))},e.prototype.getIndex=function(){var e=this.node,t=e.collectionSchema,n=e.index;return this.transaction.table(t.name).index(n.name)},e}(),z=function(){function e(e,t){this.node=e,this.parent=t,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,a,s,c,u,l,f,h,p,d;return Object(r.__generator)(this,(function(v){if(n=(t=this).context,i=t.node,!(o=n.inputs).length)return[2];if(1===o.length)return e.push(o[0]),[2];a=function(e,t){var n=Object(r.__read)(e,1)[0],o=Object(r.__read)(t,1)[0];return i.comparer.cmp(n,o)},s=new C({cmp:a}),c=this.getSmallestPointers(o).slice();try{for(u=Object(r.__values)(o),l=u.next();!l.done;l=u.next())l.value.sort(a)}catch(e){p={error:e}}finally{try{l&&!l.done&&(d=u.return)&&d.call(u)}finally{if(p)throw p.error}}return f=function(e){return o.every((function(t){return s.has(t,e)}))},h=c.filter(f),e.push(h),[2]}))}))},e.prototype.getSmallestPointers=function(e){return e.reduce((function(e,t){return e.length<t.length?e:t}),this.context.inputs[0])},e}(),V=function(){function e(e,t){this.node=e,this.parent=t,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i,o,a,s,c,u;return Object(r.__generator)(this,(function(l){t=this.node,n=t.offset,i=t.limit;try{for(o=Object(r.__values)(this.context.inputs),a=o.next();!a.done;a=o.next())s=a.value,e.push(s.slice(n,!i||isNaN(i)?void 0:n+i))}catch(e){c={error:e}}finally{try{a&&!a.done&&(u=o.return)&&u.call(o)}finally{if(c)throw c.error}}return[2]}))}))},e}(),G=function(){function e(e,t,n){this.node=e,this.parent=t,this.transaction=n,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,o,a,s;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.node.hydrate?[3,2]:[4,this.scanKeys()];case 1:return t=r.sent(),e.push(t.map((function(e){return[e,void 0]}))),[2];case 2:return(n=this.node.collectionSchema.key.path)?[4,this.scanValues()]:[3,4];case 3:return o=r.sent(),e.push(o.map((function(e){return[Object(i.m)(e,n),e]}))),[2];case 4:return[4,this.scanKeys()];case 5:return a=r.sent(),[4,this.scanValues()];case 6:return s=r.sent(),e.push(a.map((function(e,t){return[e,s[t]]}))),[2]}}))}))},e.prototype.scanKeys=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return e=this.getKeyQueries(),t=this.getTable(),[4,Promise.all(e.map((function(e){return t.getAllKeys(e)})))];case 1:return[2,n.sent().reduce((function(e,t){return e.push.apply(e,Object(r.__spreadArray)([],Object(r.__read)(t))),e}),[])]}}))}))},e.prototype.scanValues=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return e=this.getKeyQueries(),t=this.getTable(),[4,Promise.all(e.map((function(e){return t.getAll(e)})))];case 1:return[2,n.sent().reduce((function(e,t){return e.push.apply(e,Object(r.__spreadArray)([],Object(r.__read)(t))),e}),[])]}}))}))},e.prototype.getKeyQueries=function(){var e=new P(this.node.comparer);return this.node.type===j.SCAN_ALL?[void 0]:this.node.intervals.map((function(t){return U.getKeyRange(e,t)}))},e.prototype.getTable=function(){var e=this.node.collectionSchema;return this.transaction.table(e.name)},e}(),K=function(){function e(e,t){this.node=e,this.parent=t,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,o,a,s,c,u,l,f,h=this;return Object(r.__generator)(this,(function(d){t=this.node,n=t.comparer,o=t.path,a=t.order;try{for(s=Object(r.__values)(this.context.inputs),c=s.next();!c.done;c=s.next())(u=c.value).sort((function(e,t){var s=Object(r.__read)(e,2)[1],c=Object(r.__read)(t,2)[1],u=Object(i.m)(s,o),l=Object(i.m)(c,o),f=h.getComparerByType(n,a);if(Object(i.n)(u)&&Object(i.n)(l))return f(u,l);throw new p})),e.push(u)}catch(e){l={error:e}}finally{try{c&&!c.done&&(f=s.return)&&f.call(s)}finally{if(l)throw l.error}}return[2]}))}))},e.prototype.getComparerByType=function(e,t){return t===i.h.ASCENDING?function(t,n){return e.cmp(t,n)}:function(t,n){return-e.cmp(t,n)}},e}(),W=function(){function e(e,t){this.node=e,this.parent=t,this.context=H(e)}return e.prototype.perform=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return e.push(this.context.inputs.reduce((function(e,t){return e.push.apply(e,Object(r.__spreadArray)([],Object(r.__read)(t))),e}),[])),[2]}))}))},e}();function H(e){return{total:e.children.length,done:0,inputs:[]}}var Q=function(){function e(e,t){this.onRequestSuccess=function(){},this.onRequestFailed=function(){},this.request=e,this.transaction=t,this.jobs=new Map}return e.prototype.exec=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e=this;return Object(r.__generator)(this,(function(t){return this.task||(this.task=new Promise((function(t,n){e.onRequestSuccess=function(n){e.reset(),t(n)},e.onRequestFailed=function(t){return Object(r.__awaiter)(e,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){return this.reset(),n(t),[2]}))}))},e.traverse(e.request.root,(function(t,n){var r=function(e,t,n){var r;return(r={},r[j.FILL]=function(){return new D(e,t)},r[j.DISTINCT]=function(){return new I(e,t)},r[j.FILTER]=function(){return new N(e,t)},r[j.HYDRATE]=function(){return new B(e,t,n)},r[j.INDEX_SCAN]=function(){return new F(e,t,n)},r[j.INTERSECT]=function(){return new z(e,t)},r[j.PAGINATE]=function(){return new V(e,t)},r[j.SCAN]=function(){return new G(e,t,n)},r[j.SCAN_ALL]=function(){return new G(e,t,n)},r[j.SORT]=function(){return new K(e,t)},r[j.UNION]=function(){return new W(e,t)},r)[e.type]()}(t,n&&e.jobs.get(n)||null,e.transaction);e.jobs.set(t,r),t.children.length||e.beginJob(r).catch((function(t){e.onRequestFailed(t)}))}))}))),[2,this.task]}))}))},e.prototype.beginJob=function(e){var t;return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:n=(null===(t=e.parent)||void 0===t?void 0:t.context.inputs)||[],r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.perform(n)];case 2:return r.sent(),this.finishJob(e,n).catch((function(e){o.onRequestFailed(e)})),[3,4];case 3:return i=r.sent(),this.onRequestFailed(i),[3,4];case 4:return[2]}}))}))},e.prototype.finishJob=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i=this;return Object(r.__generator)(this,(function(r){return e.parent&&((n=e.parent.context).done+=1,n.done===n.total&&this.beginJob(e.parent).catch((function(e){i.onRequestFailed(e)}))),e.node===this.request.root&&this.onRequestSuccess(t),[2]}))}))},e.prototype.reset=function(){this.jobs=new Map,this.task=void 0,this.onRequestSuccess=function(){},this.onRequestFailed=function(){}},e.prototype.traverse=function(e,t,n){var i,o;t(e,n);try{for(var a=Object(r.__values)(e.children),s=a.next();!s.done;s=a.next()){var c=s.value;this.traverse(c,t,e)}}catch(e){i={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}},e}(),J=function(){function e(e){this.comparer=e}return e.prototype.rewrite=function(e){return{offset:e.offset,limit:e.limit,order:e.order&&Object(r.__assign)({},e.order),exp:this.rewriteWhereClauses(e.whereClauses)}},e.prototype.rewriteWhereClauses=function(e){var t,n,o,a,s;if(!e.length)return{type:i.e.ALL};var c={type:i.e.OR,exps:[]};try{for(var u=Object(r.__values)(e),l=u.next();!l.done;l=u.next()){var f=l.value,h={type:i.e.AND,exps:[]};try{for(var p=(o=void 0,Object(r.__values)(Object.entries(f))),d=p.next();!d.done;d=p.next()){var v=Object(r.__read)(d.value,2),b=v[0],y=v[1];if(void 0!==y){var m=Object(i.n)(y)?((s={})[i.k.Equals]=y,s):y;this.isEmptyPredicate(m)||h.exps.push({type:i.e.FILTER,predicate:m,path:b,hints:{intervalGroup:q.fromWherePredicate(m,this.comparer),isKey:!1,indices:[]}})}}}catch(e){o={error:e}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}c.exps.push(h)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return c},e.prototype.isEmptyPredicate=function(e){return Object.values(e).every((function(e){return void 0===e}))},e}(),Y=function(){function e(e){this.schema=e,this.indicesMap=new Map,this.warmupIndicesMap()}return e.prototype.bind=function(e){return this.bindQueryHints(e.exp),e},e.prototype.bindQueryHints=function(e){var t,n=this,r=e;r.type!==i.e.AND&&r.type!==i.e.OR?r.type===i.e.FILTER&&(r.hints.isKey=this.schema.key&&Object(i.l)(this.schema.key.path,r.path),r.hints.indices=null!==(t=this.indicesMap.get(r.path))&&void 0!==t?t:[]):r.exps.forEach((function(e){return n.bindQueryHints(e)}))},e.prototype.warmupIndicesMap=function(){var e,t,n,i,o;try{for(var a=Object(r.__values)(this.schema.indices.entries()),s=a.next();!s.done;s=a.next()){var c=Object(r.__read)(s.value,2),u=c[0],l=c[1];l.priority=null!==(o=l.priority)&&void 0!==o?o:-(u+1);var f=Array.isArray(l.path)?l.path:[l.path];try{for(var h=(n=void 0,Object(r.__values)(f)),p=h.next();!p.done;p=h.next()){var d=p.value,v=this.indicesMap.get(d)||[];v.push(l),this.indicesMap.set(d,v)}}catch(e){n={error:e}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}},e}(),X=function(){function e(e,t){this.collectionSchema=e,this.comparer=t}return e.prototype.plan=function(e,t){return{root:this.getRootNode(e,t),aggregate:t}},e.prototype.getRootNode=function(e,t){if(e.exp.type===i.e.NONE)return this.getSkipNode();var n=this.getBaseNode(e.exp);return(t===i.d.ENTRIES||t===i.d.VALUES||e.order)&&(n=this.getHydrateNode([n])),e.order&&(n=this.getSortNode(e.order.path,e.order.type,[n])),(e.offset||e.limit!==i.j)&&(n=this.getPaginateNode(e.offset,e.limit,[n])),n=this.getDistinctNode([n])},e.prototype.getBaseNode=function(e){return e.type===i.e.ALL?this.getScanAllNode():e.type===i.e.NONE?this.getSkipNode():e.type===i.e.FILTER?this.getFilterNode(e):this.getLogicExpNode(e)},e.prototype.getLogicExpNode=function(e){var t,n,o=[];try{for(var a=Object(r.__values)(e.exps),s=a.next();!s.done;s=a.next()){var c=s.value;o.push(c.type===i.e.FILTER?this.getFilterNode(c):this.getLogicExpNode(c))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return e.type===i.e.AND?this.getIntersectNode(o):this.getUnionNode(o)},e.prototype.getFilterNode=function(e){if(!e.path||e.hints.isKey)return this.getScanNode(e.hints.intervalGroup.intervals);var t=e.hints.indices.find((function(t){return Object(i.l)(t.path,e.path)}));return t?this.getIndexScanNode(e.hints.intervalGroup.intervals,t):this.getMemFilterNode(e.hints.intervalGroup.intervals,e.path)},e.prototype.getIntersectNode=function(e){return{type:j.INTERSECT,comparer:this.comparer,children:e}},e.prototype.getDistinctNode=function(e){return void 0===e&&(e=[]),{type:j.DISTINCT,comparer:this.comparer,children:e}},e.prototype.getUnionNode=function(e){return void 0===e&&(e=[]),{type:j.UNION,children:e}},e.prototype.getHydrateNode=function(e){return void 0===e&&(e=[]),{type:j.HYDRATE,collectionSchema:this.collectionSchema,children:e}},e.prototype.getPaginateNode=function(e,t,n){return void 0===n&&(n=[]),{type:j.PAGINATE,offset:e,limit:t,children:n}},e.prototype.getSortNode=function(e,t,n){return void 0===n&&(n=[]),{type:j.SORT,path:e,order:t,comparer:this.comparer,children:n}},e.prototype.getMemFilterNode=function(e,t,n){return{type:j.FILTER,comparer:this.comparer,path:t,intervals:e,regroup:!1,children:[{type:j.HYDRATE,collectionSchema:this.collectionSchema,children:n||[this.getScanAllNode()]}]}},e.prototype.getIndexScanNode=function(e,t){return{type:j.INDEX_SCAN,collectionSchema:this.collectionSchema,index:t,intervals:e,comparer:this.comparer,children:[]}},e.prototype.getScanNode=function(e){return{type:j.SCAN,collectionSchema:this.collectionSchema,intervals:e,comparer:this.comparer,children:[]}},e.prototype.getScanAllNode=function(){return{type:j.SCAN_ALL,collectionSchema:this.collectionSchema,comparer:this.comparer,children:[]}},e.prototype.getSkipNode=function(){return{type:j.FILL,inputs:[[]],children:[]}},e}(),$=function(){function e(){}return e.prototype.eliminate=function(e){var t=e;return t.exp=this.eliminateExp(e.exp),t},e.prototype.eliminateExp=function(e){return e.type===i.e.AND?this.eliminateAndExp(e):e.type===i.e.OR?this.eliminateOrExp(e):e.type===i.e.FILTER?this.eliminateFilterExp(e):e},e.prototype.eliminateAndExp=function(e){var t,n,o={type:i.e.AND,exps:[]};try{for(var a=Object(r.__values)(e.exps),s=a.next();!s.done;s=a.next()){var c=s.value,u=this.eliminateExp(c);if(u.type===i.e.NONE)return{type:i.e.NONE};u.type!==i.e.ALL&&o.exps.push(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o.exps.length?1===o.exps.length?o.exps[0]:o:{type:i.e.ALL}},e.prototype.eliminateOrExp=function(e){var t,n,o={type:i.e.OR,exps:[]};try{for(var a=Object(r.__values)(e.exps),s=a.next();!s.done;s=a.next()){var c=s.value,u=this.eliminateExp(c);if(u.type===i.e.ALL)return{type:i.e.ALL};u.type!==i.e.NONE&&o.exps.push(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o.exps.length?1===o.exps.length?e.exps[0]:o:{type:i.e.NONE}},e.prototype.eliminateFilterExp=function(e){return e.hints.intervalGroup.isEmpty()?{type:i.e.NONE}:e.hints.intervalGroup.isFull()?{type:i.e.ALL}:e},e}();var Z=function(){var e,t=!1;return function(n,i){if("function"!=typeof n[i])throw new Error("memo() must be decorated on one of function properties of target");Object.defineProperty(n,i,Object(r.__assign)(Object(r.__assign)({},Object.getOwnPropertyDescriptor(n,i)),{value:function(){return t||(e=n[i](),t=!0),e}}))}},ee=j.UNION,te=j.INTERSECT,ne=j.HYDRATE,re=j.INDEX_SCAN,ie=j.SCAN,oe=j.SCAN_ALL,ae=j.FILTER;function se(e){return ce(e.root),e}function ce(e){var t,n,i=e.children;try{for(var o=Object(r.__values)(i.entries()),a=o.next();!a.done;a=o.next()){var s=Object(r.__read)(a.value,2),c=s[0],u=s[1];if(ce(u),[te,ee].includes(u.type)&&1===u.children.length){var l=u.children[0];i[c]=l}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}function ue(e){return le(e.root),e}function le(e){var t,n,i,o,a=e.children;try{for(var s=Object(r.__values)(a.entries()),c=s.next();!c.done;c=s.next()){var u=Object(r.__read)(c.value,2),l=u[0],f=u[1];if(le(f),f.type===ne){var h=!1;try{for(var p=(i=void 0,Object(r.__values)(f.children)),d=p.next();!d.done;d=p.next()){(v=d.value).type!==ie&&v.type!==re&&v.type!==oe||(h=!0,v.hydrate=!0)}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}if(h&&1===f.children.length){var v=f.children[0];a[l]=v}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}function fe(e){return e}function he(e){return pe(e.root),e}function pe(e){var t,n;de(e.children,(function(r){if(pe(r),r.type!==ae||!r.children.some((function(e){return e.type===oe})))return!0;if(n){var i=r;!function(e,t){var n=e;for(;e.nextFilter;)n=e.nextFilter;n.nextFilter=t}(n,i),i.regroup=e.type===ee}else t=r;return n=r,!1})),t&&e.children.push(t)}function de(e,t){for(var n=e,r=0,i=n.length-1;r<=i;){var o=n[r];t(o)?r+=1:(n[r]=n[i],n[i]=o,i-=1)}return n.splice(i+1)}function ve(e){return be(e.root),e}function be(e){var t,n,i=e.children;try{for(var o=Object(r.__values)(i.entries()),a=o.next();!a.done;a=o.next()){var s=Object(r.__read)(a.value,2),c=s[0],u=s[1];if(be(u),u.type===te){var l=u.children.find((function(e){var t=e.type;return[ie,re].includes(t)}));if(l){var f=de(u.children,(function(e){return e.type!==ae}));if(f.length){var h={type:ne,collectionSchema:l.collectionSchema,children:[]};i[c]=we.apply(void 0,Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__read)(f)),[h,u]))}}}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}}function ye(e){return[i.d.COUNT,i.d.KEYS].includes(e.aggregate)||ge((function(e){e.type!==ie&&e.type!==re||(e.hydrate=!0)}),e.root),e}function me(e){return ge((function(e){var t,n,i,o,a;if(e.type===te){var s=Number.MIN_SAFE_INTEGER;try{for(var c=Object(r.__values)(e.children),u=c.next();!u.done;u=c.next()){var l=u.value,f=Number.MIN_SAFE_INTEGER;l.type===ie&&(f=0),l.type===re&&l.index.priority&&(f=l.index.priority),s=Math.max(s,f)}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}var h=e.children;try{for(var p=Object(r.__values)(h.entries()),d=p.next();!d.done;d=p.next()){var v=Object(r.__read)(d.value,2),b=v[0];if((l=v[1]).type===re)(f=null!==(a=l.index.priority)&&void 0!==a?a:Number.MIN_SAFE_INTEGER)<s&&(h[b]=_e(l))}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(i)throw i.error}}}}),e.root),e}function _e(e){return{path:e.index.path,intervals:e.intervals,comparer:e.comparer,type:j.FILTER,regroup:!1,children:[{type:j.SCAN_ALL,collectionSchema:e.collectionSchema,comparer:e.comparer,hydrate:!0,children:[]}]}}function ge(e,t,n,i){var o,a;void 0===n&&(n=null),void 0===i&&(i=-1);var s=t.children;try{for(var c=Object(r.__values)(s.entries()),u=c.next();!u.done;u=c.next()){var l=Object(r.__read)(u.value,2),f=l[0];ge(e,l[1],t,f)}}catch(e){o={error:e}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}e(t,n,i)}function we(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=Object(r.__read)(n),a=o[0],s=o.slice(1),c=a;try{for(var u=Object(r.__values)(s),l=u.next();!l.done;l=u.next()){var f=l.value;c.children=[f],c=f}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}return a}var xe,Oe=function(){function e(){}return e.prototype.optimize=function(e){var t=[me,ue,he,se,ve,fe,se,ue,ye];return this.applyAllRules(t,e)},e.prototype.applyAllRules=function(e,t){return e.reduce((function(e,t){return t(e)}),t)},e}(),je=function(){function e(e){void 0===e&&(e=new Map),this.query={offset:0,limit:void 0,order:void 0,whereClauses:[]},this.aliasMap=e}return e.fromRawQuery=function(t,n){var i,o;void 0===n&&(n=new Map);var a=new e(n),s=t.offset,c=t.limit,u=t.order,l=t.whereClauses;a.setOffset(s),a.setLimit(c),u&&a.setOrderBy(u.path,u.type);try{for(var f=Object(r.__values)(l),h=f.next();!h.done;h=f.next()){var p=h.value;a.addWhereClause(p)}}catch(e){i={error:e}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return a},e.prototype.setOffset=function(e){this.query.offset=e},e.prototype.setLimit=function(e){this.query.limit=e},e.prototype.setRange=function(e,t){void 0===e&&(e=0),this.query.offset=e,this.query.limit=t!==i.j?Math.max(0,t-e):i.j},e.prototype.setOrderBy=function(e,t){this.query.order={path:e,type:t||i.h.ASCENDING}},e.prototype.addWhereClause=function(e){var t,n,i;if(this.isValidWhereClause(e)){var o={};try{for(var a=Object(r.__values)(Object.entries(e)),s=a.next();!s.done;s=a.next()){var c=Object(r.__read)(s.value,2),u=c[0],l=c[1];if(void 0!==l)o[null!==(i=this.aliasMap.get(u))&&void 0!==i?i:u]=l}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}this.query.whereClauses.push(o)}},e.prototype.clone=function(t){return void 0===t&&(t=this.aliasMap),e.fromRawQuery(this.query,t)},e.prototype.build=function(){return this.query},e.prototype.isValidWhereClause=function(e){return!!e&&Object.keys(e).length>=0},e}();!function(e){e.DISABLED="disabled",e.ALL="all"}(xe||(xe={}));var ke,Te=function(){function e(e,t){this.collectionName=e,this.context=t.context}return e.toggleOptimization=function(t){e.optimization=t?xe.ALL:xe.DISABLED},e.getOptimizationMode=function(){return e.optimization},e.prototype.exec=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,a,s,c,u,l,f;return Object(r.__generator)(this,(function(h){switch(h.label){case 0:return[4,this.context.getTransaction([this.collectionName],i.i.READ_ONLY)];case 1:return n=h.sent(),[4,this.getModel()];case 2:return o=h.sent(),a=this.getAliasMap(o.class),s=je.fromRawQuery(e,a).build(),(c=n.table(this.collectionName)).supports("query")&&s.whereClauses.length<=1?t!==i.d.VALUES?[3,4]:[4,c.query(s,t)]:[3,7];case 3:return[2,h.sent().map((function(e){var t;return null!==(t=A(e,o.class))&&void 0!==t?t:void 0}))];case 4:return t!==i.d.ENTRIES?[3,6]:[4,c.query(s,t)];case 5:return[2,h.sent().map((function(e){var t,n=Object(r.__read)(e,2);return[n[0],null!==(t=A(n[1],o.class))&&void 0!==t?t:void 0]}))];case 6:return[2,c.query(s,t)];case 7:return[4,this.getQueryPlan(s,t)];case 8:return u=h.sent(),[4,new Q(u,n).exec()];case 9:return l=r.__read.apply(void 0,[h.sent(),1]),f=l[0],t===i.d.COUNT?[2,f.length]:t===i.d.KEYS?[2,f.map((function(e){return Object(r.__read)(e,1)[0]}))]:t===i.d.VALUES?[2,f.map((function(e){var t;return null!==(t=A(Object(r.__read)(e,2)[1],o.class))&&void 0!==t?t:void 0}))]:[2,f.map((function(e){var t,n=Object(r.__read)(e,2);return[n[0],null!==(t=A(n[1],o.class))&&void 0!==t?t:void 0]}))]}}))}))},e.prototype.conditions=function(e){return this.getRewriter().rewrite(e)},e.prototype.explain=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getQueryPlan(e,t)];case 1:return[2,n.sent()]}}))}))},e.prototype.getQueryPlan=function(t,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,c,u,l;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.getRewriter()];case 1:return i=r.sent(),[4,this.getEliminator()];case 2:return o=r.sent(),[4,this.getPlanner()];case 3:return a=r.sent(),[4,this.getBinder()];case 4:return s=r.sent(),[4,this.getOptimizer()];case 5:return c=r.sent(),u=i.rewrite(t),u=s.bind(u),u=o.eliminate(u),l=a.plan(u,n),[2,e.optimization===xe.DISABLED?l:c.optimize(l)]}}))}))},e.prototype.getAliasMap=function(e){var t,n,i=new Map,o=g.getTableInfo(e.prototype);if(!o)return i;try{for(var a=Object(r.__values)(o.properties.values()),s=a.next();!s.done;s=a.next()){var c=s.value;c.alias&&i.set(c.name,c.alias)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i},e.prototype.getModel=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){return[2,this.context.waitForModelRegistered(this.collectionName)]}))}))},e.prototype.getPlanner=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.getModel()];case 1:return e=t.sent(),[2,new X(e.schema,this.context.comparer)]}}))}))},e.prototype.getRewriter=function(){return new J(this.context.comparer)},e.prototype.getEliminator=function(){return new $},e.prototype.getBinder=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.getModel()];case 1:return e=t.sent(),[2,new Y(e.schema)]}}))}))},e.prototype.getOptimizer=function(){return new Oe},e.optimization=xe.ALL,Object(r.__decorate)([Z()],e.prototype,"getModel",null),Object(r.__decorate)([Z()],e.prototype,"getPlanner",null),Object(r.__decorate)([Z()],e.prototype,"getRewriter",null),Object(r.__decorate)([Z()],e.prototype,"getEliminator",null),Object(r.__decorate)([Z()],e.prototype,"getBinder",null),Object(r.__decorate)([Z()],e.prototype,"getOptimizer",null),e}(),Ee=function(){function e(e,t){this.name=e,this.options=t,this.contextGenerator=t.contextGenerator,this.queryBuilder=new je,this.patch()}return e.toggleOptimization=function(e){return Te.toggleOptimization(e)},e.prototype.skip=function(e){return this.queryBuilder.setOffset(e),this},e.prototype.take=function(e){return this.queryBuilder.setLimit(e),this},e.prototype.slice=function(e,t){return this.queryBuilder.setRange(e,t),this},e.prototype.orderBy=function(e,t){return this.queryBuilder.setOrderBy(e,t),this},e.prototype.where=function(e){return this.queryBuilder.addWhereClause(e),this},e.prototype.or=function(e){return this.queryBuilder.addWhereClause(e),this},e.prototype.conditions=function(){var e=this.contextGenerator.spawnContext();return new Te(this.name,{context:e}).conditions(this.queryBuilder.build())},e.prototype.clone=function(){var t=new e(this.name,this.options);return t.queryBuilder=this.queryBuilder.clone(),t},e.prototype.explain=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t;return Object(r.__generator)(this,(function(n){return t=this.contextGenerator.spawnContext(),[2,new Te(this.name,{context:t}).explain(this.queryBuilder.build(),e)]}))}))},e.prototype.count=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return Object(r.__generator)(this,(function(n){return[2,(e=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return[2,new Te(this.name,{context:e}).exec(this.queryBuilder.build(),i.d.COUNT)]}))}))}))]}))}))},e.prototype.entries=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return Object(r.__generator)(this,(function(n){return[2,(e=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return[2,new Te(this.name,{context:e}).exec(this.queryBuilder.build(),i.d.ENTRIES)]}))}))}))]}))}))},e.prototype.keys=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return Object(r.__generator)(this,(function(n){return[2,(e=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return[2,new Te(this.name,{context:e}).exec(this.queryBuilder.build(),i.d.KEYS)]}))}))}))]}))}))},e.prototype.values=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return Object(r.__generator)(this,(function(n){return[2,(e=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return[2,new Te(this.name,{context:e}).exec(this.queryBuilder.build(),i.d.VALUES)]}))}))}))]}))}))},e.prototype.first=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return Object(r.__generator)(this,(function(n){return[2,(e=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){var t,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,new Te(this.name,{context:e}).exec(this.queryBuilder.build(),i.d.VALUES)];case 1:return t=r.sent(),[2,null!==(n=t[0])&&void 0!==n?n:null]}}))}))}))]}))}))},e.prototype.last=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return Object(r.__generator)(this,(function(n){return[2,(e=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(t,void 0,void 0,(function(){var t,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,new Te(this.name,{context:e}).exec(this.queryBuilder.build(),i.d.VALUES)];case 1:return t=r.sent(),[2,null!==(n=t[t.length-1])&&void 0!==n?n:null]}}))}))}))]}))}))},e.prototype.update=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,o=this;return Object(r.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.entries()];case 1:return t=a.sent(),[2,(n=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(o,void 0,void 0,(function(){var o,a,s,c,u,l,f,h,p,d,v,b,y;return Object(r.__generator)(this,(function(m){switch(m.label){case 0:return o=[],[4,n.getTransaction([this.name],i.i.READ_WRITE)];case 1:a=m.sent(),s=a.table(this.name),m.label=2;case 2:m.trys.push([2,8,9,10]),c=Object(r.__values)(t),u=c.next(),m.label=3;case 3:return u.done?[3,7]:(l=Object(r.__read)(u.value,2),f=l[0],h=l[1],[4,s.openCursor(f)]);case 4:return(p=m.sent())?(d=e(h),[4,p.update(S(d))]):[3,6];case 5:m.sent(),o.push(f),m.label=6;case 6:return u=c.next(),[3,3];case 7:return[3,10];case 8:return v=m.sent(),b={error:v},[3,10];case 9:try{u&&!u.done&&(y=c.return)&&y.call(c)}finally{if(b)throw b.error}return[7];case 10:return[2,o]}}))}))}))]}}))}))},e.prototype.clear=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,t,n=this;return Object(r.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.keys()];case 1:return e=o.sent(),[2,(t=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n,o,a,s,c,u,l,f,h,p;return Object(r.__generator)(this,(function(d){switch(d.label){case 0:return n=[],[4,t.getTransaction([this.name],i.i.READ_WRITE)];case 1:return o=d.sent(),(a=o.table(this.name)).supports("bulkDelete")?[4,a.bulkDelete(e)]:[3,3];case 2:return d.sent(),[2,e];case 3:d.trys.push([3,9,10,11]),s=Object(r.__values)(e),c=s.next(),d.label=4;case 4:return c.done?[3,8]:(u=c.value,[4,a.openCursor(u)]);case 5:return(l=d.sent())?[4,l.delete()]:[3,7];case 6:d.sent(),n.push(u),d.label=7;case 7:return c=s.next(),[3,4];case 8:return[3,11];case 9:return f=d.sent(),h={error:f},[3,11];case 10:try{c&&!c.done&&(p=s.return)&&p.call(s)}finally{if(h)throw h.error}return[7];case 11:return[2,n]}}))}))}))]}}))}))},e.prototype.patch=function(){var e=this.options.aspects;e.update.patch(this,"update"),e.clear.patch(this,"clear"),e.count.patch(this,"count"),e.entries.patch(this,"entries"),e.keys.patch(this,"keys"),e.values.patch(this,"values"),e.first.patch(this,"first"),e.last.patch(this,"last"),e.skip.patch(this,"skip"),e.take.patch(this,"take"),e.slice.patch(this,"slice"),e.orderBy.patch(this,"orderBy"),e.where.patch(this,"where"),e.or.patch(this,"or")},e}(),Se=function(){function e(e,t){this.name=e,this.aspects=t.aspects,this.contextGenerator=t.contextGenerator,this.unsliced=new Ee(e,t),this.patch()}return e.prototype.skip=function(e){return this.unsliced.clone().skip(e)},e.prototype.take=function(e){return this.unsliced.clone().take(e)},e.prototype.slice=function(e,t){return this.unsliced.clone().slice(e,t)},e.prototype.orderBy=function(e,t){return this.unsliced.clone().orderBy(e,t)},e.prototype.where=function(e){return this.unsliced.clone().where(e)},e.prototype.or=function(e){return this.unsliced.clone().or(e)},e.prototype.update=function(e){return this.unsliced.update(e)},e.prototype.clear=function(){return this.unsliced.clear()},e.prototype.count=function(){return this.unsliced.count()},e.prototype.entries=function(){return this.unsliced.entries()},e.prototype.keys=function(){return this.unsliced.keys()},e.prototype.values=function(){return this.unsliced.values()},e.prototype.first=function(){return this.unsliced.first()},e.prototype.last=function(){return this.unsliced.last()},e.prototype.get=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(r.__generator)(this,(function(o){return[2,(t=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n,o,a;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.getTransaction([this.name],i.i.READ_ONLY)];case 1:return n=r.sent(),[4,t.waitForModelRegistered(this.name)];case 2:return o=r.sent(),[4,n.table(this.name).get(e)];case 3:return[2,(a=r.sent())?A(a,o.class):null]}}))}))}))]}))}))},e.prototype.has=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(r.__generator)(this,(function(o){return[2,(t=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.getTransaction([this.name],i.i.READ_ONLY)];case 1:return n=r.sent(),[4,n.table(this.name).openCursor(e)];case 2:return[2,!!r.sent()]}}))}))}))]}))}))},e.prototype.delete=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(r.__generator)(this,(function(o){return[2,(t=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n,o,a;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.getTransaction([this.name],i.i.READ_WRITE)];case 1:return n=r.sent(),[4,(o=n.table(this.name)).openCursor(e)];case 2:return a=r.sent(),[4,o.delete(e)];case 3:return r.sent(),[2,a?e:null]}}))}))}))]}))}))},e.prototype.insert=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(r.__generator)(this,(function(o){return[2,(t=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.getTransaction([this.name],i.i.READ_WRITE)];case 1:return n=r.sent(),[4,n.table(this.name).insert(S(e))];case 2:return[2,r.sent()]}}))}))}))]}))}))},e.prototype.upsert=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(r.__generator)(this,(function(o){return[2,(t=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.getTransaction([this.name],i.i.READ_WRITE)];case 1:return n=r.sent(),[4,n.table(this.name).upsert(S(e))];case 2:return[2,r.sent()]}}))}))}))]}))}))},e.prototype.bulkInsert=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(r.__generator)(this,(function(o){return[2,(t=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n,o,a,s,c,u,l,f,h,p;return Object(r.__generator)(this,(function(d){switch(d.label){case 0:return[4,t.getTransaction([this.name],i.i.READ_WRITE)];case 1:n=d.sent(),o=[],a=n.table(this.name),d.label=2;case 2:d.trys.push([2,7,8,9]),s=Object(r.__values)(e),c=s.next(),d.label=3;case 3:return c.done?[3,6]:(u=c.value,[4,a.insert(S(u))]);case 4:l=d.sent(),o.push(l),d.label=5;case 5:return c=s.next(),[3,3];case 6:return[3,9];case 7:return f=d.sent(),h={error:f},[3,9];case 8:try{c&&!c.done&&(p=s.return)&&p.call(s)}finally{if(h)throw h.error}return[7];case 9:return[2,o]}}))}))}))]}))}))},e.prototype.bulkUpsert=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(r.__generator)(this,(function(o){return[2,(t=this.contextGenerator.spawnContext()).perform((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.getTransaction([this.name],i.i.READ_WRITE)];case 1:return n=r.sent(),[2,n.table(this.name).bulkUpsert(e.map((function(e){return S(e)})))]}}))}))}))]}))}))},e.prototype.conditions=function(){return this.unsliced.conditions()},e.prototype.patch=function(){this.aspects.get.patch(this,"get"),this.aspects.has.patch(this,"has"),this.aspects.delete.patch(this,"delete"),this.aspects.insert.patch(this,"insert"),this.aspects.upsert.patch(this,"upsert"),this.aspects.bulkInsert.patch(this,"bulkInsert"),this.aspects.bulkUpsert.patch(this,"bulkUpsert")},e}(),Ae=function(){function e(e,t){this.collectionMap=new Map,this.storage=e,this.eventBus=t}return e.prototype.getCollection=function(e,t){if(this.collectionMap.has(e))return this.collectionMap.get(e);var n=this.createCollection(e,t);return this.collectionMap.set(e,n),this.eventBus.emit(O.CollectionCreated,{collectionName:e,context:t.spawnContext()}),n},e.prototype.createCollection=function(e,t){var n=this.storage.aspects.collection;return new Se(e,{contextGenerator:t,aspects:n})},e}(),De=o.a.withMessageCreator("UnexpectedModifierError",(function(e){return'unexpected error occurred at the "'+e+'" stage of the plugable function, there may be a bug in your modifiers.'})),Ce=o.a.withMessageCreator("InvalidPatchedFunctionError",(function(e){return'patched target is not a function, patched key is "'+e+'"'}));!function(e){e.before="before",e.around="around",e.return="return",e.throw="throw",e.after="after",e.protect="protect"}(ke||(ke={}));var Ie=function(){function e(e){this.modifiers={before:[],around:[],return:[],throw:[],after:[],protect:[]},this.createContext=e}return e.prototype.before=function(e){return this.modifiers.before.push(e),this},e.prototype.around=function(e){return this.modifiers.around.push(e),this},e.prototype.throw=function(e){return this.modifiers.throw.push(e),this},e.prototype.return=function(e){return this.modifiers.return.push(e),this},e.prototype.after=function(e){return this.modifiers.after.push(e),this},e.prototype.protect=function(e){return this.modifiers.protect.push(e),this},e.prototype.patch=function(e,t){Object.defineProperty(e,t,{enumerable:!1,value:this.compile(e,t),writable:!0,configurable:!0})},e.prototype.dirty=function(){return Object.values(this.modifiers).some((function(e){return e.length}))},e.prototype.compile=function(e,t){var n=e[t];if("function"!=typeof n)throw new Ce(t);var r=this.invoke.bind(this);return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(n,this,e)}},e}(),Me=Ie,Re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.create=function(){return new t((function(){return{}}))},t.withContext=function(e){return new t(e)},t.prototype.invoke=function(e,t,n){var i;if(!this.dirty())return e.call.apply(e,Object(r.__spreadArray)([t],Object(r.__read)(n)));var o=Object.assign(this.createContext(),{args:n,this:t,callee:e,return:void 0,error:void 0});try{this.trigger(ke.before,o,this.modifiers.protect),this.modifiers.around.length?this.trigger(ke.around,o,this.modifiers.protect):o.return=(i=o.callee).call.apply(i,Object(r.__spreadArray)([o.this],Object(r.__read)(o.args))),this.trigger(ke.return,o,this.modifiers.protect)}catch(e){throw this.modifiers.throw.length&&(Object.assign(o,{error:e}),this.trigger(ke.throw,o,this.modifiers.protect)),e}finally{this.trigger(ke.after,o,this.modifiers.protect)}return o.return},t.prototype.trigger=function(e,t,n){var i,a,s,c;try{for(var u=Object(r.__values)(this.modifiers[e]),l=u.next();!l.done;l=u.next()){var f=l.value;try{f.call(t.this,t)}catch(i){if(!n.length){Object(o.c)(new De(e,i));continue}try{for(var h=(s=void 0,Object(r.__values)(n)),p=h.next();!p.done;p=h.next()){var d=p.value;Object.assign(t,{error:i}),d.call(t.this,t)}}catch(e){s={error:e}}finally{try{p&&!p.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(i)throw i.error}}},t}(Me),Pe=Re,Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.create=function(){return new t((function(){return{}}))},t.withContext=function(e){return new t(e)},t.prototype.invoke=function(e,t,n){var i=this;if(!this.dirty())return e.call.apply(e,Object(r.__spreadArray)([t],Object(r.__read)(n)));var o=Object.assign(this.createContext(),{args:n,this:t,callee:e,return:void 0,error:void 0});return new Promise((function(e,t){Object(r.__awaiter)(i,void 0,void 0,(function(){var e,t,n,i;return Object(r.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,7,10,12]),[4,this.trigger(ke.before,o,this.modifiers.protect)];case 1:return a.sent(),this.modifiers.around.length?[3,3]:(e=(i=o.callee).call.apply(i,Object(r.__spreadArray)([o.this],Object(r.__read)(o.args))),t=o,[4,e]);case 2:return t.return=a.sent(),[3,5];case 3:return[4,this.trigger(ke.around,o,this.modifiers.protect)];case 4:a.sent(),a.label=5;case 5:return[4,this.trigger(ke.return,o,this.modifiers.protect)];case 6:return a.sent(),[3,12];case 7:return n=a.sent(),Object.assign(o,{error:n}),this.modifiers.throw.length?[4,this.trigger(ke.throw,o,this.modifiers.protect)]:[3,9];case 8:a.sent(),a.label=9;case 9:throw n;case 10:return[4,this.trigger(ke.after,o,this.modifiers.protect)];case 11:return a.sent(),[7];case 12:return[2]}}))})).then((function(){e(o.return)})).catch((function(e){t(e)}))}))},t.prototype.trigger=function(e,t,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,a,s,c,u,l,f,h,p,d,v,b,y;return Object(r.__generator)(this,(function(m){switch(m.label){case 0:m.trys.push([0,15,16,17]),i=Object(r.__values)(this.modifiers[e]),a=i.next(),m.label=1;case 1:if(a.done)return[3,14];s=a.value,m.label=2;case 2:return m.trys.push([2,4,,13]),[4,s.call(t.this,t)];case 3:return m.sent(),[3,13];case 4:if(c=m.sent(),!n.length)return Object(o.c)(new De(e,c)),[3,13];m.label=5;case 5:m.trys.push([5,10,11,12]),b=void 0,u=Object(r.__values)(n),l=u.next(),m.label=6;case 6:return l.done?[3,9]:(f=l.value,Object.assign(t,{error:c}),[4,f.call(t.this,t)]);case 7:m.sent(),m.label=8;case 8:return l=u.next(),[3,6];case 9:return[3,12];case 10:return h=m.sent(),b={error:h},[3,12];case 11:try{l&&!l.done&&(y=u.return)&&y.call(u)}finally{if(b)throw b.error}return[7];case 12:return[3,13];case 13:return a=i.next(),[3,1];case 14:return[3,17];case 15:return p=m.sent(),d={error:p},[3,17];case 16:try{a&&!a.done&&(v=i.return)&&v.call(i)}finally{if(d)throw d.error}return[7];case 17:return[2]}}))}))},t}(Me),Be=Ne;function Le(){return{timings:new Map,counters:new Map,messages:new Map,errors:new Map,flags:new Map,data:new Map}}var qe,Ue=function(){function e(e,t){this.storage=e,this.eventBus=t,this.plugins=[]}return e.prototype.add=function(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var o=Object(r.__values)(n),a=o.next();!a.done;a=o.next()){var s=a.value;this.plugins.push(s),s.register(this.storage),this.eventBus.emit(x.RegisterPlugin,s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},e}(),Fe=Ue,ze=o.a.withMessageCreator("UnexpectedOutsideMigrationActionError",(function(e){return e+" outside ensure(callback) is not allowed, please wrap your migration actions inside a ensure callback"})),Ve=function(){function e(e,t){this.name=e,this.context=t}return e.create=function(t){return{index:function(n){return new e(n,t)}}},e.prototype.create=function(e){var t=this.context.scope.collection;if(!t)throw new ze("CreateIndex");return this.context.actions.schema.push({type:i.f.CreateIndex,name:this.name,attributes:Object(r.__assign)({},e),collection:t}),this},e.prototype.drop=function(){var e=this.context.scope.collection;if(!e)throw new ze("DropIndex");this.context.actions.schema.push({type:i.f.DropIndex,name:this.name,collection:e})},e.prototype.alter=function(e){var t=this.context.scope.collection;if(!t)throw new ze("AlterIndex");return this.context.actions.schema.push({type:i.f.DropIndex,name:this.name,collection:t},{type:i.f.CreateIndex,name:this.name,attributes:Object(r.__assign)({},e),collection:t}),this},e.prototype.rename=function(e){var t=this.context.scope.collection;if(!t)throw new ze("RenameIndex");this.context.actions.schema.push({type:i.f.DropIndex,name:this.name,collection:t},{type:i.f.CreateIndex,name:e,attributes:{path:""},collection:t})},e.prototype.ensure=function(){throw new o.b},e}(),Ge=function(){function e(e,t){this.name=e,this.context=t}return e.create=function(t){return{collection:function(n){return new e(n,t)}}},e.prototype.create=function(e){return this.context.actions.schema.push({type:i.f.CreateCollection,name:this.name,attributes:Object(r.__assign)({},e)}),this},e.prototype.drop=function(){this.context.actions.schema.push({type:i.f.DropCollection,name:this.name})},e.prototype.alter=function(e){return this.context.actions.schema.push({type:i.f.DropCollection,name:this.name},{type:i.f.CreateCollection,name:this.name,attributes:Object(r.__assign)({},e)}),this},e.prototype.rename=function(e){this.context.actions.schema.push({type:i.f.DropCollection,name:this.name},{type:i.f.CreateCollection,name:e,attributes:{key:{generator:i.b.AutoIncrement},properties:[]}})},e.prototype.ensure=function(e){var t=this.context,n=Object(r.__assign)({},Ve.create(t));this.context.scope.collection=this.name,e(n),this.context.scope.collection=null},e}(),Ke=function(){function e(){this.context={actions:{schema:[],data:[]},scope:{database:null,collection:null}},this.builder=Ge.create(this.context)}return e.prototype.init=function(e){this.state=e,this.build()},e.prototype.plan=function(){return this.context.actions.schema.length||this.context.actions.data.length?[{schema:{actions:this.context.actions.schema.slice()},data:{actions:this.context.actions.data.slice()}}]:[]},e.prototype.handleDropCollection=function(e){var t,n;try{for(var i=Object(r.__values)(e),o=i.next();!o.done;o=i.next()){var a=o.value;this.builder.collection(a.name).drop()}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.handleCreateCollection=function(e){var t,n,i=function(e){o.builder.collection(e.name).create(e).ensure((function(t){var n,i;try{for(var o=(n=void 0,Object(r.__values)(e.indices)),a=o.next();!a.done;a=o.next()){var s=a.value;t.index(s.name).create(s)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}))},o=this;try{for(var a=Object(r.__values)(e),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e.prototype.handleIndexChange=function(e){var t,n,i=function(e){o.builder.collection(e.collection).ensure((function(t){var n,i,o,a,s,c;try{for(var u=(n=void 0,Object(r.__values)((null===(s=e.index)||void 0===s?void 0:s.added)||[])),l=u.next();!l.done;l=u.next()){var f=l.value;t.index(f.name).create(f)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}try{for(var h=(o=void 0,Object(r.__values)((null===(c=e.index)||void 0===c?void 0:c.deleted)||[])),p=h.next();!p.done;p=h.next()){f=p.value;t.index(f.name).drop()}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}}))},o=this;try{for(var a=Object(r.__values)(e),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},e.prototype.build=function(){if(!this.state)throw new Error("Migration state is undefined, must init before!");var e=this.state.schema,t=e.expect,n=e.actual,r=i.g.databaseDiff(n,t);this.handleCreateCollection(r.added),this.handleDropCollection(r.deleted),this.handleIndexChange(r.different)},e}(),We=i.c.name;!function(e){e.SYSTEM_TABLE="system_table",e.SCAN_EXISTING_TABLE="scan_exists_table"}(qe||(qe={}));var He=function(){function e(){}return e.hasSystemTable=function(e){return e.tableNames.includes(We)},e.getDatabaseSchema=function(t,n,o){return Object(r.__awaiter)(this,void 0,void 0,(function(){var a,s,c,u,l;return Object(r.__generator)(this,(function(f){switch(f.label){case 0:return[4,n.openDB(t,{name:t,collections:[i.c]})];case 1:a=f.sent(),s=!1,f.label=2;case 2:return f.trys.push([2,,10,11]),a.tableNames.length?[3,4]:(a.close(),s=!0,[4,n.deleteDB(t)]);case 3:return f.sent(),[2,{schema:{name:this.name,version:0,collections:[]},from:"scan_exists_table"}];case 4:return this.hasSystemTable(a)?[3,6]:[4,e.getDatabaseSchemaByScanningTableStructure(o.collections.map((function(e){return e.name})),a)];case 5:return[2,{schema:f.sent(),from:"scan_exists_table"}];case 6:return[4,a.transaction([We],i.i.READ_ONLY)];case 7:return c=f.sent(),[4,c.table(We).getAll()];case 8:return u=f.sent()||[],l={name:this.name,version:a.version,collections:Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__read)(u)),[this.getSystemTableSchema()])},[4,c.commit()];case 9:return f.sent(),[2,{schema:l,from:"system_table"}];case 10:return s||a.close(),[7];case 11:return[2]}}))}))},e.getSystemTableSchema=function(){return i.c},e.updateSchemaChange=function(e,t,n,o){return Object(r.__awaiter)(this,void 0,void 0,(function(){var a,s,c,u,l,f,h,p,d,b,y,m,_,g,w,x,O,j,k,T,E,S,A;return Object(r.__generator)(this,(function(D){switch(D.label){case 0:return a=t.table(We),o?[4,a.bulkUpsert(n.schema.expect.collections.filter((function(e){return e.name!==We})))]:[3,2];case 1:return D.sent(),[2];case 2:D.trys.push([2,27,,29]),s=i.g.databaseDiff(n.schema.actual,n.schema.expect),c=s.added.filter((function(e){return e.name!==We})),D.label=3;case 3:D.trys.push([3,8,9,10]),u=Object(r.__values)(c),l=u.next(),D.label=4;case 4:return l.done?[3,7]:((d=l.value).dataVersion=e,[4,a.upsert(d)]);case 5:D.sent(),D.label=6;case 6:return l=u.next(),[3,4];case 7:return[3,10];case 8:return f=D.sent(),j={error:f},[3,10];case 9:try{l&&!l.done&&(k=u.return)&&k.call(u)}finally{if(j)throw j.error}return[7];case 10:D.trys.push([10,15,16,17]),h=Object(r.__values)(s.deleted),p=h.next(),D.label=11;case 11:return p.done?[3,14]:(d=p.value,[4,a.delete(d.name)]);case 12:D.sent(),D.label=13;case 13:return p=h.next(),[3,11];case 14:return[3,17];case 15:return b=D.sent(),T={error:b},[3,17];case 16:try{p&&!p.done&&(E=h.return)&&E.call(h)}finally{if(T)throw T.error}return[7];case 17:y=s.different.filter((function(e){return!!e.index})),m=function(e){var t,n,i;return Object(r.__generator)(this,(function(o){switch(o.label){case 0:return[4,a.get(e.collection)];case 1:return t=o.sent(),n=[],i=t.indices.filter((function(t){return!e.index.deleted.some((function(e){return e.name===t.name}))})),n.push.apply(n,Object(r.__spreadArray)([],Object(r.__read)(e.index.added))),n.push.apply(n,Object(r.__spreadArray)([],Object(r.__read)(i))),t.index=n,[4,a.upsert(t)];case 2:return o.sent(),[2]}}))},D.label=18;case 18:D.trys.push([18,23,24,25]),_=Object(r.__values)(y),g=_.next(),D.label=19;case 19:return g.done?[3,22]:(w=g.value,[5,m(w)]);case 20:D.sent(),D.label=21;case 21:return g=_.next(),[3,19];case 22:return[3,25];case 23:return x=D.sent(),S={error:x},[3,25];case 24:try{g&&!g.done&&(A=_.return)&&A.call(_)}finally{if(S)throw S.error}return[7];case 25:return[4,t.commit()];case 26:if(!D.sent())throw new v;return[3,29];case 27:return O=D.sent(),[4,t.rollback()];case 28:throw D.sent(),O;case 29:return[2]}}))}))},e.updateCollectionDataVersion=function(e,t,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return Object(r.__generator)(this,(function(s){switch(s.label){case 0:return[4,(i=t.table(We)).get(g.getTableName(n))];case 1:if(o=s.sent(),a=g.getTableInfo(n.prototype),!o)throw new Error("get target table system info error!");if(!a)throw new l(n.name);return o.dataVersion=e,o.properties=Object(r.__spreadArray)([],Object(r.__read)(a.properties.values())).map((function(e){return e.name})),[4,i.upsert(o)];case 2:return s.sent(),[2]}}))}))},e.getTableDataVersion=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.table(We).get(e)];case 1:return[2,n.sent().dataVersion]}}))}))},e.getDatabaseSchemaByScanningTableStructure=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,o,a,s,c,u,l,f,h,p,d,v,b,y,m,_;return Object(r.__generator)(this,(function(g){switch(g.label){case 0:n=t.tableNames.filter((function(t){return e.includes(t)})),o=[],g.label=1;case 1:g.trys.push([1,6,7,8]),a=Object(r.__values)(n),s=a.next(),g.label=2;case 2:return s.done?[3,5]:(c=s.value,[4,t.table(c,i.i.READ_ONLY)]);case 3:u=g.sent(),l={name:c,key:u.autoIncrement?{generator:i.b.AutoIncrement}:{path:u.keyPath},indices:[],properties:[]};try{for(m=void 0,f=Object(r.__values)(u.indexNames),h=f.next();!h.done;h=f.next())p=h.value,d=u.index(p),l.indices.push({name:p,path:d.keyPath,unique:d.unique})}catch(e){m={error:e}}finally{try{h&&!h.done&&(_=f.return)&&_.call(f)}finally{if(m)throw m.error}}o.push(l),g.label=4;case 4:return s=a.next(),[3,2];case 5:return[3,8];case 6:return v=g.sent(),b={error:v},[3,8];case 7:try{s&&!s.done&&(y=a.return)&&y.call(a)}finally{if(b)throw b.error}return[7];case 8:return[2,{name:t.name,version:t.version,collections:o}]}}))}))},e}(),Qe=function(){function e(e){this.schemaActionHandlerMap=new Map,this.dataActionHandlerMap=new Map,this.schemaActionHandlerMap.set(i.f.CreateCollection,this.performCreateCollectionAction.bind(this)),this.schemaActionHandlerMap.set(i.f.DropCollection,this.performDropCollectionAction.bind(this)),this.schemaActionHandlerMap.set(i.f.CreateIndex,this.performCreateIndexAction.bind(this)),this.schemaActionHandlerMap.set(i.f.DropIndex,this.performDropIndexAction.bind(this)),this.dataActionHandlerMap.set(i.a.DropProperty,this.performDropPropertyAction.bind(this)),this.dataActionHandlerMap.set(i.a.ClearData,this.performClearDataAction.bind(this)),this.dataActionHandlerMap.set(i.a.ReplaceData,this.performReplaceDataAction.bind(this)),e.executeDataAction.patch(this,"executeDataAction"),e.executeSchemaAction.patch(this,"executeSchemaAction")}return e.prototype.executeSchemaAction=function(e,t,n){var r=this.schemaActionHandlerMap.get(n.type);if(r){if(t.mode!==i.i.VERSION_CHANGE)throw new u(n.type);return r(e,t,n)}},e.prototype.executeDataAction=function(e,t,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i;return Object(r.__generator)(this,(function(r){return(i=this.dataActionHandlerMap.get(n.type))?[2,i(e,t,n)]:[2]}))}))},e.prototype.performCreateIndexAction=function(e,t,n){t.table(n.collection).createIndex(n.name,n.attributes.path,{unique:n.attributes.unique})},e.prototype.performDropIndexAction=function(e,t,n){t.table(n.collection).deleteIndex(n.name)},e.prototype.performDropCollectionAction=function(e,t,n){e.deleteTable(n.name)},e.prototype.performCreateCollectionAction=function(e,t,n){var r,o;e.createTable(n.name,{keyPath:null===(r=n.attributes.key)||void 0===r?void 0:r.path,autoIncrement:(null===(o=n.attributes.key)||void 0===o?void 0:o.generator)===i.b.AutoIncrement})},e.prototype.performClearDataAction=function(e,t,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return e=t.table(n.collection),n.filter?[3,2]:[4,e.clear()];case 1:return r.sent(),[2];case 2:return[4,e.openCursor()];case 3:i=r.sent(),r.label=4;case 4:return i?n.filter(i.value())?[4,i.delete()]:[3,6]:[3,8];case 5:r.sent(),r.label=6;case 6:return[4,i.next()];case 7:return i=r.sent(),[3,4];case 8:return[2]}}))}))},e.prototype.performDropPropertyAction=function(e,t,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.table(n.collection).openCursor()];case 1:e=r.sent(),r.label=2;case 2:return e?((i=e.value())[n.path]=void 0,[4,e.update(i)]):[3,5];case 3:return r.sent(),[4,e.next()];case 4:return e=r.sent(),[3,2];case 5:return[2]}}))}))},e.prototype.performReplaceDataAction=function(e,t,n){var i;return Object(r.__awaiter)(this,void 0,void 0,(function(){var e,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,t.table(n.collection).openCursor()];case 1:e=r.sent(),r.label=2;case 2:return e?(o=e.value(),n.filter&&!(null===(i=n.filter)||void 0===i?void 0:i.call(this,o))?[3,4]:[4,e.update(n.replacer(o))]):[3,6];case 3:r.sent(),r.label=4;case 4:return[4,e.next()];case 5:return e=r.sent(),[3,2];case 6:return[2]}}))}))},e}(),Je=function(){function e(e){this.collection=e,this.versionActionsMap=new Map}return e.prototype.getVersionActionsMap=function(){return this.versionActionsMap},e.prototype.version=function(e){var t=this,n={update:function(r){return t.pushAction(e,{type:i.a.ReplaceData,replacer:r,collection:t.collection}),n},delete:function(r){return t.pushAction(e,{filter:r,type:i.a.ClearData,collection:t.collection}),n}};return n},e.prototype.pushAction=function(e,t){var n=this.versionActionsMap.get(e)||[];n.push(t),this.versionActionsMap.set(e,n)},e}(),Ye=function(){function e(e,t,n){this.expectedSchema=e,this.actualSchema=t,this.modelClass=n}return e.prototype.plan=function(){var e=this.actualSchema.dataVersion||0,t=this.expectedSchema.dataVersion||1;if(e===t)return[];var n=[],i=this.getManualMigrationActions(e,t);n.push.apply(n,Object(r.__spreadArray)([],Object(r.__read)(i)));var o=this.getAutoMigrationActions();return n.push.apply(n,Object(r.__spreadArray)([],Object(r.__read)(o))),[{schema:{actions:[]},data:{actions:n}}]},e.prototype.getManualMigrationActions=function(e,t){var n,r,i=new Je(g.getTableName(this.modelClass));return null===(r=(n=this.modelClass).onDataUpgrade)||void 0===r||r.call(n,e,t,i),this.getRangeDataAction(e,t,i.getVersionActionsMap())},e.prototype.getAutoMigrationActions=function(){var e,t,n=this,o=[],a=this.actualSchema.properties.filter((function(e){return!n.expectedSchema.properties.includes(e)}));try{for(var s=Object(r.__values)(a),c=s.next();!c.done;c=s.next()){var u=c.value;o.push({type:i.a.DropProperty,collection:g.getTableName(this.modelClass),path:u})}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return o},e.prototype.getRangeDataAction=function(e,t,n){for(var i=[],o=e;o<=t;o++)i.push.apply(i,Object(r.__spreadArray)([],Object(r.__read)(n.get(o)||[])));return i},e}(),Xe=function(){function e(e){this.migrationManager=e,this.upgradedFlag=new Map}return e.prototype.executeDataUpgrade=function(e,t,n,i){return void 0===i&&(i=function(){}),Object(r.__awaiter)(this,void 0,void 0,(function(){var o,a;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return o=g.getTableName(e),this.upgradedFlag.get(o)?[2]:(a=this.getCollectionSchema(o,n),this.isNeedExecuteDataUpgrade(a.expect,a.actual)?[4,this.executeUpgrade(o,t,n,a.expect,a.actual,e)]:(this.upgradedFlag.set(o,!0),[2,i()]));case 1:return r.sent(),this.upgradedFlag.set(o,!0),[2,i()]}}))}))},e.prototype.isNeedExecuteDataUpgrade=function(e,t){return!(!(null==t?void 0:t.dataVersion)||e.dataVersion===t.dataVersion)},e.prototype.executeUpgrade=function(e,t,n,o,a,s){return Object(r.__awaiter)(this,void 0,void 0,(function(){var u,l,f,h,p,d;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return u=new Ye(o,a,s),this.migrationManager.use(u),l=this.migrationManager.buildMigration(n),[4,t.transaction([e,He.getSystemTableSchema().name],i.i.READ_WRITE)];case 1:f=r.sent(),h=!1,r.label=2;case 2:return r.trys.push([2,6,8,11]),p=n.schema.expect.version||1,[4,He.getTableDataVersion(g.getTableName(s),f)];case 3:return r.sent()===p?[2]:[4,this.migrationManager.executeDataMigration(t,l,f)];case 4:return r.sent(),[4,He.updateCollectionDataVersion(p,f,s)];case 5:return r.sent(),[3,11];case 6:return d=r.sent(),h=!0,[4,f.rollback()];case 7:throw r.sent(),new c({oldVersion:a.dataVersion,newVersion:o.dataVersion},d);case 8:return h?[3,10]:[4,f.commit()];case 9:r.sent(),r.label=10;case 10:return[7];case 11:return[2]}}))}))},e.prototype.getCollectionSchema=function(e,t){var n=t.schema,r=n.expect,i=n.actual,o=r.collections.filter((function(t){return t.name===e})),a=i.collections.filter((function(t){return t.name===e}));if(1!==o.length)throw new s(e);return{expect:o[0],actual:a.length?a[0]:void 0}},e}(),$e=function(){function e(e,t,n){var i=this;this.planner=new Ke,this.actualDBSchema=null,this.actualDBSchemaFrom=null,this.lazyMigrationProcessor=new Xe(this),this.handleCollectionCreated=function(e){var t=e.collectionName,n=e.context;i.safeExecuteDataUpgrade(n,t)},this.handleStartTransaction=function(e){var t,n,o=e.collectionNames,a=e.context;try{for(var s=Object(r.__values)(o),c=s.next();!c.done;c=s.next()){var u=c.value;i.safeExecuteDataUpgrade(a,u)}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},this.eventBus=e,this.eventBus.on(O.CollectionCreated,this.handleCollectionCreated),this.eventBus.on(O.StartTransaction,this.handleStartTransaction),this.schemaProvider=t,this.actionExecutor=new Qe(n.actionExecutor),this.applyAspectPatch(n)}return e.prototype.use=function(e){this.planner=e},e.prototype.prepareAutoUpgradeHandler=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n,i,o,a,s,c=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=this.schemaProvider.getDatabaseSchema(),[4,He.getDatabaseSchema(e,t,n)];case 1:return i=r.sent(),o=i.schema,a=i.from,this.actualDBSchema=o,this.actualDBSchemaFrom=a,this.log("getDatabaseSchema",this.actualDBSchema),s=this.buildMigration({schema:{expect:n,actual:this.actualDBSchema}}),[2,function(e,t,n,r){c.eventBus.emit(x.SchemaMigrationStart),c.executeSchemaMigration(e,s,r),c.updateMigrationChangeInfo(r).catch((function(e){c.emitError(new b(e))})),c.eventBus.emit(x.SchemaMigrationEnd)}]}}))}))},e.prototype.buildMigration=function(e){var t,n,r,i,o,a,s=e.schema,c=s.actual,u=s.expect;null===(n=null===(t=this.planner)||void 0===t?void 0:t.init)||void 0===n||n.call(t,e);var l=null!==(r=c.version)&&void 0!==r?r:0,f=null!==(i=u.version)&&void 0!==i?i:1;return null!==(a=null===(o=this.planner)||void 0===o?void 0:o.plan(l,f))&&void 0!==a?a:[]},e.prototype.executeSchemaMigration=function(e,t,n){var i,o,a,s;if(t)try{for(var c=Object(r.__values)(t),u=c.next();!u.done;u=c.next()){var l=u.value;try{for(var f=(a=void 0,Object(r.__values)(l.schema.actions)),h=f.next();!h.done;h=f.next()){var p=h.value;this.actionExecutor.executeSchemaAction(e,n,p)}}catch(e){a={error:e}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}}}catch(e){i={error:e}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.prototype.executeDataMigration=function(e,t,n){return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,c,u,l,f,h,p,d,v;return Object(r.__generator)(this,(function(b){switch(b.label){case 0:if(!t)return[2];b.label=1;case 1:b.trys.push([1,12,13,14]),i=Object(r.__values)(t),o=i.next(),b.label=2;case 2:if(o.done)return[3,11];a=o.value,b.label=3;case 3:b.trys.push([3,8,9,10]),d=void 0,s=Object(r.__values)(a.data.actions),c=s.next(),b.label=4;case 4:return c.done?[3,7]:(u=c.value,[4,this.actionExecutor.executeDataAction(e,n,u)]);case 5:b.sent(),b.label=6;case 6:return c=s.next(),[3,4];case 7:return[3,10];case 8:return l=b.sent(),d={error:l},[3,10];case 9:try{c&&!c.done&&(v=s.return)&&v.call(s)}finally{if(d)throw d.error}return[7];case 10:return o=i.next(),[3,2];case 11:return[3,14];case 12:return f=b.sent(),h={error:f},[3,14];case 13:try{o&&!o.done&&(p=i.return)&&p.call(i)}finally{if(h)throw h.error}return[7];case 14:return[2]}}))}))},e.prototype.updateMigrationChangeInfo=function(e){var t,n;return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,o;return Object(r.__generator)(this,(function(r){return i=this.schemaProvider.getDatabaseSchema(),o=null!==(t=i.version)&&void 0!==t?t:1,[2,He.updateSchemaChange(o,e,{schema:{expect:i,actual:null!==(n=this.actualDBSchema)&&void 0!==n?n:{name:i.name,collections:[]}}},"scan_exists_table"===this.actualDBSchemaFrom)]}))}))},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n]},e.prototype.executeDataUpgradeIfNeed=function(e,t){var n;return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,o,a=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.log("executeDataUpgradeIfNeed",e.name),i=this.schemaProvider.getDatabaseSchema(),o={name:i.name,collections:[]},[4,this.lazyMigrationProcessor.executeDataUpgrade(e,t,{schema:{expect:i,actual:null!==(n=this.actualDBSchema)&&void 0!==n?n:o}},(function(){a.eventBus.emit(O.ModelLazyMigrationEnd,g.getTableName(e))}))];case 1:return r.sent(),[2]}}))}))},e.prototype.safeExecuteDataUpgrade=function(e,t){var n=this;Promise.all([e.waitForModelRegistered(t),e.waitForDBReady()]).then((function(e){var i=Object(r.__read)(e,2),o=i[0],a=i[1];n.executeDataUpgradeIfNeed(o.class,a).catch((function(e){n.emitError(new y(t,e))}))})).catch((function(){}))},e.prototype.emitError=function(e){this.eventBus.emit(x.Error,e)},e.prototype.applyAspectPatch=function(e){e.buildMigration.patch(this,"buildMigration"),e.executeDataMigration.patch(this,"executeDataMigration"),e.executeSchemaMigration.patch(this,"executeSchemaMigration"),e.prepareAutoUpgradeHandler.patch(this,"prepareAutoUpgradeHandler"),e.log.patch(this,"log"),e.updateMigrationChangeInfo.patch(this,"updateMigrationChangeInfo")},e}(),Ze=$e;var et=function(){var e;return{lock:function(t){return e||(e=t()),e.finally((function(){e=void 0}))}}},tt=function(){function e(e,t){var n,i=this;if(this.openingMutex=et(),this.closingMutex=et(),this.destroyingMutex=et(),this.openDatabase=function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){var e=this;return Object(r.__generator)(this,(function(t){return[2,this.openingMutex.lock((function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e,t,n,i,o,s,c,u,l,f,h,p=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:if(this.db)return[2];e=this.storage,t=e.name,n=e.version,r.label=1;case 1:return r.trys.push([1,8,,9]),this.eventBus.emit(x.BootstrapStart),i=this.getDatabaseSchema(),[4,this.migrationManager.prepareAutoUpgradeHandler(t,this.engine)];case 2:o=r.sent(),s=function(){p.eventBus.emit(x.Fetal,new m(t))},r.label=3;case 3:return r.trys.push([3,5,,7]),c=this,[4,this.engine.openDB(t,i,n,{upgrade:o,terminated:s})];case 4:return c.db=r.sent(),[3,7];case 5:if("VersionError"!==(u=r.sent()).name||!this.supportCompatibleOpen)throw u;return l=this,[4,this.engine.openDB(t,i,void 0,{upgrade:o,terminated:s})];case 6:return l.db=r.sent(),[3,7];case 7:return this.db.setVersionChangeListener((function(e,t){p.eventBus.emit(x.VersionChange,{oldVersion:e,newVersion:t})})),this.eventBus.emit(x.BootstrapEnd),this.eventBus.emit(x.Ready,this.db),[3,9];case 8:throw f=r.sent(),this.reset(),h=new a(t,f),this.eventBus.emit(x.Error,h),this.eventBus.emit(x.Fetal,h),h;case 9:return[2]}}))}))}))]}))}))},this.handleModelRegistered=function(e){if(!i.schemas.some((function(t){return t.name===e.schema.name}))){var t=e.schema;t.dataVersion=i.storage.version,i.schemas.push(t)}},this.handleFetal=function(){i.reset()},this.storage=e,this.engine=t.engine,this.eventBus=t.eventBus,this.supportCompatibleOpen=t.supportCompatibleOpen,this.engine.setAspects(e.aspects.engine),this.schemas=[He.getSystemTableSchema()],t.databaseSchema){var o=JSON.parse(t.databaseSchema).collections.map((function(e){return Object(r.__assign)(Object(r.__assign)({},e),{dataVersion:i.storage.version})}));(n=this.schemas).push.apply(n,Object(r.__spreadArray)([],Object(r.__read)(o)))}this.migrationManager=new Ze(this.eventBus,this,e.aspects.migration),this.eventBus.on(x.RegisterModel,this.handleModelRegistered),this.eventBus.on(x.Fetal,this.handleFetal)}return e.prototype.getDatabaseEngine=function(){return this.engine},e.prototype.getDatabaseSchema=function(){if(!this.storage.name||!this.storage.version)throw new Error("The database name and version are required for generating dbSchema");return{name:this.storage.name,version:this.storage.version,collections:this.schemas}},e.prototype.closeDatabase=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e=this;return Object(r.__generator)(this,(function(t){return[2,this.closingMutex.lock((function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return this.db?[4,this.db.close()]:[2];case 1:return e.sent(),this.reset(),this.eventBus.emit(x.Closed),[2]}}))}))}))]}))}))},e.prototype.destroyDatabase=function(){var e=this;return this.destroyingMutex.lock((function(){return Object(r.__awaiter)(e,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.engine.deleteDB(this.storage.name)];case 1:return e.sent(),this.reset(),this.eventBus.emit(x.Destroyed),[2]}}))}))}))},e.prototype.reset=function(){this.db=void 0},e}();var nt=function(e){return setTimeout(e)},rt=function(){function e(e){var t=e.keepActive,n=e.comparer,r=e.channelDB,i=e.channelModel,o=e.channelLazyMigration;this.keepActive=t,this.comparer=n,this.channelDB=r,this.channelModel=i,this.channelLazyMigration=o}return e.fromTransactionManager=function(t,n){return void 0===n&&(n=!1),new e({keepActive:n,comparer:t.comparer,channelDB:t.channelDB,channelModel:t.channelModel,channelLazyMigration:t.channelLazyMigration})},e.prototype.openTransaction=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){var n=this;return Object(r.__generator)(this,(function(i){return this.transactionPromise=Object(r.__awaiter)(n,void 0,void 0,(function(){var n,i,o=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all(e.map((function(e){return o.waitForModelRegistered(e)})))];case 1:return r.sent(),[4,Promise.all(e.map((function(e){return o.waitForMigrationReady(e)})))];case 2:return r.sent(),[4,this.waitForDBReady()];case 3:return n=r.sent(),i=this,[4,n.transaction(e,t)];case 4:return i.transaction=r.sent(),[2,this.transaction]}}))})),[2,this.transactionPromise]}))}))},e.prototype.getTransaction=function(e,t){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(n){switch(n.label){case 0:return this.transactionPromise?[3,2]:[4,this.openTransaction(e,t)];case 1:n.sent(),n.label=2;case 2:return[4,this.transactionPromise];case 3:return[2,n.sent()]}}))}))},e.prototype.waitForDBReady=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){return[2,this.channelDB.pick()]}))}))},e.prototype.waitForModelRegistered=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return[2,this.channelModel.pick(e)]}))}))},e.prototype.waitForMigrationReady=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(t){return[2,this.channelLazyMigration.pick(e)]}))}))},e.prototype.perform=function(e){return this.keepActive?e():this.autoCommitOrRollback(e)},e.prototype.autoCommitOrRollback=function(e){var t,n;return Object(r.__awaiter)(this,void 0,void 0,(function(){var i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,5]),[4,e()];case 1:return i=r.sent(),[4,null===(t=this.transaction)||void 0===t?void 0:t.commit()];case 2:return r.sent(),[2,i];case 3:return o=r.sent(),[4,null===(n=this.transaction)||void 0===n?void 0:n.rollback()];case 4:throw r.sent(),o;case 5:return[2]}}))}))},e}(),it=Symbol("channel");var ot=function(e){var t;void 0===e&&(e=function(){return it});var n=new Map,i=new Map;function o(e,t){var n;null===(n=i.get(e))||void 0===n||n.reject(t),i.delete(e)}function a(e,t){void 0===t&&(t=it),i.has(t)?function(e,t){var n;null===(n=i.get(e))||void 0===n||n.resolve(t),i.delete(e)}(t,e):n.set(t,Promise.resolve(e))}return{send:function(n){t||a(n,e(n))},pick:function(e){return void 0===e&&(e=it),t?Promise.reject(t):(n.has(e)||n.set(e,new Promise((function(t,n){i.set(e,{resolve:t,reject:n})}))),n.get(e))},open:function(){t=void 0},close:function(e,a){var s,c;void 0===a&&(a=!1),t=e;try{for(var u=Object(r.__values)(i.keys()),l=u.next();!l.done;l=u.next()){o(l.value,e)}}catch(e){s={error:e}}finally{try{l&&!l.done&&(c=u.return)&&c.call(u)}finally{if(s)throw s.error}}a&&(n.clear(),i.clear())}}},at=function(){function e(e,t){var n=this;this.handleFetalError=function(e){n.channelDB.close(e,!0),n.channelModel.close(e),n.channelLazyMigration.close(e)},this.eventBus=e,this.channelDB=ot(),this.channelModel=ot((function(e){return e.schema.name})),this.channelLazyMigration=ot((function(e){return e})),this.comparer=t,this.eventBus.on(x.Fetal,this.handleFetalError),this.eventBus.on(x.Ready,this.channelDB.send),this.eventBus.on(x.RegisterModel,this.channelModel.send),this.eventBus.on(O.ModelLazyMigrationEnd,this.channelLazyMigration.send)}return e.prototype.spawnAutoCommitContext=function(){return rt.fromTransactionManager(this,!1)},e.prototype.spawnKeepAliveContext=function(){return rt.fromTransactionManager(this,!0)},e.prototype.openChannels=function(){this.channelDB.open(),this.channelModel.open(),this.channelLazyMigration.open()},e}(),st=function(){function e(e){var t,n=this,i=e.name,o=e.engine,a=e.version,s=void 0===a?1:a,c=e.plugins,u=void 0===c?[]:c,l=e.disableAutoOpen,f=void 0!==l&&l,h=e.databaseSchema,p=e.supportCompatibleOpen,d=void 0!==p&&p;this.aspects={collection:{get:Be.withContext(Le),has:Be.withContext(Le),delete:Be.withContext(Le),insert:Be.withContext(Le),upsert:Be.withContext(Le),bulkInsert:Be.withContext(Le),bulkUpsert:Be.withContext(Le),update:Be.withContext(Le),clear:Be.withContext(Le),count:Be.withContext(Le),entries:Be.withContext(Le),keys:Be.withContext(Le),values:Be.withContext(Le),first:Be.withContext(Le),last:Be.withContext(Le),skip:Pe.withContext(Le),take:Pe.withContext(Le),slice:Pe.withContext(Le),orderBy:Pe.withContext(Le),where:Pe.withContext(Le),or:Pe.withContext(Le)},query:{},model:{},migration:{prepareAutoUpgradeHandler:Be.withContext(Le),buildMigration:Pe.withContext(Le),executeDataMigration:Be.withContext(Le),executeSchemaMigration:Pe.withContext(Le),updateMigrationChangeInfo:Be.withContext(Le),log:Pe.withContext(Le),actionExecutor:{executeSchemaAction:Pe.withContext(Le),executeDataAction:Be.withContext(Le)}},engine:{deleteDB:Be.withContext(Le),openDB:Be.withContext(Le),database:{createTable:Pe.withContext(Le),deleteTable:Pe.withContext(Le),close:Pe.withContext(Le),table:Be.withContext(Le),transaction:Be.withContext(Le)},table:{createIndex:Be.withContext(Le),deleteIndex:Be.withContext(Le),delete:Be.withContext(Le),get:Be.withContext(Le),getAll:Be.withContext(Le),getAllKeys:Be.withContext(Le),index:Pe.withContext(Le),insert:Be.withContext(Le),query:Be.withContext(Le),openCursor:Be.withContext(Le),upsert:Be.withContext(Le),bulkUpsert:Be.withContext(Le),clear:Be.withContext(Le),bulkDelete:Be.withContext(Le)},index:{get:Be.withContext(Le),getAll:Be.withContext(Le),getAllKeys:Be.withContext(Le),openCursor:Be.withContext(Le)},cursor:{delete:Be.withContext(Le),update:Be.withContext(Le),next:Be.withContext(Le),value:Pe.withContext(Le)},transaction:{commit:Be.withContext(Le),rollback:Be.withContext(Le),table:Pe.withContext(Le)}}},this.eventBus=w(),this.open=function(){return n.transactionManager.openChannels(),n.databaseManager.openDatabase()},this.close=function(){return n.databaseManager.closeDatabase()},this.destroy=function(){return n.databaseManager.destroyDatabase()},this.register=function(e){n.modelManager.register(e)},this.collection=function(e){var t=n.modelManager.getSchemaAndRegisterModelIfNeed(e);return n.collectionManager.getCollection(t.name,{spawnContext:function(){return n.transactionManager.spawnAutoCommitContext()}})},this.transaction=function(e,t,i){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n,o,a,s=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return n=this.transactionManager,o=e.map((function(e){return s.modelManager.getSchemaAndRegisterModelIfNeed(e).name})),a=n.spawnKeepAliveContext(),this.eventBus.emit(O.StartTransaction,{collectionNames:o,context:a}),[4,a.openTransaction(o,t)];case 1:return r.sent(),[2,a.autoCommitOrRollback((function(){return i(s.createStorageTransaction(a))}))]}}))}))},this.name=i,this.version=s,this.events=new k(this.eventBus),this.modelManager=new E(this.eventBus),this.databaseManager=new tt(this,{engine:o,eventBus:this.eventBus,databaseSchema:h,supportCompatibleOpen:d}),this.pluginManager=new Fe(this,this.eventBus),this.collectionManager=new Ae(this,this.eventBus),this.transactionManager=new at(this.eventBus,{cmp:this.databaseManager.getDatabaseEngine().cmp}),(t=this.pluginManager).add.apply(t,Object(r.__spreadArray)([],Object(r.__read)(u))),f||nt((function(){return n.open().catch((function(e){throw e}))}))}return e.prototype.createStorageTransaction=function(e){var t=this.modelManager,n=new Ae(this,this.eventBus);return{collection:function(r){var i=t.getSchemaAndRegisterModelIfNeed(r);return n.getCollection(i.name,{spawnContext:function(){return e}})}}},e}();t.c=st},c7db5dbe42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("533c8fd00a");Object.defineProperty(t,"Disposable",{enumerable:!0,get:function(){return r.Disposable}}),Object.defineProperty(t,"RootDisposable",{enumerable:!0,get:function(){return r.RootDisposable}}),Object.defineProperty(t,"mixinDisposable",{enumerable:!0,get:function(){return r.mixinDisposable}}),Object.defineProperty(t,"mixinRootDisposable",{enumerable:!0,get:function(){return r.mixinRootDisposable}});var i=n("8e26833a3b");Object.defineProperty(t,"DisposableNone",{enumerable:!0,get:function(){return i.DisposableNone}});var o=n("0d99992889");Object.defineProperty(t,"markTracked",{enumerable:!0,get:function(){return o.markTracked}}),Object.defineProperty(t,"trackDisposable",{enumerable:!0,get:function(){return o.trackDisposable}}),Object.defineProperty(t,"enableDisposablesTrack",{enumerable:!0,get:function(){return o.enableDisposablesTrack}}),Object.defineProperty(t,"disableDisposablesTrack",{enumerable:!0,get:function(){return o.disableDisposablesTrack}});var a=n("697ecdc674");Object.defineProperty(t,"DisposeTrace",{enumerable:!0,get:function(){return a.DisposeTrace}}),Object.defineProperty(t,"enableDisposeTrace",{enumerable:!0,get:function(){return a.enableDisposeTrace}}),Object.defineProperty(t,"disableDisposeTrace",{enumerable:!0,get:function(){return a.disableDisposeTrace}});var s=n("239887fb93");Object.defineProperty(t,"toDisposable",{enumerable:!0,get:function(){return s.toDisposable}}),Object.defineProperty(t,"isDisposable",{enumerable:!0,get:function(){return s.isDisposable}}),Object.defineProperty(t,"dispose",{enumerable:!0,get:function(){return s.dispose}}),Object.defineProperty(t,"combinedDisposable",{enumerable:!0,get:function(){return s.combinedDisposable}}),Object.defineProperty(t,"tryToDispose",{enumerable:!0,get:function(){return s.tryToDispose}}),Object.defineProperty(t,"tryToMarkDispose",{enumerable:!0,get:function(){return s.tryToMarkDispose}});var c=n("ff6b6fad8b");Object.defineProperty(t,"DisposableStore",{enumerable:!0,get:function(){return c.DisposableStore}});var u=n("baa9fada98");Object.defineProperty(t,"CancellationTokenSource",{enumerable:!0,get:function(){return u.CancellationTokenSource}})},c89632fe6d:function(e,t,n){"use strict";var r=n("31a899c9f3").version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],c=void 0===s||a(s,o,e);if(!0!==c)throw new TypeError("option "+o+" must be "+c)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},d3e4db71be:function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},dd1b838932:function(e,t,n){"use strict";n.r(t),n.d(t,"getHash",(function(){return s})),n.d(t,"getHost",(function(){return c})),n.d(t,"getHostname",(function(){return u})),n.d(t,"getPathname",(function(){return l})),n.d(t,"getOrigin",(function(){return f})),n.d(t,"getProtocol",(function(){return h})),n.d(t,"getSearch",(function(){return p})),n.d(t,"getPort",(function(){return d})),n.d(t,"getHref",(function(){return v})),n.d(t,"getQuery",(function(){return b})),n.d(t,"getU",(function(){return y}));var r=n("70eedf593c"),i=n("624cdb524f"),o="location",a="u";function s(){return Object(i.b)(r.a,o)?location.hash:""}function c(){return Object(i.b)(r.a,o)?location.host:""}function u(){return Object(i.b)(r.a,o)?location.hostname:""}function l(){return Object(i.b)(r.a,o)?location.pathname:""}function f(){return Object(i.b)(r.a,o)?location.origin:""}function h(){return Object(i.b)(r.a,o)?location.protocol:""}function p(){return Object(i.b)(r.a,o)?location.search:""}function d(){return Object(i.b)(r.a,o)?location.port:""}function v(){return Object(i.b)(r.a,o)?location.href:""}function b(e,t){if(void 0===t&&(t={shouldDecodeURI:!1}),!Object(i.b)(r.a,o))return"";var n=new RegExp("(\\?|&)".concat(e,"=([^&]*)(#|&|$)")),a=((null==t?void 0:t.shouldDecodeURI)?decodeURIComponent(p()):p()).match(n);return a?decodeURIComponent(a[2]):""}function y(){return b(a)}},e9fad8bcaf:function(e,t,n){"use strict";var r=n("94b54f38ee"),i=n("ac1e2b0319"),o=n("446c52c6f2"),a=n("f8cdcb88e2"),s=n("4498e7a6fb"),c=n("c89632fe6d"),u=c.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:u.transitional(u.boolean),forcedJSONParsing:u.transitional(u.boolean),clarifyTimeoutError:u.transitional(u.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var f=[a,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(l),o=Promise.resolve(t);f.length;)o=o.then(f.shift(),f.shift());return o}for(var h=t;r.length;){var p=r.shift(),d=r.shift();try{h=p(h)}catch(e){d(e);break}}try{o=a(h)}catch(e){return Promise.reject(e)}for(;l.length;)o=o.then(l.shift(),l.shift());return o},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},ec11356cf6:function(e,t,n){e.exports=n("2beec10acc")},eec87fff73:function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},f37f38404e:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("570b26a0fa"),i=function(e){var t=e;Object(r.tdwSingle)(t)}},f42cbfcd9d:function(e,t,n){"use strict";var r=n("1cc181d9f8");function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},f8cdcb88e2:function(e,t,n){"use strict";var r=n("94b54f38ee"),i=n("8ac5678f09"),o=n("052105b914"),a=n("58bffcf462"),s=n("1cc181d9f8");function c(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return c(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return c(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(c(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},f9f6cd81c2:function(e,t,n){"use strict";var r=n("fa25e7cd6c");e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},fa25e7cd6c:function(e,t,n){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},ff6b6fad8b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisposableStore=void 0;var r=n("697ecdc674"),i=n("0d99992889"),o=function(){function e(){this.toDisposeSet=new Set,this.isDisposeState=!1}return e.prototype.dispose=function(e){if(!this.isDisposeState)if(i.markTracked(this),this.isDisposeState=!0,e)this.clear(e);else{var t=r.DisposeTrace.traceRoot(this.constructor.name);this.clear(t),t.stop()}},e.prototype.clear=function(e){this.toDisposeSet.forEach((function(t){var n=t.disposableId||t.constructor.name;t.dispose(null==e?void 0:e.branch(n))})),this.toDisposeSet.clear()},e.prototype.add=function(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return i.markTracked(t),this.isDisposeState?e.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.toDisposeSet.add(t),t},e.DISABLE_DISPOSED_WARNING=!1,e}();t.DisposableStore=o}}]);
//# sourceMappingURL=slide-commonAsync~205ac551-5e7f27.js.map