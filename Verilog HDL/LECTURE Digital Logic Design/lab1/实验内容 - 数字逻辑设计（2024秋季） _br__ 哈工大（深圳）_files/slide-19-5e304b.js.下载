(this.webpackJsonp=this.webpackJsonp||[]).push([[19],{"9623a26d49":function(e,t,n){"use strict";n.d(t,"a",(function(){return pt}));var i=n("d7c625d1f2"),s=n("69084d01d3"),a=n.n(s),o=n("2e0796c118"),r=n.n(o),l=n("6884e1a126"),c=n("b25bc41833"),h=n("3eb43e853c"),d=n("7d0cf54160"),u="statusbar_statusbar-wrapper__3jAPj",p="statusbar_statusbar-pusher__AmxFt",b="statusbar_status-bar-component-wrapper__NwnZ7",m="statusbar_static__2Ro1E",g="statusbar_active__2HYrG";Object(d.a)('.statusbar_statusbar-wrapper__3jAPj {\n  padding: 0 16px;\n  display: flex;\n  height: 100%;\n  background-color: var(--workbench-theme-statusbar-background, #f0f0f0);\n  border-top: 1px solid var(--workbench-theme-statusbar-border, rgba(0, 0, 0, 0.04));\n  align-items: center;\n  transition: background-color 0.3s ease;\n  will-change: transform;\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_statusbar-pusher__AmxFt {\n  margin: 0 auto;\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7 {\n  margin: 0 6px;\n  color: var(--workbench-theme-statusbar-text-color, var(--workbench-theme-statusbar-foreground, #000000));\n  border-radius: 2px;\n  min-width: 24px;\n  min-height: 24px;\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7:first-child {\n  margin-left: 0;\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7:last-child {\n  margin-right: 0;\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7:not(.statusbar_static__2Ro1E):hover {\n  background-color: var(--workbench-theme-statusbar-hover-background, var(--workbench-theme-global-button-hover, rgba(0, 0, 0, 0.04)));\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7.statusbar_active__2HYrG,\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7:not(.statusbar_static__2Ro1E):active {\n  background-color: var(--workbench-theme-statusbar-active-background, var(--workbench-theme-global-button-active, rgba(0, 0, 0, 0.08)));\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7 svg path.secondary {\n  fill: var(--workbench-theme-statusbar-icon-secondary-color, var(--workbench-theme-global-icon-secondary-color, currentColor)) !important;\n  opacity: var(--workbench-theme-statusbar-icon-secondary-color-opacity, var(--workbench-theme-global-icon-secondary-color-opacity, 0.4));\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7 svg path[fill]:not(g[fill="none"]),\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7 svg g[fill]:not(g[fill="none"]),\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7 path.primary {\n  fill: var(--workbench-theme-statusbar-icon-primary-color, var(--workbench-theme-global-icon-primary-color, currentColor)) !important;\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7 path.primary {\n  opacity: var(--workbench-theme-statusbar-icon-primary-color-opacity, var(--workbench-theme-global-icon-primary-color-opacity, 1));\n}\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7 svg path[stroke]:not(g[stroke="none"]),\n.statusbar_statusbar-wrapper__3jAPj > .statusbar_status-bar-component-wrapper__NwnZ7 svg g[stroke]:not(g[stroke="none"]) {\n  stroke: var(--workbench-theme-statusbar-icon-primary-color, var(--workbench-theme-global-icon-primary-color, currentColor)) !important;\n}\n.statusbar_edge-right-tooltip__1JWl8.statusbar_dui-tooltip-content__2Ln9N {\n  transform: translate(-35%) !important;\n}\n');var f=n("ced39f0c87"),v=n("0c89cbe148"),_=n("f0bb2b6935"),y=n("4ab3c0f121"),k=n("a170754013"),x=n("6d27bf4573"),w=n.n(x),O=n("38bd6b38a5"),j=n("f67e86224f");class M extends s.PureComponent{constructor(){super(...arguments),this.handleClick=e=>{var t,n;this.props.preventOriginalClick&&e.stopPropagation(),this.props.disabled||(this.props.badge&&this.badgeService.removeBadgeOn("statusbar",this.props.name),Object(O.c)(this.props.onClick,e),null===(n=(t=this.props).onClick)||void 0===n||n.call(t))}}render(){const{content:e,style:t}=this.props,n=null!=t?t:{},{disabled:i,tooltip:s,badge:o,ariaLabel:r}=this.props;let l=e;a.a.isValidElement(l)&&(l=a.a.cloneElement(l,{disabled:i}));const c=[b];return this.props.active&&c.push(g),this.props.preventHighlight&&c.push(m),a.a.createElement("div",{onClickCapture:this.handleClick,className:c.join(" "),style:Object.assign(Object.assign({},n),{opacity:i?.3:1,pointerEvents:i?"none":"auto"}),role:"button","aria-checked":this.props.active,"aria-label":null!=r?r:s},a.a.createElement(k.Tooltip,{placement:"top",title:s,disabled:!s},a.a.createElement(w.a,{dot:o,style:{transform:"scale(0.6)",top:-1,right:-3,border:"none",transformOrigin:"top right"}},e)))}}Object(i.__decorate)([Object(l.c)(j.a),Object(i.__metadata)("design:type",Object)],M.prototype,"badgeService",void 0);var S=n("b853facc01"),C=n.n(S);class T extends s.PureComponent{constructor(){super(...arguments),this.shouldHide=e=>Object(y.a)(e.shouldHide,!1),this.haveBadge=e=>this.props.badge.some((t=>t.key===e.name&&"statusbar"===t.position)),this.getComponent=(e,t)=>{const{content:n,name:i}=e,s=this.shouldHide(e);return n&&!s?a.a.createElement(_.a,{key:e.name},a.a.createElement(M,Object.assign({},function(e){return Object.assign(Object.assign({},e),{tooltip:Object(y.a)(e.tooltip,""),disabled:Object(y.a)(e.shouldDisabled,!1),style:Object(y.a)(e.style,void 0),active:Object(y.a)(e.shouldCheck,!1),content:Object(y.a)(e.content,void 0)})}(e),{badge:this.haveBadge(e)}))):"divider"===i?a.a.createElement(M,{key:`${e.name}-${t}`,name:`${e.name}-${t}`,style:{margin:"0 8px",minWidth:1},preventHighlight:!0,content:a.a.createElement(C.a,{style:{borderRight:"1px solid var(--workbench-theme-statusbar-border)",margin:0},orientation:"vertical"})}):null}}render(){return a.a.createElement("div",{className:u,role:"toolbar","aria-label":"状态栏"},this.props.statusbar.left.map(this.getComponent),a.a.createElement("div",{className:p}),this.props.statusbar.right.map(this.getComponent))}}T.contextType=c.a;const E=Object(v.a)([f.a.Statusbar,f.a.Badge])(T);var B="pc_workbench-pc__2qtjl",R="pc_header__3i0cL",I="pc_container__3evvF",W="pc_float__3qJL6",A="pc_footer__33sHn";Object(d.a)(".pc_workbench-pc__2qtjl {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  box-sizing: border-box;\n}\n.pc_workbench-pc__2qtjl .pc_header__3i0cL {\n  flex-shrink: 0;\n  border-bottom: 1px solid var(--workbench-theme-toolbar-border-without-drawer, transparent);\n  background-color: var(--workbench-theme-toolbar-background, #f9fafb);\n  position: relative;\n  z-index: 1300;\n}\n.pc_workbench-pc__2qtjl .pc_header__3i0cL .pc_hidden__sN0uV {\n  position: absolute;\n  top: -1000px;\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n}\n.pc_workbench-pc__2qtjl .pc_container__3evvF {\n  position: relative;\n  height: 100%;\n  transition: all 0.3s ease;\n  transform-origin: 0 0;\n  -webkit-overflow-scrolling: touch;\n  display: flex;\n  justify-content: center;\n  background: var(--workbench-theme-editor-zone-background, #f9fafb);\n  -webkit-backdrop-filter: var(--workbench-theme-editor-zone-background-filter, none);\n          backdrop-filter: var(--workbench-theme-editor-zone-background-filter, none);\n}\n.pc_workbench-pc__2qtjl .pc_container__3evvF .pc_float__3qJL6 {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.pc_workbench-pc__2qtjl .pc_footer__33sHn {\n  height: auto;\n  width: 100%;\n  box-sizing: border-box;\n}\n");var N=n("614e5b33ef"),D=n("6883d8ba87"),P=n("1a86574eda"),z=n.n(P),H=n("72c1bc8d17"),U=n("e015c46d72"),$=n("7381d53dac"),F={contextmenu:"context-menu_contextmenu__2Aa6v","dui-divider-compact":"context-menu_dui-divider-compact__3Te8M","dui-divider-horizontal":"context-menu_dui-divider-horizontal__2PCv2","contextmenu-overlay":"context-menu_contextmenu-overlay__aBGJU","contextmenu-icon":"context-menu_contextmenu-icon__LViQv","workbench-menu-item":"context-menu_workbench-menu-item__2t1Up"};Object(d.a)(".context-menu_contextmenu__2Aa6v {\n  min-width: 180px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  position: fixed;\n  z-index: 4001;\n  height: auto !important;\n}\n.context-menu_contextmenu__2Aa6v .context-menu_dui-divider-compact__3Te8M.context-menu_dui-divider-horizontal__2PCv2 {\n  margin: 6px 0 !important;\n}\n.context-menu_contextmenu-overlay__aBGJU {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 4000;\n}\n.context-menu_contextmenu-icon__LViQv {\n  position: absolute;\n  left: 10px;\n  height: 20px;\n  width: 20px;\n}\n.context-menu_workbench-menu-item__2t1Up.dui-menu-submenu::after {\n  filter: var(--workbench-theme-menu-arrow-filter);\n}\n");const L=({item:e,badge:t})=>{const{content:n}=e;let i;return i="function"==typeof n?n():n,a.a.isValidElement(i)&&"string"==typeof i.type&&(i=a.a.cloneElement(i,{onMouseDown:e=>{e.preventDefault()}})),t?a.a.createElement(_.a,null,a.a.createElement("div",null,null!=i?i:null,a.a.createElement(w.a,{status:"error",style:{transform:"scale(0.6)",marginLeft:4}}))):a.a.createElement(_.a,null,null!=i?i:null)};var V=n("8ba8926996"),K=n("4904850fed"),G=n("b2c8ac9d89"),Z=n("b0be7770fd");let J=1/0;class q extends s.Component{constructor(e){super(e),this.edges={left:!1,right:!1,top:!1,bottom:!1},this.levelInfo={current:0},this.ref=Object(s.createRef)(),this.getBadgeTree=()=>this.props.badge.filter((e=>"contextMenu"===e.position)).map((e=>e.key)),this.handleClick=e=>{this.props.contextMenuInfo.show&&(e.ctrlKey||this.hoveringMenu||this.contextMenuService.hideContextMenu())},this.enter=()=>{this.hoveringMenu=!0},this.leave=()=>{this.hoveringMenu=!1},this.shouldShow=e=>{let t=!0;if(e.shouldHide&&(t=!Object(y.a)(e.shouldHide,!1)),t&&!e.ignoreChildrenHideStatus&&e.children.length>0){let n=!1;return n=e.children.reduce(((e,t)=>e||this.shouldShow(t)),n),t&&n}return t},this.getShortcut=e=>{if(void 0!==e)return $.a.isMac()?e.mac:e.win},this.shouldDisabled=e=>!!e.shouldDisabled&&Object(y.a)(e.shouldDisabled,!1),this.removeUnnecessaryDivider=(e,t,n)=>{if("divider"===e.name){if(t<J)return!1;const e=n[t+1];if(!e)return!1;if("divider"===e.name)return!1}else J>t&&(J=t);return!0},this.generateMenuTree=(e,t)=>{if(0===t&&this.enterMenuTree(),"divider"===e.name)return a.a.createElement(C.a,{key:`divider-${t}`});J=1/0;const n=e.children.filter((e=>!Object(y.a)(e.shouldHide,!1))).filter(this.removeUnnecessaryDivider);if(0===e.children.length||0===n.length&&e.onClick){const t=this.checkBadge(e.name);return this.generateMenuItem({item:e,badge:t})}const i=n.map(this.generateMenuTree),s=Object.assign({},this.getCurrentLevelInfo());return this.leaveMenuTree(),e.children.length>0&&0===n.length&&!e.onClick?null:this.genarateSubMenu(e,t,i,s)},this.handleVisibleChange=(e,t)=>{e&&this.badgeTree.includes(t)&&this.badgeService.removeBadgeOn("contextMenu",t)},this.handleMenuClick=(e,t)=>{this.contextMenuService.restoreFocus();const n=this.contextMenuService.get(e),{onClick:i}=n;if(Object(O.c)(i,t),i&&i(),this.props.badge.some((e=>e.key===(null==n?void 0:n.name)&&"contextMenu"===e.position))&&this.badgeService.removeBadgeOn("contextMenu",n.name),n.preventDismiss)return this.selectionChangePrevent=!0,void setTimeout((()=>{this.selectionChangePrevent=!1}),100);this.contextMenuService.hideContextMenu()},this.calculateEdges=e=>{this.edges={left:!1,right:!1,top:!1,bottom:!1};const t=e.filter((e=>`${e.key}`.startsWith("divider"))).length,n=28*(e.length-t)+13*t+12;let i=document.body.offsetHeight;return this.props.contextMenuInfo.left+180>document.body.offsetWidth&&(this.edges.right=!0),this.props.contextMenuInfo.top+n>document.body.offsetHeight&&(this.edges.bottom=!0,this.props.contextMenuInfo.top-n<0&&(this.edges.top=!0,i=document.body.offsetHeight-48)),this.props.contextMenuInfo.left<50&&(this.edges.left=!0),[180,n,i]},this.state={}}componentDidMount(){document.addEventListener("click",this.handleClick,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleClick,!0)}componentDidUpdate(e){this.props.contextMenuInfo.show?e.contextMenuInfo.show||this.eventEmitter.emit(G.a.ContextMenuShowed):(this.contextMenuService.restoreFocus(),e.contextMenuInfo.show&&this.eventEmitter.emit(G.a.AfterContextMenuDismissed)),this.updateContextmenuRealHeight()}updateContextmenuRealHeight(){window.requestAnimationFrame((()=>{var e,t,n;const i=null===(n=null===(t=null===(e=this.ref.current)||void 0===e?void 0:e.listRef)||void 0===t?void 0:t.current)||void 0===n?void 0:n.getBoundingClientRect().height;i&&i!==this.state.contextMenuHeight&&this.setState({contextMenuHeight:i})}))}checkBadge(e){return this.badgeTree.includes(e)}render(){var e;if(this.props["contextMenu.disabled"]||!this.props.contextMenuInfo.show)return this.hoveringMenu&&this.leave(),null;this.badgeTree=this.getBadgeTree(),J=1/0;const t=this.props.contextMenu.children.filter(this.shouldShow).filter(this.removeUnnecessaryDivider).map((e=>{var t;return null===(t=e.onShow)||void 0===t||t.call(e),e})).map(this.generateMenuTree).filter((e=>null!==e)),{needCheckPadding:n,hasIcon:i}=this.getCurrentLevelInfo();if(this.leaveMenuTree(),0===t.length)return null;const[s,o,r]=this.calculateEdges(t),l=null!==(e=this.state.contextMenuHeight)&&void 0!==e?e:o,c=Math.min(l,r),h=this.edges.top?24:this.props.contextMenuInfo.top-c;let d=this.edges.bottom?h:this.props.contextMenuInfo.top+10;const u=document.body.clientHeight-c-36;d>u&&(d=u);const p=(this.edges.right?this.props.contextMenuInfo.left-s:this.props.contextMenuInfo.left)+10;return a.a.createElement(a.a.Fragment,null,this.settings.contextMenu.hasOverlay&&a.a.createElement("div",{className:F["contextmenu-overlay"],style:{display:this.props.contextMenuInfo.show?"block":"none"},onContextMenu:e=>{e.preventDefault()}}),a.a.createElement(z.a,{type:i?"with-icon":"normal",onClick:this.handleMenuClick,className:F.contextmenu,selectable:n,onMouseEnter:this.enter,onMouseLeave:this.leave,ref:this.ref,style:Object.assign({display:this.props.contextMenuInfo.show?"block":"none",top:d,left:p},r<Number.MAX_SAFE_INTEGER?{overflowY:"auto",maxHeight:r}:{})},t))}getDescription(e){return"function"==typeof e.description?e.description():e.description}enterMenuTree(){this.levelInfo.current+=1}leaveMenuTree(){delete this.levelInfo[this.levelInfo.current],this.levelInfo.current-=1}recordLevelInfo(e,t,n){const{current:i}=this.levelInfo;this.levelInfo[i]?(this.levelInfo[i].needCheckPadding=this.levelInfo[i].needCheckPadding||e,this.levelInfo[i].hasIcon=this.levelInfo[i].hasIcon||t,this.levelInfo[i].childBeenChecked=this.levelInfo[i].childBeenChecked||n):this.levelInfo[i]={needCheckPadding:e,hasIcon:t,childBeenChecked:n}}getCurrentLevelInfo(){var e;const{current:t}=this.levelInfo;return null!==(e=this.levelInfo[t])&&void 0!==e?e:{hasIcon:!1,hasCheck:!1}}shouldCheck(e){return!!e.shouldCheck&&Object(y.a)(e.shouldCheck,!1)}generateMenuItem({item:e,badge:t}){var n;const i=void 0!==e.shouldCheck,s=void 0!==e.icon,o=this.shouldCheck(e);this.recordLevelInfo(i,s,o);const r=this.shouldDisabled(e),l=e.preventHighlight?{background:"transparent"}:{},c="function"==typeof e.style?e.style():e.style;let h=a.a.createElement(z.a.Item,{id:e.name,disabled:r,style:Object.assign(Object.assign({},c),l),key:e.name,icon:s?a.a.createElement("div",{className:F["workbench-menu-item-icon"]},e.icon):void 0,selected:this.shouldCheck(e),className:`contextmenu-item-${e.name}`,description:null!==(n=this.getDescription(e))&&void 0!==n?n:this.getShortcut(e.shortcut),onMouseEnter:r?void 0:e.onMouseEnter,onMouseLeave:r?void 0:e.onMouseLeave},a.a.createElement(L,{item:e,badge:t}));return e.tooltip&&(h=a.a.createElement(a.a.Fragment,{key:e.name},Object(Z.a)(h,e.tooltip,{style:{display:"block"}}))),e.isPureContent&&(h=a.a.createElement(L,{item:e,badge:t})),h}genarateSubMenu(e,t,n,i){const s="function"==typeof e.style?e.style():e.style,o="function"==typeof e.popUpStyle?e.popUpStyle():e.popUpStyle,r="function"==typeof e.popupClassName?e.popupClassName():e.popupClassName,l=this.checkBadge(e.name),c=void 0!==e.icon,h=this.shouldCheck(e),d=i.needCheckPadding||!!e.syncCheckStatus,{childBeenChecked:u}=i,p=h||u&&!!e.syncCheckStatus;return this.recordLevelInfo(!!e.syncCheckStatus,c,p),a.a.createElement(z.a.SubMenu,{id:e.name,className:F["workbench-menu-item"],title:a.a.createElement(L,{item:e,badge:l}),key:`sub-${e.name}-${t}`,style:s,icon:c?a.a.createElement("div",{className:F["workbench-menu-item-icon"]},e.icon):void 0,selectable:d,selected:p,popupStyle:o,popupClassName:r,type:c?"with-icon":"normal",onVisibleChange:t=>{var n;null===(n=e.onVisibleChange)||void 0===n||n.call(e,t),this.handleVisibleChange(t,e.name),t&&e.children.forEach((e=>{var t;null===(t=e.onShow)||void 0===t||t.call(e)}))},disabled:this.shouldDisabled(e)},n)}}q.contextType=c.a,Object(i.__decorate)([Object(l.c)(),Object(i.__metadata)("design:type",V.a)],q.prototype,"eventEmitter",void 0),Object(i.__decorate)([Object(l.c)(),Object(i.__metadata)("design:type",U.a)],q.prototype,"contextMenuService",void 0),Object(i.__decorate)([Object(l.c)(j.a),Object(i.__metadata)("design:type",Object)],q.prototype,"badgeService",void 0),Object(i.__decorate)([Object(l.c)(),Object(i.__metadata)("design:type",K.a)],q.prototype,"settings",void 0);const X=Object(v.a)([f.a.ContextMenu,f.a.ContextMenuInfo,H.a.DisableContextMenu,f.a.Badge])(q);var Y=n("4a94bd5b30"),Q=n("9f3a618faa"),ee=n("b04d6da438"),te=n("15fddb9b82"),ne=n("a617ed2376"),ie=n("b724aeb83f"),se=n("d21a1c72de"),ae=n("7dfbf6c984"),oe=n("20a6ee23d7");class re extends s.PureComponent{constructor(){super(...arguments),this.ref=a.a.createRef()}componentDidMount(){this.sensor=new ae.a((()=>{if(!1===this.props.visible)return;if(!this.ref.current)return;const e=getComputedStyle(this.ref.current),t=this.ref.current.clientWidth,n=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10);this.titlebarService.updateWidth(this.props,t,n)})),this.ref.current&&this.sensor.observe(this.ref.current)}componentWillUnmount(){this.titlebarService.updateWidth(this.props,0,0),this.sensor.disconnect()}render(){const{name:e,ariaLabel:t,items:n,getComponent:i}=this.props,s=!1===this.props.visible?{maxWidth:0,minWidth:0,margin:0,overflow:"hidden"}:{},o=n.some((e=>e.some((e=>"pusher"===e.name))))?{flex:1}:{};return a.a.createElement("div",{ref:this.ref,style:Object.assign(Object.assign({},s),o),role:"group","aria-label":t,className:te.a.group},n.map(((t,n)=>a.a.createElement("div",{className:te.a.row,key:`${e}-${n}`},t.map(((e,t)=>i(e,`${n}-${t}`)))))))}}Object(i.__decorate)([Object(l.c)(),Object(i.__metadata)("design:type",ne.a)],re.prototype,"titlebarService",void 0);class le extends s.PureComponent{constructor(){super(...arguments),this.ref=a.a.createRef(),this.mousemove=null,this.click=null,this.hovering=!1,this.groupItemsMap=new Map,this.shouldHide=e=>Object(y.a)(e.shouldHide,!1),this.getComponent=(e,t)=>{if(Object(oe.a)(e))return a.a.createElement(re,Object.assign({key:`${e.name}-${t}`,getComponent:this.getComponent,items:this.groupItemsMap.get(e.name)},e,this.props.titlebarCalculatedWidth[e.name]));const{content:n,name:i}=e;return n?a.a.createElement(_.a,{key:i},a.a.createElement(ee.a,Object.assign({},Object(ee.b)(e),this.props.titlebarCalculatedWidth[i]))):"pusher"===i?a.a.createElement("div",{className:te.a["titlebar-pusher"],key:`${e.name}-${t}`}):"divider"===i?a.a.createElement(ee.a,{key:`${e.name}-${t}`,name:e.name,style:{margin:"0 4px"},content:a.a.createElement(C.a,{style:{display:"block",height:`${Math.floor(this.props["titlebar.height"]/9*4)}px`,borderRight:"1px solid rgba(0,0,0)",opacity:.06,margin:0},orientation:"vertical"})}):null},this.clickOutsideTitlebar=e=>{var t;(null===(t=this.ref.current)||void 0===t?void 0:t.contains(e.target))||(this.titlebarService.setHoverActive(!0),this.store.update(f.a.TitlebarShow,!1))},this.handleMouseMove=e=>{var t,n,i;const{clientY:s,clientX:a}=e,{top:o=0,left:r=0,right:l=0}=null!==(i=null===(n=null===(t=this.ref)||void 0===t?void 0:t.current)||void 0===n?void 0:n.getBoundingClientRect())&&void 0!==i?i:{},c=this.getTakeUpSpaceHeight();this.props[f.a.TitlebarListenMouseMove]&&a<=l&&a>=r&&s<=o+this.titlebarHeight+c&&s>=o+this.titlebarHeight?(this.hovering=!0,this.store.update(f.a.TitlebarShow,!0)):this.props[f.a.TitlebarListenMouseMove]&&s>o+this.props["titlebar.height"]&&this.props[f.a.TitlebarShow]&&this.store.update(f.a.TitlebarShow,!1)}}componentDidMount(){this.sensor=new ae.a((()=>{if(!this.ref.current)return;const e=getComputedStyle(this.ref.current),t=[e.paddingLeft,e.paddingRight].reduce(((e,t)=>e+parseInt(t,10)),0);this.titlebarService.updateContainerWidth(this.ref.current.clientWidth-t)})),this.ref.current&&this.sensor.observe(this.ref.current),this.props[H.a.TitlebarHoverable]&&this.store.get(f.a.TitlebarHover).subscribe((e=>{var t,n;e?(this.mousemove=Object(Q.a)(document,"mousemove").pipe(Object(Y.a)(30)).subscribe(this.handleMouseMove),this.click=Object(Q.a)(document,"click").subscribe(this.clickOutsideTitlebar)):(null===(t=this.mousemove)||void 0===t||t.unsubscribe(),null===(n=this.click)||void 0===n||n.unsubscribe(),this.hovering=!1)})),this.eventEmitter.emit(G.a.TitlebarMounted,this.ref.current)}componentWillUnmount(){this.sensor.disconnect()}filterGroupConfig(e){e.rows=e.rows.map((e=>e.map((e=>e.filter((e=>!this.shouldHide(e))))).filter((e=>!!e.length)))).filter((e=>!!e.length))}convertTitlebar(e){this.groupItemsMap.clear();const t=e=>e.reduce(((e,t)=>{var n,i;return 0===t.length?e:0===e.length||"pusher"===(null===(n=e[e.length-1])||void 0===n?void 0:n.name)||"pusher"===(null===(i=t[0])||void 0===i?void 0:i.name)?e.concat(t):e.concat({name:"divider"},t)}),[]),n=e.map((e=>e.filter((e=>Object(oe.a)(e)?(this.filterGroupConfig(e),!(this.shouldHide(e)||!e.rows.length)&&(this.groupItemsMap.set(e.name,e.rows.map((e=>t(e)))),!0)):!this.shouldHide(e)))));return t(n)}getTakeUpSpaceHeight(){const e=this.props[H.a.TitlebarHoverable];return"boolean"!=typeof e&&(null==e?void 0:e.takeUpSpaceHeight)?e.takeUpSpaceHeight:this.props["titlebar.height"]/3}get titlebarHeight(){var e;return null!==(e=this.props["titlebar.height"])&&void 0!==e?e:48}render(){const e=this.convertTitlebar(this.props.titlebar),t=[te.a.titlebar,this.props.titlebarFocus?te.a.active:""];return a.a.createElement(a.a.Fragment,null,a.a.createElement(se.a,{name:"titlebar",onExited:()=>{this.hovering=!1},simulateSpaceChange:!this.hovering},a.a.createElement("div",{id:"workbench-titlebar",ref:this.ref,className:t.join(" "),style:{height:this.titlebarHeight},role:"toolbar","aria-label":"titlebar"},e.map(this.getComponent))))}}Object(i.__decorate)([Object(l.c)(),Object(i.__metadata)("design:type",ne.a)],le.prototype,"titlebarService",void 0),Object(i.__decorate)([Object(l.c)(),Object(i.__metadata)("design:type",ie.a)],le.prototype,"store",void 0),Object(i.__decorate)([Object(l.c)(),Object(i.__metadata)("design:type",V.a)],le.prototype,"eventEmitter",void 0);const ce=Object(v.a)([f.a.Titlebar,f.a.TitlebarShow,f.a.TitlebarFocus,H.a.TitlebarHeight,H.a.TitlebarHoverable,f.a.TitlebarCalculatedWidth,f.a.TitlebarHover,f.a.TitlebarListenMouseMove])(le);var he=n("e14de3b184"),de=n("4b55702140"),ue=n("fb366a3cd5"),pe=n("71623fcbc6"),be=n("d86bf030db"),me=n("74c8f9eae6"),ge=n("6444d5570d"),fe=n("041b86c263"),ve=n("6dc8074120"),_e=n("cfae037ddc"),ye=n("d64b311f14"),ke=n("e2e38b91fe");class xe{constructor(e){this.unsubscribe$=new de.a,this.buttonsWidth=new Map,this.totalWidth=new me.a(0),this.calculatedVisible=new Map,this.calculatedWidth=new Map,this.containerWidth=0,this.nextToShrink=[],this.shrinked=[],this.alwaysShrinked=[],this.nextToResize=[],this.resized=[],this.checkVisible=e=>{var t;return null===(t=this.calculatedVisible.get(e.name))||void 0===t||t},this.groups=e.groups,this.groupShelter=e.groupShelter,this.listener=e.listener,this.preventAutoShrink=e.preventAutoShrink,this.shrinkOnContainerResize=e.shrinkOnContainerResize,this.updateGroups(this.groups)}updateGroups(e){this.groups=e,this.calculatedVisible=new Map,this.calculatedWidth=new Map,e.flatMap((e=>[e.shelter,...e.items.map((e=>e.shelter)),...e.items.filter((e=>e.key.startsWith("VG_tail_shelter_"))).flatMap((e=>e.buttons[0])),{name:ke.a}])).filter(Boolean).forEach((e=>{this.calculatedVisible.set(e.name,!1)})),this.analyzePriority(this.groups),this.container&&this.handleResize(),ye.b&&(this.containerWidth=9999,this.deliver({visibleMap:this.calculatedVisible,nextToShrink:this.nextToShrink,shrinked:this.shrinked,maxWidthMap:this.calculatedWidth,nextToResize:this.nextToResize,resized:this.resized}))}analyzePriority(e){const t=[],n=[],i=[...e].reverse().map(((e,i)=>{let s=0;const a=e.items.reduce(((a,o)=>{const r={names:[],priority:o.priority,shrinkTo:this.getShrinkTo(o,e)},l={buttons:[],priority:o.priority};o.buttons.forEach((e=>{[...e].reverse().forEach((e=>{e.shrinkable&&e.widthRange&&l.buttons.push({name:e.name,widthRange:e.widthRange,shrinkSteps:e.shrinkSteps}),r.names.push(e.name)}))})),r.names.length>0&&!o.forceShrink?a.push(r):r.names.length>0&&o.forceShrink&&n.push(r),o.shelter&&o.shrinkType===ve.a.ON_THE_SPOT&&a.push({names:[o.shelter.name],priority:o.priority,shrinkTo:""});const c=Math.ceil(Math.log(o.priority+1)/Math.LN10);return s=Math.max(c,s),l.buttons.length>0&&(l.priority=i+1+l.priority/Math.pow(10,s),t.push(l)),a}),[]).map((e=>Object.assign(Object.assign({},e),{priority:i+1+e.priority/Math.pow(10,s)})));return e.shelter&&a.unshift({names:[e.shelter.name],priority:a[0].priority,shrinkTo:""}),a})).flat().sort(((e,t)=>e.shrinkTo&&!t.shrinkTo?1:!e.shrinkTo&&t.shrinkTo?-1:t.priority-e.priority));this.nextToShrink=i,this.shrinked=[],this.nextToResize=t.sort(((e,t)=>t.priority-e.priority)),this.resized=[],n.forEach((e=>{e.names.forEach((e=>{this.calculatedVisible.set(e,!1)}));const t=e.shrinkTo||ke.a;this.calculatedVisible.set(t,!0)})),this.alwaysShrinked=n}getShrinkTo(e,t){var n,i,s,a,o,r;return e.shrinkType===ve.a.GROUP_TAIL?null!==(i=null===(n=e.shelter)||void 0===n?void 0:n.name)&&void 0!==i?i:`${t.key}-tail-shelter`:e.shrinkType===ve.a.ON_THE_SPOT?null!==(a=null===(s=e.shelter)||void 0===s?void 0:s.name)&&void 0!==a?a:"":null!==(r=null===(o=t.shelter)||void 0===o?void 0:o.name)&&void 0!==r?r:""}useContainer(e){this.container=e,this.startMonitor()}updateWidth(e,t){this.buttonsWidth.set(e,t),this.container&&this.handleResize()}withdraw(e){this.buttonsWidth.delete(e),this.container&&this.handleResize()}startMonitor(){Object(Q.a)(window,"resize").pipe(Object(fe.a)(ge.a)).pipe(Object(ue.a)(this.unsubscribe$)).subscribe(this.handleResize.bind(this)),this.shrinkOnContainerResize&&(this.containerResizeObserver=new ResizeObserver((()=>{this.handleResize()})),this.containerResizeObserver.observe(this.container)),this.totalWidth.pipe(Object(fe.a)(ge.a)).pipe(Object(ue.a)(this.unsubscribe$)).subscribe(this.calculate.bind(this)),this.handleResize()}handleResize(){const e=this.container.getBoundingClientRect().width;this.containerWidth=e;const t=this.getWidth(this.calculatedVisible,this.calculatedWidth);this.totalWidth.next(t)}getWidthDetail(e,t,n){const i=t=>{var n;return null===(n=e.get(t.name))||void 0===n||n},s=(e,n,i)=>{var s;let a=0;return a=t.has(e.name)?t.get(e.name):null!==(s=this.buttonsWidth.get(e.name))&&void 0!==s?s:0,a+=8,0===n&&(a-=4),n===i.length-1&&(a-=4),a};return(null!=n?n:this.groups).map((e=>({key:e.key,shelter:e.shelter&&i(e.shelter)?e.shelter:null,items:e.items.map((e=>({key:e.key,priority:e.priority,shrinkType:e.shrinkType,shelter:e.shelter&&i(e.shelter)?e.shelter:null,buttons:e.buttons.map((e=>e.filter(i)))}))).filter((e=>e.buttons.every((e=>e.length>0))||null!==e.shelter))}))).filter((e=>e.items.length>0||null!==e.shelter)).map(((e,t,n)=>{t===n.length-1&&i({name:ke.a})&&e.items.push(this.groupShelter);const a=e.shelter?s(e.shelter,0,[e.shelter]):0;if(e.items.every((e=>1===e.buttons.length))){let t=!1;return e.items.reduce(((e,n)=>{const i=e[e.length-1];if(t||!i||n.shelter){const t=Object.assign(Object.assign({},n),{buttons:n.buttons.map((e=>[...e]))});e.push(t),n.shelter&&(t.buttons[0]=n.buttons[0].concat(n.shelter))}else i.buttons[0]=i.buttons[0].concat(n.buttons[0]);return t=!!n.shelter,e}),[]).map((e=>e.buttons[0].map(s))).concat([[a]])}return e.items.flatMap((e=>{const t=e.buttons.map((e=>e.map(s)));if(e.shelter&&e.shrinkType===ve.a.ON_THE_SPOT){return[t,s(e.shelter,0,[e.shelter])]}return[t]})).concat([a])})).flatMap(((e,t,n)=>{var i;return[...e,t!==n.length-1&&null!==(i=this.buttonsWidth.get(`toolbar-group-divider-${t}`))&&void 0!==i?i:0]})).filter((e=>Array.isArray(e)&&!Object(_e.b)(e)?0!==e.reduce(((e,t)=>e+t),0):!Array.isArray(e)||!Object(_e.b)(e)||e.every((e=>0!==e.reduce(((e,t)=>e+t),0)))))}getWidthByDetails(e){return e.reduce(((e,t,n)=>{if(!Array.isArray(t))return e+t;if(Object(_e.b)(t)){return e+Math.max(...t.map((e=>e.reduce(((e,t)=>e+t),0))))+(0===n?4:8)}return e+t.reduce(((e,t)=>e+t),0)+(0===n?4:8)}),0)}getWidth(e,t,n){const i=this.getWidthDetail(e,t,n);return this.getWidthByDetails(i)}calculate(e){const t={visibleMap:this.calculatedVisible,nextToShrink:this.nextToShrink,shrinked:this.shrinked,maxWidthMap:this.calculatedWidth,nextToResize:this.nextToResize,resized:this.resized};if(this.preventAutoShrink)return void this.deliver(t);if(0===this.containerWidth||this.containerWidth>=e){const e=this.expand(t);return void this.deliver(e)}const n=this.shrink(t);this.deliver(n)}cloneParams(e){const{visibleMap:t,nextToShrink:n,shrinked:i,maxWidthMap:s,nextToResize:a,resized:o}=e;return{visibleMap:new Map(t),nextToShrink:[...n],shrinked:[...i],maxWidthMap:new Map(s),nextToResize:[...a],resized:[...o]}}expand(e){const t=this.cloneParams(e),{visibleMap:n,nextToShrink:i,shrinked:s,maxWidthMap:a,nextToResize:o,resized:r}=t;if(0===s.length&&r.length>0){const i=r[r.length-1];i.buttons.map((e=>{var t,n,i;const{name:s,widthRange:o,shrinkSteps:r}=e,l=null!==(n=null!==(t=a.get(s))&&void 0!==t?t:this.buttonsWidth.get(s))&&void 0!==n?n:0;let c=l;if(r){c=null!==(i=[o[0],...r,o[1]].find((e=>e>l)))&&void 0!==i?i:o[1]}else c=Math.min(l+1,o[1]);return a.set(s,c),{nextWidth:c,widthRange:o}})).every((({nextWidth:e,widthRange:t})=>e===t[1]))&&(o.push(i),r.pop());return this.getWidth(n,a)<this.containerWidth?this.expand(t):e}if(0===s.length)return e;const l=[];let c=s.pop();for(;c;){l.push(c);const{shrinkTo:e,priority:t}=c,n=s[s.length-1];c=e&&n&&e===n.shrinkTo&&n.priority===t||!e&&c.names[0].includes("tail-shelter")?s.pop():void 0}i.push(...l),l.forEach((e=>{const{names:t,shrinkTo:i}=e;t.forEach((e=>{n.set(e,!0)}));const a=s.some((e=>e.shrinkTo===i)),o=i||ke.a;n.set(o,a)}));return this.getWidth(n,a)<this.containerWidth?this.expand(t):e}shrink(e){var t;const n=this.cloneParams(e),{visibleMap:i,nextToShrink:s,shrinked:a,maxWidthMap:o,nextToResize:r,resized:l}=n;if(r.length>0){const e=r[r.length-1],t=e.buttons.map((e=>{var t,n,i;const{name:s,widthRange:a,shrinkSteps:r}=e,l=null!==(n=null!==(t=o.get(s))&&void 0!==t?t:this.buttonsWidth.get(s))&&void 0!==n?n:0;let c=l;if(r){c=null!==(i=[a[0],...r,a[1]].reverse().find((e=>l>e)))&&void 0!==i?i:a[0]}else c=Math.max(l-1,a[0]);return o.set(s,c),{nextWidth:c,widthRange:a}})).every((({nextWidth:e,widthRange:t})=>e===t[0]));e!==l[l.length-1]&&l.push(e),t&&r.pop();const s=this.getWidth(i,o);return this.containerWidth<s?this.shrink(n):n}if(1===s.length)return e;const c=[];let h=s.pop();for(;h;){c.push(h);const{shrinkTo:e,priority:t}=h,n=s[s.length-1];h=e&&n&&e===n.shrinkTo&&n.priority===t||!e&&(null==n?void 0:n.names[0].includes("tail-shelter"))?s.pop():void 0}a.push(...c),c.forEach((e=>{const{names:t}=e;t.forEach((e=>{i.set(e,!1)}))}));const d=(null===(t=c[0])||void 0===t?void 0:t.shrinkTo)||ke.a;i.set(d,!0);const u=this.getWidth(i,o);return this.containerWidth<u?this.shrink(n):n}deliver({visibleMap:e,nextToShrink:t,shrinked:n,maxWidthMap:i,nextToResize:s,resized:a}){var o;this.calculatedVisible=e,this.nextToShrink=t,this.shrinked=n,this.calculatedWidth=i,this.nextToResize=s,this.resized=a;const r=this.groups.map((e=>{const t=e.items.map((e=>{const t=e.buttons.map((e=>e.filter(this.checkVisible).map((e=>{const t=this.calculatedWidth.get(e.name);return Object.assign(Object.assign({},e),{maxWidth:t})})))).filter((e=>e.length>0));return e.shelter&&this.checkVisible(e.shelter)?[Object.assign(Object.assign({},e),{buttons:t,shelter:null}),{key:`virtual-group-shelter-${e.key}`,shelter:null,priority:e.priority,buttons:[[e.shelter]]}]:[Object.assign(Object.assign({},e),{buttons:t})]})).flat().filter((e=>e.buttons.length>0));return e.shelter&&this.checkVisible(e.shelter)&&t.push({key:`group-shelter-${e.key}`,shelter:null,priority:999,buttons:[[e.shelter]]}),{key:e.key,shelter:null,items:t}})).filter((e=>e.items.length>0));this.checkVisible({name:ke.a})&&r.length>0&&r[r.length-1].items.push(this.groupShelter);const l=this.getWidth(this.calculatedVisible,this.calculatedWidth);null===(o=this.listener)||void 0===o||o.call(this,{groups:r,totalWidth:l,containerWidth:this.containerWidth})}getShrinkedGroups(e){const t=e===ke.a?"":e,n={},i=this.alwaysShrinked.concat(this.shrinked).map((e=>(e.shrinkTo!==t&&(n[e.shrinkTo]?n[e.shrinkTo].push(...e.names):n[e.shrinkTo]=[...e.names]),e))).filter((e=>e.shrinkTo===t)).flatMap((e=>n[e.names[0]]?n[e.names[0]]:e.names)),s=e=>i.includes(e.name),a=this.groups.map((e=>{const t=e.items.map((e=>({buttons:e.buttons.map((e=>e.filter(s).map((e=>{const t=this.calculatedWidth.get(e.name);return Object.assign(Object.assign({},e),{maxWidth:t})})))).filter((e=>e.length>0)),key:e.key,shelter:null,priority:e.priority}))).filter((e=>e.buttons.length>0));return{key:e.key,shelter:null,items:t}})).filter((e=>e.items.length>0)),o=this.getWidthDetail(new Map([[ke.a,!1]]),this.calculatedWidth,a);return{groups:a,width:o,totalWidth:this.getWidthByDetails(o)}}destroy(){var e;this.unsubscribe$.next(),this.unsubscribe$.complete(),null===(e=this.containerResizeObserver)||void 0===e||e.disconnect()}}var we=n("aa2b09d49a"),Oe=n("5a304ea9e3"),je=n("ffbc624d0e");function Me(e={}){return{key:"overall-shelter",priority:1/0,shelter:null,buttons:[[Object.assign(Object.assign({name:ke.a,badge:!1,icon:je.a,hasArrow:!1,force:0},e),{dropdownContent:Object(Oe.a)(ke.a)})]]}}var Se=n("6e40d297be");class Ce extends s.PureComponent{constructor(e){super(e),this.container=a.a.createRef(),this.willBeFocusedByMouseEvent=!1,this.willBeBluredByDropdownClose=!1,this.willBeBluredByDropdownOpen=!1,this.flatButtons=[],this.dropdownRefs=new Map,this.mounted=!1,this.getShrinkedGroups=e=>this.shrinkManager.getShrinkedGroups(e),this.isSplitButton=e=>{const{dropdownContent:t,onClick:n,hasArrow:i}=e;return t&&n.hasRaw&&!1!==i},this.moveToLeft=()=>{const{focusIndex:e,focusOnArrow:t}=this.state,{length:n}=this.flatButtons;if(t)return void this.setState({focusOnArrow:!1});const i=0===e?n-1:e-1,s=this.flatButtons[i];this.isSplitButton(s)&&this.setState({focusOnArrow:!0}),this.setState({focusIndex:i})},this.moveToRight=()=>{const{focusIndex:e,focusOnArrow:t}=this.state,{length:n}=this.flatButtons,i=e===n-1?0:e+1;if(t)return void this.setState({focusOnArrow:!1,focusIndex:i});const s=this.flatButtons[e];this.isSplitButton(s)?this.setState({focusOnArrow:!0}):this.setState({focusIndex:i,focusOnArrow:!1})},this.handleAction=(e=!1)=>{var t,n,i,s,a,o;const{focusIndex:r,focusOnArrow:l}=this.state,c=this.flatButtons[r];return this.isSplitButton(c)&&l?(this.willBeBluredByDropdownOpen=!0,void(null===(t=this.dropdownRefs.get(c.name))||void 0===t||t.show())):this.isSplitButton(c)?void(e&&(null===(i=(n=this.flatButtons[r]).onClick)||void 0===i||i.call(n))):c.dropdownContent?(this.willBeBluredByDropdownOpen=!0,void(null===(s=this.dropdownRefs.get(c.name))||void 0===s||s.show())):void(e&&(null===(o=(a=this.flatButtons[r]).onClick)||void 0===o||o.call(a)))},this.handleCancel=(e=!1)=>{var t,n;const{focusIndex:i}=this.state,s=this.flatButtons[i];if(null===(t=this.dropdownRefs.get(s.name))||void 0===t?void 0:t.isVisible())return this.willBeBluredByDropdownClose=!0,void(null===(n=this.dropdownRefs.get(s.name))||void 0===n||n.hide());e&&this.setState({focusIndex:-1,focusOnArrow:!1})},this.handleKeyDown=e=>{const{focusIndex:t}=this.state;-1!==t&&("ArrowLeft"!==e.key?"ArrowRight"!==e.key?"Escape"!==e.key?["Enter"," "].includes(e.key)?this.handleAction(!0):"ArrowDown"!==e.key||this.handleAction():this.handleCancel(!0):this.moveToRight():this.moveToLeft())},this.state={groups:[],focusIndex:-1,focusOnArrow:!1},this.shrinkManager=new xe({groups:e.groups,groupShelter:Me({text:e.multirows?e.moreText:void 0,tooltip:e.moreTooltip,dropdownAlignment:e.shrinkDropdownAlignment}),listener:e=>{const t=Object.assign(Object.assign({},e),{focusIndex:-1,focusOnArrow:!1});this.mounted?this.setState(t):this.state=t},preventAutoShrink:this.props.preventAutoShrink,shrinkOnContainerResize:this.props.respectContainerSize})}UNSAFE_componentWillReceiveProps(e){this.shrinkManager.updateGroups(e.groups)}componentDidMount(){this.mounted=!0,this.container.current&&this.shrinkManager.useContainer(this.container.current)}componentWillUnmount(){this.shrinkManager.destroy(),this.mounted=!1}render(){const{groups:e,multirows:t,moreText:n,label:i,pinned:s,style:o={},className:r,tooltipPlacement:l,alignment:c}=this.props,{groups:h,focusIndex:d,focusOnArrow:u}=this.state;return this.flatButtons=(s?e:h).flatMap((e=>e.items)).flatMap((e=>e.buttons)).flat().map((e=>(e.isFocus=!1,e.isFocusArrow=!1,e))),-1!==d&&(this.flatButtons[d].isFocus=!0,this.flatButtons[d].isFocusArrow=u),a.a.createElement("div",{ref:this.container,style:Object.assign(Object.assign({position:"relative"},s||c!==Se.b.CENTER?{}:{display:"flex",justifyContent:"center"}),o),tabIndex:0,role:"toolbar","aria-label":i,onMouseDown:()=>{this.willBeFocusedByMouseEvent=!0},onKeyDown:this.handleKeyDown,onFocus:e=>{this.willBeFocusedByMouseEvent?this.willBeFocusedByMouseEvent=!1:e.target===e.currentTarget&&-1===d&&this.flatButtons.length>0&&this.setState({focusIndex:0})},onBlur:()=>{this.willBeBluredByDropdownOpen?this.willBeBluredByDropdownOpen=!1:this.willBeBluredByDropdownClose?this.willBeBluredByDropdownClose=!1:-1!==d&&this.setState({focusIndex:-1})}},!s&&!ye.b&&a.a.createElement(be.a.Provider,{value:{multirows:t,getShrinkedGroups:this.getShrinkedGroups,shrinkManager:this.shrinkManager}},a.a.createElement("div",{className:[pe.a.container,pe.a.hidden,r].join(" "),"aria-hidden":!0},a.a.createElement(we.a,{groups:e,addShelter:!0,moreText:t?n:void 0,tooltipPlacement:l}))),a.a.createElement(be.a.Provider,{value:{multirows:t,getShrinkedGroups:this.getShrinkedGroups,dropdownRefs:this.dropdownRefs}},a.a.createElement("div",{className:[pe.a.container,r].join(" "),style:Object.assign({},s||"center"!==c?{}:{justifyContent:"center"})},a.a.createElement(we.a,{groups:s?e:h,focusIndex:d,focusOnArrow:u,tooltipPlacement:l}))))}}var Te="ribbon-toolbar_ribbon-toolbar__3xV-1",Ee="ribbon-toolbar_tablist__3z3Z3",Be="ribbon-toolbar_active__2cMHh",Re="ribbon-toolbar_pure__3ViYu",Ie="ribbon-toolbar_active-indicator__2MEFD",We="ribbon-toolbar_tabpanel__3kgXq",Ae="ribbon-toolbar_header__2j5Oq",Ne="ribbon-toolbar_pinned__3tWA6",De="ribbon-toolbar_disabled__2Kr8R";Object(d.a)('.ribbon-toolbar_ribbon-toolbar__3xV-1 {\n  color: var(--workbench-theme-toolbar-ribbon-active-color, #0d61f2);\n  background: var(--workbench-theme-toolbar-background, #f9fafb);\n  width: 100%;\n  height: 104px;\n}\nul.ribbon-toolbar_tablist__3z3Z3 {\n  display: flex;\n  height: 36px;\n  position: relative;\n  flex-shrink: 0;\n}\nul.ribbon-toolbar_tablist__3z3Z3 li {\n  list-style: none;\n  line-height: 16px;\n  font-size: 12px;\n  font-weight: 600;\n  padding: 10px 4px;\n  margin: 0 14px;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  cursor: default;\n  flex-shrink: 0;\n  color: var(--workbench-theme-toolbar-foreground-light, #000000A3);\n  position: relative;\n}\nul.ribbon-toolbar_tablist__3z3Z3 li::after {\n  content: "";\n  position: absolute;\n  bottom: 0;\n  left: calc(50% - 12px);\n  height: 3px;\n  width: 24px;\n  transition: width 0.15s ease, left 0.15s ease, background 0.01s 0.15s linear;\n  background: var(--workbench-theme-toolbar-button-hover-background, #00000014);\n  opacity: 0;\n}\nul.ribbon-toolbar_tablist__3z3Z3 li:hover::after {\n  opacity: 1;\n}\nul.ribbon-toolbar_tablist__3z3Z3 li.ribbon-toolbar_active__2cMHh {\n  color: currentColor;\n}\nul.ribbon-toolbar_tablist__3z3Z3 li.ribbon-toolbar_active__2cMHh::after {\n  opacity: 0;\n}\nul.ribbon-toolbar_tablist__3z3Z3 li.ribbon-toolbar_active__2cMHh.ribbon-toolbar_pure__3ViYu::after {\n  opacity: 1;\n  background-color: var(--workbench-theme-toolbar-ribbon-active-color, #0d61f2);\n}\n.ribbon-toolbar_active-indicator__2MEFD {\n  height: 3px;\n  width: 24px;\n  bottom: 0;\n  position: absolute;\n  transition: left 0.15s ease, width 0.15s ease;\n  opacity: 1;\n}\n.ribbon-toolbar_active-indicator__2MEFD::after {\n  content: "";\n  width: 24px;\n  height: 3px;\n  display: block;\n  background: currentColor;\n  margin-left: 50%;\n  transform: translateX(-50%);\n  transition: all 0.15s ease;\n}\nul:focus-visible .ribbon-toolbar_active-indicator__2MEFD::after,\nli.ribbon-toolbar_active__2cMHh:hover ~ .ribbon-toolbar_active-indicator__2MEFD::after {\n  width: 100%;\n}\n.ribbon-toolbar_tabpanel__3kgXq {\n  padding: 8px 16px;\n}\n.ribbon-toolbar_header__2j5Oq {\n  display: flex;\n  padding: 0 16px 0 12px;\n  align-items: center;\n}\n.ribbon-toolbar_pinned__3tWA6 {\n  margin-left: auto;\n}\n.ribbon-toolbar_disabled__2Kr8R {\n  opacity: 0.3;\n}\n');var Pe=n("7e3c27b775");class ze{static getButtonProps(e,t,n,i=!1){const s=n(e.shouldHide,!1);if(s)return null;const a=Object.assign(Object.assign({},e),{badge:t.includes(e.name),force:0,icon:n(e.icon,""),tooltip:n(e.tooltip,""),text:n(e.text,""),content:n(e.content,void 0),color:n(e.color,""),hide:s,disabled:n(e.shouldDisabled,!1),checked:n(e.shouldCheck,!1),style:n(e.style,void 0),hasArrow:n(e.hasArrow,void 0),outlineType:n(e.outlineType,Se.a.DEFAULT)});return i&&!a.dropdownContent&&(a.dropdownContent=Object(Oe.a)(e.name)),a}static getToolbarProps(e,t=[],n=y.a){if(!e)return[];const i=l.e.get(Pe.a),{force:s}=i,a=t.filter((e=>"toolbar"===e.position)).map((e=>e.key));return e.data.map((e=>{const t=e.items.map((e=>{const t=e.buttons.map((e=>e.map((e=>{const t=this.getButtonProps(e,a,n);return t&&(t.force=s),t})).filter((e=>null!==e)))).filter((e=>e.length>0));return{key:e.key,buttons:t,priority:e.priority,forceShrink:e.forceShrink,shelter:e.shelter?this.getButtonProps(e.shelter,a,n,!0):null,shrinkType:e.shrinkType}})).filter((e=>e.buttons.length>0));return{key:e.key,shelter:e.shelter?this.getButtonProps(e.shelter,a,n,!0):null,items:t}})).filter((e=>e.items.length>0))}}var He=n("00242da0df"),Ue=n("e76ff89ee4"),$e=n.n(Ue);class Fe extends s.Component{constructor(e){var t;super(e),this.unsubscribe$=new de.a,this.ribbonData={},this.pinnedData=null,this.tabRef=a.a.createRef(),this.debounceForceUpdate=$e()((()=>this.forceUpdate()),10);const{ribbons:n}=this.props;this.state={active:null!==(t=n[0])&&void 0!==t?t:""}}componentDidMount(){var e,t;const{ribbons:n,pinned:i}=this.props;n.forEach((e=>{var t;null===(t=this.context.store.get(e))||void 0===t||t.pipe(Object(ue.a)(this.unsubscribe$)).subscribe((t=>{this.ribbonData[e]=t,e===this.state.active&&this.debounceForceUpdate()}))})),i&&(null===(e=this.context.store.get(i))||void 0===e||e.pipe(Object(ue.a)(this.unsubscribe$)).subscribe((e=>{this.pinnedData=e,this.debounceForceUpdate()})),null===(t=this.context.store.get(f.a.RibbonActiveTab))||void 0===t||t.pipe(Object(ue.a)(this.unsubscribe$)).subscribe((e=>{e&&e!==this.state.active&&this.setState({active:e})})))}componentWillUnmount(){this.unsubscribe$.next(),this.unsubscribe$.complete()}shouldComponentUpdate(e,t){return JSON.stringify(t)!==JSON.stringify(this.state)||e[f.a.SelectionState]!==this.props[f.a.SelectionState]||e[f.a.ModelState]!==this.props[f.a.ModelState]||e.pinned!==this.props.pinned||JSON.stringify(e[f.a.Badge])!==JSON.stringify(this.props[f.a.Badge])||JSON.stringify(e.ribbons)!==JSON.stringify(this.props.ribbons)||JSON.stringify(this.props.style)!==JSON.stringify(e.style)}changeTab(e){this.context.store.update(f.a.RibbonActiveTab,e)}getTabPosition(e){if(!this.tabRef.current)return;const t=this.tabRef.current.children[e];if(!t)return;const n=t.classList.contains("dui-badge")?t.children[0]:t,{left:i}=this.tabRef.current.getBoundingClientRect(),{left:s,width:a}=n.getBoundingClientRect();return{left:s-i,width:a}}render(){var e,t,n,i;let{active:s}=this.state;const o=this.props.badge.filter((e=>"ribbonTab"===e.position)),r=Object.entries(this.ribbonData).map((([e,t])=>{var n,i,s,a,r;return{key:e,label:t.label,hidden:Object(y.a)(null===(n=t.keyItem)||void 0===n?void 0:n.shouldHide,!1),disabled:Object(y.a)(null===(i=t.keyItem)||void 0===i?void 0:i.shouldDisabled,!1),onClick:null===(s=t.keyItem)||void 0===s?void 0:s.onClick,showBadge:-1!==o.findIndex((({key:t})=>e===t)),tooltipConfig:Object(y.a)(null!==(a=t.tooltip)&&void 0!==a?a:null===(r=t.keyItem)||void 0===r?void 0:r.tooltip,"")}})).filter((e=>!e.hidden)),l=r.length;let c=r.findIndex((e=>e.key===s));-1===c&&(s=null!==(t=null===(e=r[0])||void 0===e?void 0:e.key)&&void 0!==t?t:this.state.active,c=0,s!==this.state.active&&this.setState({active:s}));const{left:h,width:d}=null!==(n=this.getTabPosition(c))&&void 0!==n?n:{left:0,width:0},u=this.context.store.getValue(s),p=this.context.store.getValue(H.a.ToolbarButtonTooltipPlacement),b=ze.getToolbarProps(this.pinnedData,this.props.badge),m=ze.getToolbarProps(u,this.props.badge);return a.a.createElement("div",{role:"toolbar","aria-label":"Toolbar",className:Te,style:this.props.style,tabIndex:0},a.a.createElement("div",{className:Ae},a.a.createElement("ul",{role:"tablist",className:Ee,ref:this.tabRef,tabIndex:0,onKeyUp:e=>{var t,n,i;const a=r.findIndex((e=>e.key===s));if(-1===a)return;let o=a;do{"ArrowLeft"===e.key&&(o=0===o?l-1:o-1),"ArrowRight"===e.key&&(o=o===l-1?0:o+1)}while(r[o].disabled);this.changeTab(r[o].key),null===(t=this.tabRef.current)||void 0===t||t.focus(),null===(i=(n=r[o]).onClick)||void 0===i||i.call(n)}},r.map(((e,t)=>{let n=a.a.createElement("li",{role:"tab","aria-setsize":l,"aria-posinset":t+1,"aria-disabled":e.disabled?"true":"false",onClick:()=>{var n,i;e.disabled||(this.changeTab(e.key),null===(i=(n=r[t]).onClick)||void 0===i||i.call(n),e.showBadge&&this.badgeService.removeBadgeOn("ribbonTab",e.key))},className:[e.key===s?Be:"",e.disabled?De:"",ye.b?Re:""].join(" "),"aria-selected":e.key===s?"true":"false",style:{marginLeft:0===t?4:void 0,marginRight:t===r.length-1?4:void 0}},e.label);return e.tooltipConfig&&(n=Object(Z.a)(n,e.tooltipConfig,{hoverDelay:200})),!e.disabled&&e.showBadge&&(n=a.a.createElement(w.a,{dot:!0,key:`ribbon-tab-badge-${e.key}`,style:{transform:"scale(.6)",top:"8px",right:`calc(4px + ${t===r.length-1?4:14}px - 1px - 6px)`}},n)),a.a.createElement(a.a.Fragment,{key:e.key},n)})),d>0&&a.a.createElement("div",{className:Ie,"aria-hidden":!0,style:{width:d,left:h}})),b?a.a.createElement("div",{className:Ne},a.a.createElement(Ce,{groups:b,pinned:!0,label:null===(i=this.pinnedData)||void 0===i?void 0:i.label})):null),a.a.createElement("div",{role:"tabpanel",className:We},a.a.createElement(Ce,{groups:m,alignment:this.props[H.a.ToolbarAlignment],multirows:!0,key:s,label:null==u?void 0:u.label,moreText:null==u?void 0:u.moreText,moreTooltip:null==u?void 0:u.moreTooltip,tooltipPlacement:p})))}}Fe.contextType=c.a,Object(i.__decorate)([Object(l.c)(j.a),Object(i.__metadata)("design:type",He.a)],Fe.prototype,"badgeService",void 0);const Le=Object(v.a)([H.a.ToolbarAlignment,f.a.SelectionState,f.a.ModelState,f.a.Badge])(Fe);var Ve="classic-toolbar_container__oCgTs";Object(d.a)(".classic-toolbar_container__oCgTs {\n  padding: 10px 16px;\n  display: flex;\n  height: 44px;\n  width: 100%;\n  box-sizing: border-box;\n  background: var(--workbench-theme-toolbar-background, #f9fafb);\n}\n");class Ke extends s.Component{constructor(){super(...arguments),this.unsubscribe$=new de.a}componentDidMount(){var e,t;const{main:n,pinned:i}=this.props;null===(e=this.context.store.get(n))||void 0===e||e.pipe(Object(ue.a)(this.unsubscribe$)).subscribe((()=>{this.forceUpdate()})),i&&(null===(t=this.context.store.get(i))||void 0===t||t.pipe(Object(ue.a)(this.unsubscribe$)).subscribe((()=>{this.forceUpdate()})))}componentWillUnmount(){this.unsubscribe$.next(),this.unsubscribe$.complete()}shouldComponentUpdate(e){return e[f.a.SelectionState]!==this.props[f.a.SelectionState]||e[f.a.ModelState]!==this.props[f.a.ModelState]||JSON.stringify(e[f.a.Badge])!==JSON.stringify(this.props[f.a.Badge])||e.pinned!==this.props.pinned||e.main!==this.props.main||JSON.stringify(this.props.style)!==JSON.stringify(e.style)}render(){var e;const t=this.context.store.getValue(this.props.main),n=this.context.store.getValue(null!==(e=this.props.pinned)&&void 0!==e?e:""),i=this.context.store.getValue(H.a.ToolbarButtonTooltipPlacement),s=ze.getToolbarProps(t,this.props.badge),o=ze.getToolbarProps(n,this.props.badge);return a.a.createElement("div",{className:Ve,style:Object.assign({marginBottom:24},this.props.style)},t&&a.a.createElement(Ce,{groups:s,moreText:t.moreText,moreTooltip:t.moreTooltip,alignment:this.props[H.a.ToolbarAlignment],style:{flex:1,minWidth:60},label:null==t?void 0:t.label,tooltipPlacement:i}),n&&a.a.createElement(Ce,{groups:o,label:null==n?void 0:n.label,pinned:!0,style:{flexShrink:0,marginLeft:"auto",paddingLeft:16},tooltipPlacement:i}))}}Ke.contextType=c.a;const Ge=Object(v.a)([H.a.ToolbarAlignment,f.a.SelectionState,f.a.ModelState,f.a.Badge])(Ke);var Ze={"fixed-toolbar-container":"fixed-toolbar-container_fixed-toolbar-container__3Gc26","fixed-toolbar-wrapper":"fixed-toolbar-container_fixed-toolbar-wrapper__3NxGh",ribbon:"fixed-toolbar-container_ribbon__2cdc8",classic:"fixed-toolbar-container_classic__20Mw9",fadeinRibbon:"fixed-toolbar-container_fadeinRibbon__25Hfa",fadeoutRibbon:"fixed-toolbar-container_fadeoutRibbon__34FZ5",fadeinClassic:"fixed-toolbar-container_fadeinClassic__radkD",fadeoutClassic:"fixed-toolbar-container_fadeoutClassic__xGC9n"};Object(d.a)(".fixed-toolbar-container_fixed-toolbar-container__3Gc26 {\n  transition: height 0.3s ease-in-out;\n  position: absolute;\n}\n.fixed-toolbar-container_fixed-toolbar-wrapper__3NxGh {\n  width: 100%;\n}\n.fixed-toolbar-container_ribbon__2cdc8 {\n  height: 104px;\n}\n.fixed-toolbar-container_classic__20Mw9 {\n  height: 44px;\n}\n@keyframes fixed-toolbar-container_fadeinRibbon__25Hfa {\n  from {\n    top: -50%;\n    opacity: 0;\n  }\n  to {\n    top: 0;\n    opacity: 1;\n  }\n}\n@keyframes fixed-toolbar-container_fadeoutRibbon__34FZ5 {\n  from {\n    top: 0;\n    opacity: 1;\n  }\n  50% {\n    top: -40%;\n    opacity: 0;\n  }\n  to {\n    top: -40%;\n    opacity: 0;\n    display: none;\n  }\n}\n@keyframes fixed-toolbar-container_fadeinClassic__radkD {\n  from {\n    top: -40%;\n    opacity: 0;\n  }\n  to {\n    top: 0;\n    opacity: 1;\n  }\n}\n@keyframes fixed-toolbar-container_fadeoutClassic__xGC9n {\n  from {\n    top: 0;\n    opacity: 1;\n  }\n  50% {\n    top: -20%;\n    opacity: 0;\n  }\n  to {\n    top: -40%;\n    opacity: 0;\n    display: none;\n  }\n}\nbody:has(.fixed-toolbar-container_ribbon__2cdc8) .dui-snackbar-top {\n  top: 165px;\n}\n");class Je extends s.Component{constructor(){super(...arguments),this.lastRibbonKeys=[],this.lastClassicKey=""}getRibbonToolbar(e){let t=this.lastRibbonKeys;const n=this.props["toolbar.pinnedKey"],i={position:"absolute"};return"exited"===e?null:("exiting"===e&&(i.animation=`${Ze.fadeoutRibbon} 0.3s linear`,i.opacity=0),"entering"===e&&(i.animation=`${Ze.fadeinRibbon} 0.3s linear`,t=this.props["toolbar.fixedKeys"],this.lastRibbonKeys=t),"entered"===e&&0===t.length&&(t=this.props["toolbar.fixedKeys"],this.lastRibbonKeys=t),a.a.createElement(Le,{ribbons:t,pinned:n,style:i}))}getClassicToolbar(e){let t=this.lastClassicKey;const n=this.props["toolbar.pinnedKey"],i={position:"absolute"};return"entered"===e?null:("entering"===e&&(i.animation=`${Ze.fadeoutClassic} 0.3s linear`),"exiting"===e&&(i.animation=`${Ze.fadeinClassic} 0.3s linear`,t=this.props["toolbar.fixedKeys"],this.lastClassicKey=t),"exited"===e&&(t=this.props["toolbar.fixedKeys"],this.lastClassicKey=t),a.a.createElement(Ge,{main:t,pinned:n,style:i}))}render(){const e=this.props["toolbar.fixedKeys"];if(!e)return null;const t=Array.isArray(e);return a.a.createElement(se.a,{name:"fixed-toolbar",simulateSpaceChange:!0,syncWithTarget:!1,className:[Ze["fixed-toolbar-container"],t?Ze.ribbon:Ze.classic].join(" ")},a.a.createElement("div",{className:[Ze["fixed-toolbar-wrapper"],t?Ze.ribbon:Ze.classic].join(" ")},a.a.createElement(he.a,{in:t,timeout:300},(e=>a.a.createElement(a.a.Fragment,null,this.getClassicToolbar(e),this.getRibbonToolbar(e))))))}}const qe=Object(v.a)([H.a.ToolbarFixedKeys,H.a.ToolbarPinnedKey,f.a.Badge,f.a.ModelState,f.a.SelectionState])(Je);l.e.service(qe,{overridable:!0});var Xe=n("863a680c4f");class Ye extends s.Component{render(){const e=this.props[f.a.InsertWidget].filter((e=>e.position===this.props.position));return 0===e.length?null:a.a.createElement("div",{style:{width:"100%",flexShrink:0}},e.map((e=>a.a.createElement(Xe.a,{key:`insert-${this.props.position}-${e.name}`,style:e.styles},e.component))))}}const Qe=Object(v.a)([f.a.InsertWidget])(Ye);class et extends s.Component{constructor(e){super(e),this.statusBarRef=null,this.removeFixed=e=>{e.currentTarget.style.position="static"},this.statusBarRef=a.a.createRef()}componentDidMount(){var e,t;null===(t=null===(e=this.statusBarRef)||void 0===e?void 0:e.current)||void 0===t||t.addEventListener("animationend",this.removeFixed)}componentWillUnmount(){var e,t;null===(t=null===(e=this.statusBarRef)||void 0===e?void 0:e.current)||void 0===t||t.removeEventListener("animationend",this.removeFixed)}render(){const e=l.e.getClass(qe),t=!this.props["toolbar.disabled"];return a.a.createElement("div",{className:B,id:"workbench",style:this.props.style},!this.props["titlebar.disabled"]&&a.a.createElement(ce,null),t&&a.a.createElement("div",{className:R,id:"workbench-toolbar"},a.a.createElement(e,null)),a.a.createElement(Qe,{position:"inbetween-toolbar-editorzone"}),a.a.createElement("div",{className:I,id:"workbench-content-container"},a.a.createElement("div",{style:{height:50,width:"100%"}}),a.a.createElement("div",{className:W,id:"workbench-drawer"},a.a.createElement(N.a,null),a.a.createElement(D.a,null)),a.a.createElement(h.a,{mode:"pc"}),a.a.createElement(X,null)),a.a.createElement("div",{className:A,id:"workbench-statusbar",ref:this.statusBarRef},this.props["statusbar.disabled"]?null:a.a.createElement(E,null)))}}const tt=Object(v.a)([H.a.DisableToolbar,H.a.ToolbarAlignment,H.a.DisableStatusbar,H.a.ToolbarSchemaAnimation,H.a.DisableTitlebar])(et);var nt=n("2efc87a31f"),it=n("6337f3aa71"),st=n("46a4d6482c"),at=n("26facf687f"),ot=n("176eb9c84c"),rt=n("8bbf965ab4"),lt=n("749f3087d9"),ct=(n("a41f3db819"),n("4bb7037fce")),ht=n("1211007575"),dt=n("2695f5029b");let ut=class{initServices(e){l.e.alias(ct.a.MENU,nt.a),l.e.alias(ct.a.TOOLBAR,Pe.a),l.e.alias(ct.a.CONTEXT_MENU,U.a),l.e.alias(ct.a.STATUSBAR,it.a),l.e.alias(ct.a.TITLEBAR,ne.a),l.e.alias(ct.a.KEYMAP,st.a),this.initServiceCollection(),this.initSchema(e)}updateServices(){this.collection.getControllerRelatedUIServices().forEach((e=>{e.updateState()}))}initMiddlewares(e,t){e.use(lt.a,{on:nt.a,callbackNames:[Object(dt.a)(t.menu)]}),e.use(lt.a,{on:U.a,callbackNames:[Object(dt.a)(t.contextMenu)]}),e.use(lt.a,{on:Pe.a,callbackNames:[Object(dt.a)(t.toolbar)]}),e.use(lt.a,{on:it.a,callbackNames:[Object(dt.a)(t.statusbar)]}),ye.b||(e.use(ht.a,{on:U.a,callbackNames:["shouldDisabled"]}),e.use(ht.a,{on:nt.a,callbackNames:["shouldDisabled"]}),e.use(ht.a,{on:Pe.a,callbackNames:["shouldDisabled"]}),e.use(ht.a,{on:it.a,callbackNames:["shouldDisabled"]}))}getComponent(){const e=new c.b;return l.e.factory(c.b,e),a.a.createElement(c.a.Provider,{value:e},a.a.createElement(tt,null))}attach(e){return Object(i.__awaiter)(this,void 0,void 0,(function*(){return new Promise((t=>{this.collection.services.forEach((e=>{e.$forceUpdate()})),ye.b?t():r.a.hydrate(this.getComponent(),e,(()=>{t()}))}))}))}initServiceCollection(){const e=[nt.a,U.a,Pe.a,it.a,ne.a,st.a];this.collection=l.e.invoke(rt.a,void 0,e),l.e.factory(rt.a,this.collection)}initSchema(e){if(this.collection.has(nt.a)&&e.menu.schema){const t=l.e.get(nt.a);t.setSchema(e.menu.schema),t.setUpdateInterceptor(e.menu.updateInterceptor)}if(this.collection.has(U.a)&&e.contextMenu.schema){const t=l.e.get(U.a);t.setSchema(e.contextMenu.schema),t.setUpdateInterceptor(e.contextMenu.updateInterceptor)}if(this.collection.has(Pe.a)&&e.toolbar.schema){const t=l.e.get(Pe.a);t.setSchema(e.toolbar.schema),t.setUpdateInterceptor(e.toolbar.updateInterceptor)}if(this.collection.has(it.a)&&e.statusbar.schema){const t=l.e.get(it.a);t.setSchema(e.statusbar.schema),t.setUpdateInterceptor(e.toolbar.updateInterceptor)}if(this.collection.has(ne.a)&&e.titlebar.schema){const t=l.e.get(ne.a);t.setSchema(e.titlebar.schema),t.setUpdateInterceptor(e.titlebar.updateInterceptor)}}};ut=Object(i.__decorate)([Object(at.a)()],ut);class pt{static load(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function*(){const n=l.e.invoke(K.a,new Map([["container",t],["platform","pc"]]));l.e.factory(K.a,n),l.e.factory(ot.a,new ut);const i=l.e.invoke(e);return yield i.start(),i}))}}},e015c46d72:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var i,s=n("d7c625d1f2"),a=n("ced39f0c87"),o=n("bbcc28a5e1"),r=n("26facf687f"),l=n("b724aeb83f"),c=n("aebfcd537b"),h=n("8ba8926996"),d=n("b2c8ac9d89"),u=n("72c1bc8d17"),p=n("4bb7037fce"),b=n("cc71e2cacd"),m=n("ac68603697"),g=n("da5d1b819b");const f=[{name:"divider",content:"divider"},{name:"none",content:"none"}];let v=i=class extends o.a{constructor(e,t,n){super(),this.store=e,this.eventEmitter=t,this.internalEventEmitter=n,this.focusedElement=null,this.schema=[],this.relations=new Map,this.store.register(a.a.ContextMenu,{name:"root",content:"root",children:[]}),this.store.register(a.a.ContextMenuInfo,{top:0,left:0,show:!1}),f.forEach((e=>{this.configs.set(e.name,e)})),this.eventEmitter.listen(d.a.BeforeContextMenu,(e=>{e.preventDefault(),e.stopPropagation();const{pageY:t,pageX:n}=e;setTimeout((()=>{this.store.getValue(u.a.DisableContextMenu)||this.showContextMenu({show:!0,top:t,left:n})}),i.SHOW_LAPSE)}))}saveFocus(){this.focusedElement=document.activeElement}restoreFocus(){this.focusedElement&&this.focusedElement.focus&&(this.focusedElement.focus(),this.focusedElement=null)}hideContextMenu(){var e;const t=null!==(e=this.store.getValue(a.a.ContextMenuInfo))&&void 0!==e?e:{top:0,left:0,show:!1};this.store.upsert(a.a.ContextMenuInfo,Object.assign(Object.assign({},t),{show:!1}))}showContextMenu(e){this.saveFocus(),this.store.upsert(a.a.ContextMenuInfo,Object.assign({},e))}mergeSchemaWithoutUpdate(e){this.schema=this.schema.concat(e)}register(e,t=!0){["divider","none"].includes(e.name)?c.a.warn(`The menu config "${e.name}" is reserved.`):super.register(e,t)}$forceUpdate(){this.forceUpdateWithStore(this.store,a.a.ContextMenu)}updateKeySchema(e,t,n=!1){const i=this.getSchema(),s=Object(g.a)(i,e,t);return n&&this.setSchema(s),s}onUpdate(){super.onUpdate();const e={name:"root",content:"root",children:[]};this.relations.clear(),this.schema.reduce(this.readSchema.bind(this,[]),e),this.store.get(a.a.ContextMenu).next(e),this.internalEventEmitter.emit(m.a.SchemaRead,p.a.CONTEXT_MENU)}readSchema(e,t,n){const i=Object.assign({},t);if("string"==typeof n){if(this.hasConfig(n)){const i=Object.assign(Object.assign({},this.get(n)),{children:[]});this.setPathToActionInfoInConfig(i,e),t.children.push(i)}}else if(this.hasConfig(n.key)){const t=Object.assign(Object.assign({},this.get(n.key)),{children:[]});this.setPathToActionInfoInConfig(t,e),n.items.reduce(((t,n)=>this.readSchema([...e],t,n)),t),i.children.push(t)}return this.relations.set(i.name,i.children.map((e=>e.name))),t}path(e,t){if(!t)return this.relations.has(e)?[e]:[];if(!this.relations.has(t))return[];const n=[];return this.find(t,e,n),n}find(e,t,n){var i;const s=null!==(i=this.relations.get(e))&&void 0!==i?i:[];if(s.includes(t))return n.unshift(t),!0;for(const e of s)if(this.find(e,t,n))return n.unshift(e),!0;return!1}get(e){return super.get(e,{name:"none",content:"none",onClick(){}})}};v.SHOW_LAPSE=150,v=i=Object(s.__decorate)([Object(r.a)({overridable:!0,scope:"ui:service",name:p.a.CONTEXT_MENU}),Object(s.__metadata)("design:paramtypes",[l.a,h.a,b.a])],v)}}]);
//# sourceMappingURL=slide-19-5e304b.js.map